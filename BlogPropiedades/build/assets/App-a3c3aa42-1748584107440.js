var e=Object.defineProperty,t=(t,r,n)=>(((t,r,n)=>{r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n})(t,"symbol"!=typeof r?r+"":r,n),n);import{j as r}from"./index-ab9506db-1748584107440.js";import{r as n,R as o,b as i,e as a,a as s,g as l,c}from"./vendor-9d2d50ea-1748584107440.js";import{u,a as d,L as p,_ as f,b as m,N as h,B as g,R as b,c as y}from"./router-6ed58ec6-1748584107440.js";const v="undefined"!=typeof window&&("localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname),x=v?"localhost:5173":"nextjs-gozamadrid-qrfk.onrender.com",w=v?`http://${x}/api`:`https://${x}`,E="undefined"!=typeof window&&"https:"===window.location.protocol;console.log(`üåê Usando API en: ${w}${v?" - MODO DESARROLLO LOCAL":" - MODO PRODUCCI√ìN"}`),console.log(`üîí Frontend en: ${E?"HTTPS":"HTTP"} - ${window.location.origin}`),window.useCorsProxy=!1;const j=async(e,t={},r=0)=>{const n=new AbortController,o=setTimeout((()=>{n.abort()}),1e4);try{let r=(i=w,a=e.startsWith("/")?e:`/${e}`,i?a?(i.endsWith("/")?i.slice(0,-1):i)+(a.startsWith("/")?a:"/"+a):i:a);if(console.log(`üîÑ Enviando solicitud directa a: ${r}`),((e,t=5e3,r=3)=>{try{const n=`actionLog_${e}`,o=JSON.parse(localStorage.getItem(n)||"[]"),i=(new Date).getTime();o.unshift(i),o.length>10&&(o.length=10),localStorage.setItem(n,JSON.stringify(o));const a=o.filter((e=>i-e<t));return a.length>=r&&(console.warn(`‚ö†Ô∏è Posible bucle detectado en "${e}": ${a.length} acciones en ${t}ms`),localStorage.setItem(`${e}_bucleDetectado`,"true"),!0)}catch(n){return console.error("Error al detectar bucle:",n),!1}})("api_fetch_"+e,8e3,4))return console.error(`üõë Bucle de solicitudes detectado para ${e}. Cancelando operaci√≥n.`),clearTimeout(o),e.includes("/blog")||e.includes("/property")?[]:{error:!0,message:"Demasiadas solicitudes repetidas. Intente de nuevo m√°s tarde."};const u={"Content-Type":"application/json",Accept:"application/json",...t.headers},d=localStorage.getItem("token");d&&!u.Authorization&&(u.Authorization=`Bearer ${d}`);const p={...t,headers:u,signal:n.signal};console.log(`[fetchAPI Debug] Endpoint: ${e}`),console.log("[fetchAPI Debug] Token from localStorage: "+(d?d.substring(0,15)+"...":"NULL")),console.log("[fetchAPI Debug] Final Request Headers:",JSON.parse(JSON.stringify(p.headers)));const f=await fetch(r,p);clearTimeout(o);const m=f.clone();if(!f.ok){if(console.error(`‚ùå Error HTTP: ${f.status} en ${r}`),404===f.status&&(e.includes("/blogs")||e.includes("/properties")))return console.warn(`‚ö†Ô∏è Endpoint ${e} no encontrado, devolviendo array vac√≠o`),[];try{const e=await m.json();return console.error("Mensaje de error del servidor:",e),{error:!0,status:f.status,message:e.message||"Error del servidor",details:e}}catch(ot){try{const e=await f.text();return{error:!0,status:f.status,message:e||"Error del servidor sin detalles"}}catch(s){return{error:!0,status:f.status,message:`Error ${f.status} sin detalles disponibles`}}}}try{if(204===f.status||"0"===f.headers.get("content-length"))return{success:!0};return await f.json()}catch(l){console.error("Error al parsear respuesta JSON:",l);try{const e=await m.text();return e?{success:!0,raw:e}:{success:!0,message:"Operaci√≥n exitosa sin datos"}}catch(c){return console.error("Error al obtener texto de respuesta:",c),{success:!0,warning:"No se pudo leer el contenido de la respuesta"}}}}catch(u){return clearTimeout(o),"AbortError"===u.name?(console.error("‚è±Ô∏è La solicitud ha sido abortada por timeout"),{error:!0,message:"Timeout de solicitud",timeout:!0}):"TypeError"===u.name&&u.message.includes("Failed to fetch")?(console.error("üåê Error de red:",u.message),{error:!0,message:"Error de conexi√≥n con el servidor",network:!0}):(console.error("‚ùå Error en fetchAPI:",u),{error:!0,message:u.message||"Error desconocido"})}var i,a},N=async()=>{console.log("Solicitando configuraci√≥n de Cloudinary...");try{const e=await j("/cloudinary/signature",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(e.error)throw console.error("Error al obtener la configuraci√≥n desde la API:",e.message),new Error(e.message||"Error del servidor al obtener la configuraci√≥n");if(!e.success)throw console.error("Respuesta inv√°lida del endpoint de configuraci√≥n:",e),new Error("Respuesta inv√°lida del servidor al obtener la configuraci√≥n");return console.log("Configuraci√≥n de Cloudinary obtenida con √©xito."),{success:!0,signature:e.signature,timestamp:e.timestamp,apiKey:e.api_key,cloudName:e.cloud_name,folder:e.folder||"blogsy-uploads",signed:!0}}catch(e){throw console.error("Error en getCloudinarySignature:",e),e}},S=async e=>{try{if(!e.title||!e.description||!e.content)throw new Error("Faltan campos requeridos (t√≠tulo, descripci√≥n o contenido)");const t={title:e.title,description:e.description,content:e.content,author:e.author||"An√≥nimo",category:e.category||"General",tags:Array.isArray(e.tags)?e.tags:[],readTime:e.readTime||"5"};e.image&&"object"==typeof e.image&&e.image.src?t.image={src:e.image.src,alt:e.image.alt||e.title}:e.images&&e.images.length>0?t.image={src:e.images[0].src,alt:e.images[0].alt||e.title}:t.image={src:"",alt:e.title},Array.isArray(e.images)&&e.images.length>0?t.images=e.images.map((t=>({src:t.src,alt:t.alt||e.title}))):t.images=[],console.log("Datos del blog preparados para enviar:",t);const r=await j("/blogs",{method:"POST",body:JSON.stringify(t)});if(!r)throw new Error("No se recibi√≥ respuesta del servidor");return console.log("Respuesta del servidor al crear blog:",r),r}catch(t){throw console.error("Error al crear blog:",t),t}},_=async()=>{try{console.log("Obteniendo blogs del servidor...");const e=await j("/blogs");return console.log("Blogs recibidos del servidor:",e),Array.isArray(e)?e.map((e=>{console.log(`Blog ${e._id} - Procesando...`);let t=[];if(e.images&&Array.isArray(e.images)&&(t=e.images.filter((e=>null!=e)).map((t=>{if("string"==typeof t)return{src:t,alt:e.title||"Imagen del blog"};if(t&&"object"==typeof t){if(t.url)return{src:t.url,alt:t.alt||e.title||"Imagen del blog"};if(t.path)return{src:t.path,alt:t.alt||e.title||"Imagen del blog"};if(t.src)return t}return null})).filter((e=>null!==e&&e.src&&""!==e.src.trim()))),e.image){let r;if("string"==typeof e.image?r={src:e.image,alt:e.title||"Imagen principal"}:"object"==typeof e.image&&(r=e.image.url?{src:e.image.url,alt:e.image.alt||e.title}:e.image.path?{src:e.image.path,alt:e.image.alt||e.title}:e.image.src?e.image:null),r&&r.src&&""!==r.src.trim()){t.some((e=>e.src===r.src))||t.unshift(r)}}return{...e,images:t}})):[]}catch(e){return console.error("Error al obtener blogs:",e),[]}},k=async e=>{try{const t=localStorage.getItem("token");if(!t)throw new Error("No hay token de autenticaci√≥n disponible");return await j(`/blogs?id=${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})}catch(t){throw console.error(`Error al eliminar blog ${e}:`,t),t}},O=async(e,t)=>{try{return console.log(`Enviando PATCH a /blogs/${e} con datos:`,t),await j(`/blogs?id=${e}`,{method:"PATCH",body:JSON.stringify(t)})}catch(r){throw console.error(`Error al actualizar blog ${e}:`,r),r}},P=async e=>{try{return await j(`/blogs?id=${e}`)}catch(t){throw console.error(`Error al obtener blog ${e}:`,t),t}},T=async e=>{try{if(!e||"object"!=typeof e)throw console.error("Error: credenciales inv√°lidas, se esperaba un objeto"),new Error("Credenciales inv√°lidas: se requiere un objeto con email y password");if(!e.email||!e.password)throw console.error("Error: faltan campos obligatorios en las credenciales",{email:!!e.email,password:!!e.password}),new Error("Credenciales incompletas: se requiere email y password");const t={email:e.email,password:e.password};console.log(`üìù Intentando login con email: ${t.email}`);const r="/auth",n=JSON.stringify(t);console.log("Enviando solicitud de login:",{url:r,method:"POST",bodyLength:n.length,hasEmail:!!t.email,hasPassword:!!t.password});const o=await j(r,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:n});return console.log("Resultado login:",o),o&&o.error?(console.error(`Error en la autenticaci√≥n: ${o.message}`),{success:!1,message:o.message||"Error de autenticaci√≥n"}):o&&o.token?(localStorage.setItem("token",o.token),o.user&&o.user.name&&localStorage.setItem("name",o.user.name),o.user&&(o.user.profilePic&&localStorage.setItem("profilePic",o.user.profilePic),o.user.role&&localStorage.setItem("role",o.user.role),o.user.email&&localStorage.setItem("email",o.user.email)),{success:!0,user:o.user||{id:o.id,email:e.email},token:o.token}):{success:!1,message:o.message||"Error de autenticaci√≥n"}}catch(t){return console.error("Error en el login:",t),{success:!1,message:t.message||"Error en el servidor. Por favor, intenta m√°s tarde."}}},I=async e=>{try{return await j("/auth/register",{method:"POST",body:JSON.stringify(e)})}catch(t){throw console.error("Error al crear usuario:",t),t}};async function C(e){try{const t=e||localStorage.getItem("token");if(!t)throw new Error("No hay token de autenticaci√≥n");const r="profileApiAttempts",n=Date.now(),o=JSON.parse(localStorage.getItem(r)||"[]").filter((e=>n-e<2e3));if(o.length>2){console.warn("‚ö†Ô∏è Demasiados intentos de obtener perfil, usando datos locales");const e=localStorage.getItem("email"),t=localStorage.getItem("name")||(e?e.split("@")[0]:"Usuario"),n=localStorage.getItem("role")||"user",o=localStorage.getItem("profilePic")||localStorage.getItem("profilePic_local")||localStorage.getItem("profilePic_base64");return localStorage.removeItem(r),{email:e,name:t,role:n,profilePic:o,_emergency:!0,_localData:!0}}o.push(n),localStorage.setItem(r,JSON.stringify(o));const i=await j("/auth/me",{headers:{Authorization:`Bearer ${t}`}});if(i&&!i.error&&(i.id||i._id)){const e={...i,id:i.id||i._id,profileImage:i.profileImage||i.profilePic||null};return delete e._id,delete e.profilePic,console.log("getUserProfile: Success - Returning:",e),e}{const e=(null==i?void 0:i.message)||"Failed to fetch valid user profile from API (missing id?)";throw console.error("getUserProfile: fetchAPI('/auth/me') failed or returned invalid data:",i),new Error(e)}}catch(t){throw console.error("getUserProfile: Error fetching profile from API. NO fallback to localStorage. Error:",t),t}}const A=async(e,t)=>{console.log(`[postData] Iniciando POST a endpoint: ${e}`);try{console.log(`[postData] Datos para ${e}:`,t);const r={method:"POST",body:JSON.stringify(t)},n=await j(e,r);if(console.log(`[postData] Resultado de fetchAPI para ${e}:`,n),null==n?void 0:n.error)throw new Error(n.message||"Error en la solicitud POST devuelto por fetchAPI");return n}catch(r){throw console.error(`[postData] Error en POST a ${e}:`,r),r}},D=e=>{if(e)try{if("string"!=typeof e||"undefined"===e||"null"===e)return console.warn("syncProfileImage: Imagen inv√°lida proporcionada"),null;console.log("syncProfileImage: Sincronizando imagen:",e.substring(0,30)+"..."),localStorage.setItem("profilePic",e),localStorage.setItem("profilePic_backup",e),localStorage.setItem("profilePic_lastUpdate",Date.now().toString());try{const t=JSON.parse(localStorage.getItem("userData")||"{}");t&&(t.profilePic=e,t.profileImage=e,localStorage.setItem("userData",JSON.stringify(t)))}catch(ot){console.warn("Error al actualizar userData:",ot)}try{const t=localStorage.getItem("userResponse");if(t){const r=JSON.parse(t);r.profilePic=e,r.profileImage=e,localStorage.setItem("userResponse",JSON.stringify(r))}}catch(ot){console.warn("Error al actualizar userResponse:",ot)}return setTimeout((()=>{try{window.dispatchEvent(new CustomEvent("profileImageUpdated",{detail:{profileImage:e,timestamp:Date.now(),source:"syncProfileImage"}})),console.log("Evento de actualizaci√≥n de imagen emitido con √©xito")}catch(t){console.warn("Error al emitir evento de actualizaci√≥n:",t)}}),50),console.log("Imagen de perfil sincronizada correctamente"),e}catch(t){return console.error("Error cr√≠tico al guardar imagen en localStorage:",t),null}},L=async e=>{try{const t=localStorage.getItem("token"),r={Authorization:`Bearer ${t}`};console.log("Token de autorizaci√≥n:",t),console.log("Subiendo imagen de propiedad a:",`${w}/api/properties/upload-image`),console.log("FormData contenido:",Array.from(e.entries()));const n=await fetch(`${w}/api/properties/upload-image`,{method:"POST",headers:r,body:e,credentials:"include"});if(!n.ok){const e=await n.text();throw console.error("Respuesta de error del servidor:",e),console.error("Status:",n.status),console.error("StatusText:",n.statusText),new Error(`Error ${n.status}: ${n.statusText}`)}const o=await n.json();if(console.log("Respuesta exitosa del servidor:",o),!o.imageUrl&&!o.url&&!o.secure_url)throw new Error("No se pudo obtener una URL v√°lida de la imagen");return{src:o.imageUrl||o.url||o.secure_url,alt:"Imagen de propiedad"}}catch(t){throw console.error("Error al subir imagen de propiedad:",t),t}},R=async()=>{try{const e=localStorage.getItem("token");if(!e)return console.warn("No hay token disponible para obtener imagen desde servidor"),{success:!1,error:"No hay sesi√≥n activa"};console.log("üîç Obteniendo imagen de perfil desde el servidor...");const t=await fetch(`${w}/user/profile-image`,{method:"GET",headers:{Authorization:`Bearer ${e}`},credentials:"include"});if(!t.ok)throw new Error(`Error al obtener imagen: ${t.status}`);return{success:!0,data:await t.json()}}catch(e){return console.error("‚ùå Error al obtener imagen de perfil desde servidor:",e),{success:!1,error:e.message}}},M=async(e,t)=>{try{const r=localStorage.getItem("token");if(!r)throw new Error("No hay token de autenticaci√≥n disponible");const n=new FormData;n.append("profilePic",t),console.log(`Subiendo imagen de perfil para usuario ${e}...`);const o=await fetch(`${w}/user/update-profile`,{method:"POST",headers:{Authorization:`Bearer ${r}`},body:n});if(!o.ok){const e=await o.text();throw console.error("Error al subir imagen:",e),new Error(`Error ${o.status}: ${o.statusText}`)}const i=await o.json();return console.log("Imagen de perfil subida exitosamente:",i),i}catch(r){throw console.error("Error en uploadProfileImageAndUpdate:",r),r}},B=async()=>{try{console.log("Obteniendo propiedades del servidor...");const e=await j("/properties");return console.log("Propiedades recibidas del servidor:",e),Array.isArray(e)?e:[]}catch(e){return console.error("Error al obtener propiedades:",e),[]}},q=async e=>{try{console.log(`[deletePropertyPost] Eliminando propiedad con ID: ${e}`);const t=localStorage.getItem("token");if(!t)throw new Error("No hay token de autenticaci√≥n disponible");const r=await j(`/properties/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}});return console.log("[deletePropertyPost] Resultado:",r),r}catch(t){throw console.error(`Error al eliminar propiedad ${e}:`,t),t}},F=async e=>{if(console.log("[createPropertyPost] Iniciando creaci√≥n con datos:",e),!e)throw console.error("[createPropertyPost] No data provided"),new Error("No se proporcionaron datos para crear la propiedad.");e.images&&Array.isArray(e.images)&&console.log("[createPropertyPost] Enviando im√°genes:",e.images);try{const t=localStorage.getItem("token");console.log("[createPropertyPost] TOKEN JUSTO ANTES DE LLAMAR A postData('/properties'): "+(t?"EXISTE":"NULL"));const r=await A("/properties",e);if(console.log("[createPropertyPost] Respuesta recibida de postData:",r),r&&r.error)throw new Error(r.message||"Error devuelto por postData al crear la propiedad");return r}catch(t){throw console.error("[createPropertyPost] Error detallado:",t),new Error(t.message||"Error desconocido en createPropertyPost")}},z=async e=>{try{return await j(`/properties/${e}`)}catch(t){throw console.error(`Error al obtener propiedad ${e}:`,t),t}},U=async(e,t)=>{try{return console.log(`[updatePropertyPost] Actualizando propiedad ${e} con datos:`,t),await j(`/properties/${e}`,{method:"PATCH",body:JSON.stringify(t)})}catch(r){throw console.error(`Error al actualizar propiedad ${e}:`,r),r}},V=Object.freeze(Object.defineProperty({__proto__:null,BASE_URL:w,createBlogPost:S,createPropertyPost:F,createUser:I,deleteBlogPost:k,deleteData:async e=>{try{console.log(`DELETE ${e}`);const t={method:"DELETE"},r=await j(e,t);if(null==r?void 0:r.error)throw new Error(r.message||"Error en la solicitud DELETE");return r}catch(t){return console.error(`Error deleting data at ${e}:`,t),{error:!0,message:t.message||"Error desconocido en DELETE"}}},deletePropertyPost:q,fetchAPI:j,fetchData:async e=>{try{return await j(e,{method:"GET"})}catch(t){throw console.error("Error fetching data:",t),t}},fetchProfileImageFromServer:R,getBlogById:P,getBlogPosts:_,getCloudinarySignature:N,getCurrentUser:async e=>{if(!(e||localStorage.getItem("token")))throw new Error("No hay token de autenticaci√≥n");try{return await j("/auth/me")}catch(t){throw console.error("Error en getCurrentUser:",t),t}},getPropertyById:z,getPropertyPosts:B,getUserProfile:C,loginUser:T,postData:A,syncProfileImage:D,syncProfileImageBetweenDevices:async e=>{if(!e)return console.error("No se proporcion√≥ imagen para sincronizar entre dispositivos"),{success:!1,error:"Imagen no proporcionada"};try{const t=localStorage.getItem("token");if(!t)return console.warn("No hay token disponible para sincronizaci√≥n entre dispositivos"),{success:!1,error:"No hay sesi√≥n activa"};console.log("üîÑ Iniciando sincronizaci√≥n de imagen entre dispositivos..."),D(e);const r=e.startsWith("data:");let n,o,i={Authorization:`Bearer ${t}`,"Content-Type":"application/json"};r?(console.log("üì§ Enviando imagen base64 al servidor para sincronizaci√≥n entre dispositivos"),n=JSON.stringify({profilePic:e})):(console.log("üì§ Enviando URL de imagen al servidor para sincronizaci√≥n entre dispositivos"),n=JSON.stringify({profilePicUrl:e}));const a=localStorage.getItem("definitive_api_url");if(a)o=a;else{const e="https:"===window.location.protocol;o=`${e?"https":"http"}://${"nextjs-gozamadrid-qrfk.onrender.com"}`,localStorage.setItem("definitive_api_url",o)}console.log(`üîÑ Usando API URL: ${o} para sincronizaci√≥n de imagen`);const s=await fetch(`${o}/user/sync-profile-image`,{method:"POST",headers:i,body:n,credentials:"include"});if(!s.ok){const t=await s.text();console.error(`Error al sincronizar imagen entre dispositivos: ${s.status}`,t),401===s.status&&(console.warn("Token expirado. Intentando refrescar token..."),localStorage.setItem("pendingProfileSync","true"),localStorage.setItem("profilePic_pending",e));try{return{success:!1,status:s.status,error:JSON.parse(t).message||"Error de servidor"}}catch(ot){return{success:!1,status:s.status,error:t||"Error desconocido"}}}const l=await s.json();return console.log("‚úÖ Imagen sincronizada correctamente entre dispositivos"),localStorage.setItem("profilePic_lastCloudSync",Date.now().toString()),localStorage.removeItem("pendingProfileSync"),localStorage.removeItem("profilePic_pending"),window.dispatchEvent(new CustomEvent("profileImageSynced",{detail:{success:!0,timestamp:Date.now()}})),{success:!0,...l}}catch(t){console.error("Error cr√≠tico al sincronizar imagen entre dispositivos:",t);try{e&&(localStorage.setItem("profilePic",e),localStorage.setItem("profilePic_backup",e),localStorage.setItem("pendingProfileSync","true"),localStorage.setItem("profilePic_pending",e))}catch(r){console.error("Error al guardar imagen localmente:",r)}return{success:!1,error:t.message||"Error desconocido"}}},testApiConnection:async()=>{try{console.log(`üîç Probando conexi√≥n a la API en: ${w}`);const e=await fetch(`${w}/`,{method:"GET",headers:{Accept:"application/json"}});console.log(`üìä Respuesta de conexi√≥n a API: Status ${e.status}`);const t=await fetch(`${w}/api/blogs`,{method:"GET",headers:{Accept:"application/json"}});console.log(`üìö Prueba de ruta de blogs: Status ${t.status}`);const r=await fetch(`${w}/api/properties`,{method:"GET",headers:{Accept:"application/json"}});return console.log(`üè† Prueba de ruta de propiedades: Status ${r.status}`),{baseApi:e.status,blogs:t.status,properties:r.status}}catch(e){return console.error("‚ùå Error en prueba de conexi√≥n a API:",e),{error:!0,message:e.message}}},updateBlogPost:O,updateData:async(e,t)=>{try{console.log(`PUT ${e} con datos:`,t);const r={method:"PUT",body:JSON.stringify(t)},n=await j(e,r);if(null==n?void 0:n.error)throw new Error(n.message||"Error en la solicitud PUT");return n}catch(r){return console.error(`Error updating data at ${e}:`,r),{error:!0,message:r.message||"Error desconocido en PUT"}}},updatePropertyPost:U,uploadFile:async e=>{try{console.log("Subiendo archivo gen√©rico...");const t={Authorization:`Bearer ${localStorage.getItem("token")}`},r=await fetch(`${w}/upload`,{method:"POST",headers:t,body:e});if(!r.ok){const e=await r.text();throw console.error("Error al subir archivo gen√©rico:",e),new Error(`Error ${r.status}: ${r.statusText}`)}const n=await r.json();return console.log("Archivo subido exitosamente:",n),n}catch(t){throw console.error("Error al subir archivo gen√©rico:",t),t}},uploadImageBlog:async e=>{try{console.log("Subiendo imagen para blog...");const t={Authorization:`Bearer ${localStorage.getItem("token")}`},r=await fetch(`${w}/blogs/upload`,{method:"POST",headers:t,body:e});if(!r.ok){const e=await r.text();throw console.error("Error al subir imagen de blog:",e),new Error(`Error ${r.status}: ${r.statusText}`)}const n=await r.json();if(!n||!n.imageUrl)throw new Error("No se recibi√≥ una URL de imagen v√°lida");return console.log("Imagen de blog subida exitosamente:",n),{src:n.imageUrl,alt:"Imagen del blog"}}catch(t){throw console.error("Error al subir imagen de blog:",t),t}},uploadImageProperty:L,uploadProfileImageAndUpdate:M},Symbol.toStringTag,{value:"Module"})),H="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCI+PHJlY3Qgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIGZpbGw9IiNlMWUxZTEiLz48dGV4dCB4PSI1MCIgeT0iNTAiIGZvbnQtc2l6ZT0iMTgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGFsaWdubWVudC1iYXNlbGluZT0ibWlkZGxlIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZmlsbD0iIzg4OCI+U2luIEltYWdlbjwvdGV4dD48L3N2Zz4=",$=n.createContext();function G({children:e}){const[t,o]=n.useState(null),[i,a]=n.useState(!1),[s,l]=n.useState(!0),[c,u]=n.useState(!1),d=(e,t={})=>{try{const r=JSON.parse(localStorage.getItem("authEventLog")||"[]");r.unshift({event:e,timestamp:(new Date).toISOString(),details:t}),r.length>10&&(r.length=10),localStorage.setItem("authEventLog",JSON.stringify(r))}catch(ot){console.error("Error al registrar evento de autenticaci√≥n:",ot)}},p=e=>{if(!e)return!1;if(3!==e.split(".").length)return!1;try{const t=JSON.parse(atob(e.split(".")[1]));if(t.exp&&t.exp<Date.now()/1e3){console.warn("Token expirado:",new Date(1e3*t.exp).toLocaleString()),d("token_expired",{expiry:new Date(1e3*t.exp).toLocaleString()});try{const e=localStorage.getItem("profilePic");e&&localStorage.setItem("profilePic_temp",e),localStorage.removeItem("token"),localStorage.removeItem("userData"),localStorage.removeItem("userResponse"),localStorage.removeItem("tempToken"),localStorage.removeItem("email"),localStorage.removeItem("name"),localStorage.removeItem("role"),localStorage.removeItem("authRedirects"),localStorage.removeItem("redirectLoop"),localStorage.removeItem("appRestarted"),window.dispatchEvent(new CustomEvent("userLoggedOut",{detail:{reason:"token_expired"}})),console.log("üîí Sesi√≥n cerrada por token expirado"),window.location.replace("/login")}catch(ot){console.error("Error al cerrar sesi√≥n por token expirado:",ot),window.location.href="/login"}return!1}return t.iat||(console.warn("Token sin fecha de emisi√≥n (iat)"),d("token_without_iat")),!0}catch(t){console.error("Error al validar token:",t),d("token_validation_error",{error:t.message});try{localStorage.removeItem("token"),localStorage.removeItem("userData"),localStorage.removeItem("userResponse"),localStorage.removeItem("tempToken"),localStorage.removeItem("email"),localStorage.removeItem("name"),localStorage.removeItem("role"),localStorage.removeItem("authRedirects"),localStorage.removeItem("redirectLoop"),localStorage.removeItem("appRestarted"),window.dispatchEvent(new CustomEvent("userLoggedOut",{detail:{reason:"token_invalid"}})),console.log("üîí Sesi√≥n cerrada por token inv√°lido"),window.location.replace("/login")}catch(ot){console.error("Error al cerrar sesi√≥n por token inv√°lido:",ot),window.location.href="/login"}return!1}},f=async()=>{if(console.log("üåÄ [RECUPERATE_SESSION] Attempting session recovery..."),c)return console.log("üõë Ya se intent√≥ recuperar la sesi√≥n anteriormente, evitando bucle"),!1;console.log("üîÑ Intentando recuperar sesi√≥n..."),d("session_recovery_attempt"),u(!0);try{const t=localStorage.getItem("email"),r=localStorage.getItem("name"),n=localStorage.getItem("role"),i=localStorage.getItem("profilePic")||localStorage.getItem("profilePic_local")||localStorage.getItem("profilePic_base64")||H;console.log("üîç Datos de recuperaci√≥n disponibles:",{email:t?"Disponible":"No disponible",name:r?"Disponible":"No disponible",role:n?"Disponible":"No disponible",imagen:i?"Disponible":"No disponible"});const s=localStorage.getItem("token");if(s)if(console.log("üîë Encontrado token probablemente inv√°lido o expirado en localStorage"),p(s)){console.log("üîë Token v√°lido encontrado, intentando usarlo directamente");try{const e=await C(s);if(e&&e.user)return console.log("‚úÖ Perfil recuperado exitosamente con token existente"),d("profile_recovered_with_token"),o(e.user),a(!0),l(!1),!0}catch(e){console.error("Error al obtener perfil con token existente:",e),d("profile_recovery_failed",{error:e.message})}}else try{localStorage.removeItem("token"),d("invalid_token_removed"),console.log("üßπ Token inv√°lido eliminado de localStorage")}catch(ot){console.error("‚ùå Error al eliminar token:",ot)}if(t&&r){console.log("‚úÖ Datos m√≠nimos encontrados, recuperando sesi√≥n b√°sica"),d("session_recovered_with_basic_data");const e={email:t,name:r,role:n||"user",profileImage:i,_recovered:!0,_recoveryTime:(new Date).toISOString()},s=`temp_${Date.now()}_${Math.random().toString(36).substring(2,9)}`;if(t)try{localStorage.setItem("tempToken",s),d("temp_token_created"),console.log("üîë Token temporal creado y almacenado")}catch(ot){console.error("‚ùå Error al almacenar token temporal:",ot)}return o(e),a(!0),l(!1),console.log("‚úÖ Sesi√≥n b√°sica recuperada con datos locales"),window.dispatchEvent(new CustomEvent("sessionRecovered",{detail:{recoveredUser:e}})),!0}if(t){console.log("‚ö†Ô∏è Solo tenemos email, no podemos recuperar una sesi√≥n completa"),d("partial_recovery_with_email");const e={email:t,name:t.split("@")[0]||"Usuario recuperado",profileImage:H,_recovered:!0,_minimal:!0,_recoveryTime:(new Date).toISOString()};return o(e),a(!1),l(!1),window.dispatchEvent(new CustomEvent("sessionPartiallyRecovered",{detail:{minimalUser:e}})),!1}return console.log("‚ùå No hay suficientes datos para recuperar la sesi√≥n"),d("recovery_failed_no_data"),l(!1),!1}catch(t){console.error("‚ùå [RECUPERATE_SESSION] Critical error:",t),d("critical_recovery_error",{error:t.message});try{console.log("üîÑ √öltimo intento - creando usuario an√≥nimo temporal");const e={name:"Usuario temporal",profileImage:H,_anonymous:!0,_recoveryTime:(new Date).toISOString()};return o(e),a(!1),!1}catch(ot){return console.error("‚ùå Error fatal durante la creaci√≥n de usuario an√≥nimo:",ot),!1}finally{console.log("üåÄ [RECUPERATE_SESSION] Finished.")}}},m=async()=>{console.log("üîÑ [REFRESH_USER_DATA] Starting user data refresh...");let e=!1;try{const r=localStorage.getItem("token");if(!r)return o(null),a(!1),void l(!1);if(!p(r)){console.warn("[REFRESH_USER_DATA] Invalid/Expired token. Attempting recovery...");return void(await f()?(console.log("[REFRESH_USER_DATA] Recovery successful."),e=!0):(console.log("[REFRESH_USER_DATA] Recovery failed, setting user to null."),o(null),a(!1)))}try{const t=await C(r);if(!t||!t.id)return console.error("‚ö†Ô∏è refreshUserData: getUserProfile fall√≥ o devolvi√≥ datos inv√°lidos (sin id).",t),h(!0,"profile_fetch_invalid"),void l(!1);console.log("‚úÖ refreshUserData: Datos de usuario obtenidos correctamente:",{id:t.id,name:t.name,email:t.email,role:t.role,profileImageExists:!!t.profileImage}),t.name&&localStorage.setItem("name",t.name),t.email&&localStorage.setItem("email",t.email),t.role&&localStorage.setItem("role",t.role);const n=t.profileImage||localStorage.getItem("profilePic")||fallbackImageBase4;o({...t,profileImage:n}),a(!0),e=!0}catch(t){console.error("[REFRESH_USER_DATA] Error getting/validating profile, calling logout:",t),await h(!0,"profile_refresh_error")}}catch(r){console.error("[REFRESH_USER_DATA] Initial critical error, calling logout:",r),await h(!0,"critical_refresh_error")}finally{l(!1),console.log(`üîÑ [REFRESH_USER_DATA] Finished. Success: ${e}`)}},h=(e=!0,t="user_action")=>{console.log(`üîí [LOGOUT] Initiating logout. Reason: ${t}`);try{const e=localStorage.getItem("profilePic")||localStorage.getItem("profilePic_local")||localStorage.getItem("profilePic_base64");e&&(localStorage.setItem("profilePic_temp",e),localStorage.setItem("profilePic_backup",e),localStorage.setItem("profilePic_last",e),sessionStorage.setItem("profilePic_temp",e),console.log("‚úÖ Imagen de perfil guardada para futura recuperaci√≥n"))}catch(ot){console.error("Error al guardar imagen temporal:",ot)}o(null),a(!1);try{localStorage.removeItem("token"),localStorage.removeItem("userData"),localStorage.removeItem("userResponse"),localStorage.removeItem("tempToken"),localStorage.removeItem("email"),localStorage.removeItem("name"),localStorage.removeItem("role"),localStorage.removeItem("authRedirects"),localStorage.removeItem("redirectLoop"),localStorage.removeItem("appRestarted"),window.dispatchEvent(new CustomEvent("userLoggedOut",{detail:{reason:t}})),console.log("üîí [LOGOUT] State cleared. Dispatching event...")}catch(ot){console.error("‚ùå Error al eliminar token:",ot)}console.log("üîÑ Redirigiendo a p√°gina de login...");try{setTimeout((()=>{window.location.replace("/login")}),100)}catch(r){console.error("Error durante la redirecci√≥n:",r),window.location.href="/login"}console.log("üîí [LOGOUT] Finished.")};n.useEffect((()=>{let e=0;const t=()=>{e++,console.log(`[INITIALIZE_USER] Attempt #${e}`),(async()=>{console.log("üöÄ [INITIALIZE_USER] Starting user initialization...");try{l(!0);const e=localStorage.getItem("token");console.log("[INITIALIZE_USER] Token in localStorage: "+(e?"Exists":"Not available")),e?p(e)?(console.log("[INITIALIZE_USER] Valid token found. Refreshing user data..."),await m()):(console.warn("[INITIALIZE_USER] Invalid/Expired token. Attempting recovery..."),await f()):(console.log("[INITIALIZE_USER] No token found. Checking for minimal data..."),localStorage.getItem("email")?(console.log("[INITIALIZE_USER] Minimal data found. Attempting partial recovery..."),await f()):(console.log("[INITIALIZE_USER] No data for recovery. Setting user to null."),o(null),a(!1)))}catch(e){console.error("‚ùå [INITIALIZE_USER] Critical error during initialization. Attempting emergency recovery:",e);try{await f()}catch(ot){console.error("‚ùå [INITIALIZE_USER] Fatal error during emergency recovery:",ot),o(null),a(!1)}}finally{l(!1),console.log("üöÄ [INITIALIZE_USER] Finished.")}})().catch((r=>{if(console.error(`[INITIALIZE_USER] Error in attempt #${e}:`,r),e<3){const r=1e3*e;console.log(`[INITIALIZE_USER] Retrying in ${r}ms...`),setTimeout(t,r)}else console.error("[INITIALIZE_USER] Max initialization attempts reached. Stopping."),l(!1)}))};t()}),[]),n.useEffect((()=>{let e=null;return i&&(console.log("‚è∞ [PERIODIC_REFRESH] Setting up periodic refresh (15 min)."),e=setInterval((()=>{console.log("‚è∞ [PERIODIC_REFRESH] Triggering periodic refresh..."),m().catch((e=>{console.error("‚è∞ [PERIODIC_REFRESH] Error during periodic refresh:",e)}))}),9e5)),()=>{e&&(console.log("‚è∞ [PERIODIC_REFRESH] Clearing periodic refresh interval."),clearInterval(e))}}),[i]),n.useEffect((()=>{const e=e=>{if(console.log(`üîî [STORAGE_CHANGE] Event detected: key='${e.key}'`),"token"===e.key){const t=e.newValue;t&&p(t)?(console.log("üîî [STORAGE_CHANGE] Token changed/added. Calling refreshUserData..."),m().catch((e=>console.error("üîî [STORAGE_CHANGE] Error refreshing after token change:",e)))):(console.log("üîî [STORAGE_CHANGE] Token removed or invalid. Calling logout..."),h(!1,"token_removed_or_invalid_external"))}else"profilePic"===e.key&&(console.log("üîî [STORAGE_CHANGE] Profile pic changed. Calling refreshUserData (if authenticated)..."),i?m().catch((t=>{console.error("üîî [STORAGE_CHANGE] Error refreshing after pic change:",t),o((t=>t?{...t,profileImage:e.newValue||H}:null))})):o((t=>t&&(t._recovered||t._anonymous||t._minimal)?{...t,profileImage:e.newValue||H}:t)))};return window.addEventListener("storage",e),console.log("üîî [STORAGE_CHANGE] Event listener added."),()=>{window.removeEventListener("storage",e),console.log("üîî [STORAGE_CHANGE] Event listener removed.")}}),[i,h,m]);const g={user:t,setUser:o,isAuthenticated:i,loading:s,recoveryAttempted:c,logAuthEvent:d,isValidToken:p,recuperateSession:f,refreshUserData:m,logout:h,login:async(e,t)=>{console.log("Iniciando sesi√≥n con datos:",t),d("login_attempt",{hasToken:!!e,hasUserData:!!t});try{if(!e||!p(e))return console.error("Token inv√°lido proporcionado para inicio de sesi√≥n"),d("login_failed_invalid_token"),!1;if(localStorage.setItem("token",e),t){localStorage.setItem("email",t.email||""),localStorage.setItem("name",t.name||""),localStorage.setItem("role",t.role||"user"),localStorage.setItem("userData",JSON.stringify(t));let e=null;if(t.profileImage?e="string"==typeof t.profileImage?t.profileImage:t.profileImage.url||t.profileImage.src:t.profilePic&&(e="string"==typeof t.profilePic?t.profilePic:t.profilePic.src||t.profilePic.url),e){console.log("üñºÔ∏è Imagen de perfil encontrada en datos del servidor:",e.substring(0,30)+"..."),localStorage.setItem("profilePic",e),localStorage.setItem("profilePic_backup",e),localStorage.setItem("profilePic_temp",e),sessionStorage.setItem("profilePic_temp",e);try{const t=localStorage.getItem("userResponse");if(t){const r=JSON.parse(t);r.profilePic=e,r.profileImage=e,localStorage.setItem("userResponse",JSON.stringify(r))}}catch(ot){console.warn("Error al actualizar userResponse:",ot)}}else{const t=localStorage.getItem("profilePic_temp")||localStorage.getItem("profilePic_backup")||localStorage.getItem("profilePic_last")||sessionStorage.getItem("profilePic_temp")||localStorage.getItem("profilePic");t?(console.log("üñºÔ∏è Usando imagen local como respaldo:",t.substring(0,30)+"..."),e=t,localStorage.setItem("profilePic",t),localStorage.setItem("profilePic_backup",t),localStorage.setItem("profilePic_temp",t),sessionStorage.setItem("profilePic_temp",t)):(console.log("üñºÔ∏è No hay imagen disponible, usando imagen por defecto"),e=H)}a(!0),o({...t,profileImage:e,profilePic:e});try{window.dispatchEvent(new CustomEvent("userLoggedIn",{detail:{userData:{...t,profileImage:e,profilePic:e}}})),console.log("‚úÖ Evento de login enviado a todos los componentes")}catch(ot){console.warn("Error al disparar evento userLoggedIn:",ot)}}return d("login_successful"),!0}catch(r){return console.error("Error cr√≠tico durante el login:",r),d("login_critical_error",{error:r.message}),!1}},safeProfileSync:async e=>{if(console.log("üõ°Ô∏è Iniciando safeProfileSync..."),d("profile_sync_started"),!t||!t.id)return console.error("safeProfileSync: No hay usuario o ID de usuario disponible."),d("profile_sync_failed",{reason:"no_user_id"}),{success:!1,error:"No se pudo identificar al usuario."};if(!e)return console.error("safeProfileSync: No se proporcion√≥ archivo de imagen."),d("profile_sync_failed",{reason:"no_image_file"}),{success:!1,error:"No se seleccion√≥ ninguna imagen."};l(!0);try{console.log("Validando imagen...");try{await(e=>new Promise(((t,r)=>{if(!e)return void r(new Error("No se proporcion√≥ ninguna imagen"));if(!e.type.match("image.*"))return void r(new Error("El archivo seleccionado no es una imagen v√°lida"));if(e.size>10485760)return void r(new Error("La imagen es demasiado grande. El tama√±o m√°ximo es 10MB"));const n=new FileReader;n.onload=e=>{t(e.target.result)},n.onerror=()=>{r(new Error("Error al leer el archivo de imagen"))},n.readAsDataURL(e)})))(e),console.log("Imagen validada correctamente."),d("image_validation_success")}catch(n){throw console.error("Error de validaci√≥n de imagen:",n),d("image_validation_failed",{error:n.message}),n}console.log(`Subiendo imagen para usuario ${t.id}...`),d("image_upload_attempt",{userId:t.id});const i=await M(t.id,e);if(console.log("Respuesta de la API de subida:",i),i&&i.success&&i.user&&i.user.profileImage&&i.user.profileImage.url){console.log("‚úÖ Imagen subida y perfil actualizado exitosamente en backend");const e=(r=i.user.profileImage.url)?r.replace(/^http:\/\//i,"https://"):r;d("image_upload_success",{newUrl:e}),o((t=>({...t,profileImage:e,hasProfileImage:!0,hasProfilePic:!0}))),localStorage.setItem("profilePic",e);try{const t=localStorage.getItem("userData");if(t){const r=JSON.parse(t);r.profileImage={url:e,publicId:i.user.profileImage.publicId},localStorage.setItem("userData",JSON.stringify(r))}}catch(ot){console.warn("Error actualizando userData en localStorage tras subir imagen:",ot)}return console.log("Contexto y localStorage actualizados con nueva imagen."),{success:!0,imageUrl:e}}{console.error("Error en la respuesta de la API al subir imagen (estructura inesperada o fallo):"),console.error("Respuesta recibida:",i);const e=(null==i?void 0:i.message)||((null==i?void 0:i.error)?JSON.stringify(i.error):"Error desconocido del servidor al procesar la respuesta.");throw d("image_upload_failed",{error:e,responseData:i}),new Error(e)}}catch(i){return console.error("‚ùå Fallo al sincronizar imagen:",i),d("profile_sync_failed",{error:i.message}),{success:!1,error:i.message||"Error desconocido al subir imagen"}}finally{l(!1),console.log("safeProfileSync finalizado.")}var r}};return r.jsx($.Provider,{value:g,children:e})}function W(){return n.useContext($)}const K=Array(12).fill(0),Y=({visible:e,className:t})=>o.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},o.createElement("div",{className:"sonner-spinner"},K.map(((e,t)=>o.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`}))))),Z=o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},o.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),J=o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},o.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),X=o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},o.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Q=o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},o.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),ee=o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},o.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}));let te=1;const re=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach((t=>t(e)))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:r,...n}=e,o="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:te++,i=this.toasts.find((e=>e.id===o)),a=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),i?this.toasts=this.toasts.map((t=>t.id===o?(this.publish({...t,...e,id:o,title:r}),{...t,...e,id:o,dismissible:a,title:r}):t)):this.addToast({title:r,...n,dismissible:a,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame((()=>this.subscribers.forEach((t=>t({id:e,dismiss:!0})))))):this.toasts.forEach((e=>{this.subscribers.forEach((t=>t({id:e.id,dismiss:!0})))})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;void 0!==t.loading&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));const n=Promise.resolve(e instanceof Function?e():e);let i,a=void 0!==r;const s=n.then((async e=>{i=["resolve",e];if(o.isValidElement(e))a=!1,this.create({id:r,type:"default",message:e});else if(ne(e)&&!e.ok){a=!1;const n="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,i="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description,s="object"==typeof n&&!o.isValidElement(n)?n:{message:n};this.create({id:r,type:"error",description:i,...s})}else if(e instanceof Error){a=!1;const n="function"==typeof t.error?await t.error(e):t.error,i="function"==typeof t.description?await t.description(e):t.description,s="object"==typeof n&&!o.isValidElement(n)?n:{message:n};this.create({id:r,type:"error",description:i,...s})}else if(void 0!==t.success){a=!1;const n="function"==typeof t.success?await t.success(e):t.success,i="function"==typeof t.description?await t.description(e):t.description,s="object"==typeof n&&!o.isValidElement(n)?n:{message:n};this.create({id:r,type:"success",description:i,...s})}})).catch((async e=>{if(i=["reject",e],void 0!==t.error){a=!1;const n="function"==typeof t.error?await t.error(e):t.error,i="function"==typeof t.description?await t.description(e):t.description,s="object"==typeof n&&!o.isValidElement(n)?n:{message:n};this.create({id:r,type:"error",description:i,...s})}})).finally((()=>{a&&(this.dismiss(r),r=void 0),null==t.finally||t.finally.call(t)})),l=()=>new Promise(((e,t)=>s.then((()=>"reject"===i[0]?t(i[1]):e(i[1]))).catch(t)));return"string"!=typeof r&&"number"!=typeof r?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{const r=(null==t?void 0:t.id)||te++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter((e=>!this.dismissedToasts.has(e.id))),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ne=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,oe=(e,t)=>{const r=(null==t?void 0:t.id)||te++;return re.addToast({title:e,...t,id:r}),r},ie=Object.assign(oe,{success:re.success,info:re.info,warning:re.warning,error:re.error,custom:re.custom,message:re.message,promise:re.promise,dismiss:re.dismiss,loading:re.loading},{getHistory:()=>re.toasts,getToasts:()=>re.getActiveToasts()});function ae(e){return void 0!==e.label}!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const se=3,le=14;function ce(...e){return e.filter(Boolean).join(" ")}const ue=e=>{var t,r,n,i,a,s,l,c,u;const{invert:d,toast:p,unstyled:f,interacting:m,setHeights:h,visibleToasts:g,heights:b,index:y,toasts:v,expanded:x,removeToast:w,defaultRichColors:E,closeButton:j,style:N,cancelButtonStyle:S,actionButtonStyle:_,className:k="",descriptionClassName:O="",duration:P,position:T,gap:I,expandByDefault:C,classNames:A,icons:D,closeButtonAriaLabel:L="Close toast"}=e,[R,M]=o.useState(null),[B,q]=o.useState(null),[F,z]=o.useState(!1),[U,V]=o.useState(!1),[H,$]=o.useState(!1),[G,W]=o.useState(!1),[K,te]=o.useState(!1),[re,ne]=o.useState(0),[oe,ie]=o.useState(0),se=o.useRef(p.duration||P||4e3),le=o.useRef(null),ue=o.useRef(null),de=0===y,pe=y+1<=g,fe=p.type,me=!1!==p.dismissible,he=p.className||"",ge=p.descriptionClassName||"",be=o.useMemo((()=>b.findIndex((e=>e.toastId===p.id))||0),[b,p.id]),ye=o.useMemo((()=>{var e;return null!=(e=p.closeButton)?e:j}),[p.closeButton,j]),ve=o.useMemo((()=>p.duration||P||4e3),[p.duration,P]),xe=o.useRef(0),we=o.useRef(0),Ee=o.useRef(0),je=o.useRef(null),[Ne,Se]=T.split("-"),_e=o.useMemo((()=>b.reduce(((e,t,r)=>r>=be?e:e+t.height),0)),[b,be]),ke=(()=>{const[e,t]=o.useState(document.hidden);return o.useEffect((()=>{const e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)}),[]),e})(),Oe=p.invert||d,Pe="loading"===fe;we.current=o.useMemo((()=>be*I+_e),[be,_e]),o.useEffect((()=>{se.current=ve}),[ve]),o.useEffect((()=>{z(!0)}),[]),o.useEffect((()=>{const e=ue.current;if(e){const t=e.getBoundingClientRect().height;return ie(t),h((e=>[{toastId:p.id,height:t,position:p.position},...e])),()=>h((e=>e.filter((e=>e.toastId!==p.id))))}}),[h,p.id]),o.useLayoutEffect((()=>{if(!F)return;const e=ue.current,t=e.style.height;e.style.height="auto";const r=e.getBoundingClientRect().height;e.style.height=t,ie(r),h((e=>e.find((e=>e.toastId===p.id))?e.map((e=>e.toastId===p.id?{...e,height:r}:e)):[{toastId:p.id,height:r,position:p.position},...e]))}),[F,p.title,p.description,h,p.id]);const Te=o.useCallback((()=>{V(!0),ne(we.current),h((e=>e.filter((e=>e.toastId!==p.id)))),setTimeout((()=>{w(p)}),200)}),[p,w,h,we]);o.useEffect((()=>{if(p.promise&&"loading"===fe||p.duration===1/0||"loading"===p.type)return;let e;return x||m||ke?(()=>{if(Ee.current<xe.current){const e=(new Date).getTime()-xe.current;se.current=se.current-e}Ee.current=(new Date).getTime()})():se.current!==1/0&&(xe.current=(new Date).getTime(),e=setTimeout((()=>{null==p.onAutoClose||p.onAutoClose.call(p,p),Te()}),se.current)),()=>clearTimeout(e)}),[x,m,p,fe,ke,Te]),o.useEffect((()=>{p.delete&&Te()}),[Te,p.delete]);const Ie=p.icon||(null==D?void 0:D[fe])||(e=>{switch(e){case"success":return Z;case"info":return X;case"warning":return J;case"error":return Q;default:return null}})(fe);var Ce,Ae,De,Le;return o.createElement("li",{tabIndex:0,ref:ue,className:ce(k,he,null==A?void 0:A.toast,null==p||null==(t=p.classNames)?void 0:t.toast,null==A?void 0:A.default,null==A?void 0:A[fe],null==p||null==(r=p.classNames)?void 0:r[fe]),"data-sonner-toast":"","data-rich-colors":null!=(Ce=p.richColors)?Ce:E,"data-styled":!Boolean(p.jsx||p.unstyled||f),"data-mounted":F,"data-promise":Boolean(p.promise),"data-swiped":K,"data-removed":U,"data-visible":pe,"data-y-position":Ne,"data-x-position":Se,"data-index":y,"data-front":de,"data-swiping":H,"data-dismissible":me,"data-type":fe,"data-invert":Oe,"data-swipe-out":G,"data-swipe-direction":B,"data-expanded":Boolean(x||C&&F),style:{"--index":y,"--toasts-before":y,"--z-index":v.length-y,"--offset":`${U?re:we.current}px`,"--initial-height":C?"auto":`${oe}px`,...N,...p.style},onDragEnd:()=>{$(!1),M(null),je.current=null},onPointerDown:e=>{!Pe&&me&&(le.current=new Date,ne(we.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&($(!0),je.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,r;if(G||!me)return;je.current=null;const n=Number((null==(e=ue.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),o=Number((null==(t=ue.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),i=(new Date).getTime()-(null==(r=le.current)?void 0:r.getTime()),a="x"===R?n:o,s=Math.abs(a)/i;if(Math.abs(a)>=45||s>.11)return ne(we.current),null==p.onDismiss||p.onDismiss.call(p,p),q("x"===R?n>0?"right":"left":o>0?"down":"up"),Te(),void W(!0);var l,c;null==(l=ue.current)||l.style.setProperty("--swipe-amount-x","0px"),null==(c=ue.current)||c.style.setProperty("--swipe-amount-y","0px"),te(!1),$(!1),M(null)},onPointerMove:t=>{var r,n,o;if(!je.current||!me)return;if((null==(r=window.getSelection())?void 0:r.toString().length)>0)return;const i=t.clientY-je.current.y,a=t.clientX-je.current.x;var s;const l=null!=(s=e.swipeDirections)?s:function(e){const[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}(T);!R&&(Math.abs(a)>1||Math.abs(i)>1)&&M(Math.abs(a)>Math.abs(i)?"x":"y");let c={x:0,y:0};const u=e=>1/(1.5+Math.abs(e)/20);if("y"===R){if(l.includes("top")||l.includes("bottom"))if(l.includes("top")&&i<0||l.includes("bottom")&&i>0)c.y=i;else{const e=i*u(i);c.y=Math.abs(e)<Math.abs(i)?e:i}}else if("x"===R&&(l.includes("left")||l.includes("right")))if(l.includes("left")&&a<0||l.includes("right")&&a>0)c.x=a;else{const e=a*u(a);c.x=Math.abs(e)<Math.abs(a)?e:a}(Math.abs(c.x)>0||Math.abs(c.y)>0)&&te(!0),null==(n=ue.current)||n.style.setProperty("--swipe-amount-x",`${c.x}px`),null==(o=ue.current)||o.style.setProperty("--swipe-amount-y",`${c.y}px`)}},ye&&!p.jsx&&"loading"!==fe?o.createElement("button",{"aria-label":L,"data-disabled":Pe,"data-close-button":!0,onClick:Pe||!me?()=>{}:()=>{Te(),null==p.onDismiss||p.onDismiss.call(p,p)},className:ce(null==A?void 0:A.closeButton,null==p||null==(n=p.classNames)?void 0:n.closeButton)},null!=(Ae=null==D?void 0:D.close)?Ae:ee):null,(fe||p.icon||p.promise)&&null!==p.icon&&(null!==(null==D?void 0:D[fe])||p.icon)?o.createElement("div",{"data-icon":"",className:ce(null==A?void 0:A.icon,null==p||null==(i=p.classNames)?void 0:i.icon)},p.promise||"loading"===p.type&&!p.icon?p.icon||((null==D?void 0:D.loading)?o.createElement("div",{className:ce(null==A?void 0:A.loader,null==p||null==(Le=p.classNames)?void 0:Le.loader,"sonner-loader"),"data-visible":"loading"===fe},D.loading):o.createElement(Y,{className:ce(null==A?void 0:A.loader,null==p||null==(De=p.classNames)?void 0:De.loader),visible:"loading"===fe})):null,"loading"!==p.type?Ie:null):null,o.createElement("div",{"data-content":"",className:ce(null==A?void 0:A.content,null==p||null==(a=p.classNames)?void 0:a.content)},o.createElement("div",{"data-title":"",className:ce(null==A?void 0:A.title,null==p||null==(s=p.classNames)?void 0:s.title)},p.jsx?p.jsx:"function"==typeof p.title?p.title():p.title),p.description?o.createElement("div",{"data-description":"",className:ce(O,ge,null==A?void 0:A.description,null==p||null==(l=p.classNames)?void 0:l.description)},"function"==typeof p.description?p.description():p.description):null),o.isValidElement(p.cancel)?p.cancel:p.cancel&&ae(p.cancel)?o.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||S,onClick:e=>{ae(p.cancel)&&me&&(null==p.cancel.onClick||p.cancel.onClick.call(p.cancel,e),Te())},className:ce(null==A?void 0:A.cancelButton,null==p||null==(c=p.classNames)?void 0:c.cancelButton)},p.cancel.label):null,o.isValidElement(p.action)?p.action:p.action&&ae(p.action)?o.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||_,onClick:e=>{ae(p.action)&&(null==p.action.onClick||p.action.onClick.call(p.action,e),e.defaultPrevented||Te())},className:ce(null==A?void 0:A.actionButton,null==p||null==(u=p.classNames)?void 0:u.actionButton)},p.action.label):null)};function de(){if("undefined"==typeof window)return"ltr";if("undefined"==typeof document)return"ltr";const e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function pe(e,t){const r={};return[e,t].forEach(((e,t)=>{const n=1===t,o=n?"--mobile-offset":"--offset",i=n?"16px":"24px";function a(e){["top","right","bottom","left"].forEach((t=>{r[`${o}-${t}`]="number"==typeof e?`${e}px`:e}))}"number"==typeof e||"string"==typeof e?a(e):"object"==typeof e?["top","right","bottom","left"].forEach((t=>{void 0===e[t]?r[`${o}-${t}`]=i:r[`${o}-${t}`]="number"==typeof e[t]?`${e[t]}px`:e[t]})):a(i)})),r}const fe=o.forwardRef((function(e,t){const{invert:r,position:n="bottom-right",hotkey:a=["altKey","KeyT"],expand:s,closeButton:l,className:c,offset:u,mobileOffset:d,theme:p="light",richColors:f,duration:m,style:h,visibleToasts:g=se,toastOptions:b,dir:y=de(),gap:v=le,icons:x,containerAriaLabel:w="Notifications"}=e,[E,j]=o.useState([]),N=o.useMemo((()=>Array.from(new Set([n].concat(E.filter((e=>e.position)).map((e=>e.position)))))),[E,n]),[S,_]=o.useState([]),[k,O]=o.useState(!1),[P,T]=o.useState(!1),[I,C]=o.useState("system"!==p?p:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),A=o.useRef(null),D=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),L=o.useRef(null),R=o.useRef(!1),M=o.useCallback((e=>{j((t=>{var r;return(null==(r=t.find((t=>t.id===e.id)))?void 0:r.delete)||re.dismiss(e.id),t.filter((({id:t})=>t!==e.id))}))}),[]);return o.useEffect((()=>re.subscribe((e=>{e.dismiss?requestAnimationFrame((()=>{j((t=>t.map((t=>t.id===e.id?{...t,delete:!0}:t))))})):setTimeout((()=>{i.flushSync((()=>{j((t=>{const r=t.findIndex((t=>t.id===e.id));return-1!==r?[...t.slice(0,r),{...t[r],...e},...t.slice(r+1)]:[e,...t]}))}))}))}))),[E]),o.useEffect((()=>{if("system"!==p)return void C(p);if("system"===p&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?C("dark"):C("light")),"undefined"==typeof window)return;const e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",(({matches:e})=>{C(e?"dark":"light")}))}catch(t){e.addListener((({matches:e})=>{try{C(e?"dark":"light")}catch(ot){console.error(ot)}}))}}),[p]),o.useEffect((()=>{E.length<=1&&O(!1)}),[E]),o.useEffect((()=>{const e=e=>{var t;var r;a.every((t=>e[t]||e.code===t))&&(O(!0),null==(r=A.current)||r.focus());"Escape"!==e.code||document.activeElement!==A.current&&!(null==(t=A.current)?void 0:t.contains(document.activeElement))||O(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[a]),o.useEffect((()=>{if(A.current)return()=>{L.current&&(L.current.focus({preventScroll:!0}),L.current=null,R.current=!1)}}),[A.current]),o.createElement("section",{ref:t,"aria-label":`${w} ${D}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},N.map(((t,n)=>{var i;const[a,p]=t.split("-");return E.length?o.createElement("ol",{key:t,dir:"auto"===y?de():y,tabIndex:-1,ref:A,className:c,"data-sonner-toaster":!0,"data-sonner-theme":I,"data-y-position":a,"data-lifted":k&&E.length>1&&!s,"data-x-position":p,style:{"--front-toast-height":`${(null==(i=S[0])?void 0:i.height)||0}px`,"--width":"356px","--gap":`${v}px`,...h,...pe(u,d)},onBlur:e=>{R.current&&!e.currentTarget.contains(e.relatedTarget)&&(R.current=!1,L.current&&(L.current.focus({preventScroll:!0}),L.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||R.current||(R.current=!0,L.current=e.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{P||O(!1)},onDragEnd:()=>O(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||T(!0)},onPointerUp:()=>T(!1)},E.filter((e=>!e.position&&0===n||e.position===t)).map(((n,i)=>{var a,c;return o.createElement(ue,{key:n.id,icons:x,index:i,toast:n,defaultRichColors:f,duration:null!=(a=null==b?void 0:b.duration)?a:m,className:null==b?void 0:b.className,descriptionClassName:null==b?void 0:b.descriptionClassName,invert:r,visibleToasts:g,closeButton:null!=(c=null==b?void 0:b.closeButton)?c:l,interacting:P,position:t,style:null==b?void 0:b.style,unstyled:null==b?void 0:b.unstyled,classNames:null==b?void 0:b.classNames,cancelButtonStyle:null==b?void 0:b.cancelButtonStyle,actionButtonStyle:null==b?void 0:b.actionButtonStyle,closeButtonAriaLabel:null==b?void 0:b.closeButtonAriaLabel,removeToast:M,toasts:E.filter((e=>e.position==n.position)),heights:S.filter((e=>e.position==n.position)),setHeights:_,expandByDefault:s,gap:v,expanded:k,swipeDirections:e.swipeDirections})}))):null})))}));!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var me=Object.defineProperty,he=(e,t,r)=>(((e,t,r)=>{t in e?me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);let ge=new class{constructor(){he(this,"current",this.detect()),he(this,"handoffState","pending"),he(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}},be=(e,t)=>{ge.isServer?n.useEffect(e,t):n.useLayoutEffect(e,t)};function ye(e){let t=n.useRef(e);return be((()=>{t.current=e}),[e]),t}let ve=function(e){let t=ye(e);return o.useCallback(((...e)=>t.current(...e)),[t])};function xe(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch((e=>setTimeout((()=>{throw e}))))}function we(){let e=[],t={addEventListener:(e,r,n,o)=>(e.addEventListener(r,n,o),t.add((()=>e.removeEventListener(r,n,o)))),requestAnimationFrame(...e){let r=requestAnimationFrame(...e);return t.add((()=>cancelAnimationFrame(r)))},nextFrame:(...e)=>t.requestAnimationFrame((()=>t.requestAnimationFrame(...e))),setTimeout(...e){let r=setTimeout(...e);return t.add((()=>clearTimeout(r)))},microTask(...e){let r={current:!0};return xe((()=>{r.current&&e[0]()})),t.add((()=>{r.current=!1}))},style(e,t,r){let n=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:r}),this.add((()=>{Object.assign(e.style,{[t]:n})}))},group(e){let t=we();return e(t),this.add((()=>t.dispose()))},add:t=>(e.push(t),()=>{let r=e.indexOf(t);if(r>=0)for(let t of e.splice(r,1))t()}),dispose(){for(let t of e.splice(0))t()}};return t}function Ee(){let[e]=n.useState(we);return n.useEffect((()=>()=>e.dispose()),[e]),e}function je(){let e=function(){let e="undefined"==typeof document;return"useSyncExternalStore"in a&&a.useSyncExternalStore((()=>()=>{}),(()=>!1),(()=>!e))}(),[t,r]=n.useState(ge.isHandoffComplete);return t&&!1===ge.isHandoffComplete&&r(!1),n.useEffect((()=>{!0!==t&&r(!0)}),[t]),n.useEffect((()=>ge.handoff()),[]),!e&&t}var Ne;let Se=null!=(Ne=o.useId)?Ne:function(){let e=je(),[t,r]=o.useState(e?()=>ge.nextId():null);return be((()=>{null===t&&r(ge.nextId())}),[t]),null!=t?""+t:void 0};function _e(e,t,...r){if(e in t){let n=t[e];return"function"==typeof n?n(...r):n}let n=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map((e=>`"${e}"`)).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,_e),n}function ke(e){return ge.isServer?null:e instanceof Node?e.ownerDocument:null!=e&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let Oe=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map((e=>`${e}:not([tabindex='-1'])`)).join(",");var Pe,Te,Ie,Ce=((Ie=Ce||{})[Ie.First=1]="First",Ie[Ie.Previous=2]="Previous",Ie[Ie.Next=4]="Next",Ie[Ie.Last=8]="Last",Ie[Ie.WrapAround=16]="WrapAround",Ie[Ie.NoScroll=32]="NoScroll",Ie),Ae=((Te=Ae||{})[Te.Error=0]="Error",Te[Te.Overflow=1]="Overflow",Te[Te.Success=2]="Success",Te[Te.Underflow=3]="Underflow",Te),De=((Pe=De||{})[Pe.Previous=-1]="Previous",Pe[Pe.Next=1]="Next",Pe);function Le(e=document.body){return null==e?[]:Array.from(e.querySelectorAll(Oe)).sort(((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER))))}var Re=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Re||{});function Me(e,t=0){var r;return e!==(null==(r=ke(e))?void 0:r.body)&&_e(t,{0:()=>e.matches(Oe),1(){let t=e;for(;null!==t;){if(t.matches(Oe))return!0;t=t.parentElement}return!1}})}function Be(e){let t=ke(e);we().nextFrame((()=>{t&&!Me(t.activeElement,0)&&Fe(e)}))}var qe=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(qe||{});function Fe(e){null==e||e.focus({preventScroll:!0})}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("keydown",(e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")}),!0),document.addEventListener("click",(e=>{1===e.detail?delete document.documentElement.dataset.headlessuiFocusVisible:0===e.detail&&(document.documentElement.dataset.headlessuiFocusVisible="")}),!0));let ze=["textarea","input"].join(",");function Ue(e,t=e=>e){return e.slice().sort(((e,r)=>{let n=t(e),o=t(r);if(null===n||null===o)return 0;let i=n.compareDocumentPosition(o);return i&Node.DOCUMENT_POSITION_FOLLOWING?-1:i&Node.DOCUMENT_POSITION_PRECEDING?1:0}))}function Ve(e,t,{sorted:r=!0,relativeTo:n=null,skipElements:o=[]}={}){let i=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,a=Array.isArray(e)?r?Ue(e):e:Le(e);o.length>0&&a.length>1&&(a=a.filter((e=>!o.includes(e)))),n=null!=n?n:i.activeElement;let s,l=(()=>{if(5&t)return 1;if(10&t)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,a.indexOf(n))-1;if(4&t)return Math.max(0,a.indexOf(n))+1;if(8&t)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=32&t?{preventScroll:!0}:{},d=0,p=a.length;do{if(d>=p||d+p<=0)return 0;let e=c+d;if(16&t)e=(e+p)%p;else{if(e<0)return 3;if(e>=p)return 1}s=a[e],null==s||s.focus(u),d+=l}while(s!==i.activeElement);return 6&t&&function(e){var t,r;return null!=(r=null==(t=null==e?void 0:e.matches)?void 0:t.call(e,ze))&&r}(s)&&s.select(),2}function He(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function $e(){return He()||/Android/gi.test(window.navigator.userAgent)}function Ge(e,t,r){let o=ye(t);n.useEffect((()=>{function t(e){o.current(e)}return document.addEventListener(e,t,r),()=>document.removeEventListener(e,t,r)}),[e,r])}function We(e,t,r){let o=ye(t);n.useEffect((()=>{function t(e){o.current(e)}return window.addEventListener(e,t,r),()=>window.removeEventListener(e,t,r)}),[e,r])}function Ke(e,t,r=!0){let o=n.useRef(!1);function i(r,n){if(!o.current||r.defaultPrevented)return;let i=n(r);if(null===i||!i.getRootNode().contains(i)||!i.isConnected)return;let a=function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(e);for(let e of a){if(null===e)continue;let t=e instanceof HTMLElement?e:e.current;if(null!=t&&t.contains(i)||r.composed&&r.composedPath().includes(t))return}return!Me(i,Re.Loose)&&-1!==i.tabIndex&&r.preventDefault(),t(r,i)}n.useEffect((()=>{requestAnimationFrame((()=>{o.current=r}))}),[r]);let a=n.useRef(null);Ge("pointerdown",(e=>{var t,r;o.current&&(a.current=(null==(r=null==(t=e.composedPath)?void 0:t.call(e))?void 0:r[0])||e.target)}),!0),Ge("mousedown",(e=>{var t,r;o.current&&(a.current=(null==(r=null==(t=e.composedPath)?void 0:t.call(e))?void 0:r[0])||e.target)}),!0),Ge("click",(e=>{$e()||a.current&&(i(e,(()=>a.current)),a.current=null)}),!0),Ge("touchend",(e=>i(e,(()=>e.target instanceof HTMLElement?e.target:null))),!0),We("blur",(e=>i(e,(()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null))),!0)}function Ye(...e){return n.useMemo((()=>ke(...e)),[...e])}function Ze(e){var t;if(e.type)return e.type;let r=null!=(t=e.as)?t:"button";return"string"==typeof r&&"button"===r.toLowerCase()?"button":void 0}function Je(e,t){let[r,o]=n.useState((()=>Ze(e)));return be((()=>{o(Ze(e))}),[e.type,e.as]),be((()=>{r||t.current&&t.current instanceof HTMLButtonElement&&!t.current.hasAttribute("type")&&o("button")}),[r,t]),r}let Xe=Symbol();function Qe(e,t=!0){return Object.assign(e,{[Xe]:t})}function et(...e){let t=n.useRef(e);n.useEffect((()=>{t.current=e}),[e]);let r=ve((e=>{for(let r of t.current)null!=r&&("function"==typeof r?r(e):r.current=e)}));return e.every((e=>null==e||(null==e?void 0:e[Xe])))?void 0:r}function tt(e){return[e.screenX,e.screenY]}function rt(e,t){let r=n.useRef([]),o=ve(e);n.useEffect((()=>{let e=[...r.current];for(let[n,i]of t.entries())if(r.current[n]!==i){let n=o(t,e);return r.current=t,n}}),[o,...t])}function nt(...e){return Array.from(new Set(e.flatMap((e=>"string"==typeof e?e.split(" "):[])))).filter(Boolean).join(" ")}var ot,it=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(it||{}),at=((ot=at||{})[ot.Unmount=0]="Unmount",ot[ot.Hidden=1]="Hidden",ot);function st({ourProps:e,theirProps:t,slot:r,defaultTag:n,features:o,visible:i=!0,name:a,mergeRefs:s}){s=null!=s?s:ut;let l=dt(t,e);if(i)return lt(l,r,n,a,s);let c=null!=o?o:0;if(2&c){let{static:e=!1,...t}=l;if(e)return lt(t,r,n,a,s)}if(1&c){let{unmount:e=!0,...t}=l;return _e(e?0:1,{0:()=>null,1:()=>lt({...t,hidden:!0,style:{display:"none"}},r,n,a,s)})}return lt(l,r,n,a,s)}function lt(e,t={},r,o,i){let{as:a=r,children:s,refName:l="ref",...c}=mt(e,["unmount","static"]),u=void 0!==e.ref?{[l]:e.ref}:{},d="function"==typeof s?s(t):s;"className"in c&&c.className&&"function"==typeof c.className&&(c.className=c.className(t));let p={};if(t){let e=!1,r=[];for(let[n,o]of Object.entries(t))"boolean"==typeof o&&(e=!0),!0===o&&r.push(n);e&&(p["data-headlessui-state"]=r.join(" "))}if(a===n.Fragment&&Object.keys(ft(c)).length>0){if(!n.isValidElement(d)||Array.isArray(d)&&d.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${o} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(c).map((e=>`  - ${e}`)).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map((e=>`  - ${e}`)).join("\n")].join("\n"));let e=d.props,t="function"==typeof(null==e?void 0:e.className)?(...t)=>nt(null==e?void 0:e.className(...t),c.className):nt(null==e?void 0:e.className,c.className),r=t?{className:t}:{};return n.cloneElement(d,Object.assign({},dt(d.props,ft(mt(c,["ref"]))),p,u,{ref:i(d.ref,u.ref)},r))}return n.createElement(a,Object.assign({},mt(c,["ref"]),a!==n.Fragment&&u,a!==n.Fragment&&p),d)}function ct(){let e=n.useRef([]),t=n.useCallback((t=>{for(let r of e.current)null!=r&&("function"==typeof r?r(t):r.current=t)}),[]);return(...r)=>{if(!r.every((e=>null==e)))return e.current=r,t}}function ut(...e){return e.every((e=>null==e))?void 0:t=>{for(let r of e)null!=r&&("function"==typeof r?r(t):r.current=t)}}function dt(...e){if(0===e.length)return{};if(1===e.length)return e[0];let t={},r={};for(let n of e)for(let e in n)e.startsWith("on")&&"function"==typeof n[e]?(null!=r[e]||(r[e]=[]),r[e].push(n[e])):t[e]=n[e];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(r).map((e=>[e,void 0]))));for(let n in r)Object.assign(t,{[n](e,...t){let o=r[n];for(let r of o){if((e instanceof Event||(null==e?void 0:e.nativeEvent)instanceof Event)&&e.defaultPrevented)return;r(e,...t)}}});return t}function pt(e){var t;return Object.assign(n.forwardRef(e),{displayName:null!=(t=e.displayName)?t:e.name})}function ft(e){let t=Object.assign({},e);for(let r in t)void 0===t[r]&&delete t[r];return t}function mt(e,t=[]){let r=Object.assign({},e);for(let n of t)n in r&&delete r[n];return r}var ht=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(ht||{});let gt=pt((function(e,t){var r;let{features:n=1,...o}=e;return st({ourProps:{ref:t,"aria-hidden":!(2&~n)||(null!=(r=o["aria-hidden"])?r:void 0),hidden:!(4&~n)||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...!(4&~n)&&!!(2&~n)&&{display:"none"}}},theirProps:o,slot:{},defaultTag:"div",name:"Hidden"})})),bt=n.createContext(null);bt.displayName="OpenClosedContext";var yt=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(yt||{});function vt(){return n.useContext(bt)}function xt({value:e,children:t}){return o.createElement(bt.Provider,{value:e},t)}let wt=[];function Et(e){let t=e.parentElement,r=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(r=t),t=t.parentElement;let n=""===(null==t?void 0:t.getAttribute("disabled"));return(!n||!function(e){if(!e)return!1;let t=e.previousElementSibling;for(;null!==t;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}(r))&&n}!function(e){function t(){"loading"!==document.readyState&&(e(),document.removeEventListener("DOMContentLoaded",t))}"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("DOMContentLoaded",t),t())}((()=>{function e(e){e.target instanceof HTMLElement&&e.target!==document.body&&wt[0]!==e.target&&(wt.unshift(e.target),wt=wt.filter((e=>null!=e&&e.isConnected)),wt.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})}));var jt,Nt=((jt=Nt||{})[jt.First=0]="First",jt[jt.Previous=1]="Previous",jt[jt.Next=2]="Next",jt[jt.Last=3]="Last",jt[jt.Specific=4]="Specific",jt[jt.Nothing=5]="Nothing",jt);function St(e,t){let r=t.resolveItems();if(r.length<=0)return null;let n=t.resolveActiveIndex(),o=null!=n?n:-1;switch(e.focus){case 0:for(let e=0;e<r.length;++e)if(!t.resolveDisabled(r[e],e,r))return e;return n;case 1:for(let e=o-1;e>=0;--e)if(!t.resolveDisabled(r[e],e,r))return e;return n;case 2:for(let e=o+1;e<r.length;++e)if(!t.resolveDisabled(r[e],e,r))return e;return n;case 3:for(let e=r.length-1;e>=0;--e)if(!t.resolveDisabled(r[e],e,r))return e;return n;case 4:for(let n=0;n<r.length;++n)if(t.resolveId(r[n],n,r)===e.id)return n;return n;case 5:return null;default:!function(e){throw new Error("Unexpected object: "+e)}(e)}}var _t,kt=((_t=kt||{}).Space=" ",_t.Enter="Enter",_t.Escape="Escape",_t.Backspace="Backspace",_t.Delete="Delete",_t.ArrowLeft="ArrowLeft",_t.ArrowUp="ArrowUp",_t.ArrowRight="ArrowRight",_t.ArrowDown="ArrowDown",_t.Home="Home",_t.End="End",_t.PageUp="PageUp",_t.PageDown="PageDown",_t.Tab="Tab",_t);function Ot(e,t,r,o){let i=ye(r);n.useEffect((()=>{function r(e){i.current(e)}return(e=null!=e?e:window).addEventListener(t,r,o),()=>e.removeEventListener(t,r,o)}),[e,t,o])}function Pt(){let e=n.useRef(!1);return be((()=>(e.current=!0,()=>{e.current=!1})),[]),e}function Tt(e){let t=ve(e),r=n.useRef(!1);n.useEffect((()=>(r.current=!1,()=>{r.current=!0,xe((()=>{r.current&&t()}))})),[t])}var It=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(It||{});function Ct(e){if(!e)return new Set;if("function"==typeof e)return new Set(e());let t=new Set;for(let r of e.current)r.current instanceof HTMLElement&&t.add(r.current);return t}var At=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(At||{});let Dt=pt((function(e,t){let r=n.useRef(null),i=et(r,t),{initialFocus:a,containers:s,features:l=30,...c}=e;je()||(l=1);let u=Ye(r);!function({ownerDocument:e},t){let r=function(e=!0){let t=n.useRef(wt.slice());return rt((([e],[r])=>{!0===r&&!1===e&&xe((()=>{t.current.splice(0)})),!1===r&&!0===e&&(t.current=wt.slice())}),[e,wt,t]),ve((()=>{var e;return null!=(e=t.current.find((e=>null!=e&&e.isConnected)))?e:null}))}(t);rt((()=>{t||(null==e?void 0:e.activeElement)===(null==e?void 0:e.body)&&Fe(r())}),[t]),Tt((()=>{t&&Fe(r())}))}({ownerDocument:u},Boolean(16&l));let d=function({ownerDocument:e,container:t,initialFocus:r},o){let i=n.useRef(null),a=Pt();return rt((()=>{if(!o)return;let n=t.current;n&&xe((()=>{if(!a.current)return;let t=null==e?void 0:e.activeElement;if(null!=r&&r.current){if((null==r?void 0:r.current)===t)return void(i.current=t)}else if(n.contains(t))return void(i.current=t);null!=r&&r.current?Fe(r.current):Ve(n,Ce.First)===Ae.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),i.current=null==e?void 0:e.activeElement}))}),[o]),i}({ownerDocument:u,container:r,initialFocus:a},Boolean(2&l));!function({ownerDocument:e,container:t,containers:r,previousActiveElement:n},o){let i=Pt();Ot(null==e?void 0:e.defaultView,"focus",(e=>{if(!o||!i.current)return;let a=Ct(r);t.current instanceof HTMLElement&&a.add(t.current);let s=n.current;if(!s)return;let l=e.target;l&&l instanceof HTMLElement?Rt(a,l)?(n.current=l,Fe(l)):(e.preventDefault(),e.stopPropagation(),Fe(s)):Fe(n.current)}),!0)}({ownerDocument:u,container:r,containers:s,previousActiveElement:d},Boolean(8&l));let p=function(){let e=n.useRef(0);return We("keydown",(t=>{"Tab"===t.key&&(e.current=t.shiftKey?1:0)}),!0),e}(),f=ve((e=>{let t=r.current;t&&_e(p.current,{[It.Forwards]:()=>{Ve(t,Ce.First,{skipElements:[e.relatedTarget]})},[It.Backwards]:()=>{Ve(t,Ce.Last,{skipElements:[e.relatedTarget]})}})})),m=Ee(),h=n.useRef(!1),g={ref:i,onKeyDown(e){"Tab"==e.key&&(h.current=!0,m.requestAnimationFrame((()=>{h.current=!1})))},onBlur(e){let t=Ct(s);r.current instanceof HTMLElement&&t.add(r.current);let n=e.relatedTarget;n instanceof HTMLElement&&"true"!==n.dataset.headlessuiFocusGuard&&(Rt(t,n)||(h.current?Ve(r.current,_e(p.current,{[It.Forwards]:()=>Ce.Next,[It.Backwards]:()=>Ce.Previous})|Ce.WrapAround,{relativeTo:e.target}):e.target instanceof HTMLElement&&Fe(e.target)))}};return o.createElement(o.Fragment,null,Boolean(4&l)&&o.createElement(gt,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:ht.Focusable}),st({ourProps:g,theirProps:c,defaultTag:"div",name:"FocusTrap"}),Boolean(4&l)&&o.createElement(gt,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:f,features:ht.Focusable}))})),Lt=Object.assign(Dt,{features:At});function Rt(e,t){for(let r of e)if(r.contains(t))return!0;return!1}let Mt=n.createContext(!1);function Bt(e){return o.createElement(Mt.Provider,{value:e.force},e.children)}function qt(e){let t=n.useContext(Mt),r=n.useContext(Ut),o=Ye(e),[i,a]=n.useState((()=>{if(!t&&null!==r||ge.isServer)return null;let e=null==o?void 0:o.getElementById("headlessui-portal-root");if(e)return e;if(null===o)return null;let n=o.createElement("div");return n.setAttribute("id","headlessui-portal-root"),o.body.appendChild(n)}));return n.useEffect((()=>{null!==i&&(null!=o&&o.body.contains(i)||null==o||o.body.appendChild(i))}),[i,o]),n.useEffect((()=>{t||null!==r&&a(r.current)}),[r,a,t]),i}let Ft=n.Fragment;let zt=n.Fragment,Ut=n.createContext(null);let Vt=n.createContext(null);let Ht=pt((function(e,t){let r=e,o=n.useRef(null),i=et(Qe((e=>{o.current=e})),t),a=Ye(o),l=qt(o),[c]=n.useState((()=>{var e;return ge.isServer?null:null!=(e=null==a?void 0:a.createElement("div"))?e:null})),u=n.useContext(Vt),d=je();return be((()=>{!l||!c||l.contains(c)||(c.setAttribute("data-headlessui-portal",""),l.appendChild(c))}),[l,c]),be((()=>{if(c&&u)return u.register(c)}),[u,c]),Tt((()=>{var e;!l||!c||(c instanceof Node&&l.contains(c)&&l.removeChild(c),l.childNodes.length<=0&&(null==(e=l.parentElement)||e.removeChild(l)))})),d&&l&&c?s.createPortal(st({ourProps:{ref:i},theirProps:r,defaultTag:Ft,name:"Portal"}),c):null})),$t=pt((function(e,t){let{target:r,...n}=e,i={ref:et(t)};return o.createElement(Ut.Provider,{value:r},st({ourProps:i,theirProps:n,defaultTag:zt,name:"Popover.Group"}))})),Gt=Object.assign(Ht,{Group:$t});const Wt="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},{useState:Kt,useEffect:Yt,useLayoutEffect:Zt,useDebugValue:Jt}=a;function Xt(e){const t=e.getSnapshot,r=e.value;try{const e=t();return!Wt(r,e)}catch{return!0}}const Qt=!("undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement)?function(e,t,r){return t()}:function(e,t,r){const n=t(),[{inst:o},i]=Kt({inst:{value:n,getSnapshot:t}});return Zt((()=>{o.value=n,o.getSnapshot=t,Xt(o)&&i({inst:o})}),[e,n,t]),Yt((()=>(Xt(o)&&i({inst:o}),e((()=>{Xt(o)&&i({inst:o})})))),[e]),Jt(n),n},er="useSyncExternalStore"in a?a.useSyncExternalStore:Qt;function tr(){let e;return{before({doc:t}){var r;let n=t.documentElement;e=(null!=(r=t.defaultView)?r:window).innerWidth-n.clientWidth},after({doc:t,d:r}){let n=t.documentElement,o=n.clientWidth-n.offsetWidth,i=e-o;r.style(n,"paddingRight",`${i}px`)}}}function rr(e){let t={};for(let r of e)Object.assign(t,r(t));return t}let nr=function(e,t){let r=e(),n=new Set;return{getSnapshot:()=>r,subscribe:e=>(n.add(e),()=>n.delete(e)),dispatch(e,...o){let i=t[e].call(r,...o);i&&(r=i,n.forEach((e=>e())))}}}((()=>new Map),{PUSH(e,t){var r;let n=null!=(r=this.get(e))?r:{doc:e,count:0,d:we(),meta:new Set};return n.count++,n.meta.add(t),this.set(e,n),this},POP(e,t){let r=this.get(e);return r&&(r.count--,r.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:r}){let n={doc:e,d:t,meta:rr(r)},o=[He()?{before({doc:e,d:t,meta:r}){function n(e){return r.containers.flatMap((e=>e())).some((t=>t.contains(e)))}t.microTask((()=>{var r;if("auto"!==window.getComputedStyle(e.documentElement).scrollBehavior){let r=we();r.style(e.documentElement,"scrollBehavior","auto"),t.add((()=>t.microTask((()=>r.dispose()))))}let o=null!=(r=window.scrollY)?r:window.pageYOffset,i=null;t.addEventListener(e,"click",(t=>{if(t.target instanceof HTMLElement)try{let r=t.target.closest("a");if(!r)return;let{hash:o}=new URL(r.href),a=e.querySelector(o);a&&!n(a)&&(i=a)}catch{}}),!0),t.addEventListener(e,"touchstart",(e=>{if(e.target instanceof HTMLElement)if(n(e.target)){let r=e.target;for(;r.parentElement&&n(r.parentElement);)r=r.parentElement;t.style(r,"overscrollBehavior","contain")}else t.style(e.target,"touchAction","none")})),t.addEventListener(e,"touchmove",(e=>{if(e.target instanceof HTMLElement)if(n(e.target)){let t=e.target;for(;t.parentElement&&""!==t.dataset.headlessuiPortal&&!(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth);)t=t.parentElement;""===t.dataset.headlessuiPortal&&e.preventDefault()}else e.preventDefault()}),{passive:!1}),t.add((()=>{var e;let t=null!=(e=window.scrollY)?e:window.pageYOffset;o!==t&&window.scrollTo(0,o),i&&i.isConnected&&(i.scrollIntoView({block:"nearest"}),i=null)}))}))}}:{},tr(),{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}];o.forEach((({before:e})=>null==e?void 0:e(n))),o.forEach((({after:e})=>null==e?void 0:e(n)))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});function or(e,t,r){let n=function(e){return er(e.subscribe,e.getSnapshot,e.getSnapshot)}(nr),o=e?n.get(e):void 0,i=!!o&&o.count>0;return be((()=>{if(e&&t)return nr.dispatch("PUSH",e,r),()=>nr.dispatch("POP",e,r)}),[t,e]),i}nr.subscribe((()=>{let e=nr.getSnapshot(),t=new Map;for(let[r]of e)t.set(r,r.documentElement.style.overflow);for(let r of e.values()){let e="hidden"===t.get(r.doc),n=0!==r.count;(n&&!e||!n&&e)&&nr.dispatch(r.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",r),0===r.count&&nr.dispatch("TEARDOWN",r)}}));let ir=new Map,ar=new Map;function sr(e,t=!0){be((()=>{var r;if(!t)return;let n="function"==typeof e?e():e.current;if(!n)return;let o=null!=(r=ar.get(n))?r:0;return ar.set(n,o+1),0!==o||(ir.set(n,{"aria-hidden":n.getAttribute("aria-hidden"),inert:n.inert}),n.setAttribute("aria-hidden","true"),n.inert=!0),function(){var e;if(!n)return;let t=null!=(e=ar.get(n))?e:1;if(1===t?ar.delete(n):ar.set(n,t-1),1!==t)return;let r=ir.get(n);r&&(null===r["aria-hidden"]?n.removeAttribute("aria-hidden"):n.setAttribute("aria-hidden",r["aria-hidden"]),n.inert=r.inert,ir.delete(n))}}),[e,t])}let lr=n.createContext((()=>{}));lr.displayName="StackContext";var cr=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(cr||{});function ur({children:e,onUpdate:t,type:r,element:i,enabled:a}){let s=n.useContext(lr),l=ve(((...e)=>{null==t||t(...e),s(...e)}));return be((()=>{let e=void 0===a||!0===a;return e&&l(0,r,i),()=>{e&&l(1,r,i)}}),[l,r,i,a]),o.createElement(lr.Provider,{value:l},e)}let dr=n.createContext(null);function pr(){let e=n.useContext(dr);if(null===e){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,pr),e}return e}let fr=pt((function(e,t){let r=Se(),{id:n=`headlessui-description-${r}`,...o}=e,i=pr(),a=et(t);return be((()=>i.register(n)),[n,i.register]),st({ourProps:{ref:a,...i.props,id:n},theirProps:o,slot:i.slot||{},defaultTag:"p",name:i.name||"Description"})})),mr=Object.assign(fr,{});var hr=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(hr||{}),gr=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(gr||{});let br={0:(e,t)=>e.titleId===t.id?e:{...e,titleId:t.id}},yr=n.createContext(null);function vr(e){let t=n.useContext(yr);if(null===t){let t=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,vr),t}return t}function xr(e,t){return _e(t.type,br,e,t)}yr.displayName="DialogContext";let wr=it.RenderStrategy|it.Static;let Er=pt((function(e,t){let r=Se(),{id:i=`headlessui-dialog-${r}`,open:a,onClose:s,initialFocus:l,role:c="dialog",__demoMode:u=!1,...d}=e,[p,f]=n.useState(0),m=n.useRef(!1);c="dialog"===c||"alertdialog"===c?c:(m.current||(m.current=!0,console.warn(`Invalid role [${c}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog");let h=vt();void 0===a&&null!==h&&(a=(h&yt.Open)===yt.Open);let g=n.useRef(null),b=et(g,t),y=Ye(g),v=e.hasOwnProperty("open")||null!==h,x=e.hasOwnProperty("onClose");if(!v&&!x)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!v)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!x)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if("boolean"!=typeof a)throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${a}`);if("function"!=typeof s)throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${s}`);let w=a?0:1,[E,j]=n.useReducer(xr,{titleId:null,descriptionId:null,panelRef:n.createRef()}),N=ve((()=>s(!1))),S=ve((e=>j({type:0,id:e}))),_=!!je()&&(!u&&0===w),k=p>1,O=null!==n.useContext(yr),[P,T]=function(){let e=n.useContext(Vt),t=n.useRef([]),r=ve((r=>(t.current.push(r),e&&e.register(r),()=>i(r)))),i=ve((r=>{let n=t.current.indexOf(r);-1!==n&&t.current.splice(n,1),e&&e.unregister(r)})),a=n.useMemo((()=>({register:r,unregister:i,portals:t})),[r,i,t]);return[t,n.useMemo((()=>function({children:e}){return o.createElement(Vt.Provider,{value:a},e)}),[a])]}(),I={get current(){var e;return null!=(e=E.panelRef.current)?e:g.current}},{resolveContainers:C,mainTreeNodeRef:A,MainTreeNode:D}=function({defaultContainers:e=[],portals:t,mainTreeNodeRef:r}={}){var i;let a=n.useRef(null!=(i=null==r?void 0:r.current)?i:null),s=Ye(a),l=ve((()=>{var r,n,o;let i=[];for(let t of e)null!==t&&(t instanceof HTMLElement?i.push(t):"current"in t&&t.current instanceof HTMLElement&&i.push(t.current));if(null!=t&&t.current)for(let e of t.current)i.push(e);for(let e of null!=(r=null==s?void 0:s.querySelectorAll("html > *, body > *"))?r:[])e!==document.body&&e!==document.head&&e instanceof HTMLElement&&"headlessui-portal-root"!==e.id&&(e.contains(a.current)||e.contains(null==(o=null==(n=a.current)?void 0:n.getRootNode())?void 0:o.host)||i.some((t=>e.contains(t)))||i.push(e));return i}));return{resolveContainers:l,contains:ve((e=>l().some((t=>t.contains(e))))),mainTreeNodeRef:a,MainTreeNode:n.useMemo((()=>function(){return null!=r?null:o.createElement(gt,{features:ht.Hidden,ref:a})}),[a,r])}}({portals:P,defaultContainers:[I]}),L=k?"parent":"leaf",R=null!==h&&(h&yt.Closing)===yt.Closing,M=!O&&!R&&_,B=n.useCallback((()=>{var e,t;return null!=(t=Array.from(null!=(e=null==y?void 0:y.querySelectorAll("body > *"))?e:[]).find((e=>"headlessui-portal-root"!==e.id&&(e.contains(A.current)&&e instanceof HTMLElement))))?t:null}),[A]);sr(B,M);let q=!!k||_,F=n.useCallback((()=>{var e,t;return null!=(t=Array.from(null!=(e=null==y?void 0:y.querySelectorAll("[data-headlessui-portal]"))?e:[]).find((e=>e.contains(A.current)&&e instanceof HTMLElement)))?t:null}),[A]);sr(F,q),Ke(C,(e=>{e.preventDefault(),N()}),!(!_||k));let z=!(k||0!==w);Ot(null==y?void 0:y.defaultView,"keydown",(e=>{z&&(e.defaultPrevented||e.key===kt.Escape&&(e.preventDefault(),e.stopPropagation(),N()))})),function(e,t,r=()=>[document.body]){or(e,t,(e=>{var t;return{containers:[...null!=(t=e.containers)?t:[],r]}}))}(y,!(R||0!==w||O),C),n.useEffect((()=>{if(0!==w||!g.current)return;let e=new ResizeObserver((e=>{for(let t of e){let e=t.target.getBoundingClientRect();0===e.x&&0===e.y&&0===e.width&&0===e.height&&N()}}));return e.observe(g.current),()=>e.disconnect()}),[w,g,N]);let[U,V]=function(){let[e,t]=n.useState([]);return[e.length>0?e.join(" "):void 0,n.useMemo((()=>function(e){let r=ve((e=>(t((t=>[...t,e])),()=>t((t=>{let r=t.slice(),n=r.indexOf(e);return-1!==n&&r.splice(n,1),r}))))),i=n.useMemo((()=>({register:r,slot:e.slot,name:e.name,props:e.props})),[r,e.slot,e.name,e.props]);return o.createElement(dr.Provider,{value:i},e.children)}),[t])]}(),H=n.useMemo((()=>[{dialogState:w,close:N,setTitleId:S},E]),[w,E,N,S]),$=n.useMemo((()=>({open:0===w})),[w]),G={ref:b,id:i,role:c,"aria-modal":0===w||void 0,"aria-labelledby":E.titleId,"aria-describedby":U};return o.createElement(ur,{type:"Dialog",enabled:0===w,element:g,onUpdate:ve(((e,t)=>{"Dialog"===t&&_e(e,{[cr.Add]:()=>f((e=>e+1)),[cr.Remove]:()=>f((e=>e-1))})}))},o.createElement(Bt,{force:!0},o.createElement(Gt,null,o.createElement(yr.Provider,{value:H},o.createElement(Gt.Group,{target:g},o.createElement(Bt,{force:!1},o.createElement(V,{slot:$,name:"Dialog.Description"},o.createElement(Lt,{initialFocus:l,containers:C,features:_?_e(L,{parent:Lt.features.RestoreFocus,leaf:Lt.features.All&~Lt.features.FocusLock}):Lt.features.None},o.createElement(T,null,st({ourProps:G,theirProps:d,slot:$,defaultTag:"div",features:wr,visible:0===w,name:"Dialog"}))))))))),o.createElement(D,null))})),jr=pt((function(e,t){let r=Se(),{id:i=`headlessui-dialog-backdrop-${r}`,...a}=e,[{dialogState:s},l]=vr("Dialog.Backdrop"),c=et(t);n.useEffect((()=>{if(null===l.panelRef.current)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")}),[l.panelRef]);let u=n.useMemo((()=>({open:0===s})),[s]);return o.createElement(Bt,{force:!0},o.createElement(Gt,null,st({ourProps:{ref:c,id:i,"aria-hidden":!0},theirProps:a,slot:u,defaultTag:"div",name:"Dialog.Backdrop"})))})),Nr=pt((function(e,t){let r=Se(),{id:o=`headlessui-dialog-panel-${r}`,...i}=e,[{dialogState:a},s]=vr("Dialog.Panel"),l=et(t,s.panelRef),c=n.useMemo((()=>({open:0===a})),[a]);return st({ourProps:{ref:l,id:o,onClick:ve((e=>{e.stopPropagation()}))},theirProps:i,slot:c,defaultTag:"div",name:"Dialog.Panel"})})),Sr=pt((function(e,t){let r=Se(),{id:o=`headlessui-dialog-overlay-${r}`,...i}=e,[{dialogState:a,close:s}]=vr("Dialog.Overlay");return st({ourProps:{ref:et(t),id:o,"aria-hidden":!0,onClick:ve((e=>{if(e.target===e.currentTarget){if(Et(e.currentTarget))return e.preventDefault();e.preventDefault(),e.stopPropagation(),s()}}))},theirProps:i,slot:n.useMemo((()=>({open:0===a})),[a]),defaultTag:"div",name:"Dialog.Overlay"})})),_r=pt((function(e,t){let r=Se(),{id:o=`headlessui-dialog-title-${r}`,...i}=e,[{dialogState:a,setTitleId:s}]=vr("Dialog.Title"),l=et(t);n.useEffect((()=>(s(o),()=>s(null))),[o,s]);let c=n.useMemo((()=>({open:0===a})),[a]);return st({ourProps:{ref:l,id:o},theirProps:i,slot:c,defaultTag:"h2",name:"Dialog.Title"})})),kr=Object.assign(Er,{Backdrop:jr,Panel:Nr,Overlay:Sr,Title:_r,Description:mr});var Or;let Pr=null!=(Or=o.startTransition)?Or:function(e){e()};var Tr=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Tr||{}),Ir=(e=>(e[e.ToggleDisclosure=0]="ToggleDisclosure",e[e.CloseDisclosure=1]="CloseDisclosure",e[e.SetButtonId=2]="SetButtonId",e[e.SetPanelId=3]="SetPanelId",e[e.LinkPanel=4]="LinkPanel",e[e.UnlinkPanel=5]="UnlinkPanel",e))(Ir||{});let Cr={0:e=>({...e,disclosureState:_e(e.disclosureState,{0:1,1:0})}),1:e=>1===e.disclosureState?e:{...e,disclosureState:1},4:e=>!0===e.linkedPanel?e:{...e,linkedPanel:!0},5:e=>!1===e.linkedPanel?e:{...e,linkedPanel:!1},2:(e,t)=>e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId},3:(e,t)=>e.panelId===t.panelId?e:{...e,panelId:t.panelId}},Ar=n.createContext(null);function Dr(e){let t=n.useContext(Ar);if(null===t){let t=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Dr),t}return t}Ar.displayName="DisclosureContext";let Lr=n.createContext(null);function Rr(e){let t=n.useContext(Lr);if(null===t){let t=new Error(`<${e} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Rr),t}return t}Lr.displayName="DisclosureAPIContext";let Mr=n.createContext(null);function Br(e,t){return _e(t.type,Cr,e,t)}Mr.displayName="DisclosurePanelContext";let qr=n.Fragment;let Fr=it.RenderStrategy|it.Static;let zr=pt((function(e,t){let{defaultOpen:r=!1,...i}=e,a=n.useRef(null),s=et(t,Qe((e=>{a.current=e}),void 0===e.as||e.as===n.Fragment)),l=n.useRef(null),c=n.useRef(null),u=n.useReducer(Br,{disclosureState:r?0:1,linkedPanel:!1,buttonRef:c,panelRef:l,buttonId:null,panelId:null}),[{disclosureState:d,buttonId:p},f]=u,m=ve((e=>{f({type:1});let t=ke(a);if(!t||!p)return;let r=e?e instanceof HTMLElement?e:e.current instanceof HTMLElement?e.current:t.getElementById(p):t.getElementById(p);null==r||r.focus()})),h=n.useMemo((()=>({close:m})),[m]),g=n.useMemo((()=>({open:0===d,close:m})),[d,m]),b={ref:s};return o.createElement(Ar.Provider,{value:u},o.createElement(Lr.Provider,{value:h},o.createElement(xt,{value:_e(d,{0:yt.Open,1:yt.Closed})},st({ourProps:b,theirProps:i,slot:g,defaultTag:qr,name:"Disclosure"}))))})),Ur=pt((function(e,t){let r=Se(),{id:o=`headlessui-disclosure-button-${r}`,...i}=e,[a,s]=Dr("Disclosure.Button"),l=n.useContext(Mr),c=null!==l&&l===a.panelId,u=n.useRef(null),d=et(u,t,c?null:a.buttonRef),p=ct();n.useEffect((()=>{if(!c)return s({type:2,buttonId:o}),()=>{s({type:2,buttonId:null})}}),[o,s,c]);let f=ve((e=>{var t;if(c){if(1===a.disclosureState)return;switch(e.key){case kt.Space:case kt.Enter:e.preventDefault(),e.stopPropagation(),s({type:0}),null==(t=a.buttonRef.current)||t.focus()}}else switch(e.key){case kt.Space:case kt.Enter:e.preventDefault(),e.stopPropagation(),s({type:0})}})),m=ve((e=>{if(e.key===kt.Space)e.preventDefault()})),h=ve((t=>{var r;Et(t.currentTarget)||e.disabled||(c?(s({type:0}),null==(r=a.buttonRef.current)||r.focus()):s({type:0}))})),g=n.useMemo((()=>({open:0===a.disclosureState})),[a]),b=Je(e,u);return st({mergeRefs:p,ourProps:c?{ref:d,type:b,onKeyDown:f,onClick:h}:{ref:d,id:o,type:b,"aria-expanded":0===a.disclosureState,"aria-controls":a.linkedPanel?a.panelId:void 0,onKeyDown:f,onKeyUp:m,onClick:h},theirProps:i,slot:g,defaultTag:"button",name:"Disclosure.Button"})})),Vr=pt((function(e,t){let r=Se(),{id:i=`headlessui-disclosure-panel-${r}`,...a}=e,[s,l]=Dr("Disclosure.Panel"),{close:c}=Rr("Disclosure.Panel"),u=ct(),d=et(t,s.panelRef,(e=>{Pr((()=>l({type:e?4:5})))}));n.useEffect((()=>(l({type:3,panelId:i}),()=>{l({type:3,panelId:null})})),[i,l]);let p=vt(),f=null!==p?(p&yt.Open)===yt.Open:0===s.disclosureState,m=n.useMemo((()=>({open:0===s.disclosureState,close:c})),[s,c]),h={ref:d,id:i};return o.createElement(Mr.Provider,{value:s.panelId},st({mergeRefs:u,ourProps:h,theirProps:a,slot:m,defaultTag:"div",features:Fr,visible:f,name:"Disclosure.Panel"}))})),Hr=Object.assign(zr,{Button:Ur,Panel:Vr}),$r=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function Gr(e){var t,r;let n=null!=(t=e.innerText)?t:"",o=e.cloneNode(!0);if(!(o instanceof HTMLElement))return n;let i=!1;for(let s of o.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))s.remove(),i=!0;let a=i?null!=(r=o.innerText)?r:"":n;return $r.test(a)&&(a=a.replace($r,"")),a}function Wr(e){let t=n.useRef(""),r=n.useRef("");return ve((()=>{let n=e.current;if(!n)return"";let o=n.innerText;if(t.current===o)return r.current;let i=function(e){let t=e.getAttribute("aria-label");if("string"==typeof t)return t.trim();let r=e.getAttribute("aria-labelledby");if(r){let e=r.split(" ").map((e=>{let t=document.getElementById(e);if(t){let e=t.getAttribute("aria-label");return"string"==typeof e?e.trim():Gr(t).trim()}return null})).filter(Boolean);if(e.length>0)return e.join(", ")}return Gr(e).trim()}(n).trim().toLowerCase();return t.current=o,r.current=i,i}))}var Kr,Yr=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Yr||{}),Zr=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Zr||{}),Jr=((Kr=Jr||{})[Kr.OpenMenu=0]="OpenMenu",Kr[Kr.CloseMenu=1]="CloseMenu",Kr[Kr.GoToItem=2]="GoToItem",Kr[Kr.Search=3]="Search",Kr[Kr.ClearSearch=4]="ClearSearch",Kr[Kr.RegisterItem=5]="RegisterItem",Kr[Kr.UnregisterItem=6]="UnregisterItem",Kr);function Xr(e,t=e=>e){let r=null!==e.activeItemIndex?e.items[e.activeItemIndex]:null,n=Ue(t(e.items.slice()),(e=>e.dataRef.current.domRef.current)),o=r?n.indexOf(r):null;return-1===o&&(o=null),{items:n,activeItemIndex:o}}let Qr={1:e=>1===e.menuState?e:{...e,activeItemIndex:null,menuState:1},0:e=>0===e.menuState?e:{...e,__demoMode:!1,menuState:0},2:(e,t)=>{var r;let n=Xr(e),o=St(t,{resolveItems:()=>n.items,resolveActiveIndex:()=>n.activeItemIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.current.disabled});return{...e,...n,searchQuery:"",activeItemIndex:o,activationTrigger:null!=(r=t.trigger)?r:1}},3:(e,t)=>{let r=""!==e.searchQuery?0:1,n=e.searchQuery+t.value.toLowerCase(),o=(null!==e.activeItemIndex?e.items.slice(e.activeItemIndex+r).concat(e.items.slice(0,e.activeItemIndex+r)):e.items).find((e=>{var t;return(null==(t=e.dataRef.current.textValue)?void 0:t.startsWith(n))&&!e.dataRef.current.disabled})),i=o?e.items.indexOf(o):-1;return-1===i||i===e.activeItemIndex?{...e,searchQuery:n}:{...e,searchQuery:n,activeItemIndex:i,activationTrigger:1}},4:e=>""===e.searchQuery?e:{...e,searchQuery:"",searchActiveItemIndex:null},5:(e,t)=>{let r=Xr(e,(e=>[...e,{id:t.id,dataRef:t.dataRef}]));return{...e,...r}},6:(e,t)=>{let r=Xr(e,(e=>{let r=e.findIndex((e=>e.id===t.id));return-1!==r&&e.splice(r,1),e}));return{...e,...r,activationTrigger:1}}},en=n.createContext(null);function tn(e){let t=n.useContext(en);if(null===t){let t=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,tn),t}return t}function rn(e,t){return _e(t.type,Qr,e,t)}en.displayName="MenuContext";let nn=n.Fragment;let on=it.RenderStrategy|it.Static;let an=n.Fragment;let sn=pt((function(e,t){let{__demoMode:r=!1,...i}=e,a=n.useReducer(rn,{__demoMode:r,menuState:r?0:1,buttonRef:n.createRef(),itemsRef:n.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:s,itemsRef:l,buttonRef:c},u]=a,d=et(t);Ke([c,l],((e,t)=>{var r;u({type:1}),Me(t,Re.Loose)||(e.preventDefault(),null==(r=c.current)||r.focus())}),0===s);let p=ve((()=>{u({type:1})})),f=n.useMemo((()=>({open:0===s,close:p})),[s,p]),m={ref:d};return o.createElement(en.Provider,{value:a},o.createElement(xt,{value:_e(s,{0:yt.Open,1:yt.Closed})},st({ourProps:m,theirProps:i,slot:f,defaultTag:nn,name:"Menu"})))})),ln=pt((function(e,t){var r;let o=Se(),{id:i=`headlessui-menu-button-${o}`,...a}=e,[s,l]=tn("Menu.Button"),c=et(s.buttonRef,t),u=Ee(),d=ve((e=>{switch(e.key){case kt.Space:case kt.Enter:case kt.ArrowDown:e.preventDefault(),e.stopPropagation(),l({type:0}),u.nextFrame((()=>l({type:2,focus:Nt.First})));break;case kt.ArrowUp:e.preventDefault(),e.stopPropagation(),l({type:0}),u.nextFrame((()=>l({type:2,focus:Nt.Last})))}})),p=ve((e=>{if(e.key===kt.Space)e.preventDefault()})),f=ve((t=>{if(Et(t.currentTarget))return t.preventDefault();e.disabled||(0===s.menuState?(l({type:1}),u.nextFrame((()=>{var e;return null==(e=s.buttonRef.current)?void 0:e.focus({preventScroll:!0})}))):(t.preventDefault(),l({type:0})))})),m=n.useMemo((()=>({open:0===s.menuState})),[s]);return st({ourProps:{ref:c,id:i,type:Je(e,s.buttonRef),"aria-haspopup":"menu","aria-controls":null==(r=s.itemsRef.current)?void 0:r.id,"aria-expanded":0===s.menuState,onKeyDown:d,onKeyUp:p,onClick:f},theirProps:a,slot:m,defaultTag:"button",name:"Menu.Button"})})),cn=pt((function(e,t){var r,o;let i=Se(),{id:a=`headlessui-menu-items-${i}`,...s}=e,[l,c]=tn("Menu.Items"),u=et(l.itemsRef,t),d=Ye(l.itemsRef),p=Ee(),f=vt(),m=null!==f?(f&yt.Open)===yt.Open:0===l.menuState;n.useEffect((()=>{let e=l.itemsRef.current;e&&0===l.menuState&&e!==(null==d?void 0:d.activeElement)&&e.focus({preventScroll:!0})}),[l.menuState,l.itemsRef,d]),function({container:e,accept:t,walk:r,enabled:o=!0}){let i=n.useRef(t),a=n.useRef(r);n.useEffect((()=>{i.current=t,a.current=r}),[t,r]),be((()=>{if(!e||!o)return;let t=ke(e);if(!t)return;let r=i.current,n=a.current,s=Object.assign((e=>r(e)),{acceptNode:r}),l=t.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,s,!1);for(;l.nextNode();)n(l.currentNode)}),[e,o,i,a])}({container:l.itemsRef.current,enabled:0===l.menuState,accept:e=>"menuitem"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}});let h=ve((e=>{var t,r;switch(p.dispose(),e.key){case kt.Space:if(""!==l.searchQuery)return e.preventDefault(),e.stopPropagation(),c({type:3,value:e.key});case kt.Enter:if(e.preventDefault(),e.stopPropagation(),c({type:1}),null!==l.activeItemIndex){let{dataRef:e}=l.items[l.activeItemIndex];null==(r=null==(t=e.current)?void 0:t.domRef.current)||r.click()}Be(l.buttonRef.current);break;case kt.ArrowDown:return e.preventDefault(),e.stopPropagation(),c({type:2,focus:Nt.Next});case kt.ArrowUp:return e.preventDefault(),e.stopPropagation(),c({type:2,focus:Nt.Previous});case kt.Home:case kt.PageUp:return e.preventDefault(),e.stopPropagation(),c({type:2,focus:Nt.First});case kt.End:case kt.PageDown:return e.preventDefault(),e.stopPropagation(),c({type:2,focus:Nt.Last});case kt.Escape:e.preventDefault(),e.stopPropagation(),c({type:1}),we().nextFrame((()=>{var e;return null==(e=l.buttonRef.current)?void 0:e.focus({preventScroll:!0})}));break;case kt.Tab:e.preventDefault(),e.stopPropagation(),c({type:1}),we().nextFrame((()=>{!function(e,t){Ve(Le(),t,{relativeTo:e})}(l.buttonRef.current,e.shiftKey?Ce.Previous:Ce.Next)}));break;default:1===e.key.length&&(c({type:3,value:e.key}),p.setTimeout((()=>c({type:4})),350))}})),g=ve((e=>{if(e.key===kt.Space)e.preventDefault()})),b=n.useMemo((()=>({open:0===l.menuState})),[l]);return st({ourProps:{"aria-activedescendant":null===l.activeItemIndex||null==(r=l.items[l.activeItemIndex])?void 0:r.id,"aria-labelledby":null==(o=l.buttonRef.current)?void 0:o.id,id:a,onKeyDown:h,onKeyUp:g,role:"menu",tabIndex:0,ref:u},theirProps:s,slot:b,defaultTag:"div",features:on,visible:m,name:"Menu.Items"})})),un=pt((function(e,t){let r=Se(),{id:o=`headlessui-menu-item-${r}`,disabled:i=!1,...a}=e,[s,l]=tn("Menu.Item"),c=null!==s.activeItemIndex&&s.items[s.activeItemIndex].id===o,u=n.useRef(null),d=et(t,u);be((()=>{if(s.__demoMode||0!==s.menuState||!c||0===s.activationTrigger)return;let e=we();return e.requestAnimationFrame((()=>{var e,t;null==(t=null==(e=u.current)?void 0:e.scrollIntoView)||t.call(e,{block:"nearest"})})),e.dispose}),[s.__demoMode,u,c,s.menuState,s.activationTrigger,s.activeItemIndex]);let p=Wr(u),f=n.useRef({disabled:i,domRef:u,get textValue(){return p()}});be((()=>{f.current.disabled=i}),[f,i]),be((()=>(l({type:5,id:o,dataRef:f}),()=>l({type:6,id:o}))),[f,o]);let m=ve((()=>{l({type:1})})),h=ve((e=>{if(i)return e.preventDefault();l({type:1}),Be(s.buttonRef.current)})),g=ve((()=>{if(i)return l({type:2,focus:Nt.Nothing});l({type:2,focus:Nt.Specific,id:o})})),b=function(){let e=n.useRef([-1,-1]);return{wasMoved(t){let r=tt(t);return(e.current[0]!==r[0]||e.current[1]!==r[1])&&(e.current=r,!0)},update(t){e.current=tt(t)}}}(),y=ve((e=>b.update(e))),v=ve((e=>{b.wasMoved(e)&&(i||c||l({type:2,focus:Nt.Specific,id:o,trigger:0}))})),x=ve((e=>{b.wasMoved(e)&&(i||c&&l({type:2,focus:Nt.Nothing}))})),w=n.useMemo((()=>({active:c,disabled:i,close:m})),[c,i,m]);return st({ourProps:{id:o,ref:d,role:"menuitem",tabIndex:!0===i?void 0:-1,"aria-disabled":!0===i||void 0,disabled:void 0,onClick:h,onFocus:g,onPointerEnter:y,onMouseEnter:y,onPointerMove:v,onMouseMove:v,onPointerLeave:x,onMouseLeave:x},theirProps:a,slot:w,defaultTag:an,name:"Menu.Item"})})),dn=Object.assign(sn,{Button:ln,Items:cn,Item:un});function pn(e,...t){e&&t.length>0&&e.classList.add(...t)}function fn(e,...t){e&&t.length>0&&e.classList.remove(...t)}function mn(e,t,r,n){let o=r?"enter":"leave",i=we(),a=void 0!==n?function(e){let t={called:!1};return(...r)=>{if(!t.called)return t.called=!0,e(...r)}}(n):()=>{};"enter"===o&&(e.removeAttribute("hidden"),e.style.display="");let s=_e(o,{enter:()=>t.enter,leave:()=>t.leave}),l=_e(o,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),c=_e(o,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return fn(e,...t.base,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),pn(e,...t.base,...s,...c),i.nextFrame((()=>{fn(e,...t.base,...s,...c),pn(e,...t.base,...s,...l),function(e,t){let r=we();if(!e)return r.dispose;let{transitionDuration:n,transitionDelay:o}=getComputedStyle(e),[i,a]=[n,o].map((e=>{let[t=0]=e.split(",").filter(Boolean).map((e=>e.includes("ms")?parseFloat(e):1e3*parseFloat(e))).sort(((e,t)=>t-e));return t})),s=i+a;if(0!==s){r.group((r=>{r.setTimeout((()=>{t(),r.dispose()}),s),r.addEventListener(e,"transitionrun",(e=>{e.target===e.currentTarget&&r.dispose()}))}));let n=r.addEventListener(e,"transitionend",(e=>{e.target===e.currentTarget&&(t(),n())}))}else t();r.add((()=>t())),r.dispose}(e,(()=>(fn(e,...t.base,...s),pn(e,...t.base,...t.entered),a())))})),i.dispose}function hn(e=""){return e.split(/\s+/).filter((e=>e.length>1))}let gn=n.createContext(null);gn.displayName="TransitionContext";var bn=(e=>(e.Visible="visible",e.Hidden="hidden",e))(bn||{});let yn=n.createContext(null);function vn(e){return"children"in e?vn(e.children):e.current.filter((({el:e})=>null!==e.current)).filter((({state:e})=>"visible"===e)).length>0}function xn(e,t){let r=ye(e),o=n.useRef([]),i=Pt(),a=Ee(),s=ve(((e,t=at.Hidden)=>{let n=o.current.findIndex((({el:t})=>t===e));-1!==n&&(_e(t,{[at.Unmount](){o.current.splice(n,1)},[at.Hidden](){o.current[n].state="hidden"}}),a.microTask((()=>{var e;!vn(o)&&i.current&&(null==(e=r.current)||e.call(r))})))})),l=ve((e=>{let t=o.current.find((({el:t})=>t===e));return t?"visible"!==t.state&&(t.state="visible"):o.current.push({el:e,state:"visible"}),()=>s(e,at.Unmount)})),c=n.useRef([]),u=n.useRef(Promise.resolve()),d=n.useRef({enter:[],leave:[],idle:[]}),p=ve(((e,r,n)=>{c.current.splice(0),t&&(t.chains.current[r]=t.chains.current[r].filter((([t])=>t!==e))),null==t||t.chains.current[r].push([e,new Promise((e=>{c.current.push(e)}))]),null==t||t.chains.current[r].push([e,new Promise((e=>{Promise.all(d.current[r].map((([e,t])=>t))).then((()=>e()))}))]),"enter"===r?u.current=u.current.then((()=>null==t?void 0:t.wait.current)).then((()=>n(r))):n(r)})),f=ve(((e,t,r)=>{Promise.all(d.current[t].splice(0).map((([e,t])=>t))).then((()=>{var e;null==(e=c.current.shift())||e()})).then((()=>r(t)))}));return n.useMemo((()=>({children:o,register:l,unregister:s,onStart:p,onStop:f,wait:u,chains:d})),[l,s,o,p,f,d,u])}function wn(){}yn.displayName="NestingContext";let En=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function jn(e){var t;let r={};for(let n of En)r[n]=null!=(t=e[n])?t:wn;return r}let Nn=it.RenderStrategy;let Sn=pt((function(e,t){let{show:r,appear:i=!1,unmount:a=!0,...s}=e,l=n.useRef(null),c=et(l,t);je();let u=vt();if(void 0===r&&null!==u&&(r=(u&yt.Open)===yt.Open),![!0,!1].includes(r))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[d,p]=n.useState(r?"visible":"hidden"),f=xn((()=>{p("hidden")})),[m,h]=n.useState(!0),g=n.useRef([r]);be((()=>{!1!==m&&g.current[g.current.length-1]!==r&&(g.current.push(r),h(!1))}),[g,r]);let b=n.useMemo((()=>({show:r,appear:i,initial:m})),[r,i,m]);n.useEffect((()=>{if(r)p("visible");else if(vn(f)){let e=l.current;if(!e)return;let t=e.getBoundingClientRect();0===t.x&&0===t.y&&0===t.width&&0===t.height&&p("hidden")}else p("hidden")}),[r,f]);let y={unmount:a},v=ve((()=>{var t;m&&h(!1),null==(t=e.beforeEnter)||t.call(e)})),x=ve((()=>{var t;m&&h(!1),null==(t=e.beforeLeave)||t.call(e)}));return o.createElement(yn.Provider,{value:f},o.createElement(gn.Provider,{value:b},st({ourProps:{...y,as:n.Fragment,children:o.createElement(_n,{ref:c,...y,...s,beforeEnter:v,beforeLeave:x})},theirProps:{},defaultTag:n.Fragment,features:Nn,visible:"visible"===d,name:"Transition"})))})),_n=pt((function(e,t){var r,i;let{beforeEnter:a,afterEnter:s,beforeLeave:l,afterLeave:c,enter:u,enterFrom:d,enterTo:p,entered:f,leave:m,leaveFrom:h,leaveTo:g,...b}=e,y=n.useRef(null),v=et(y,t),x=null==(r=b.unmount)||r?at.Unmount:at.Hidden,{show:w,appear:E,initial:j}=function(){let e=n.useContext(gn);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),[N,S]=n.useState(w?"visible":"hidden"),_=function(){let e=n.useContext(yn);if(null===e)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}(),{register:k,unregister:O}=_;n.useEffect((()=>k(y)),[k,y]),n.useEffect((()=>{if(x===at.Hidden&&y.current)return w&&"visible"!==N?void S("visible"):_e(N,{hidden:()=>O(y),visible:()=>k(y)})}),[N,y,k,O,w,x]);let P=ye({base:hn(b.className),enter:hn(u),enterFrom:hn(d),enterTo:hn(p),entered:hn(f),leave:hn(m),leaveFrom:hn(h),leaveTo:hn(g)}),T=function(e){let t=n.useRef(jn(e));return n.useEffect((()=>{t.current=jn(e)}),[e]),t}({beforeEnter:a,afterEnter:s,beforeLeave:l,afterLeave:c}),I=je();n.useEffect((()=>{if(I&&"visible"===N&&null===y.current)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}),[y,N,I]);let C=E&&w&&j,A=!I||j&&!E?"idle":w?"enter":"leave",D=function(e=0){let[t,r]=n.useState(e),o=Pt(),i=n.useCallback((e=>{o.current&&r((t=>t|e))}),[t,o]),a=n.useCallback((e=>Boolean(t&e)),[t]),s=n.useCallback((e=>{o.current&&r((t=>t&~e))}),[r,o]),l=n.useCallback((e=>{o.current&&r((t=>t^e))}),[r]);return{flags:t,addFlag:i,hasFlag:a,removeFlag:s,toggleFlag:l}}(0),L=ve((e=>_e(e,{enter:()=>{D.addFlag(yt.Opening),T.current.beforeEnter()},leave:()=>{D.addFlag(yt.Closing),T.current.beforeLeave()},idle:()=>{}}))),R=ve((e=>_e(e,{enter:()=>{D.removeFlag(yt.Opening),T.current.afterEnter()},leave:()=>{D.removeFlag(yt.Closing),T.current.afterLeave()},idle:()=>{}}))),M=xn((()=>{S("hidden"),O(y)}),_),B=n.useRef(!1);!function({immediate:e,container:t,direction:r,classes:n,onStart:o,onStop:i}){let a=Pt(),s=Ee(),l=ye(r);be((()=>{e&&(l.current="enter")}),[e]),be((()=>{let e=we();s.add(e.dispose);let r=t.current;if(r&&"idle"!==l.current&&a.current)return e.dispose(),o.current(l.current),e.add(mn(r,n.current,"enter"===l.current,(()=>{e.dispose(),i.current(l.current)}))),e.dispose}),[r])}({immediate:C,container:y,classes:P,direction:A,onStart:ye((e=>{B.current=!0,M.onStart(y,e,L)})),onStop:ye((e=>{B.current=!1,M.onStop(y,e,R),"leave"===e&&!vn(M)&&(S("hidden"),O(y))}))});let q=b,F={ref:v};return C?q={...q,className:nt(b.className,...P.current.enter,...P.current.enterFrom)}:B.current&&(q.className=nt(b.className,null==(i=y.current)?void 0:i.className),""===q.className&&delete q.className),o.createElement(yn.Provider,{value:M},o.createElement(xt,{value:_e(N,{visible:yt.Open,hidden:yt.Closed})|D.flags},st({ourProps:F,theirProps:q,defaultTag:"div",features:Nn,visible:"visible"===N,name:"Transition.Child"})))})),kn=pt((function(e,t){let r=null!==n.useContext(gn),i=null!==vt();return o.createElement(o.Fragment,null,!r&&i?o.createElement(Sn,{ref:t,...e}):o.createElement(_n,{ref:t,...e}))})),On=Object.assign(Sn,{Child:kn,Root:Sn});function Pn({title:e,titleId:t,...r},o){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const Tn=n.forwardRef(Pn);function In({title:e,titleId:t,...r},o){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Cn=n.forwardRef(In);window.y=window.y||{},window.wi=window.wi||{},window.Fp=window.Fp||{},window.Nc=window.Nc||{};const An="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCI+PHJlY3Qgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIGZpbGw9IiNlMWUxZTEiLz48dGV4dCB4PSI1MCIgeT0iNTAiIGZvbnQtc2l6ZT0iMTgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGFsaWdubWVudC1iYXNlbGluZT0ibWlkZGxlIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZmlsbD0iIzg4OCI+U2luIEltYWdlbjwvdGV4dD48L3N2Zz4=";function Dn(...e){return e.filter(Boolean).join(" ")}function Ln({showOnlyAuth:e=!1}){const t=u();d();const{isAuthenticated:o,user:i,logout:a,loading:s}=W(),l=(null==i?void 0:i.profileImage)||An,c=e=>{e.target.src!==An&&(console.warn(`NavBar: Error al cargar ${e.target.src}, usando fallback.`),e.target.src=An)};n.useEffect((()=>{const e=localStorage.getItem("token");if(e)try{1e3*JSON.parse(atob(e.split(".")[1])).exp<Date.now()&&(console.log("Token expirado en NavBar, cerrando sesi√≥n..."),a(!0))}catch(r){console.error("Error al verificar token en NavBar:",r),a(!0)}const t=setInterval((()=>{const e=localStorage.getItem("token");if(e)try{const r=1e3*JSON.parse(atob(e.split(".")[1])).exp,n=r-Date.now(),o=Math.floor(n/6e4);if(n>0&&n<12e4){console.warn(`‚ö†Ô∏è Token expirar√° pronto (en ${o} minutos)`);try{window.dispatchEvent(new CustomEvent("tokenExpiringWarning",{detail:{minutesRemaining:o}}))}catch(ot){console.error("Error al disparar evento de advertencia:",ot)}}if(r<Date.now()){console.log("Token expirado durante la verificaci√≥n peri√≥dica en NavBar, cerrando sesi√≥n...");try{window.dispatchEvent(new CustomEvent("userLoggedOut",{detail:{reason:"token_expired"}})),localStorage.removeItem("token"),localStorage.removeItem("userData"),localStorage.removeItem("userResponse"),localStorage.removeItem("tempToken"),localStorage.removeItem("email"),localStorage.removeItem("name"),localStorage.removeItem("role"),a(!0)}catch(ot){console.error("Error al manejar expiraci√≥n de token:",ot),window.location.href="/login"}clearInterval(t)}}catch(ot){console.error("Error al verificar token peri√≥dicamente:",ot),a(!0)}else o&&(console.warn("NavBar detect√≥ estado inconsistente: autenticado pero sin token"),a(!0))}),6e4);return()=>{clearInterval(t)}}),[a,o]);const f=[{name:"Inicio",href:"/",current:"/"===t.pathname},{name:"Blogs",href:"/ver-blogs",current:"/ver-blogs"===t.pathname},{name:"Propiedades",href:"/propiedades",current:"/propiedades"===t.pathname}],m=[{name:"A√±adir Blog",href:"/crear-blog",current:"/crear-blog"===t.pathname},{name:"A√±adir Propiedad",href:"/add-property",current:"/add-property"===t.pathname}],h=[];if(e)return r.jsx(Hr,{as:"nav",className:"bg-black text-white shadow-md",children:({open:e})=>r.jsx(r.Fragment,{children:r.jsx("div",{className:"mx-auto max-w-7xl px-2 sm:px-4 lg:px-8",children:r.jsxs("div",{className:"flex justify-between h-16",children:[r.jsx("div",{className:"flex",children:r.jsxs(p,{to:"/",className:"flex-shrink-0 flex items-center",children:[r.jsx("img",{className:"h-6 w-auto sm:h-8",src:"/logo.jpg",alt:"Logo"}),r.jsx("span",{className:"ml-2 text-sm sm:text-xl font-bold text-white",children:"GozaMadrid - Subir Im√°genes"})]})}),r.jsx("div",{className:"flex items-center",children:o?r.jsxs(dn,{as:"div",className:"relative ml-3",children:[r.jsx("div",{children:r.jsxs(dn.Button,{className:"flex rounded-full bg-gray-800 text-sm focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800",children:[r.jsx("span",{className:"sr-only",children:"Abrir men√∫ de usuario"}),s?r.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white"})}):r.jsx("img",{className:"h-8 w-8 rounded-full object-cover",src:l,alt:"Foto de perfil",onError:c})]})}),r.jsx(On,{as:n.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:r.jsx(dn.Items,{className:"absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:r.jsx(dn.Item,{children:({active:e})=>r.jsx("button",{onClick:()=>a(!0),className:Dn(e?"bg-gray-100":"","block w-full text-left px-4 py-2 text-sm text-gray-700"),children:"Cerrar Sesi√≥n"})})})})]}):r.jsx(p,{to:"/login",className:"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"Iniciar Sesi√≥n"})})]})})})});let g=[...f];return o&&(g=[...g,...m],"admin"!==(null==i?void 0:i.role)&&"ADMIN"!==(null==i?void 0:i.role)&&!0!==(null==i?void 0:i.isAdmin)||(g=[...g,...h])),r.jsx(Hr,{as:"nav",className:"bg-black text-white shadow-md sticky top-0 z-50",children:({open:e})=>r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"mx-auto max-w-7xl px-2 sm:px-4 lg:px-8",children:r.jsxs("div",{className:"relative flex h-14 sm:h-16 items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsxs(p,{to:"/",className:"flex-shrink-0 flex items-center",children:[r.jsx("img",{className:"h-6 w-auto sm:h-8",src:"/logo.jpg",alt:"Logo"}),r.jsx("span",{className:"ml-1 sm:ml-2 text-sm sm:text-base md:text-xl font-bold text-white truncate max-w-[120px] sm:max-w-none",children:"GozaMadrid"})]}),r.jsx("div",{className:"hidden md:ml-4 lg:ml-6 md:flex md:space-x-2 lg:space-x-4",children:g.map((e=>r.jsx(p,{to:e.href,className:Dn(e.current?"border-blue-400 text-blue-400":"border-transparent text-gray-300 hover:text-white hover:border-gray-300","inline-flex items-center px-1 sm:px-2 lg:px-3 py-2 border-b-2 text-xs sm:text-sm font-medium transition-colors duration-200"),"aria-current":e.current?"page":void 0,children:e.name},e.name)))})]}),r.jsx("div",{className:"hidden md:flex md:items-center",children:o?r.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3",children:[r.jsx("span",{className:"hidden lg:block text-gray-300 text-sm",children:(null==i?void 0:i.name)||"Usuario"}),r.jsxs(dn,{as:"div",className:"relative",children:[r.jsxs(dn.Button,{className:"flex rounded-full bg-gray-800 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 ring-offset-2 ring-offset-black",children:[r.jsx("span",{className:"sr-only",children:"Abrir men√∫ de usuario"}),s?r.jsx("div",{className:"w-8 h-8 lg:h-9 lg:w-9 rounded-full bg-gray-600 flex items-center justify-center border-2 border-gray-700",children:r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white"})}):r.jsx("img",{className:"h-8 w-8 lg:h-9 lg:w-9 rounded-full object-cover border-2 border-gray-700",src:l,alt:"Perfil",onError:c})]}),r.jsx(On,{as:n.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:r.jsxs(dn.Items,{className:"absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:[r.jsx(dn.Item,{children:({active:e})=>r.jsx(p,{to:"/cambiar-perfil",className:Dn(e?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700"),children:"Cambiar mi perfil"})}),r.jsx(dn.Item,{children:({active:e})=>r.jsx("button",{onClick:()=>a(!0),className:Dn(e?"bg-gray-100":"","block w-full text-left px-4 py-2 text-sm text-gray-700"),children:"Cerrar Sesi√≥n"})})]})})]})]}):r.jsx(p,{to:"/login",className:"text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium",children:"Iniciar Sesi√≥n"})}),r.jsxs("div",{className:"flex items-center md:hidden",children:[o&&r.jsx("div",{className:"flex items-center mr-2",children:s?r.jsx("div",{className:"w-7 h-7 rounded-full bg-gray-600 flex items-center justify-center border border-gray-700",children:r.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-t-2 border-b-2 border-white"})}):r.jsx("img",{className:"h-7 w-7 rounded-full object-cover border border-gray-700",src:l,alt:"Perfil",onError:c})}),r.jsxs(Hr.Button,{className:"inline-flex items-center justify-center p-2 rounded-md text-gray-300 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-400",children:[r.jsx("span",{className:"sr-only",children:"Abrir men√∫ principal"}),e?r.jsx(Cn,{className:"block h-6 w-6","aria-hidden":"true"}):r.jsx(Tn,{className:"block h-6 w-6","aria-hidden":"true"})]})]})]})}),r.jsx(Hr.Panel,{className:"md:hidden bg-gray-900",children:r.jsxs("div",{className:"space-y-1 px-2 pb-3 pt-2",children:[g.map((e=>r.jsx(Hr.Button,{as:p,to:e.href,className:Dn(e.current?"bg-gray-800 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white","block rounded-md px-3 py-2 text-base font-medium"),"aria-current":e.current?"page":void 0,children:e.name},e.name))),o&&r.jsxs("div",{className:"border-t border-gray-700 pt-2 mt-2",children:[r.jsxs("div",{className:"flex items-center px-3 py-2",children:[s?r.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center mr-2",children:r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white"})}):r.jsx("img",{className:"h-8 w-8 rounded-full mr-2 object-cover",src:l,alt:"Perfil",onError:c}),r.jsx("span",{className:"text-gray-300 text-sm font-medium",children:(null==i?void 0:i.name)||"Usuario"})]}),r.jsxs("div",{className:"mt-1",children:[r.jsx(p,{to:"/cambiar-perfil",className:"block text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-base font-medium",children:"Cambiar mi perfil"}),r.jsx("button",{onClick:()=>a(!0),className:"w-full text-left text-gray-300 hover:bg-gray-700 hover:text-white px-3 py-2 rounded-md text-base font-medium",children:"Cerrar Sesi√≥n"})]})]})]})})]})})}const Rn=()=>(n.useEffect((()=>{try{const e=localStorage.getItem("profilePic");if(e){(new Image).src=e}}catch(e){console.error("Error al precargar imagen:",e)}}),[]),null),Mn=({children:e,delay:t=100})=>{const[o,i]=n.useState(!1);if(n.useEffect((()=>{const e=setTimeout((()=>{i(!0)}),t);return()=>clearTimeout(e)}),[t]),!o)return r.jsx("div",{className:"flex items-center justify-center p-4",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})});try{return r.jsx(r.Fragment,{children:e})}catch(a){return console.error("Error en SafeRender:",a),r.jsxs("div",{className:"text-center p-4",children:[r.jsx("p",{className:"text-red-500",children:"Ocurri√≥ un error al renderizar este componente."}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Recargar p√°gina"})]})}},Bn=n.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),qn=n.createContext({}),Fn=n.createContext(null),zn="undefined"!=typeof document,Un=zn?n.useLayoutEffect:n.useEffect,Vn=n.createContext({strict:!1}),Hn=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),$n="data-"+Hn("framerAppearId");function Gn(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Wn(e){return"string"==typeof e||Array.isArray(e)}function Kn(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}const Yn=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Zn=["initial",...Yn];function Jn(e){return Kn(e.animate)||Zn.some((t=>Wn(e[t])))}function Xn(e){return Boolean(Jn(e)||e.variants)}function Qn(e){const{initial:t,animate:r}=function(e,t){if(Jn(e)){const{initial:t,animate:r}=e;return{initial:!1===t||Wn(t)?t:void 0,animate:Wn(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,n.useContext(qn));return n.useMemo((()=>({initial:t,animate:r})),[eo(t),eo(r)])}function eo(e){return Array.isArray(e)?e.join(" "):e}const to={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ro={};for(const vE in to)ro[vE]={isEnabled:e=>to[vE].some((t=>!!e[t]))};const no=n.createContext({}),oo=n.createContext({}),io=Symbol.for("motionComponentSymbol");function ao({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:o,Component:i}){e&&function(e){for(const t in e)ro[t]={...ro[t],...e[t]}}(e);const a=n.forwardRef((function(a,s){let l;const c={...n.useContext(Bn),...a,layoutId:so(a)},{isStatic:u}=c,d=Qn(a),p=o(a,u);if(!u&&zn){d.visualElement=function(e,t,r,o){const{visualElement:i}=n.useContext(qn),a=n.useContext(Vn),s=n.useContext(Fn),l=n.useContext(Bn).reducedMotion,c=n.useRef();o=o||a.renderer,!c.current&&o&&(c.current=o(e,{visualState:t,parent:i,props:r,presenceContext:s,blockInitialAnimation:!!s&&!1===s.initial,reducedMotionConfig:l}));const u=c.current;n.useInsertionEffect((()=>{u&&u.update(r,s)}));const d=n.useRef(Boolean(r[$n]&&!window.HandoffComplete));return Un((()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())})),n.useEffect((()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))})),u}(i,p,c,t);const r=n.useContext(oo),o=n.useContext(Vn).strict;d.visualElement&&(l=d.visualElement.loadFeatures(c,o,e,r))}return n.createElement(qn.Provider,{value:d},l&&d.visualElement?n.createElement(l,{visualElement:d.visualElement,...c}):null,r(i,a,function(e,t,r){return n.useCallback((n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),r&&("function"==typeof r?r(n):Gn(r)&&(r.current=n))}),[t])}(p,d.visualElement,s),p,u,d.visualElement))}));return a[io]=i,a}function so({layoutId:e}){const t=n.useContext(no).id;return t&&void 0!==e?t+"-"+e:e}function lo(e){function t(t,r={}){return ao(e(t,r))}if("undefined"==typeof Proxy)return t;const r=new Map;return new Proxy(t,{get:(e,n)=>(r.has(n)||r.set(n,t(n)),r.get(n))})}const co=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function uo(e){return"string"==typeof e&&!e.includes("-")&&!!(co.indexOf(e)>-1||/[A-Z]/.test(e))}const po={};const fo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],mo=new Set(fo);function ho(e,{layout:t,layoutId:r}){return mo.has(e)||e.startsWith("origin")||(t||void 0!==r)&&(!!po[e]||"opacity"===e)}const go=e=>Boolean(e&&e.getVelocity),bo={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},yo=fo.length;const vo=e=>t=>"string"==typeof t&&t.startsWith(e),xo=vo("--"),wo=vo("var(--"),Eo=(e,t)=>t&&"number"==typeof e?t.transform(e):e,jo=(e,t,r)=>Math.min(Math.max(r,e),t),No={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},So={...No,transform:e=>jo(0,1,e)},_o={...No,default:1},ko=e=>Math.round(1e5*e)/1e5,Oo=/(-)?([\d]*\.?[\d])+/g,Po=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,To=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Io(e){return"string"==typeof e}const Co=e=>({test:t=>Io(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),Ao=Co("deg"),Do=Co("%"),Lo=Co("px"),Ro=Co("vh"),Mo=Co("vw"),Bo={...Do,parse:e=>Do.parse(e)/100,transform:e=>Do.transform(100*e)},qo={...No,transform:Math.round},Fo={borderWidth:Lo,borderTopWidth:Lo,borderRightWidth:Lo,borderBottomWidth:Lo,borderLeftWidth:Lo,borderRadius:Lo,radius:Lo,borderTopLeftRadius:Lo,borderTopRightRadius:Lo,borderBottomRightRadius:Lo,borderBottomLeftRadius:Lo,width:Lo,maxWidth:Lo,height:Lo,maxHeight:Lo,size:Lo,top:Lo,right:Lo,bottom:Lo,left:Lo,padding:Lo,paddingTop:Lo,paddingRight:Lo,paddingBottom:Lo,paddingLeft:Lo,margin:Lo,marginTop:Lo,marginRight:Lo,marginBottom:Lo,marginLeft:Lo,rotate:Ao,rotateX:Ao,rotateY:Ao,rotateZ:Ao,scale:_o,scaleX:_o,scaleY:_o,scaleZ:_o,skew:Ao,skewX:Ao,skewY:Ao,distance:Lo,translateX:Lo,translateY:Lo,translateZ:Lo,x:Lo,y:Lo,z:Lo,perspective:Lo,transformPerspective:Lo,opacity:So,originX:Bo,originY:Bo,originZ:Lo,zIndex:qo,fillOpacity:So,strokeOpacity:So,numOctaves:qo};function zo(e,t,r,n){const{style:o,vars:i,transform:a,transformOrigin:s}=e;let l=!1,c=!1,u=!0;for(const d in t){const e=t[d];if(xo(d)){i[d]=e;continue}const r=Fo[d],n=Eo(e,r);if(mo.has(d)){if(l=!0,a[d]=n,!u)continue;e!==(r.default||0)&&(u=!1)}else d.startsWith("origin")?(c=!0,s[d]=n):o[d]=n}if(t.transform||(l||n?o.transform=function(e,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},n,o){let i="";for(let a=0;a<yo;a++){const t=fo[a];void 0!==e[t]&&(i+=`${bo[t]||t}(${e[t]}) `)}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),o?i=o(e,n?"":i):r&&n&&(i="none"),i}(e.transform,r,u,n):o.transform&&(o.transform="none")),c){const{originX:e="50%",originY:t="50%",originZ:r=0}=s;o.transformOrigin=`${e} ${t} ${r}`}}const Uo=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Vo(e,t,r){for(const n in t)go(t[n])||ho(n,r)||(e[n]=t[n])}function Ho(e,t,r){const o={};return Vo(o,e.style||{},e),Object.assign(o,function({transformTemplate:e},t,r){return n.useMemo((()=>{const n={style:{},transform:{},transformOrigin:{},vars:{}};return zo(n,t,{enableHardwareAcceleration:!r},e),Object.assign({},n.vars,n.style)}),[t])}(e,t,r)),e.transformValues?e.transformValues(o):o}function $o(e,t,r){const n={},o=Ho(e,t,r);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=o,n}const Go=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Wo(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Go.has(e)}let Ko=e=>!Wo(e);try{(Yo=require("@emotion/is-prop-valid").default)&&(Ko=e=>e.startsWith("on")?!Wo(e):Yo(e))}catch(yE){}var Yo;function Zo(e,t,r){return"string"==typeof e?e:Lo.transform(t+r*e)}const Jo={offset:"stroke-dashoffset",array:"stroke-dasharray"},Xo={offset:"strokeDashoffset",array:"strokeDasharray"};function Qo(e,{attrX:t,attrY:r,attrScale:n,originX:o,originY:i,pathLength:a,pathSpacing:s=1,pathOffset:l=0,...c},u,d,p){if(zo(e,c,u,p),d)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:f,style:m,dimensions:h}=e;f.transform&&(h&&(m.transform=f.transform),delete f.transform),h&&(void 0!==o||void 0!==i||m.transform)&&(m.transformOrigin=function(e,t,r){return`${Zo(t,e.x,e.width)} ${Zo(r,e.y,e.height)}`}(h,void 0!==o?o:.5,void 0!==i?i:.5)),void 0!==t&&(f.x=t),void 0!==r&&(f.y=r),void 0!==n&&(f.scale=n),void 0!==a&&function(e,t,r=1,n=0,o=!0){e.pathLength=1;const i=o?Jo:Xo;e[i.offset]=Lo.transform(-n);const a=Lo.transform(t),s=Lo.transform(r);e[i.array]=`${a} ${s}`}(f,a,s,l,!1)}const ei=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),ti=e=>"string"==typeof e&&"svg"===e.toLowerCase();function ri(e,t,r,o){const i=n.useMemo((()=>{const r={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return Qo(r,t,{enableHardwareAcceleration:!1},ti(o),e.transformTemplate),{...r.attrs,style:{...r.style}}}),[t]);if(e.style){const t={};Vo(t,e.style,e),i.style={...t,...i.style}}return i}function ni(e=!1){return(t,r,o,{latestValues:i},a)=>{const s=(uo(t)?ri:$o)(r,i,a,t),l=function(e,t,r){const n={};for(const o in e)"values"===o&&"object"==typeof e.values||(Ko(o)||!0===r&&Wo(o)||!t&&!Wo(o)||e.draggable&&o.startsWith("onDrag"))&&(n[o]=e[o]);return n}(r,"string"==typeof t,e),c={...l,...s,ref:o},{children:u}=r,d=n.useMemo((()=>go(u)?u.get():u),[u]);return n.createElement(t,{...c,children:d})}}function oi(e,{style:t,vars:r},n,o){Object.assign(e.style,t,o&&o.getProjectionStyles(n));for(const i in r)e.style.setProperty(i,r[i])}const ii=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ai(e,t,r,n){oi(e,t,void 0,n);for(const o in t.attrs)e.setAttribute(ii.has(o)?o:Hn(o),t.attrs[o])}function si(e,t){const{style:r}=e,n={};for(const o in r)(go(r[o])||t.style&&go(t.style[o])||ho(o,e))&&(n[o]=r[o]);return n}function li(e,t){const r=si(e,t);for(const n in e)if(go(e[n])||go(t[n])){r[-1!==fo.indexOf(n)?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n]=e[n]}return r}function ci(e,t,r,n={},o={}){return"function"==typeof t&&(t=t(void 0!==r?r:e.custom,n,o)),"string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t&&(t=t(void 0!==r?r:e.custom,n,o)),t}const ui=e=>Array.isArray(e);function di(e){const t=go(e)?e.get():e;return r=t,Boolean(r&&"object"==typeof r&&r.mix&&r.toValue)?t.toValue():t;var r}const pi=e=>(t,r)=>{const o=n.useContext(qn),i=n.useContext(Fn),a=()=>function({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},n,o,i){const a={latestValues:fi(n,o,i,e),renderState:t()};return r&&(a.mount=e=>r(n,e,a)),a}(e,t,o,i);return r?a():function(e){const t=n.useRef(null);return null===t.current&&(t.current=e()),t.current}(a)};function fi(e,t,r,n){const o={},i=n(e,{});for(const p in i)o[p]=di(i[p]);let{initial:a,animate:s}=e;const l=Jn(e),c=Xn(e);t&&c&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===s&&(s=t.animate));let u=!!r&&!1===r.initial;u=u||!1===a;const d=u?s:a;if(d&&"boolean"!=typeof d&&!Kn(d)){(Array.isArray(d)?d:[d]).forEach((t=>{const r=ci(e,t);if(!r)return;const{transitionEnd:n,transition:i,...a}=r;for(const e in a){let t=a[e];if(Array.isArray(t)){t=t[u?t.length-1:0]}null!==t&&(o[e]=t)}for(const e in n)o[e]=n[e]}))}return o}const mi=e=>e;class hi{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);-1!==t&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}const gi=["prepare","read","update","preRender","render","postRender"];const{schedule:bi,cancel:yi,state:vi,steps:xi}=function(e,t){let r=!1,n=!0;const o={delta:0,timestamp:0,isProcessing:!1},i=gi.reduce(((e,t)=>(e[t]=function(e){let t=new hi,r=new hi,n=0,o=!1,i=!1;const a=new WeakSet,s={schedule:(e,i=!1,s=!1)=>{const l=s&&o,c=l?t:r;return i&&a.add(e),c.add(e)&&l&&o&&(n=t.order.length),e},cancel:e=>{r.remove(e),a.delete(e)},process:l=>{if(o)i=!0;else{if(o=!0,[t,r]=[r,t],r.clear(),n=t.order.length,n)for(let r=0;r<n;r++){const n=t.order[r];n(l),a.has(n)&&(s.schedule(n),e())}o=!1,i&&(i=!1,s.process(l))}}};return s}((()=>r=!0)),e)),{}),a=e=>i[e].process(o),s=()=>{const i=performance.now();r=!1,o.delta=n?1e3/60:Math.max(Math.min(i-o.timestamp,40),1),o.timestamp=i,o.isProcessing=!0,gi.forEach(a),o.isProcessing=!1,r&&t&&(n=!1,e(s))};return{schedule:gi.reduce(((t,a)=>{const l=i[a];return t[a]=(t,i=!1,a=!1)=>(r||(r=!0,n=!0,o.isProcessing||e(s)),l.schedule(t,i,a)),t}),{}),cancel:e=>gi.forEach((t=>i[t].cancel(e))),state:o,steps:i}}("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:mi,!0),wi={useVisualState:pi({scrapeMotionValuesFromProps:li,createRenderState:ei,onMount:(e,t,{renderState:r,latestValues:n})=>{bi.read((()=>{try{r.dimensions="function"==typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(ot){r.dimensions={x:0,y:0,width:0,height:0}}})),bi.render((()=>{Qo(r,n,{enableHardwareAcceleration:!1},ti(t.tagName),e.transformTemplate),ai(t,r)}))}})},Ei={useVisualState:pi({scrapeMotionValuesFromProps:si,createRenderState:Uo})};function ji(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}const Ni=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary;function Si(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}function _i(e,t,r,n){return ji(e,t,(e=>t=>Ni(t)&&e(t,Si(t)))(r),n)}const ki=(e,t)=>r=>t(e(r)),Oi=(...e)=>e.reduce(ki);function Pi(e){let t=null;return()=>{const r=()=>{t=null};return null===t&&(t=e,r)}}const Ti=Pi("dragHorizontal"),Ii=Pi("dragVertical");function Ci(e){let t=!1;if("y"===e)t=Ii();else if("x"===e)t=Ti();else{const e=Ti(),r=Ii();e&&r?t=()=>{e(),r()}:(e&&e(),r&&r())}return t}function Ai(){const e=Ci(!0);return!e||(e(),!1)}class Di{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Li(e,t){const r="pointer"+(t?"enter":"leave"),n="onHover"+(t?"Start":"End");return _i(e.current,r,((r,o)=>{if("touch"===r.pointerType||Ai())return;const i=e.getProps();e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",t),i[n]&&bi.update((()=>i[n](r,o)))}),{passive:!e.getProps()[n]})}const Ri=(e,t)=>!!t&&(e===t||Ri(e,t.parentElement));function Mi(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,Si(r))}const Bi=new WeakMap,qi=new WeakMap,Fi=e=>{const t=Bi.get(e.target);t&&t(e)},zi=e=>{e.forEach(Fi)};function Ui(e,t,r){const n=function({root:e,...t}){const r=e||document;qi.has(r)||qi.set(r,{});const n=qi.get(r),o=JSON.stringify(t);return n[o]||(n[o]=new IntersectionObserver(zi,{root:e,...t})),n[o]}(t);return Bi.set(e,r),n.observe(e),()=>{Bi.delete(e),n.unobserve(e)}}const Vi={some:0,all:1};const Hi={inView:{Feature:class extends Di{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:n="some",once:o}=e,i={root:t?t.current:void 0,rootMargin:r,threshold:"number"==typeof n?n:Vi[n]};return Ui(this.node.current,i,(e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,o&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:r,onViewportLeave:n}=this.node.getProps(),i=t?r:n;i&&i(e)}))}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Di{constructor(){super(...arguments),this.removeStartListeners=mi,this.removeEndListeners=mi,this.removeAccessibleListeners=mi,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),n=_i(window,"pointerup",((e,t)=>{if(!this.checkPressEnd())return;const{onTap:r,onTapCancel:n,globalTapTarget:o}=this.node.getProps();bi.update((()=>{o||Ri(this.node.current,e.target)?r&&r(e,t):n&&n(e,t)}))}),{passive:!(r.onTap||r.onPointerUp)}),o=_i(window,"pointercancel",((e,t)=>this.cancelPress(e,t)),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Oi(n,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=ji(this.node.current,"keydown",(e=>{if("Enter"!==e.key||this.isPressing)return;this.removeEndListeners(),this.removeEndListeners=ji(this.node.current,"keyup",(e=>{"Enter"===e.key&&this.checkPressEnd()&&Mi("up",((e,t)=>{const{onTap:r}=this.node.getProps();r&&bi.update((()=>r(e,t)))}))})),Mi("down",((e,t)=>{this.startPress(e,t)}))})),t=ji(this.node.current,"blur",(()=>{this.isPressing&&Mi("cancel",((e,t)=>this.cancelPress(e,t)))}));this.removeAccessibleListeners=Oi(e,t)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:n}=this.node.getProps();n&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&bi.update((()=>r(e,t)))}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;return this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Ai()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&bi.update((()=>r(e,t)))}mount(){const e=this.node.getProps(),t=_i(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=ji(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Oi(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends Di{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(ot){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Oi(ji(this.node.current,"focus",(()=>this.onFocus())),ji(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends Di{mount(){this.unmount=Oi(Li(this.node,!0),Li(this.node,!1))}unmount(){}}}};function $i(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Gi(e,t,r){const n=e.getProps();return ci(n,t,void 0!==r?r:n.custom,function(e){const t={};return e.values.forEach(((e,r)=>t[r]=e.get())),t}(e),function(e){const t={};return e.values.forEach(((e,r)=>t[r]=e.getVelocity())),t}(e))}let Wi=mi,Ki=mi;const Yi=e=>1e3*e,Zi=e=>e/1e3,Ji=!1,Xi=e=>Array.isArray(e)&&"number"==typeof e[0];function Qi(e){return Boolean(!e||"string"==typeof e&&ta[e]||Xi(e)||Array.isArray(e)&&e.every(Qi))}const ea=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,ta={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ea([0,.65,.55,1]),circOut:ea([.55,0,1,.45]),backIn:ea([.31,.01,.66,-.59]),backOut:ea([.33,1.53,.69,.99])};function ra(e){if(e)return Xi(e)?ea(e):Array.isArray(e)?e.map(ra):ta[e]}const na=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e;function oa(e,t,r,n){if(e===t&&r===n)return mi;const o=t=>function(e,t,r,n,o){let i,a,s=0;do{a=t+(r-t)/2,i=na(a,n,o)-e,i>0?r=a:t=a}while(Math.abs(i)>1e-7&&++s<12);return a}(t,0,1,e,r);return e=>0===e||1===e?e:na(o(e),t,n)}const ia=oa(.42,0,1,1),aa=oa(0,0,.58,1),sa=oa(.42,0,.58,1),la=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,ca=e=>t=>1-e(1-t),ua=e=>1-Math.sin(Math.acos(e)),da=ca(ua),pa=la(ua),fa=oa(.33,1.53,.69,.99),ma=ca(fa),ha=la(ma),ga={linear:mi,easeIn:ia,easeInOut:sa,easeOut:aa,circIn:ua,circInOut:pa,circOut:da,backIn:ma,backInOut:ha,backOut:fa,anticipate:e=>(e*=2)<1?.5*ma(e):.5*(2-Math.pow(2,-10*(e-1)))},ba=e=>{if(Array.isArray(e)){Ki(4===e.length);const[t,r,n,o]=e;return oa(t,r,n,o)}return"string"==typeof e?ga[e]:e},ya=(e,t)=>r=>Boolean(Io(r)&&To.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),va=(e,t,r)=>n=>{if(!Io(n))return n;const[o,i,a,s]=n.match(Oo);return{[e]:parseFloat(o),[t]:parseFloat(i),[r]:parseFloat(a),alpha:void 0!==s?parseFloat(s):1}},xa={...No,transform:e=>Math.round((e=>jo(0,255,e))(e))},wa={test:ya("rgb","red"),parse:va("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+xa.transform(e)+", "+xa.transform(t)+", "+xa.transform(r)+", "+ko(So.transform(n))+")"};const Ea={test:ya("#"),parse:function(e){let t="",r="",n="",o="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),o=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),o=e.substring(4,5),t+=t,r+=r,n+=n,o+=o),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:o?parseInt(o,16)/255:1}},transform:wa.transform},ja={test:ya("hsl","hue"),parse:va("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Do.transform(ko(t))+", "+Do.transform(ko(r))+", "+ko(So.transform(n))+")"},Na={test:e=>wa.test(e)||Ea.test(e)||ja.test(e),parse:e=>wa.test(e)?wa.parse(e):ja.test(e)?ja.parse(e):Ea.parse(e),transform:e=>Io(e)?e:e.hasOwnProperty("red")?wa.transform(e):ja.transform(e)},Sa=(e,t,r)=>-r*e+r*t+e;function _a(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}const ka=(e,t,r)=>{const n=e*e;return Math.sqrt(Math.max(0,r*(t*t-n)+n))},Oa=[Ea,wa,ja];function Pa(e){const t=(r=e,Oa.find((e=>e.test(r))));var r;let n=t.parse(e);return t===ja&&(n=function({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,r/=100;let o=0,i=0,a=0;if(t/=100){const n=r<.5?r*(1+t):r+t-r*t,s=2*r-n;o=_a(s,n,e+1/3),i=_a(s,n,e),a=_a(s,n,e-1/3)}else o=i=a=r;return{red:Math.round(255*o),green:Math.round(255*i),blue:Math.round(255*a),alpha:n}}(n)),n}const Ta=(e,t)=>{const r=Pa(e),n=Pa(t),o={...r};return e=>(o.red=ka(r.red,n.red,e),o.green=ka(r.green,n.green,e),o.blue=ka(r.blue,n.blue,e),o.alpha=Sa(r.alpha,n.alpha,e),wa.transform(o))};const Ia={regex:/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,countKey:"Vars",token:"${v}",parse:mi},Ca={regex:Po,countKey:"Colors",token:"${c}",parse:Na.parse},Aa={regex:Oo,countKey:"Numbers",token:"${n}",parse:No.parse};function Da(e,{regex:t,countKey:r,token:n,parse:o}){const i=e.tokenised.match(t);i&&(e["num"+r]=i.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...i.map(o)))}function La(e){const t=e.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&Da(r,Ia),Da(r,Ca),Da(r,Aa),r}function Ra(e){return La(e).values}function Ma(e){const{values:t,numColors:r,numVars:n,tokenised:o}=La(e),i=t.length;return e=>{let t=o;for(let o=0;o<i;o++)t=o<n?t.replace(Ia.token,e[o]):o<n+r?t.replace(Ca.token,Na.transform(e[o])):t.replace(Aa.token,ko(e[o]));return t}}const Ba=e=>"number"==typeof e?0:e;const qa={test:function(e){var t,r;return isNaN(e)&&Io(e)&&((null===(t=e.match(Oo))||void 0===t?void 0:t.length)||0)+((null===(r=e.match(Po))||void 0===r?void 0:r.length)||0)>0},parse:Ra,createTransformer:Ma,getAnimatableNone:function(e){const t=Ra(e);return Ma(e)(t.map(Ba))}},Fa=(e,t)=>r=>`${r>0?t:e}`;function za(e,t){return"number"==typeof e?r=>Sa(e,t,r):Na.test(e)?Ta(e,t):e.startsWith("var(")?Fa(e,t):Ha(e,t)}const Ua=(e,t)=>{const r=[...e],n=r.length,o=e.map(((e,r)=>za(e,t[r])));return e=>{for(let t=0;t<n;t++)r[t]=o[t](e);return r}},Va=(e,t)=>{const r={...e,...t},n={};for(const o in r)void 0!==e[o]&&void 0!==t[o]&&(n[o]=za(e[o],t[o]));return e=>{for(const t in n)r[t]=n[t](e);return r}},Ha=(e,t)=>{const r=qa.createTransformer(t),n=La(e),o=La(t);return n.numVars===o.numVars&&n.numColors===o.numColors&&n.numNumbers>=o.numNumbers?Oi(Ua(n.values,o.values),r):Fa(e,t)},$a=(e,t,r)=>{const n=t-e;return 0===n?1:(r-e)/n},Ga=(e,t)=>r=>Sa(e,t,r);function Wa(e,t,r){const n=[],o=r||("number"==typeof(i=e[0])?Ga:"string"==typeof i?Na.test(i)?Ta:Ha:Array.isArray(i)?Ua:"object"==typeof i?Va:Ga);var i;const a=e.length-1;for(let s=0;s<a;s++){let r=o(e[s],e[s+1]);if(t){const e=Array.isArray(t)?t[s]||mi:t;r=Oi(e,r)}n.push(r)}return n}function Ka(e,t,{clamp:r=!0,ease:n,mixer:o}={}){const i=e.length;if(Ki(i===t.length),1===i)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=Wa(t,n,o),s=a.length,l=t=>{let r=0;if(s>1)for(;r<e.length-2&&!(t<e[r+1]);r++);const n=$a(e[r],e[r+1],t);return a[r](n)};return r?t=>l(jo(e[0],e[i-1],t)):l}function Ya(e){const t=[0];return function(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const o=$a(0,t,n);e.push(Sa(r,1,o))}}(t,e.length-1),t}function Za({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const o=(e=>Array.isArray(e)&&"number"!=typeof e[0])(n)?n.map(ba):ba(n),i={done:!1,value:t[0]},a=function(e,t){return e.map((e=>e*t))}(r&&r.length===t.length?r:Ya(t),e),s=Ka(a,t,{ease:Array.isArray(o)?o:(l=t,c=o,l.map((()=>c||sa)).splice(0,l.length-1))});var l,c;return{calculatedDuration:e,next:t=>(i.value=s(t),i.done=t>=e,i)}}function Ja(e,t){return t?e*(1e3/t):0}function Xa(e,t,r){const n=Math.max(t-5,0);return Ja(r-e(n),t-n)}const Qa=.001;function es({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let o,i;Wi(e<=Yi(10));let a=1-t;a=jo(.05,1,a),e=jo(.01,10,Zi(e)),a<1?(o=t=>{const n=t*a,o=n*e,i=n-r,s=rs(t,a),l=Math.exp(-o);return Qa-i/s*l},i=t=>{const n=t*a*e,i=n*r+r,s=Math.pow(a,2)*Math.pow(t,2)*e,l=Math.exp(-n),c=rs(Math.pow(t,2),a);return(-o(t)+Qa>0?-1:1)*((i-s)*l)/c}):(o=t=>Math.exp(-t*e)*((t-r)*e+1)-.001,i=t=>Math.exp(-t*e)*(e*e*(r-t)));const s=function(e,t,r){let n=r;for(let o=1;o<ts;o++)n-=e(n)/t(n);return n}(o,i,5/e);if(e=Yi(e),isNaN(s))return{stiffness:100,damping:10,duration:e};{const t=Math.pow(s,2)*n;return{stiffness:t,damping:2*a*Math.sqrt(n*t),duration:e}}}const ts=12;function rs(e,t){return e*Math.sqrt(1-t*t)}const ns=["duration","bounce"],os=["stiffness","damping","mass"];function is(e,t){return t.some((t=>void 0!==e[t]))}function as({keyframes:e,restDelta:t,restSpeed:r,...n}){const o=e[0],i=e[e.length-1],a={done:!1,value:o},{stiffness:s,damping:l,mass:c,duration:u,velocity:d,isResolvedFromDuration:p}=function(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!is(e,os)&&is(e,ns)){const r=es(e);t={...t,...r,mass:1},t.isResolvedFromDuration=!0}return t}({...n,velocity:-Zi(n.velocity||0)}),f=d||0,m=l/(2*Math.sqrt(s*c)),h=i-o,g=Zi(Math.sqrt(s/c)),b=Math.abs(h)<5;let y;if(r||(r=b?.01:2),t||(t=b?.005:.5),m<1){const e=rs(g,m);y=t=>{const r=Math.exp(-m*g*t);return i-r*((f+m*g*h)/e*Math.sin(e*t)+h*Math.cos(e*t))}}else if(1===m)y=e=>i-Math.exp(-g*e)*(h+(f+g*h)*e);else{const e=g*Math.sqrt(m*m-1);y=t=>{const r=Math.exp(-m*g*t),n=Math.min(e*t,300);return i-r*((f+m*g*h)*Math.sinh(n)+e*h*Math.cosh(n))/e}}return{calculatedDuration:p&&u||null,next:e=>{const n=y(e);if(p)a.done=e>=u;else{let o=f;0!==e&&(o=m<1?Xa(y,e,n):0);const s=Math.abs(o)<=r,l=Math.abs(i-n)<=t;a.done=s&&l}return a.value=a.done?i:n,a}}}function ss({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:o=10,bounceStiffness:i=500,modifyTarget:a,min:s,max:l,restDelta:c=.5,restSpeed:u}){const d=e[0],p={done:!1,value:d},f=e=>void 0===s?l:void 0===l||Math.abs(s-e)<Math.abs(l-e)?s:l;let m=r*t;const h=d+m,g=void 0===a?h:a(h);g!==h&&(m=g-d);const b=e=>-m*Math.exp(-e/n),y=e=>g+b(e),v=e=>{const t=b(e),r=y(e);p.done=Math.abs(t)<=c,p.value=p.done?g:r};let x,w;const E=e=>{var t;(t=p.value,void 0!==s&&t<s||void 0!==l&&t>l)&&(x=e,w=as({keyframes:[p.value,f(p.value)],velocity:Xa(y,e,p.value),damping:o,stiffness:i,restDelta:c,restSpeed:u}))};return E(0),{calculatedDuration:null,next:e=>{let t=!1;return w||void 0!==x||(t=!0,v(e),E(e)),void 0!==x&&e>x?w.next(e-x):(!t&&v(e),p)}}}const ls=e=>{const t=({timestamp:t})=>e(t);return{start:()=>bi.update(t,!0),stop:()=>yi(t),now:()=>vi.isProcessing?vi.timestamp:performance.now()}};function cs(e){let t=0;let r=e.next(t);for(;!r.done&&t<2e4;)t+=50,r=e.next(t);return t>=2e4?1/0:t}const us={decay:ss,inertia:ss,tween:Za,keyframes:Za,spring:as};function ds({autoplay:e=!0,delay:t=0,driver:r=ls,keyframes:n,type:o="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:s="loop",onPlay:l,onStop:c,onComplete:u,onUpdate:d,...p}){let f,m,h=1,g=!1;const b=()=>{m=new Promise((e=>{f=e}))};let y;b();const v=us[o]||Za;let x;v!==Za&&"number"!=typeof n[0]&&(x=Ka([0,100],n,{clamp:!1}),n=[0,100]);const w=v({...p,keyframes:n});let E;"mirror"===s&&(E=v({...p,keyframes:[...n].reverse(),velocity:-(p.velocity||0)}));let j="idle",N=null,S=null,_=null;null===w.calculatedDuration&&i&&(w.calculatedDuration=cs(w));const{calculatedDuration:k}=w;let O=1/0,P=1/0;null!==k&&(O=k+a,P=O*(i+1)-a);let T=0;const I=e=>{if(null===S)return;h>0&&(S=Math.min(S,e)),h<0&&(S=Math.min(e-P/h,S)),T=null!==N?N:Math.round(e-S)*h;const r=T-t*(h>=0?1:-1),o=h>=0?r<0:r>P;T=Math.max(r,0),"finished"===j&&null===N&&(T=P);let l=T,c=w;if(i){const e=Math.min(T,P)/O;let t=Math.floor(e),r=e%1;!r&&e>=1&&(r=1),1===r&&t--,t=Math.min(t,i+1);Boolean(t%2)&&("reverse"===s?(r=1-r,a&&(r-=a/O)):"mirror"===s&&(c=E)),l=jo(0,1,r)*O}const u=o?{done:!1,value:n[0]}:c.next(l);x&&(u.value=x(u.value));let{done:p}=u;o||null===k||(p=h>=0?T>=P:T<=0);const f=null===N&&("finished"===j||"running"===j&&p);return d&&d(u.value),f&&D(),u},C=()=>{y&&y.stop(),y=void 0},A=()=>{j="idle",C(),f(),b(),S=_=null},D=()=>{j="finished",u&&u(),C(),f()},L=()=>{if(g)return;y||(y=r(I));const e=y.now();l&&l(),null!==N?S=e-N:S&&"finished"!==j||(S=e),"finished"===j&&b(),_=S,N=null,j="running",y.start()};e&&L();const R={then:(e,t)=>m.then(e,t),get time(){return Zi(T)},set time(e){e=Yi(e),T=e,null===N&&y&&0!==h?S=y.now()-e/h:N=e},get duration(){const e=null===w.calculatedDuration?cs(w):w.calculatedDuration;return Zi(e)},get speed(){return h},set speed(e){e!==h&&y&&(h=e,R.time=Zi(T))},get state(){return j},play:L,pause:()=>{j="paused",N=T},stop:()=>{g=!0,"idle"!==j&&(j="idle",c&&c(),A())},cancel:()=>{null!==_&&I(_),A()},complete:()=>{j="finished"},sample:e=>(S=0,I(e))};return R}const ps=function(e){let t;return()=>(void 0===t&&(t=e()),t)}((()=>Object.hasOwnProperty.call(Element.prototype,"animate"))),fs=new Set(["opacity","clipPath","filter","transform","backgroundColor"]);function ms(e,t,{onUpdate:r,onComplete:n,...o}){if(!(ps()&&fs.has(t)&&!o.repeatDelay&&"mirror"!==o.repeatType&&0!==o.damping&&"inertia"!==o.type))return!1;let i,a,s=!1,l=!1;const c=()=>{a=new Promise((e=>{i=e}))};c();let{keyframes:u,duration:d=300,ease:p,times:f}=o;if(((e,t)=>"spring"===t.type||"backgroundColor"===e||!Qi(t.ease))(t,o)){const e=ds({...o,repeat:0,delay:0});let t={done:!1,value:u[0]};const r=[];let n=0;for(;!t.done&&n<2e4;)t=e.sample(n),r.push(t.value),n+=10;f=void 0,u=r,d=n-10,p="linear"}const m=function(e,t,r,{delay:n=0,duration:o,repeat:i=0,repeatType:a="loop",ease:s,times:l}={}){const c={[t]:r};l&&(c.offset=l);const u=ra(s);return Array.isArray(u)&&(c.easing=u),e.animate(c,{delay:n,duration:o,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:"reverse"===a?"alternate":"normal"})}(e.owner.current,t,u,{...o,duration:d,ease:p,times:f}),h=()=>{l=!1,m.cancel()},g=()=>{l=!0,bi.update(h),i(),c()};m.onfinish=()=>{l||(e.set(function(e,{repeat:t,repeatType:r="loop"}){return e[t&&"loop"!==r&&t%2==1?0:e.length-1]}(u,o)),n&&n(),g())};return{then:(e,t)=>a.then(e,t),attachTimeline:e=>(m.timeline=e,m.onfinish=null,mi),get time(){return Zi(m.currentTime||0)},set time(e){m.currentTime=Yi(e)},get speed(){return m.playbackRate},set speed(e){m.playbackRate=e},get duration(){return Zi(d)},play:()=>{s||(m.play(),yi(h))},pause:()=>m.pause(),stop:()=>{if(s=!0,"idle"===m.playState)return;const{currentTime:t}=m;if(t){const r=ds({...o,autoplay:!1});e.setWithVelocity(r.sample(t-10).value,r.sample(t).value,10)}g()},complete:()=>{l||m.finish()},cancel:g}}const hs={type:"spring",stiffness:500,damping:25,restSpeed:10},gs={type:"keyframes",duration:.8},bs={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ys=(e,{keyframes:t})=>t.length>2?gs:mo.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:hs:bs,vs=(e,t)=>"zIndex"!==e&&(!("number"!=typeof t&&!Array.isArray(t))||!("string"!=typeof t||!qa.test(t)&&"0"!==t||t.startsWith("url("))),xs=new Set(["brightness","contrast","saturate","opacity"]);function ws(e){const[t,r]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[n]=r.match(Oo)||[];if(!n)return e;const o=r.replace(n,"");let i=xs.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+o+")"}const Es=/([a-z-]*)\(.*?\)/g,js={...qa,getAnimatableNone:e=>{const t=e.match(Es);return t?t.map(ws).join(" "):e}},Ns={...Fo,color:Na,backgroundColor:Na,outlineColor:Na,fill:Na,stroke:Na,borderColor:Na,borderTopColor:Na,borderRightColor:Na,borderBottomColor:Na,borderLeftColor:Na,filter:js,WebkitFilter:js},Ss=e=>Ns[e];function _s(e,t){let r=Ss(e);return r!==js&&(r=qa),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const ks=e=>/^0[^.\s]+$/.test(e);function Os(e){return"number"==typeof e?0===e:null!==e?"none"===e||"0"===e||ks(e):void 0}function Ps(e,t){return e[t]||e.default||e}const Ts=!1,Is=(e,t,r,n={})=>o=>{const i=Ps(n,e)||{},a=i.delay||n.delay||0;let{elapsed:s=0}=n;s-=Yi(a);const l=function(e,t,r,n){const o=vs(t,r);let i;i=Array.isArray(r)?[...r]:[null,r];const a=void 0!==n.from?n.from:e.get();let s;const l=[];for(let c=0;c<i.length;c++)null===i[c]&&(i[c]=0===c?a:i[c-1]),Os(i[c])&&l.push(c),"string"==typeof i[c]&&"none"!==i[c]&&"0"!==i[c]&&(s=i[c]);if(o&&l.length&&s)for(let c=0;c<l.length;c++)i[l[c]]=_s(t,s);return i}(t,e,r,i),c=l[0],u=l[l.length-1],d=vs(e,c),p=vs(e,u);let f={keyframes:l,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-s,onUpdate:e=>{t.set(e),i.onUpdate&&i.onUpdate(e)},onComplete:()=>{o(),i.onComplete&&i.onComplete()}};if(function({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:o,repeat:i,repeatType:a,repeatDelay:s,from:l,elapsed:c,...u}){return!!Object.keys(u).length}(i)||(f={...f,...ys(e,f)}),f.duration&&(f.duration=Yi(f.duration)),f.repeatDelay&&(f.repeatDelay=Yi(f.repeatDelay)),!d||!p||Ji||!1===i.type||Ts)return function({keyframes:e,delay:t,onUpdate:r,onComplete:n}){const o=()=>(r&&r(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:mi,pause:mi,stop:mi,then:e=>(e(),Promise.resolve()),cancel:mi,complete:mi});return t?ds({keyframes:[0,1],duration:0,delay:t,onComplete:o}):o()}(f);if(!n.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const r=ms(t,e,f);if(r)return r}return ds(f)};function Cs(e){return Boolean(go(e)&&e.add)}const As=e=>/^\-?\d*\.?\d+$/.test(e);function Ds(e,t){-1===e.indexOf(t)&&e.push(t)}function Ls(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class Rs{constructor(){this.subscriptions=[]}add(e){return Ds(this.subscriptions,e),()=>Ls(this.subscriptions,e)}notify(e,t,r){const n=this.subscriptions.length;if(n)if(1===n)this.subscriptions[0](e,t,r);else for(let o=0;o<n;o++){const n=this.subscriptions[o];n&&n(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}class Ms{constructor(e,t={}){var r;this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(e,t=!0)=>{this.prev=this.current,this.current=e;const{delta:r,timestamp:n}=vi;this.lastUpdated!==n&&(this.timeDelta=r,this.lastUpdated=n,bi.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),t&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>bi.postRender(this.velocityCheck),this.velocityCheck=({timestamp:e})=>{e!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(r=this.current,!isNaN(parseFloat(r))),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Rs);const r=this.events[e].add(t);return"change"===e?()=>{r(),bi.read((()=>{this.events.change.getSize()||this.stop()}))}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Ja(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise((t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Bs(e,t){return new Ms(e,t)}const qs=e=>t=>t.test(e),Fs=[No,Lo,Do,Ao,Mo,Ro,{test:e=>"auto"===e,parse:e=>e}],zs=e=>Fs.find(qs(e)),Us=[...Fs,Na,qa];function Vs(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Bs(r))}function Hs(e,t){if(!t)return;return(t[e]||t.default||t).from}function $s({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&!0!==t[r];return t[r]=!1,n}function Gs(e,t){const r=e.get();if(!Array.isArray(t))return r!==t;for(let n=0;n<t.length;n++)if(t[n]!==r)return!0}function Ws(e,t,{delay:r=0,transitionOverride:n,type:o}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:a,...s}=e.makeTargetAnimatable(t);const l=e.getValue("willChange");n&&(i=n);const c=[],u=o&&e.animationState&&e.animationState.getState()[o];for(const d in s){const t=e.getValue(d),n=s[d];if(!t||void 0===n||u&&$s(u,d))continue;const o={delay:r,elapsed:0,...Ps(i||{},d)};if(window.HandoffAppearAnimations){const r=e.getProps()[$n];if(r){const e=window.HandoffAppearAnimations(r,d,t,bi);null!==e&&(o.elapsed=e,o.isHandoff=!0)}}let a=!o.isHandoff&&!Gs(t,n);if("spring"===o.type&&(t.getVelocity()||o.velocity)&&(a=!1),t.animation&&(a=!1),a)continue;t.start(Is(d,t,n,e.shouldReduceMotion&&mo.has(d)?{type:!1}:o));const p=t.animation;Cs(l)&&(l.add(d),p.then((()=>l.remove(d)))),c.push(p)}return a&&Promise.all(c).then((()=>{a&&function(e,t){const r=Gi(e,t);let{transitionEnd:n={},transition:o={},...i}=r?e.makeTargetAnimatable(r,!1):{};i={...i,...n};for(const s in i)Vs(e,s,(a=i[s],ui(a)?a[a.length-1]||0:a));var a}(e,a)})),c}function Ks(e,t,r={}){const n=Gi(e,t,r.custom);let{transition:o=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(o=r.transitionOverride);const i=n?()=>Promise.all(Ws(e,n,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(n=0)=>{const{delayChildren:i=0,staggerChildren:a,staggerDirection:s}=o;return function(e,t,r=0,n=0,o=1,i){const a=[],s=(e.variantChildren.size-1)*n,l=1===o?(e=0)=>e*n:(e=0)=>s-e*n;return Array.from(e.variantChildren).sort(Ys).forEach(((e,n)=>{e.notify("AnimationStart",t),a.push(Ks(e,t,{...i,delay:r+l(n)}).then((()=>e.notify("AnimationComplete",t))))})),Promise.all(a)}(e,t,i+n,a,s,r)}:()=>Promise.resolve(),{when:s}=o;if(s){const[e,t]="beforeChildren"===s?[i,a]:[a,i];return e().then((()=>t()))}return Promise.all([i(),a(r.delay)])}function Ys(e,t){return e.sortNodePosition(t)}const Zs=[...Yn].reverse(),Js=Yn.length;function Xs(e){return t=>Promise.all(t.map((({animation:t,options:r})=>function(e,t,r={}){let n;if(e.notify("AnimationStart",t),Array.isArray(t)){const o=t.map((t=>Ks(e,t,r)));n=Promise.all(o)}else if("string"==typeof t)n=Ks(e,t,r);else{const o="function"==typeof t?Gi(e,t,r.custom):t;n=Promise.all(Ws(e,o,r))}return n.then((()=>e.notify("AnimationComplete",t)))}(e,t,r))))}function Qs(e){let t=Xs(e);const r={animate:tl(!0),whileInView:tl(),whileHover:tl(),whileTap:tl(),whileDrag:tl(),whileFocus:tl(),exit:tl()};let n=!0;const o=(t,r)=>{const n=Gi(e,r);if(n){const{transition:e,transitionEnd:r,...o}=n;t={...t,...o,...r}}return t};function i(i,a){const s=e.getProps(),l=e.getVariantContext(!0)||{},c=[],u=new Set;let d={},p=1/0;for(let t=0;t<Js;t++){const f=Zs[t],m=r[f],h=void 0!==s[f]?s[f]:l[f],g=Wn(h),b=f===a?m.isActive:null;!1===b&&(p=t);let y=h===l[f]&&h!==s[f]&&g;if(y&&n&&e.manuallyAnimateOnMount&&(y=!1),m.protectedKeys={...d},!m.isActive&&null===b||!h&&!m.prevProp||Kn(h)||"boolean"==typeof h)continue;let v=el(m.prevProp,h)||f===a&&m.isActive&&!y&&g||t>p&&g,x=!1;const w=Array.isArray(h)?h:[h];let E=w.reduce(o,{});!1===b&&(E={});const{prevResolvedValues:j={}}=m,N={...j,...E},S=e=>{v=!0,u.has(e)&&(x=!0,u.delete(e)),m.needsAnimating[e]=!0};for(const e in N){const t=E[e],r=j[e];if(d.hasOwnProperty(e))continue;let n=!1;n=ui(t)&&ui(r)?!$i(t,r):t!==r,n?void 0!==t?S(e):u.add(e):void 0!==t&&u.has(e)?S(e):m.protectedKeys[e]=!0}m.prevProp=h,m.prevResolvedValues=E,m.isActive&&(d={...d,...E}),n&&e.blockInitialAnimation&&(v=!1),!v||y&&!x||c.push(...w.map((e=>({animation:e,options:{type:f,...i}}))))}if(u.size){const t={};u.forEach((r=>{const n=e.getBaseTarget(r);void 0!==n&&(t[r]=n)})),c.push({animation:t})}let f=Boolean(c.length);return!n||!1!==s.initial&&s.initial!==s.animate||e.manuallyAnimateOnMount||(f=!1),n=!1,f?t(c):Promise.resolve()}return{animateChanges:i,setActive:function(t,n,o){var a;if(r[t].isActive===n)return Promise.resolve();null===(a=e.variantChildren)||void 0===a||a.forEach((e=>{var r;return null===(r=e.animationState)||void 0===r?void 0:r.setActive(t,n)})),r[t].isActive=n;const s=i(o,t);for(const e in r)r[e].protectedKeys={};return s},setAnimateFunction:function(r){t=r(e)},getState:()=>r}}function el(e,t){return"string"==typeof t?t!==e:!!Array.isArray(t)&&!$i(t,e)}function tl(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}let rl=0;const nl={animation:{Feature:class extends Di{constructor(e){super(e),e.animationState||(e.animationState=Qs(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Kn(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}},exit:{Feature:class extends Di{constructor(){super(...arguments),this.id=rl++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const o=this.node.animationState.setActive("exit",!e,{custom:null!=r?r:this.node.getProps().custom});t&&!e&&o.then((()=>t(this.id)))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}},ol=(e,t)=>Math.abs(e-t);class il{constructor(e,t,{transformPagePoint:r,contextWindow:n,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=ll(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,r=function(e,t){const r=ol(e.x,t.x),n=ol(e.y,t.y);return Math.sqrt(r**2+n**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!r)return;const{point:n}=e,{timestamp:o}=vi;this.history.push({...n,timestamp:o});const{onStart:i,onMove:a}=this.handlers;t||(i&&i(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=al(t,this.transformPagePoint),bi.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:r,onSessionEnd:n,resumeAnimation:o}=this.handlers;if(this.dragSnapToOrigin&&o&&o(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const i=ll("pointercancel"===e.type?this.lastMoveEventInfo:al(t,this.transformPagePoint),this.history);this.startEvent&&r&&r(e,i),n&&n(e,i)},!Ni(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=r,this.contextWindow=n||window;const i=al(Si(e),this.transformPagePoint),{point:a}=i,{timestamp:s}=vi;this.history=[{...a,timestamp:s}];const{onSessionStart:l}=t;l&&l(e,ll(i,this.history)),this.removeListeners=Oi(_i(this.contextWindow,"pointermove",this.handlePointerMove),_i(this.contextWindow,"pointerup",this.handlePointerUp),_i(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),yi(this.updatePoint)}}function al(e,t){return t?{point:t(e.point)}:e}function sl(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ll({point:e},t){return{point:e,delta:sl(e,ul(t)),offset:sl(e,cl(t)),velocity:dl(t,.1)}}function cl(e){return e[0]}function ul(e){return e[e.length-1]}function dl(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const o=ul(e);for(;r>=0&&(n=e[r],!(o.timestamp-n.timestamp>Yi(t)));)r--;if(!n)return{x:0,y:0};const i=Zi(o.timestamp-n.timestamp);if(0===i)return{x:0,y:0};const a={x:(o.x-n.x)/i,y:(o.y-n.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function pl(e){return e.max-e.min}function fl(e,t=0,r=.01){return Math.abs(e-t)<=r}function ml(e,t,r,n=.5){e.origin=n,e.originPoint=Sa(t.min,t.max,e.origin),e.scale=pl(r)/pl(t),(fl(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Sa(r.min,r.max,e.origin)-e.originPoint,(fl(e.translate)||isNaN(e.translate))&&(e.translate=0)}function hl(e,t,r,n){ml(e.x,t.x,r.x,n?n.originX:void 0),ml(e.y,t.y,r.y,n?n.originY:void 0)}function gl(e,t,r){e.min=r.min+t.min,e.max=e.min+pl(t)}function bl(e,t,r){e.min=t.min-r.min,e.max=e.min+pl(t)}function yl(e,t,r){bl(e.x,t.x,r.x),bl(e.y,t.y,r.y)}function vl(e,t,r){return{min:void 0!==t?e.min+t:void 0,max:void 0!==r?e.max+r-(e.max-e.min):void 0}}function xl(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}const wl=.35;function El(e,t,r){return{min:jl(e,t),max:jl(e,r)}}function jl(e,t){return"number"==typeof e?e:e[t]||0}function Nl(e){return[e("x"),e("y")]}function Sl({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function _l(e){return void 0===e||1===e}function kl({scale:e,scaleX:t,scaleY:r}){return!_l(e)||!_l(t)||!_l(r)}function Ol(e){return kl(e)||Pl(e)||e.z||e.rotate||e.rotateX||e.rotateY}function Pl(e){return Tl(e.x)||Tl(e.y)}function Tl(e){return e&&"0%"!==e}function Il(e,t,r){return r+t*(e-r)}function Cl(e,t,r,n,o){return void 0!==o&&(e=Il(e,o,n)),Il(e,r,n)+t}function Al(e,t=0,r=1,n,o){e.min=Cl(e.min,t,r,n,o),e.max=Cl(e.max,t,r,n,o)}function Dl(e,{x:t,y:r}){Al(e.x,t.translate,t.scale,t.originPoint),Al(e.y,r.translate,r.scale,r.originPoint)}function Ll(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Rl(e,t){e.min=e.min+t,e.max=e.max+t}function Ml(e,t,[r,n,o]){const i=void 0!==t[o]?t[o]:.5,a=Sa(e.min,e.max,i);Al(e,t[r],t[n],a,t.scale)}const Bl=["x","scaleX","originX"],ql=["y","scaleY","originY"];function Fl(e,t){Ml(e.x,t,Bl),Ml(e.y,t,ql)}function zl(e,t){return Sl(function(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}(e.getBoundingClientRect(),t))}const Ul=({current:e})=>e?e.ownerDocument.defaultView:null,Vl=new WeakMap;class Hl{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;const{dragSnapToOrigin:n}=this.getProps();this.panSession=new il(e,{onSessionStart:e=>{const{dragSnapToOrigin:r}=this.getProps();r?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Si(e,"page").point)},onStart:(e,t)=>{const{drag:r,dragPropagation:n,onDragStart:o}=this.getProps();if(r&&!n&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Ci(r),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Nl((e=>{let t=this.getAxisMotionValue(e).get()||0;if(Do.test(t)){const{projection:r}=this.visualElement;if(r&&r.layout){const n=r.layout.layoutBox[e];if(n){t=pl(n)*(parseFloat(t)/100)}}}this.originPoint[e]=t})),o&&bi.update((()=>o(e,t)),!1,!0);const{animationState:i}=this.visualElement;i&&i.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:r,dragDirectionLock:n,onDirectionLock:o,onDrag:i}=this.getProps();if(!r&&!this.openGlobalLock)return;const{offset:a}=t;if(n&&null===this.currentDirection)return this.currentDirection=function(e,t=10){let r=null;Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x");return r}(a),void(null!==this.currentDirection&&o&&o(this.currentDirection));this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),i&&i(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>Nl((e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())}))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:n,contextWindow:Ul(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:n}=t;this.startAnimation(n);const{onDragEnd:o}=this.getProps();o&&bi.update((()=>o(e,t)))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:n}=this.getProps();if(!r||!$l(e,n,this.currentDirection))return;const o=this.getAxisMotionValue(e);let i=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(i=function(e,{min:t,max:r},n){return void 0!==t&&e<t?e=n?Sa(t,e,n.min):Math.max(e,t):void 0!==r&&e>r&&(e=n?Sa(r,e,n.max):Math.min(e,r)),e}(i,this.constraints[e],this.elastic[e])),o.set(i)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,o=this.constraints;t&&Gn(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!n)&&function(e,{top:t,left:r,bottom:n,right:o}){return{x:vl(e.x,r,o),y:vl(e.y,t,n)}}(n.layoutBox,t),this.elastic=function(e=wl){return!1===e?e=0:!0===e&&(e=wl),{x:El(e,"left","right"),y:El(e,"top","bottom")}}(r),o!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Nl((e=>{this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const r={};return void 0!==t.min&&(r.min=t.min-e.min),void 0!==t.max&&(r.max=t.max-e.min),r}(n.layoutBox[e],this.constraints[e]))}))}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Gn(e))return!1;const r=e.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const o=function(e,t,r){const n=zl(e,r),{scroll:o}=t;return o&&(Rl(n.x,o.offset.x),Rl(n.y,o.offset.y)),n}(r,n.root,this.visualElement.getTransformPagePoint());let i=function(e,t){return{x:xl(e.x,t.x),y:xl(e.y,t.y)}}(n.layout.layoutBox,o);if(t){const e=t(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(i));this.hasMutatedConstraints=!!e,e&&(i=Sl(e))}return i}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:n,dragTransition:o,dragSnapToOrigin:i,onDragTransitionEnd:a}=this.getProps(),s=this.constraints||{},l=Nl((a=>{if(!$l(a,t,this.currentDirection))return;let l=s&&s[a]||{};i&&(l={min:0,max:0});const c=n?200:1e6,u=n?40:1e7,d={type:"inertia",velocity:r?e[a]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...o,...l};return this.startAxisValueAnimation(a,d)}));return Promise.all(l).then(a)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(Is(e,r,0,t))}stopAnimation(){Nl((e=>this.getAxisMotionValue(e).stop()))}pauseAnimation(){Nl((e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()}))}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),n=r[t];return n||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Nl((t=>{const{drag:r}=this.getProps();if(!$l(t,r,this.currentDirection))return;const{projection:n}=this.visualElement,o=this.getAxisMotionValue(t);if(n&&n.layout){const{min:r,max:i}=n.layout.layoutBox[t];o.set(e[t]-Sa(r,i,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Gn(t)||!r||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};Nl((e=>{const t=this.getAxisMotionValue(e);if(t){const r=t.get();n[e]=function(e,t){let r=.5;const n=pl(e),o=pl(t);return o>n?r=$a(t.min,t.max-n,e.min):n>o&&(r=$a(e.min,e.max-o,t.min)),jo(0,1,r)}({min:r,max:r},this.constraints[e])}}));const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Nl((t=>{if(!$l(t,e,null))return;const r=this.getAxisMotionValue(t),{min:o,max:i}=this.constraints[t];r.set(Sa(o,i,n[t]))}))}addListeners(){if(!this.visualElement.current)return;Vl.set(this.visualElement,this);const e=_i(this.visualElement.current,"pointerdown",(e=>{const{drag:t,dragListener:r=!0}=this.getProps();t&&r&&this.start(e)})),t=()=>{const{dragConstraints:e}=this.getProps();Gn(e)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,n=r.addEventListener("measure",t);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),t();const o=ji(window,"resize",(()=>this.scalePositionWithinConstraints())),i=r.addEventListener("didUpdate",(({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(Nl((t=>{const r=this.getAxisMotionValue(t);r&&(this.originPoint[t]+=e[t].translate,r.set(r.get()+e[t].translate))})),this.visualElement.render())}));return()=>{o(),e(),n(),i&&i()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:n=!1,dragConstraints:o=!1,dragElastic:i=wl,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:n,dragConstraints:o,dragElastic:i,dragMomentum:a}}}function $l(e,t,r){return!(!0!==t&&t!==e||null!==r&&r!==e)}const Gl=e=>(t,r)=>{e&&bi.update((()=>e(t,r)))};const Wl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Kl(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Yl={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!Lo.test(e))return e;e=parseFloat(e)}return`${Kl(e,t.target.x)}% ${Kl(e,t.target.y)}%`}},Zl={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,o=qa.parse(e);if(o.length>5)return n;const i=qa.createTransformer(e),a="number"!=typeof o[0]?1:0,s=r.x.scale*t.x,l=r.y.scale*t.y;o[0+a]/=s,o[1+a]/=l;const c=Sa(s,l,.5);return"number"==typeof o[2+a]&&(o[2+a]/=c),"number"==typeof o[3+a]&&(o[3+a]/=c),i(o)}};class Jl extends o.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:n}=this.props,{projection:o}=e;var i;i=Ql,Object.assign(po,i),o&&(t.group&&t.group.add(o),r&&r.register&&n&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",(()=>{this.safeToRemove()})),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Wl.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:n,isPresent:o}=this.props,i=r.projection;return i?(i.isPresent=o,n||e.layoutDependency!==t||void 0===t?i.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?i.promote():i.relegate()||bi.postRender((()=>{const e=i.getStack();e&&e.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask((()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:n}=e;n&&(n.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(n),r&&r.deregister&&r.deregister(n))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Xl(e){const[t,r]=function(){const e=n.useContext(Fn);if(null===e)return[!0,null];const{isPresent:t,onExitComplete:r,register:o}=e,i=n.useId();return n.useEffect((()=>o(i)),[]),!t&&r?[!1,()=>r&&r(i)]:[!0]}(),i=n.useContext(no);return o.createElement(Jl,{...e,layoutGroup:i,switchLayoutGroup:n.useContext(oo),isPresent:t,safeToRemove:r})}const Ql={borderRadius:{...Yl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Yl,borderTopRightRadius:Yl,borderBottomLeftRadius:Yl,borderBottomRightRadius:Yl,boxShadow:Zl},ec=["TopLeft","TopRight","BottomLeft","BottomRight"],tc=ec.length,rc=e=>"string"==typeof e?parseFloat(e):e,nc=e=>"number"==typeof e||Lo.test(e);function oc(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const ic=sc(0,.5,da),ac=sc(.5,.95,mi);function sc(e,t,r){return n=>n<e?0:n>t?1:r($a(e,t,n))}function lc(e,t){e.min=t.min,e.max=t.max}function cc(e,t){lc(e.x,t.x),lc(e.y,t.y)}function uc(e,t,r,n,o){return e=Il(e-=t,1/r,n),void 0!==o&&(e=Il(e,1/o,n)),e}function dc(e,t,[r,n,o],i,a){!function(e,t=0,r=1,n=.5,o,i=e,a=e){Do.test(t)&&(t=parseFloat(t),t=Sa(a.min,a.max,t/100)-a.min);if("number"!=typeof t)return;let s=Sa(i.min,i.max,n);e===i&&(s-=t),e.min=uc(e.min,t,r,s,o),e.max=uc(e.max,t,r,s,o)}(e,t[r],t[n],t[o],t.scale,i,a)}const pc=["x","scaleX","originX"],fc=["y","scaleY","originY"];function mc(e,t,r,n){dc(e.x,t,pc,r?r.x:void 0,n?n.x:void 0),dc(e.y,t,fc,r?r.y:void 0,n?n.y:void 0)}function hc(e){return 0===e.translate&&1===e.scale}function gc(e){return hc(e.x)&&hc(e.y)}function bc(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function yc(e){return pl(e.x)/pl(e.y)}class vc{constructor(){this.members=[]}add(e){Ds(this.members,e),e.scheduleRender()}remove(e){if(Ls(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex((t=>e===t));if(0===t)return!1;let r;for(let n=t;n>=0;n--){const e=this.members[n];if(!1!==e.isPresent){r=e;break}}return!!r&&(this.promote(r),!0)}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:n}=e.options;!1===n&&r.hide()}}exitAnimationComplete(){this.members.forEach((e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()}))}scheduleRender(){this.members.forEach((e=>{e.instance&&e.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function xc(e,t,r){let n="";const o=e.x.translate/t.x,i=e.y.translate/t.y;if((o||i)&&(n=`translate3d(${o}px, ${i}px, 0) `),1===t.x&&1===t.y||(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:e,rotateX:t,rotateY:o}=r;e&&(n+=`rotate(${e}deg) `),t&&(n+=`rotateX(${t}deg) `),o&&(n+=`rotateY(${o}deg) `)}const a=e.x.scale*t.x,s=e.y.scale*t.y;return 1===a&&1===s||(n+=`scale(${a}, ${s})`),n||"none"}const wc=(e,t)=>e.depth-t.depth;class Ec{constructor(){this.children=[],this.isDirty=!1}add(e){Ds(this.children,e),this.isDirty=!0}remove(e){Ls(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(wc),this.isDirty=!1,this.children.forEach(e)}}const jc=["","X","Y","Z"],Nc={visibility:"hidden"};let Sc=0;const _c={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function kc({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:o}){return class{constructor(e={},r=(null==t?void 0:t())){this.id=Sc++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{var e;this.projectionUpdateScheduled=!1,_c.totalNodes=_c.resolvedTargetDeltas=_c.recalculatedProjection=0,this.nodes.forEach(Tc),this.nodes.forEach(Mc),this.nodes.forEach(Bc),this.nodes.forEach(Ic),e=_c,window.MotionDebug&&window.MotionDebug.record(e)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=r?r.root||r:this,this.path=r?[...r.path,r]:[],this.parent=r,this.depth=r?r.depth+1:0;for(let t=0;t<this.path.length;t++)this.path[t].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ec)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Rs),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){const r=this.eventHandlers.get(e);r&&r.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t,r=this.root.hasTreeAnimated){if(this.instance)return;var n;this.isSVG=(n=t)instanceof SVGElement&&"svg"!==n.tagName,this.instance=t;const{layoutId:o,layout:i,visualElement:a}=this.options;if(a&&!a.current&&a.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),r&&(i||o)&&(this.isLayoutDirty=!0),e){let r;const n=()=>this.root.updateBlockedByResize=!1;e(t,(()=>{this.root.updateBlockedByResize=!0,r&&r(),r=function(e,t){const r=performance.now(),n=({timestamp:o})=>{const i=o-r;i>=t&&(yi(n),e(i-t))};return bi.read(n,!0),()=>yi(n)}(n,250),Wl.hasAnimatedSinceResize&&(Wl.hasAnimatedSinceResize=!1,this.nodes.forEach(Rc))}))}o&&this.root.registerSharedNode(o,this),!1!==this.options.animate&&a&&(o||i)&&this.addEventListener("didUpdate",(({delta:e,hasLayoutChanged:t,hasRelativeTargetChanged:r,layout:n})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const o=this.options.transition||a.getDefaultTransition()||Hc,{onLayoutAnimationStart:i,onLayoutAnimationComplete:s}=a.getProps(),l=!this.targetLayout||!bc(this.targetLayout,n)||r,c=!t&&r;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||c||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(e,c);const t={...Ps(o,"layout"),onPlay:i,onComplete:s};(a.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t)}else t||Rc(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=n}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,yi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(qc),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let o=0;o<this.path.length;o++){const e=this.path[o];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:r}=this.options;if(void 0===t&&!r)return;const n=this.getTransformTemplate();this.prevTransformTemplateValue=n?n(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Ac);this.isUpdating||this.nodes.forEach(Dc),this.isUpdating=!1,this.nodes.forEach(Lc),this.nodes.forEach(Oc),this.nodes.forEach(Pc),this.clearAllSnapshots();const e=performance.now();vi.delta=jo(0,1e3/60,e-vi.timestamp),vi.timestamp=e,vi.isProcessing=!0,xi.update.process(vi),xi.preRender.process(vi),xi.render.process(vi),vi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask((()=>this.update())))}clearAllSnapshots(){this.nodes.forEach(Cc),this.sharedNodes.forEach(Fc)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,bi.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){bi.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let r=0;r<this.path.length;r++){this.path[r].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!o)return;const e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!gc(this.projectionDelta),r=this.getTransformTemplate(),n=r?r(this.latestValues,""):void 0,i=n!==this.prevTransformTemplateValue;e&&(t||Ol(this.latestValues)||i)&&(o(this.instance,n),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){const t=this.measurePageBox();let r=this.removeElementScroll(t);var n;return e&&(r=this.removeTransform(r)),Wc((n=r).x),Wc(n.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:r,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const t=e.measureViewportBox(),{scroll:r}=this.root;return r&&(Rl(t.x,r.offset.x),Rl(t.y,r.offset.y)),t}removeElementScroll(e){const t={x:{min:0,max:0},y:{min:0,max:0}};cc(t,e);for(let r=0;r<this.path.length;r++){const n=this.path[r],{scroll:o,options:i}=n;if(n!==this.root&&o&&i.layoutScroll){if(o.isRoot){cc(t,e);const{scroll:r}=this.root;r&&(Rl(t.x,-r.offset.x),Rl(t.y,-r.offset.y))}Rl(t.x,o.offset.x),Rl(t.y,o.offset.y)}}return t}applyTransform(e,t=!1){const r={x:{min:0,max:0},y:{min:0,max:0}};cc(r,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&Fl(r,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Ol(e.latestValues)&&Fl(r,e.latestValues)}return Ol(this.latestValues)&&Fl(r,this.latestValues),r}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};cc(t,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];if(!e.instance)continue;if(!Ol(e.latestValues))continue;kl(e.latestValues)&&e.updateSnapshot();const n={x:{min:0,max:0},y:{min:0,max:0}};cc(n,e.measurePageBox()),mc(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,n)}return Ol(this.latestValues)&&mc(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==vi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t;const r=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=r.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=r.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=r.isSharedProjectionDirty);const n=Boolean(this.resumingFrom)||this!==r;if(!(e||n&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;const{layout:o,layoutId:i}=this.options;if(this.layout&&(o||i)){if(this.resolvedRelativeTargetAt=vi.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},yl(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),cc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var a,s,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),a=this.target,s=this.relativeTarget,l=this.relativeParent.target,gl(a.x,s.x,l.x),gl(a.y,s.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):cc(this.target,this.layout.layoutBox),Dl(this.target,this.targetDelta)):cc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},yl(this.relativeTargetOrigin,this.target,e.target),cc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}_c.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!kl(this.parent.latestValues)&&!Pl(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),r=Boolean(this.resumingFrom)||this!==t;let n=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(n=!1),r&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===vi.timestamp&&(n=!1),n)return;const{layout:o,layoutId:i}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!o&&!i)return;cc(this.layoutCorrected,this.layout.layoutBox);const a=this.treeScale.x,s=this.treeScale.y;!function(e,t,r,n=!1){const o=r.length;if(!o)return;let i,a;t.x=t.y=1;for(let s=0;s<o;s++){i=r[s],a=i.projectionDelta;const o=i.instance;o&&o.style&&"contents"===o.style.display||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Fl(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,Dl(e,a)),n&&Ol(i.latestValues)&&Fl(e,i.latestValues))}t.x=Ll(t.x),t.y=Ll(t.y)}(this.layoutCorrected,this.treeScale,this.path,r),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox);const{target:l}=t;if(!l)return void(this.projectionTransform&&(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionTransform="none",this.scheduleRender()));this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});const c=this.projectionTransform;hl(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.projectionTransform=xc(this.projectionDelta,this.treeScale),this.projectionTransform===c&&this.treeScale.x===a&&this.treeScale.y===s||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),_c.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(e,t=!1){const r=this.snapshot,n=r?r.latestValues:{},o={...this.latestValues},i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const a={x:{min:0,max:0},y:{min:0,max:0}},s=(r?r.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(s&&!c&&!0===this.options.crossfade&&!this.path.some(Vc));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const r=t/1e3;var l,p,f,m;zc(i.x,e.x,r),zc(i.y,e.y,r),this.setTargetDelta(i),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(yl(a,this.layout.layoutBox,this.relativeParent.layout.layoutBox),l=this.relativeTarget,p=this.relativeTargetOrigin,f=a,m=r,Uc(l.x,p.x,f.x,m),Uc(l.y,p.y,f.y,m),d&&function(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}(this.relativeTarget,d)&&(this.isProjectionDirty=!1),d||(d={x:{min:0,max:0},y:{min:0,max:0}}),cc(d,this.relativeTarget)),s&&(this.animationValues=o,function(e,t,r,n,o,i){o?(e.opacity=Sa(0,void 0!==r.opacity?r.opacity:1,ic(n)),e.opacityExit=Sa(void 0!==t.opacity?t.opacity:1,0,ac(n))):i&&(e.opacity=Sa(void 0!==t.opacity?t.opacity:1,void 0!==r.opacity?r.opacity:1,n));for(let a=0;a<tc;a++){const o=`border${ec[a]}Radius`;let i=oc(t,o),s=oc(r,o);void 0===i&&void 0===s||(i||(i=0),s||(s=0),0===i||0===s||nc(i)===nc(s)?(e[o]=Math.max(Sa(rc(i),rc(s),n),0),(Do.test(s)||Do.test(i))&&(e[o]+="%")):e[o]=s)}(t.rotate||r.rotate)&&(e.rotate=Sa(t.rotate||0,r.rotate||0,n))}(o,n,this.latestValues,r,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=r},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(yi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=bi.update((()=>{Wl.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,r){const n=go(e)?e:Bs(e);return n.start(Is("",n,t,r)),n.animation}(0,1e3,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:r,layout:n,latestValues:o}=e;if(t&&r&&n){if(this!==e&&this.layout&&n&&Kc(this.options.animationType,this.layout.layoutBox,n.layoutBox)){r=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=pl(this.layout.layoutBox.x);r.x.min=e.target.x.min,r.x.max=r.x.min+t;const n=pl(this.layout.layoutBox.y);r.y.min=e.target.y.min,r.y.max=r.y.min+n}cc(t,r),Fl(t,o),hl(this.projectionDeltaWithTransform,this.layoutCorrected,t,o)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new vc);this.sharedNodes.get(e).add(t);const r=t.options.initialPromotionConfig;t.promote({transition:r?r.transition:void 0,preserveFollowOpacity:r&&r.shouldPreserveFollowOpacity?r.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:r}={}){const n=this.getStack();n&&n.promote(this,r),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:r}=e;if((r.rotate||r.rotateX||r.rotateY||r.rotateZ)&&(t=!0),!t)return;const n={};for(let o=0;o<jc.length;o++){const t="rotate"+jc[o];r[t]&&(n[t]=r[t],e.setStaticValue(t,0))}e.render();for(const o in n)e.setStaticValue(o,n[o]);e.scheduleRender()}getProjectionStyles(e){var t,r;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Nc;const n={visibility:""},o=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,n.opacity="",n.pointerEvents=di(null==e?void 0:e.pointerEvents)||"",n.transform=o?o(this.latestValues,""):"none",n;const i=this.getLead();if(!this.projectionDelta||!this.layout||!i.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=di(null==e?void 0:e.pointerEvents)||""),this.hasProjected&&!Ol(this.latestValues)&&(t.transform=o?o({},""):"none",this.hasProjected=!1),t}const a=i.animationValues||i.latestValues;this.applyTransformsToTarget(),n.transform=xc(this.projectionDeltaWithTransform,this.treeScale,a),o&&(n.transform=o(a,n.transform));const{x:s,y:l}=this.projectionDelta;n.transformOrigin=`${100*s.origin}% ${100*l.origin}% 0`,i.animationValues?n.opacity=i===this?null!==(r=null!==(t=a.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==r?r:1:this.preserveOpacity?this.latestValues.opacity:a.opacityExit:n.opacity=i===this?void 0!==a.opacity?a.opacity:"":void 0!==a.opacityExit?a.opacityExit:0;for(const c in po){if(void 0===a[c])continue;const{correct:e,applyTo:t}=po[c],r="none"===n.transform?a[c]:e(a[c],i);if(t){const e=t.length;for(let o=0;o<e;o++)n[t[o]]=r}else n[c]=r}return this.options.layoutId&&(n.pointerEvents=i===this?di(null==e?void 0:e.pointerEvents)||"":"none"),n}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(Ac),this.root.sharedNodes.clear()}}}function Oc(e){e.updateLayout()}function Pc(e){var t;const r=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:n}=e.layout,{animationType:o}=e.options,i=r.source!==e.layout.source;"size"===o?Nl((e=>{const n=i?r.measuredBox[e]:r.layoutBox[e],o=pl(n);n.min=t[e].min,n.max=n.min+o})):Kc(o,r.layoutBox,t)&&Nl((n=>{const o=i?r.measuredBox[n]:r.layoutBox[n],a=pl(t[n]);o.max=o.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[n].max=e.relativeTarget[n].min+a)}));const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};hl(a,t,r.layoutBox);const s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};i?hl(s,e.applyTransform(n,!0),r.measuredBox):hl(s,t,r.layoutBox);const l=!gc(a);let c=!1;if(!e.resumeFrom){const n=e.getClosestProjectingParent();if(n&&!n.resumeFrom){const{snapshot:o,layout:i}=n;if(o&&i){const a={x:{min:0,max:0},y:{min:0,max:0}};yl(a,r.layoutBox,o.layoutBox);const s={x:{min:0,max:0},y:{min:0,max:0}};yl(s,t,i.layoutBox),bc(a,s)||(c=!0),n.options.layoutRoot&&(e.relativeTarget=s,e.relativeTargetOrigin=a,e.relativeParent=n)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:r,delta:s,layoutDelta:a,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function Tc(e){_c.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Ic(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Cc(e){e.clearSnapshot()}function Ac(e){e.clearMeasurements()}function Dc(e){e.isLayoutDirty=!1}function Lc(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Rc(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Mc(e){e.resolveTargetDelta()}function Bc(e){e.calcProjection()}function qc(e){e.resetRotation()}function Fc(e){e.removeLeadSnapshot()}function zc(e,t,r){e.translate=Sa(t.translate,0,r),e.scale=Sa(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function Uc(e,t,r,n){e.min=Sa(t.min,r.min,n),e.max=Sa(t.max,r.max,n)}function Vc(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const Hc={duration:.45,ease:[.4,0,.1,1]},$c=e=>"undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().includes(e),Gc=$c("applewebkit/")&&!$c("chrome/")?Math.round:mi;function Wc(e){e.min=Gc(e.min),e.max=Gc(e.max)}function Kc(e,t,r){return"position"===e||"preserve-aspect"===e&&!fl(yc(t),yc(r),.2)}const Yc=kc({attachResizeListener:(e,t)=>ji(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Zc={current:void 0},Jc=kc({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Zc.current){const e=new Yc({});e.mount(window),e.setOptions({layoutScroll:!0}),Zc.current=e}return Zc.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),Xc={pan:{Feature:class extends Di{constructor(){super(...arguments),this.removePointerDownListener=mi}onPointerDown(e){this.session=new il(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ul(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:n}=this.node.getProps();return{onSessionStart:Gl(e),onStart:Gl(t),onMove:r,onEnd:(e,t)=>{delete this.session,n&&bi.update((()=>n(e,t)))}}}mount(){this.removePointerDownListener=_i(this.node.current,"pointerdown",(e=>this.onPointerDown(e)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Di{constructor(e){super(e),this.removeGroupControls=mi,this.removeListeners=mi,this.controls=new Hl(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||mi}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:Jc,MeasureLayout:Xl}},Qc=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function eu(e,t,r=1){const[n,o]=function(e){const t=Qc.exec(e);if(!t)return[,];const[,r,n]=t;return[r,n]}(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const e=i.trim();return As(e)?parseFloat(e):e}return wo(o)?eu(o,t,r+1):o}const tu=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),ru=e=>tu.has(e),nu=e=>e===No||e===Lo,ou=(e,t)=>parseFloat(e.split(", ")[t]),iu=(e,t)=>(r,{transform:n})=>{if("none"===n||!n)return 0;const o=n.match(/^matrix3d\((.+)\)$/);if(o)return ou(o[1],t);{const t=n.match(/^matrix\((.+)\)$/);return t?ou(t[1],e):0}},au=new Set(["x","y","z"]),su=fo.filter((e=>!au.has(e)));const lu={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:iu(4,13),y:iu(5,14)};lu.translateX=lu.x,lu.translateY=lu.y;const cu=(e,t,r={},n={})=>{t={...t},n={...n};const o=Object.keys(t).filter(ru);let i=[],a=!1;const s=[];if(o.forEach((o=>{const l=e.getValue(o);if(!e.hasValue(o))return;let c=r[o],u=zs(c);const d=t[o];let p;if(ui(d)){const e=d.length,t=null===d[0]?1:0;c=d[t],u=zs(c);for(let r=t;r<e&&null!==d[r];r++)p?Ki(zs(d[r])===p):p=zs(d[r])}else p=zs(d);if(u!==p)if(nu(u)&&nu(p)){const e=l.get();"string"==typeof e&&l.set(parseFloat(e)),"string"==typeof d?t[o]=parseFloat(d):Array.isArray(d)&&p===Lo&&(t[o]=d.map(parseFloat))}else(null==u?void 0:u.transform)&&(null==p?void 0:p.transform)&&(0===c||0===d)?0===c?l.set(p.transform(c)):t[o]=u.transform(d):(a||(i=function(e){const t=[];return su.forEach((r=>{const n=e.getValue(r);void 0!==n&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))})),t.length&&e.render(),t}(e),a=!0),s.push(o),n[o]=void 0!==n[o]?n[o]:t[o],l.jump(d))})),s.length){const r=s.indexOf("height")>=0?window.pageYOffset:null,o=((e,t,r)=>{const n=t.measureViewportBox(),o=t.current,i=getComputedStyle(o),{display:a}=i,s={};"none"===a&&t.setStaticValue("display",e.display||"block"),r.forEach((e=>{s[e]=lu[e](n,i)})),t.render();const l=t.measureViewportBox();return r.forEach((r=>{const n=t.getValue(r);n&&n.jump(s[r]),e[r]=lu[r](l,i)})),e})(t,e,s);return i.length&&i.forEach((([t,r])=>{e.getValue(t).set(r)})),e.render(),zn&&null!==r&&window.scrollTo({top:r}),{target:o,transitionEnd:n}}return{target:t,transitionEnd:n}};function uu(e,t,r,n){return(e=>Object.keys(e).some(ru))(t)?cu(e,t,r,n):{target:t,transitionEnd:n}}const du=(e,t,r,n)=>{const o=function(e,{...t},r){const n=e.current;if(!(n instanceof Element))return{target:t,transitionEnd:r};r&&(r={...r}),e.values.forEach((e=>{const t=e.get();if(!wo(t))return;const r=eu(t,n);r&&e.set(r)}));for(const o in t){const e=t[o];if(!wo(e))continue;const i=eu(e,n);i&&(t[o]=i,r||(r={}),void 0===r[o]&&(r[o]=e))}return{target:t,transitionEnd:r}}(e,t,n);return uu(e,t=o.target,r,n=o.transitionEnd)},pu={current:null},fu={current:!1};const mu=new WeakMap,hu=Object.keys(ro),gu=hu.length,bu=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],yu=Zn.length;class vu{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:n,visualState:o},i={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>bi.render(this.render,!1,!0);const{latestValues:a,renderState:s}=o;this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=s,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=n,this.options=i,this.isControllingVariants=Jn(t),this.isVariantNode=Xn(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:l,...c}=this.scrapeMotionValuesFromProps(t,{});for(const u in c){const e=c[u];void 0!==a[u]&&go(e)&&(e.set(a[u],!1),Cs(l)&&l.add(u))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,mu.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((e,t)=>this.bindToMotionValue(t,e))),fu.current||function(){if(fu.current=!0,zn)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>pu.current=e.matches;e.addListener(t),t()}else pu.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||pu.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){mu.delete(this.current),this.projection&&this.projection.unmount(),yi(this.notifyUpdate),yi(this.render),this.valueSubscriptions.forEach((e=>e())),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=mo.has(e),n=t.on("change",(t=>{this.latestValues[e]=t,this.props.onUpdate&&bi.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)})),o=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,(()=>{n(),o()}))}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}loadFeatures({children:e,...t},r,n,o){let i,a;for(let s=0;s<gu;s++){const e=hu[s],{isEnabled:r,Feature:n,ProjectionNode:o,MeasureLayout:l}=ro[e];o&&(i=o),r(t)&&(!this.features[e]&&n&&(this.features[e]=new n(this)),l&&(a=l))}if(("html"===this.type||"svg"===this.type)&&!this.projection&&i){this.projection=new i(this.latestValues,this.parent&&this.parent.projection);const{layoutId:e,layout:r,drag:n,dragConstraints:a,layoutScroll:s,layoutRoot:l}=t;this.projection.setOptions({layoutId:e,layout:r,alwaysMeasureLayout:Boolean(n)||a&&Gn(a),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"==typeof r?r:"both",initialPromotionConfig:o,layoutScroll:s,layoutRoot:l})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<bu.length;r++){const t=bu[r];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const n=e["on"+t];n&&(this.propEventSubscriptions[t]=this.on(t,n))}this.prevMotionValues=function(e,t,r){const{willChange:n}=t;for(const o in t){const i=t[o],a=r[o];if(go(i))e.addValue(o,i),Cs(n)&&n.add(o);else if(go(a))e.addValue(o,Bs(i,{owner:e})),Cs(n)&&n.remove(o);else if(a!==i)if(e.hasValue(o)){const t=e.getValue(o);!t.hasAnimated&&t.set(i)}else{const t=e.getStaticValue(o);e.addValue(o,Bs(void 0!==t?t:i,{owner:e}))}}for(const o in r)void 0===t[o]&&e.removeValue(o);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}const t={};for(let r=0;r<yu;r++){const e=Zn[r],n=this.props[e];(Wn(n)||!1===n)&&(t[e]=n)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return void 0===r&&void 0!==t&&(r=Bs(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return void 0===this.latestValues[e]&&this.current?null!==(t=this.getBaseTargetFromProps(this.props,e))&&void 0!==t?t:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,n="string"==typeof r||"object"==typeof r?null===(t=ci(this.props,r))||void 0===t?void 0:t[e]:void 0;if(r&&void 0!==n)return n;const o=this.getBaseTargetFromProps(this.props,e);return void 0===o||go(o)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:o}on(e,t){return this.events[e]||(this.events[e]=new Rs),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class xu extends vu{sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:n},o){let i=function(e,t,r){const n={};for(const o in e){const e=Hs(o,t);if(void 0!==e)n[o]=e;else{const e=r.getValue(o);e&&(n[o]=e.get())}}return n}(r,e||{},this);if(n&&(t&&(t=n(t)),r&&(r=n(r)),i&&(i=n(i))),o){!function(e,t,r){var n,o;const i=Object.keys(t).filter((t=>!e.hasValue(t))),a=i.length;var s;if(a)for(let l=0;l<a;l++){const a=i[l],c=t[a];let u=null;Array.isArray(c)&&(u=c[0]),null===u&&(u=null!==(o=null!==(n=r[a])&&void 0!==n?n:e.readValue(a))&&void 0!==o?o:t[a]),null!=u&&("string"==typeof u&&(As(u)||ks(u))?u=parseFloat(u):(s=u,!Us.find(qs(s))&&qa.test(c)&&(u=_s(a,c))),e.addValue(a,Bs(u,{owner:e})),void 0===r[a]&&(r[a]=u),null!==u&&e.setBaseTarget(a,u))}}(this,r,i);const e=du(this,r,i,t);t=e.transitionEnd,r=e.target}return{transition:e,transitionEnd:t,...r}}}class wu extends xu{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(mo.has(t)){const e=Ss(t);return e&&e.default||0}{const n=(r=e,window.getComputedStyle(r)),o=(xo(t)?n.getPropertyValue(t):n[t])||0;return"string"==typeof o?o.trim():o}var r}measureInstanceViewportBox(e,{transformPagePoint:t}){return zl(e,t)}build(e,t,r,n){zo(e,t,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,t){return si(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;go(e)&&(this.childSubscription=e.on("change",(e=>{this.current&&(this.current.textContent=`${e}`)})))}renderInstance(e,t,r,n){oi(e,t,r,n)}}class Eu extends xu{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(mo.has(t)){const e=Ss(t);return e&&e.default||0}return t=ii.has(t)?t:Hn(t),e.getAttribute(t)}measureInstanceViewportBox(){return{x:{min:0,max:0},y:{min:0,max:0}}}scrapeMotionValuesFromProps(e,t){return li(e,t)}build(e,t,r,n){Qo(e,t,r,this.isSVGTag,n.transformTemplate)}renderInstance(e,t,r,n){ai(e,t,0,n)}mount(e){this.isSVGTag=ti(e.tagName),super.mount(e)}}const ju=(e,t)=>uo(e)?new Eu(t,{enableHardwareAcceleration:!1}):new wu(t,{enableHardwareAcceleration:!0}),Nu={...nl,...Hi,...Xc,...{layout:{ProjectionNode:Jc,MeasureLayout:Xl}}},Su=lo(((e,t)=>function(e,{forwardMotionProps:t=!1},r,n){return{...uo(e)?wi:Ei,preloadedFeatures:r,useRender:ni(t),createVisualElement:n,Component:e}}(e,t,Nu,ju))),_u="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCI+PHJlY3Qgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIGZpbGw9IiNlMWUxZTEiLz48dGV4dCB4PSI1MCIgeT0iNTAiIGZvbnQtc2l6ZT0iMTgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGFsaWdubWVudC1iYXNlbGluZT0ibWlkZGxlIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZmlsbD0iIzg4OCI+U2luIEltYWdlbjwvdGV4dD48L3N2Zz4=",ku=e=>e?e.replace(/^http:\/\//i,"https://"):e,Ou=e=>{if(!e)return"";return(new DOMParser).parseFromString(e,"text/html").body.textContent||""};n.lazy((()=>f((()=>Promise.resolve().then((()=>V))),void 0).then((e=>({default:{getBlogPosts:e.getBlogPosts,getPropertyPosts:e.getPropertyPosts,testApiConnection:e.testApiConnection}})))));const Pu=_u,Tu=async(e,...t)=>{try{return e?await e(...t):(console.warn("Funci√≥n de API no disponible"),[])}catch(r){return console.error("Error en llamada a API:",r),[]}},Iu=({type:e,icon:t})=>r.jsxs(Su.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},className:"col-span-full flex flex-col items-center justify-center bg-white/80 backdrop-blur-sm rounded-xl shadow-md p-8 text-center",children:[r.jsx("div",{className:"w-20 h-20 rounded-full bg-blue-100 flex items-center justify-center mb-4",children:t}),r.jsxs("h3",{className:"text-xl font-bold text-blue-800 mb-2",children:["No hay ",e," disponibles"]}),r.jsx("p",{className:"text-gray-600 mb-4",children:"S√© el primero en crear nuevo contenido."}),r.jsx(p,{to:"blogs"===e?"/crear-blog":"/add-property",className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition duration-300",children:"blogs"===e?"Crear un blog":"A√±adir una propiedad"})]});function Cu(){const e=localStorage.getItem("token"),t=localStorage.getItem("name"),o=!!e,[i,a]=n.useState([]),[s,l]=n.useState([]),[c,u]=n.useState(!0);n.useState(null);const[m,h]=n.useState({testing:!0,status:"pendiente"}),[g,b]=n.useState(!1),y=n.useRef(null),{user:v,isAuthenticated:x,logout:w}=W(),E=d();n.useEffect((()=>{function e(e){y.current&&!y.current.contains(e.target)&&b(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[y]),n.useEffect((()=>{let e=!0;const t=setTimeout((()=>{(async()=>{try{u(!0),h({testing:!0,status:"pendiente"});let r=[],n=[];const o=await f((()=>Promise.resolve().then((()=>V))),void 0);console.log("Probando conexi√≥n a la API...");const i=await Tu(o.testApiConnection);i.error?(e&&h({testing:!1,status:"error",details:i.message}),console.error("Error de conexi√≥n a API:",i.message)):200===i.blogs||200===i.properties?(e&&h({testing:!1,status:"conectado",details:i}),console.log("API conectada correctamente")):(e&&h({testing:!1,status:"error",details:"C√≥digos de estado incorrectos"}),console.error("API devolvi√≥ c√≥digos de estado incorrectos:",i));try{r=await Tu(o.getBlogPosts),console.log(`Se obtuvieron ${(null==r?void 0:r.length)||0} blogs`)}catch(t){console.error("Error al cargar blogs:",t),r=[]}try{n=await Tu(o.getPropertyPosts),console.log(`Se obtuvieron ${(null==n?void 0:n.length)||0} propiedades`)}catch(t){console.error("Error al cargar propiedades:",t),n=[]}e&&(l(r||[]),a(n||[]),u(!1))}catch(r){console.error("Error general al cargar datos:",r),e&&(l([]),a([]),u(!1))}})()}),100);return()=>{clearTimeout(t),e=!1}}),[]);const j=e=>{if(!e)return Pu;try{if(console.log("Obteniendo URL de imagen para blog:",e.title||"sin t√≠tulo"),e.image&&"object"==typeof e.image&&e.image.src){const t=e.image.src;if(console.log("Imagen es un objeto con src:",t),"string"==typeof t&&""!==t.trim())return ku(t)}if(e.image&&"string"==typeof e.image&&(console.log("Imagen es un string directo:",e.image),""!==e.image.trim()))return ku(e.image);if(e.images&&Array.isArray(e.images)&&e.images.length>0){console.log("Usando primera imagen del array:",e.images[0]);const t=e.images[0];if("string"==typeof t)return ku(t);if(t&&"object"==typeof t&&t.src)return ku(t.src)}}catch(t){console.error("Error al procesar imagen del blog:",t)}return Pu},N=e=>{if(console.log("Obteniendo URL de imagen para propiedad:",e.title||"sin t√≠tulo"),e.images&&Array.isArray(e.images)&&e.images.length>0){const t=e.images[0];if(console.log("Primera imagen del array:",t),"object"==typeof t&&t.src){const e=t.src;if("string"==typeof e&&""!==e.trim()&&'""'!==e&&'"'!==e&&"''"!==e)return e.includes("placeholder.com")||e.includes("via.placeholder")?(console.log("URL de placeholder detectada, usando imagen por defecto"),null):e}if("string"==typeof t){const e=t;if(""!==e.trim()&&'""'!==e&&'"'!==e&&"''"!==e)return e.includes("placeholder.com")||e.includes("via.placeholder")?(console.log("URL de placeholder detectada, usando imagen por defecto"),null):e}}if(e.image){if(console.log("Intentando con la imagen principal:",e.image),"object"==typeof e.image&&e.image.src){const t=e.image.src;if("string"==typeof t&&""!==t.trim()&&'""'!==t&&'"'!==t&&"''"!==t)return t.includes("placeholder.com")||t.includes("via.placeholder")?(console.log("URL de placeholder detectada, usando imagen por defecto"),null):t}if("string"==typeof e.image){const t=e.image;if(""!==t.trim()&&'""'!==t&&'"'!==t&&"''"!==t)return t.includes("placeholder.com")||t.includes("via.placeholder")?(console.log("URL de placeholder detectada, usando imagen por defecto"),null):t}}return console.log("No se encontr√≥ ninguna imagen v√°lida"),null},S=n.useMemo((()=>s.slice(0,3)),[s]),_=n.useMemo((()=>i.slice(0,3)),[i]);return r.jsxs(Su.div,{className:"min-h-screen bg-gradient-to-b from-blue-900 via-blue-700 to-blue-50",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[r.jsxs("div",{className:"relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-blue-900 opacity-80"}),r.jsx("div",{className:"absolute inset-0 opacity-10",children:r.jsxs("svg",{className:"w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[r.jsxs("defs",{children:[r.jsx("pattern",{id:"grid",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:r.jsx("path",{d:"M 0 10 L 40 10 M 10 0 L 10 40",stroke:"white",strokeWidth:"0.5",fill:"none"})}),r.jsx("pattern",{id:"dots",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:r.jsx("circle",{cx:"10",cy:"10",r:"1.5",fill:"white"})})]}),r.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),r.jsx("rect",{width:"100%",height:"100%",fill:"url(#dots)"})]})}),r.jsx("div",{className:"relative container mx-auto px-6 pt-24 pb-16 z-10",children:o?r.jsxs(Su.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.7},className:"flex flex-col md:flex-row items-center gap-8",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full opacity-50 blur-md animate-pulse"}),r.jsx("div",{className:"relative z-10",children:r.jsx("img",{src:(null==v?void 0:v.profileImage)||_u,alt:"Perfil",className:"h-28 w-28 md:h-36 md:w-36 rounded-full border-4 border-white object-cover shadow-lg"})}),r.jsx(p,{to:"/cambiar-perfil",className:"absolute bottom-0 right-0 bg-yellow-400 rounded-full p-2 shadow-lg hover:bg-yellow-500 transition-colors z-20",title:"Editar perfil",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-900",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]}),r.jsx("div",{className:"text-center md:text-left",children:r.jsxs(Su.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.6},children:[r.jsxs("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-extrabold text-white mb-2",children:[r.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-white to-blue-200",children:"¬°Bienvenido"}),r.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 to-yellow-100",children:[", ",(null==v?void 0:v.name)||t||"Usuario","!"]})]}),r.jsx("p",{className:"mt-4 text-lg md:text-xl text-blue-100",children:"¬øQu√© te gustar√≠a hacer hoy? Explora o crea nuevo contenido y administra tus publicaciones"}),r.jsxs("div",{className:"mt-8 flex flex-wrap justify-center md:justify-start gap-3",children:[r.jsx(p,{to:"/crear-blog",className:"px-6 py-3 bg-blue-500 hover:bg-blue-600 text-white font-medium rounded-lg shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1",children:r.jsxs("span",{className:"flex items-center",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Crear nuevo blog"]})}),r.jsx(p,{to:"/add-property",className:"px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-blue-900 font-medium rounded-lg shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1",children:r.jsxs("span",{className:"flex items-center",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"A√±adir propiedad"]})})]})]})})]}):r.jsxs(Su.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.7},className:"text-center max-w-3xl mx-auto",children:[r.jsx("h1",{className:"text-3xl md:text-5xl font-extrabold text-white mb-6",children:r.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-white to-blue-200",children:"Blog de Propiedades"})}),r.jsx("p",{className:"text-xl text-blue-100 mb-8",children:"Tu portal para descubrir y compartir contenido inmobiliario de calidad."}),r.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[r.jsx(p,{to:"/login",className:"px-8 py-3 bg-blue-500 hover:bg-blue-600 text-white font-medium rounded-lg shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1",children:"Iniciar sesi√≥n"}),r.jsx(p,{to:"/register",className:"px-8 py-3 bg-yellow-400 hover:bg-yellow-500 text-blue-900 font-medium rounded-lg shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1",children:"Registrarse"})]})]})})]}),o&&r.jsx(Su.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},className:"container mx-auto px-6 py-8",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-700 rounded-xl p-6 text-white shadow-lg flex flex-col items-center md:items-start text-center md:text-left hover:shadow-xl transition-shadow",children:[r.jsx("div",{className:"bg-blue-600 w-16 h-16 rounded-full flex items-center justify-center mb-4",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})})}),r.jsx("h3",{className:"text-xl font-bold mb-2",children:"Gestionar Blogs"}),r.jsx("p",{className:"mb-4",children:"Administra tus publicaciones, edita contenido y crea nuevos art√≠culos."}),r.jsx(p,{to:"/ver-blogs",className:"mt-auto px-4 py-2 bg-white text-blue-700 font-medium rounded-lg hover:bg-blue-50 transition-colors",children:"Ver blogs"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-yellow-400 to-amber-500 rounded-xl p-6 text-blue-900 shadow-lg flex flex-col items-center md:items-start text-center md:text-left hover:shadow-xl transition-shadow",children:[r.jsx("div",{className:"bg-yellow-500 w-16 h-16 rounded-full flex items-center justify-center mb-4",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),r.jsx("h3",{className:"text-xl font-bold mb-2",children:"Gestionar Propiedades"}),r.jsx("p",{className:"mb-4",children:"Administra tus propiedades, actualiza informaci√≥n y a√±ade nuevos inmuebles."}),r.jsx(p,{to:"/propiedades",className:"mt-auto px-4 py-2 bg-white text-yellow-700 font-medium rounded-lg hover:bg-yellow-50 transition-colors",children:"Ver propiedades"})]})]})}),r.jsx("section",{className:"py-16 bg-white/70 backdrop-blur-sm",children:r.jsxs("div",{className:"container mx-auto px-6",children:[r.jsxs("div",{className:"flex flex-col items-center mb-12",children:[r.jsx("h2",{className:"text-3xl font-bold text-blue-800 mb-2",children:"Blogs Destacados"}),r.jsx("div",{className:"w-20 h-1 bg-yellow-400 rounded"})]}),c?r.jsx("div",{className:"flex justify-center py-12",children:r.jsx("div",{className:"spinner"})}):0===s.length?r.jsx(Iu,{type:"blogs",icon:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:S.map((e=>(console.log(`[Principal Debug] Blog ID: ${e._id}, Raw Description:`,e.description),r.jsxs(Su.div,{whileHover:{y:-5},className:"bg-white rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100",children:[r.jsx("div",{className:"h-48 overflow-hidden",children:r.jsx("img",{src:j(e),alt:e.title,className:"w-full h-full object-cover transform hover:scale-105 transition duration-500"})}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-3",children:[r.jsx("span",{className:"inline-block px-3 py-1 text-xs font-semibold text-white bg-blue-600 rounded-full",children:e.category||"General"}),r.jsxs("span",{className:"inline-block px-3 py-1 ml-2 text-xs font-semibold text-blue-800 bg-yellow-300 rounded-full",children:[e.readTime||"5"," min lectura"]})]}),r.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-2 line-clamp-2",children:e.title}),r.jsx("div",{className:"text-gray-600 mb-4 line-clamp-3 blog-description-preview",children:Ou(e.description||"")}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("span",{className:"text-blue-700 font-medium text-sm",children:["Por ",e.author||"Admin"]}),r.jsx(p,{to:`/blog/${e.id||e._id}`,className:"px-3 py-1 text-blue-700 border border-blue-700 rounded hover:bg-blue-700 hover:text-white transition-colors duration-300 text-sm font-medium",children:"Leer m√°s"})]})]})]},e.id||e._id))))}),s.length>0&&r.jsx("div",{className:"text-center mt-10",children:r.jsx(p,{to:"/ver-blogs",className:"inline-block px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-md shadow-md hover:shadow-lg transition duration-300",children:"Ver todos los blogs"})})]})}),r.jsx("section",{className:"py-16 bg-blue-50/70 backdrop-blur-sm",children:r.jsxs("div",{className:"container mx-auto px-6",children:[r.jsxs("div",{className:"flex flex-col items-center mb-12",children:[r.jsx("h2",{className:"text-3xl font-bold text-blue-800 mb-2",children:"Propiedades Destacadas"}),r.jsx("div",{className:"w-20 h-1 bg-yellow-400 rounded"})]}),c?r.jsx("div",{className:"flex justify-center py-12",children:r.jsx("div",{className:"spinner"})}):0===i.length?r.jsx(Iu,{type:"propiedades",icon:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:_.map((e=>(console.log(`[Principal Debug] Property ID: ${e._id}, Raw Description:`,e.description),r.jsxs(Su.div,{whileHover:{y:-5},className:"bg-white rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 h-full",children:[r.jsxs("div",{className:"h-56 overflow-hidden relative",children:[r.jsx("img",{src:N(e),alt:e.title,className:"w-full h-full object-cover transform hover:scale-105 transition duration-500"}),r.jsx("div",{className:"absolute top-0 right-0 bg-yellow-400 text-blue-900 font-bold text-sm px-3 py-1 m-3 rounded-md",children:e.status||"En venta"}),r.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-blue-900 to-transparent p-4",children:r.jsx("div",{className:"text-white font-bold text-xl",children:new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(e.price||0)})})]}),r.jsxs("div",{className:"p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-blue-900 mb-2 line-clamp-2",children:e.title}),r.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:Ou(e.description||"")}),r.jsxs("div",{className:"flex justify-between items-center text-blue-800 mb-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-5 h-5 mr-1",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M21 9h-8V3H3v18h18V9zM5 19V5h6v14H5zm14 0h-6v-8h6v8z"})}),r.jsxs("span",{children:[e.bedrooms||0," hab."]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-5 h-5 mr-1",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M21 10H7V7c0-1.103.897-2 2-2s2 .897 2 2h2c0-2.206-1.794-4-4-4S5 4.794 5 7v3H3a1 1 0 0 0-1 1v2c0 2.606 1.674 4.823 4 5.65V22h2v-3h8v3h2v-3.35c2.326-.827 4-3.044 4-5.65v-2a1 1 0 0 0-1-1zm-1 3c0 2.206-1.794 4-4 4H8c-2.206 0-4-1.794-4-4v-1h16v1z"})}),r.jsxs("span",{children:[e.bathrooms||0," ba√±os"]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-5 h-5 mr-1",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M12 2a9.5 9.5 0 0 0-9.5 9.5c0 5.095 7.91 11.86 8.26 12.17a1 1 0 0 0 1.48 0c.35-.31 8.26-7.075 8.26-12.17A9.5 9.5 0 0 0 12 2zm0 13.5a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"})}),r.jsxs("span",{children:[e.area||0," m¬≤"]})]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-blue-700 font-medium truncate max-w-[150px]",children:e.location||"Madrid"}),r.jsx(p,{to:`/property/${e.id||e._id}`,className:"px-3 py-1 bg-yellow-400 hover:bg-yellow-500 text-blue-900 rounded font-medium transition-colors duration-300 text-sm",children:"Ver detalles"})]})]})]},e.id||e._id))))}),i.length>0&&r.jsx("div",{className:"text-center mt-10",children:r.jsx(p,{to:"/propiedades",className:"inline-block px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-md shadow-md hover:shadow-lg transition duration-300",children:"Ver todas las propiedades"})})]})}),r.jsx("footer",{className:"bg-blue-900 text-white py-12",children:r.jsxs("div",{className:"container mx-auto px-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-xl font-bold mb-4",children:[r.jsx("span",{className:"text-yellow-300",children:"Blog"})," de Propiedades"]}),r.jsx("p",{className:"text-blue-200",children:"Tu plataforma de gesti√≥n inmobiliaria y publicaci√≥n de contenido especializado."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold mb-4",children:"Enlaces R√°pidos"}),r.jsxs("ul",{className:"space-y-2",children:[r.jsx("li",{children:r.jsx(p,{to:"/ver-blogs",className:"text-blue-200 hover:text-yellow-300 transition",children:"Blogs"})}),r.jsx("li",{children:r.jsx(p,{to:"/propiedades",className:"text-blue-200 hover:text-yellow-300 transition",children:"Propiedades"})}),o&&r.jsxs(r.Fragment,{children:[r.jsx("li",{children:r.jsx(p,{to:"/crear-blog",className:"text-blue-200 hover:text-yellow-300 transition",children:"Crear Blog"})}),r.jsx("li",{children:r.jsx(p,{to:"/add-property",className:"text-blue-200 hover:text-yellow-300 transition",children:"A√±adir Propiedad"})})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold mb-4",children:"Cuenta"}),r.jsx("ul",{className:"space-y-2",children:o?r.jsxs(r.Fragment,{children:[r.jsx("li",{children:r.jsx(p,{to:"/cambiar-perfil",className:"text-blue-200 hover:text-yellow-300 transition",children:"Mi Perfil"})}),r.jsx("li",{children:r.jsx("button",{onClick:()=>{console.log("Cerrando sesi√≥n...");try{w(!0)}catch(e){console.error("Error durante el cierre de sesi√≥n:",e),localStorage.clear(),E("/login")}},className:"text-blue-200 hover:text-yellow-300 transition",children:"Cerrar Sesi√≥n"})})]}):r.jsxs(r.Fragment,{children:[r.jsx("li",{children:r.jsx(p,{to:"/login",className:"text-blue-200 hover:text-yellow-300 transition",children:"Iniciar Sesi√≥n"})}),r.jsx("li",{children:r.jsx(p,{to:"/register",className:"text-blue-200 hover:text-yellow-300 transition",children:"Registrarse"})})]})})]})]}),r.jsx("div",{className:"border-t border-blue-800 mt-8 pt-8 text-center text-blue-300 text-sm",children:r.jsxs("p",{children:["¬© ",(new Date).getFullYear()," Blog de Propiedades. Todos los derechos reservados."]})})]})}),r.jsx("style",{jsx:"true",children:"\n        .spinner {\n          border: 4px solid rgba(59, 130, 246, 0.2);\n          width: 40px;\n          height: 40px;\n          border-radius: 50%;\n          border-left-color: #3B82F6;\n          animation: spin 1s linear infinite;\n        }\n        .line-clamp-2 {\n          overflow: hidden;\n          display: -webkit-box;\n          -webkit-box-orient: vertical;\n          -webkit-line-clamp: 2;\n        }\n        .line-clamp-3 {\n          overflow: hidden;\n          display: -webkit-box;\n          -webkit-box-orient: vertical;\n          -webkit-line-clamp: 3;\n        }\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n      "})]})}var Au={exports:{}};function Du(){}function Lu(){}Lu.resetWarningCache=Du;Au.exports=function(){function e(e,t,r,n,o,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Lu,resetWarningCache:Du};return r.PropTypes=r,r}();var Ru=Au.exports;const Mu=(e,t=5e3,r=3)=>{try{const n=`actionLog_${e}`,o=JSON.parse(localStorage.getItem(n)||"[]"),i=(new Date).getTime();o.unshift(i),o.length>10&&(o.length=10),localStorage.setItem(n,JSON.stringify(o));const a=o.filter((e=>i-e<t));return a.length>=r&&(console.warn(`‚ö†Ô∏è Posible bucle detectado en "${e}": ${a.length} acciones en ${t}ms`),localStorage.setItem(`${e}_bucleDetectado`,"true"),!0)}catch(n){return console.error("Error al detectar bucle:",n),!1}},Bu=({isRegistering:e=!1})=>{const[t,o]=n.useState(""),[i,a]=n.useState(""),[s,l]=n.useState(""),[c,u]=n.useState(!1),[f,m]=n.useState(""),[h,g]=n.useState(!1),[b,y]=n.useState(null),v=d();n.useRef(0);const x=n.useRef(!1),{isAuthenticated:w,user:E,login:j}=n.useContext($);n.useEffect((()=>{try{localStorage.getItem("homeRouteCycleDetected")&&(console.log("üßπ Limpiando detecci√≥n de ciclos previos"),localStorage.removeItem("homeRouteCycleDetected"));const e=JSON.parse(localStorage.getItem("authAttempts")||"[]");if(e.length>5){const t=new Date(e[0].timestamp);new Date-t<12e4&&e.length>10&&(console.warn("‚ö†Ô∏è Demasiados intentos de autenticaci√≥n, limpiando datos de sesi√≥n"),localStorage.clear(),localStorage.setItem("sessionCleanedAt",(new Date).toISOString()))}}catch(ot){console.error("Error al limpiar localStorage:",ot)}}),[]),n.useEffect((()=>{let e=!0,t=null;return e&&w&&E?(console.log("Usuario ya autenticado, preparando redirecci√≥n..."),Mu("auth_redirect",5e3,3)?void console.warn("‚ö†Ô∏è Posible bucle de redirecci√≥n detectado, omitiendo redirecci√≥n autom√°tica"):(t=setTimeout((()=>{e&&(console.log("Redirigiendo a Principal..."),v("/"))}),300),()=>{clearTimeout(t),e=!1})):()=>{e=!1}}),[w,E,v]),n.useEffect((()=>{if(c){const e=setTimeout((()=>{console.error("üö® Tiempo de carga excedido - Deteniendo"),u(!1),m("La aplicaci√≥n tard√≥ demasiado en responder. Por favor, intente nuevamente."),g(!0),Mu("signin_timeout",3e4,2)&&(console.log("üßπ Limpiando datos de sesi√≥n por timeout repetido"),localStorage.removeItem("token"))}),1e4);return y(e),()=>clearTimeout(e)}b&&clearTimeout(b)}),[c]);return r.jsx("div",{className:"flex min-h-screen flex-col justify-center bg-gray-100 py-6 sm:py-12",children:r.jsxs("div",{className:"relative py-3 sm:mx-auto sm:max-w-xl",children:[r.jsx("div",{className:"absolute inset-0 -skew-y-6 transform bg-gradient-to-r from-black to-gray-800 shadow-lg sm:-rotate-6 sm:skew-y-0 sm:rounded-3xl"}),r.jsx("div",{className:"relative bg-white px-4 py-10 shadow-lg sm:rounded-3xl sm:p-14 sm:p-20",children:r.jsxs("div",{className:"mx-auto max-w-md",children:[r.jsx("div",{className:"flex justify-center",children:r.jsx("img",{src:"/logo.jpg",alt:"Logo",className:"h-12 sm:h-16 rounded-full"})}),r.jsx("div",{className:"divide-y divide-gray-200",children:r.jsxs("div",{className:"space-y-4 py-4 text-base leading-6 text-gray-700 sm:text-lg sm:leading-7",children:[r.jsx("h1",{className:"text-center text-xl font-semibold sm:text-2xl md:text-3xl",children:e?"Crear una cuenta":"Iniciar sesi√≥n"}),f&&r.jsx("div",{className:"rounded-md bg-red-50 p-4",children:r.jsx("div",{className:"flex",children:r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:"text-sm text-red-700",children:f})})})}),r.jsxs("form",{onSubmit:async r=>{if(r.preventDefault(),x.current||c)console.log("Omitiendo nuevo env√≠o: ya hay una solicitud en curso");else{try{if(Mu("login_attempts",3e3,2))return console.error("üõë BUCLE DE LOGIN DETECTADO - Limpiando token"),localStorage.removeItem("token"),m("Demasiados intentos en poco tiempo. Por favor, espere unos segundos e intente de nuevo."),u(!1),void(x.current=!1)}catch(n){console.error("Error al verificar bucles:",n)}x.current=!0,u(!0),m("");try{const e=JSON.parse(localStorage.getItem("authAttempts")||"[]");e.unshift({timestamp:(new Date).toISOString(),email:t}),e.length>10&&(e.length=10),localStorage.setItem("authAttempts",JSON.stringify(e))}catch(n){console.error("Error al registrar intento:",n)}try{if(e){if(i!==s)return m("Las contrase√±as no coinciden"),u(!1),void(x.current=!1);const e=await I({email:t,password:i});if(e){ie("Registro exitoso",{icon:"‚úÖ",duration:4e3});await j(e.token,e.user)?(console.log("‚úÖ Login exitoso despu√©s del registro"),setTimeout((()=>v("/")),300)):(console.warn("‚ö†Ô∏è El registro fue exitoso pero el login fall√≥"),m("El registro fue exitoso pero hubo un problema al iniciar sesi√≥n autom√°ticamente. Por favor, intenta iniciar sesi√≥n manualmente."))}}else{console.log("Intentando iniciar sesi√≥n con:",{email:t,password:"***"});try{const e=await T({email:t,password:i});if(e.error)return console.error("Error en respuesta de API:",e.message),e.message.includes("incorrecta")?m("Contrase√±a incorrecta. Por favor, verifica tus credenciales."):e.message.includes("no encontrado")||e.message.includes("not found")?m("Este correo electr√≥nico no est√° registrado. Por favor, reg√≠strate primero."):400===e.status?m("Datos de inicio de sesi√≥n incorrectos. Por favor, intenta nuevamente."):m(e.message||"Error de autenticaci√≥n. Por favor, intente m√°s tarde."),u(!1),void(x.current=!1);if(!e)throw new Error("No se recibi√≥ respuesta del servidor");let r=!1;if(e.token&&e.user)r=await j(e.token,e.user);else{if(!e.token)throw new Error("La respuesta del servidor no incluye un token v√°lido");{const n={email:t,name:t.split("@")[0]||"Usuario",role:"user"};r=await j(e.token,n)}}r&&(ie("¬°Inicio de sesi√≥n exitoso!",{icon:"‚úÖ",duration:3e3}),setTimeout((()=>v("/")),300))}catch(o){console.error("Error durante el login:",o),o.message&&o.message.includes("500")?m("El servidor no est√° disponible en este momento. Por favor, intente m√°s tarde."):o.message&&o.message.includes("401")?m("Credenciales incorrectas. Por favor, verifique su email y contrase√±a."):m(o.message||"Error al iniciar sesi√≥n. Por favor, intente de nuevo.")}}setTimeout((async()=>{try{console.log("Sincronizando imagen de perfil desde el servidor despu√©s del login...");(await R()).success?console.log("Imagen sincronizada correctamente desde el servidor"):console.warn("No se pudo obtener la imagen del servidor, usando la local si existe")}catch(e){console.error("Error al sincronizar imagen despu√©s del login:",e)}}),1e3)}catch(a){console.error("Error general durante la autenticaci√≥n:",a),m(a.message||"Error durante la autenticaci√≥n")}finally{u(!1),x.current=!1}}},className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-gray-700 text-sm font-medium sm:text-base",children:"Correo electr√≥nico"}),r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:e=>o(e.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm",placeholder:"tu@email.com"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-medium sm:text-base",children:"Contrase√±a"}),r.jsx("input",{id:"password",name:"password",type:"password",autoComplete:e?"new-password":"current-password",required:!0,value:i,onChange:e=>a(e.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm",placeholder:"Contrase√±a"})]}),e&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmPassword",className:"block text-gray-700 text-sm font-medium sm:text-base",children:"Confirmar Contrase√±a"}),r.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:s,onChange:e=>l(e.target.value),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm",placeholder:"Repite la contrase√±a"})]}),r.jsxs("div",{className:"flex items-center justify-between pt-2",children:[!e&&r.jsx("div",{className:"text-sm",children:r.jsx(p,{to:"/recuperar",className:"font-medium text-blue-600 hover:text-blue-500",children:"¬øOlvidaste tu contrase√±a?"})}),r.jsx("div",{className:"text-sm "+(e?"":"ml-auto"),children:r.jsx(p,{to:e?"/login":"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:e?"¬øYa tienes una cuenta? Inicia sesi√≥n":"¬øNo tienes cuenta? Reg√≠strate"})})]}),r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:c,className:"flex w-full justify-center rounded-md py-2 px-4 text-sm font-medium text-white shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:text-base\n                                                "+(c?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"),children:c?r.jsxs("span",{className:"flex items-center",children:[r.jsxs("svg",{className:"h-5 w-5 animate-spin mr-2",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e?"Creando cuenta...":"Iniciando sesi√≥n..."]}):r.jsx("span",{children:e?"Crear cuenta":"Iniciar sesi√≥n"})})})]})]})})]})})]})})};Bu.propTypes={isRegistering:l(Ru).bool};var qu=function(){this.__data__=[],this.size=0};var Fu=function(e,t){return e===t||e!=e&&t!=t},zu=Fu;var Uu=function(e,t){for(var r=e.length;r--;)if(zu(e[r][0],t))return r;return-1},Vu=Uu,Hu=Array.prototype.splice;var $u=Uu;var Gu=Uu;var Wu=Uu;var Ku=qu,Yu=function(e){var t=this.__data__,r=Vu(t,e);return!(r<0)&&(r==t.length-1?t.pop():Hu.call(t,r,1),--this.size,!0)},Zu=function(e){var t=this.__data__,r=$u(t,e);return r<0?void 0:t[r][1]},Ju=function(e){return Gu(this.__data__,e)>-1},Xu=function(e,t){var r=this.__data__,n=Wu(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function Qu(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Qu.prototype.clear=Ku,Qu.prototype.delete=Yu,Qu.prototype.get=Zu,Qu.prototype.has=Ju,Qu.prototype.set=Xu;var ed=Qu,td=ed;var rd=function(){this.__data__=new td,this.size=0};var nd=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r};var od=function(e){return this.__data__.get(e)};var id=function(e){return this.__data__.has(e)},ad="object"==typeof globalThis&&globalThis&&globalThis.Object===Object&&globalThis,sd=ad,ld="object"==typeof self&&self&&self.Object===Object&&self,cd=sd||ld||Function("return this")(),ud=cd.Symbol,dd=ud,pd=Object.prototype,fd=pd.hasOwnProperty,md=pd.toString,hd=dd?dd.toStringTag:void 0;var gd=function(e){var t=fd.call(e,hd),r=e[hd];try{e[hd]=void 0;var n=!0}catch(ot){}var o=md.call(e);return n&&(t?e[hd]=r:delete e[hd]),o},bd=Object.prototype.toString;var yd=gd,vd=function(e){return bd.call(e)},xd=ud?ud.toStringTag:void 0;var wd=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":xd&&xd in Object(e)?yd(e):vd(e)};var Ed=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},jd=wd,Nd=Ed;var Sd,_d=function(e){if(!Nd(e))return!1;var t=jd(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},kd=cd["__core-js_shared__"],Od=(Sd=/[^.]+$/.exec(kd&&kd.keys&&kd.keys.IE_PROTO||""))?"Symbol(src)_1."+Sd:"";var Pd=function(e){return!!Od&&Od in e},Td=Function.prototype.toString;var Id=function(e){if(null!=e){try{return Td.call(e)}catch(ot){}try{return e+""}catch(ot){}}return""},Cd=_d,Ad=Pd,Dd=Ed,Ld=Id,Rd=/^\[object .+?Constructor\]$/,Md=Function.prototype,Bd=Object.prototype,qd=Md.toString,Fd=Bd.hasOwnProperty,zd=RegExp("^"+qd.call(Fd).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Ud=function(e){return!(!Dd(e)||Ad(e))&&(Cd(e)?zd:Rd).test(Ld(e))},Vd=function(e,t){return null==e?void 0:e[t]};var Hd=function(e,t){var r=Vd(e,t);return Ud(r)?r:void 0},$d=Hd(cd,"Map"),Gd=Hd(Object,"create"),Wd=Gd;var Kd=function(){this.__data__=Wd?Wd(null):{},this.size=0};var Yd=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Zd=Gd,Jd=Object.prototype.hasOwnProperty;var Xd=function(e){var t=this.__data__;if(Zd){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Jd.call(t,e)?t[e]:void 0},Qd=Gd,ep=Object.prototype.hasOwnProperty;var tp=Gd;var rp=Kd,np=Yd,op=Xd,ip=function(e){var t=this.__data__;return Qd?void 0!==t[e]:ep.call(t,e)},ap=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=tp&&void 0===t?"__lodash_hash_undefined__":t,this};function sp(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}sp.prototype.clear=rp,sp.prototype.delete=np,sp.prototype.get=op,sp.prototype.has=ip,sp.prototype.set=ap;var lp=sp,cp=ed,up=$d;var dp=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var pp=function(e,t){var r=e.__data__;return dp(t)?r["string"==typeof t?"string":"hash"]:r.map},fp=pp;var mp=pp;var hp=pp;var gp=pp;var bp=function(){this.size=0,this.__data__={hash:new lp,map:new(up||cp),string:new lp}},yp=function(e){var t=fp(this,e).delete(e);return this.size-=t?1:0,t},vp=function(e){return mp(this,e).get(e)},xp=function(e){return hp(this,e).has(e)},wp=function(e,t){var r=gp(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function Ep(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ep.prototype.clear=bp,Ep.prototype.delete=yp,Ep.prototype.get=vp,Ep.prototype.has=xp,Ep.prototype.set=wp;var jp=Ep,Np=ed,Sp=$d,_p=jp;var kp=ed,Op=rd,Pp=nd,Tp=od,Ip=id,Cp=function(e,t){var r=this.__data__;if(r instanceof Np){var n=r.__data__;if(!Sp||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new _p(n)}return r.set(e,t),this.size=r.size,this};function Ap(e){var t=this.__data__=new kp(e);this.size=t.size}Ap.prototype.clear=Op,Ap.prototype.delete=Pp,Ap.prototype.get=Tp,Ap.prototype.has=Ip,Ap.prototype.set=Cp;var Dp=Ap;var Lp=jp,Rp=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Mp=function(e){return this.__data__.has(e)};function Bp(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Lp;++t<r;)this.add(e[t])}Bp.prototype.add=Bp.prototype.push=Rp,Bp.prototype.has=Mp;var qp=Bp,Fp=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1},zp=function(e,t){return e.has(t)};var Up=function(e,t,r,n,o,i){var a=1&r,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var d=-1,p=!0,f=2&r?new qp:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var m=e[d],h=t[d];if(n)var g=a?n(h,m,d,t,e,i):n(m,h,d,e,t,i);if(void 0!==g){if(g)continue;p=!1;break}if(f){if(!Fp(t,(function(e,t){if(!zp(f,t)&&(m===e||o(m,e,r,n,i)))return f.push(t)}))){p=!1;break}}else if(m!==h&&!o(m,h,r,n,i)){p=!1;break}}return i.delete(e),i.delete(t),p};var Vp=cd.Uint8Array,Hp=Fu,$p=Up,Gp=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r},Wp=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r},Kp=ud?ud.prototype:void 0,Yp=Kp?Kp.valueOf:void 0;var Zp=function(e,t,r,n,o,i,a){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new Vp(e),new Vp(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Hp(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Gp;case"[object Set]":var l=1&n;if(s||(s=Wp),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;n|=2,a.set(e,t);var u=$p(s(e),s(t),n,o,i,a);return a.delete(e),u;case"[object Symbol]":if(Yp)return Yp.call(e)==Yp.call(t)}return!1};var Jp=function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e},Xp=Array.isArray,Qp=Jp,ef=Xp;var tf=function(e,t,r){var n=t(e);return ef(e)?n:Qp(n,r(e))};var rf=function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i},nf=function(){return[]},of=Object.prototype.propertyIsEnumerable,af=Object.getOwnPropertySymbols,sf=af?function(e){return null==e?[]:(e=Object(e),rf(af(e),(function(t){return of.call(e,t)})))}:nf;var lf=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n};var cf=function(e){return null!=e&&"object"==typeof e},uf=wd,df=cf;var pf,ff,mf,hf,gf,bf,yf,vf,xf=function(e){return df(e)&&"[object Arguments]"==uf(e)},wf=cf,Ef=Object.prototype,jf=Ef.hasOwnProperty,Nf=Ef.propertyIsEnumerable,Sf=xf(function(){return arguments}())?xf:function(e){return wf(e)&&jf.call(e,"callee")&&!Nf.call(e,"callee")},_f={exports:{}};pf=_f,mf=cd,hf=function(){return!1},gf=(ff=_f.exports)&&!ff.nodeType&&ff,bf=gf&&pf&&!pf.nodeType&&pf,yf=bf&&bf.exports===gf?mf.Buffer:void 0,vf=(yf?yf.isBuffer:void 0)||hf,pf.exports=vf;var kf=_f.exports,Of=/^(?:0|[1-9]\d*)$/;var Pf=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&Of.test(e))&&e>-1&&e%1==0&&e<t};var Tf=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},If=wd,Cf=Tf,Af=cf,Df={};Df["[object Float32Array]"]=Df["[object Float64Array]"]=Df["[object Int8Array]"]=Df["[object Int16Array]"]=Df["[object Int32Array]"]=Df["[object Uint8Array]"]=Df["[object Uint8ClampedArray]"]=Df["[object Uint16Array]"]=Df["[object Uint32Array]"]=!0,Df["[object Arguments]"]=Df["[object Array]"]=Df["[object ArrayBuffer]"]=Df["[object Boolean]"]=Df["[object DataView]"]=Df["[object Date]"]=Df["[object Error]"]=Df["[object Function]"]=Df["[object Map]"]=Df["[object Number]"]=Df["[object Object]"]=Df["[object RegExp]"]=Df["[object Set]"]=Df["[object String]"]=Df["[object WeakMap]"]=!1;var Lf=function(e){return Af(e)&&Cf(e.length)&&!!Df[If(e)]};var Rf=function(e){return function(t){return e(t)}},Mf={exports:{}};!function(e,t){var r=ad,n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,i=o&&o.exports===n&&r.process,a=function(){try{var e=o&&o.require&&o.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(ot){}}();e.exports=a}(Mf,Mf.exports);var Bf=Mf.exports,qf=Lf,Ff=Rf,zf=Bf&&Bf.isTypedArray,Uf=zf?Ff(zf):qf,Vf=lf,Hf=Sf,$f=Xp,Gf=kf,Wf=Pf,Kf=Uf,Yf=Object.prototype.hasOwnProperty;var Zf=function(e,t){var r=$f(e),n=!r&&Hf(e),o=!r&&!n&&Gf(e),i=!r&&!n&&!o&&Kf(e),a=r||n||o||i,s=a?Vf(e.length,String):[],l=s.length;for(var c in e)!t&&!Yf.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Wf(c,l))||s.push(c);return s},Jf=Object.prototype;var Xf=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Jf)};var Qf=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),em=Xf,tm=Qf,rm=Object.prototype.hasOwnProperty;var nm=_d,om=Tf;var im=Zf,am=function(e){if(!em(e))return tm(e);var t=[];for(var r in Object(e))rm.call(e,r)&&"constructor"!=r&&t.push(r);return t},sm=function(e){return null!=e&&om(e.length)&&!nm(e)};var lm=tf,cm=sf,um=function(e){return sm(e)?im(e):am(e)};var dm=function(e){return lm(e,um,cm)},pm=Object.prototype.hasOwnProperty;var fm=function(e,t,r,n,o,i){var a=1&r,s=dm(e),l=s.length;if(l!=dm(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:pm.call(t,u)))return!1}var d=i.get(e),p=i.get(t);if(d&&p)return d==t&&p==e;var f=!0;i.set(e,t),i.set(t,e);for(var m=a;++c<l;){var h=e[u=s[c]],g=t[u];if(n)var b=a?n(g,h,u,t,e,i):n(h,g,u,e,t,i);if(!(void 0===b?h===g||o(h,g,r,n,i):b)){f=!1;break}m||(m="constructor"==u)}if(f&&!m){var y=e.constructor,v=t.constructor;y==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v||(f=!1)}return i.delete(e),i.delete(t),f},mm=Hd(cd,"DataView"),hm=$d,gm=Hd(cd,"Promise"),bm=Hd(cd,"Set"),ym=Hd(cd,"WeakMap"),vm=wd,xm=Id,wm="[object Map]",Em="[object Promise]",jm="[object Set]",Nm="[object WeakMap]",Sm="[object DataView]",_m=xm(mm),km=xm(hm),Om=xm(gm),Pm=xm(bm),Tm=xm(ym),Im=vm;(mm&&Im(new mm(new ArrayBuffer(1)))!=Sm||hm&&Im(new hm)!=wm||gm&&Im(gm.resolve())!=Em||bm&&Im(new bm)!=jm||ym&&Im(new ym)!=Nm)&&(Im=function(e){var t=vm(e),r="[object Object]"==t?e.constructor:void 0,n=r?xm(r):"";if(n)switch(n){case _m:return Sm;case km:return wm;case Om:return Em;case Pm:return jm;case Tm:return Nm}return t});var Cm=Dp,Am=Up,Dm=Zp,Lm=fm,Rm=Im,Mm=Xp,Bm=kf,qm=Uf,Fm="[object Arguments]",zm="[object Array]",Um="[object Object]",Vm=Object.prototype.hasOwnProperty;var Hm=function(e,t,r,n,o,i){var a=Mm(e),s=Mm(t),l=a?zm:Rm(e),c=s?zm:Rm(t),u=(l=l==Fm?Um:l)==Um,d=(c=c==Fm?Um:c)==Um,p=l==c;if(p&&Bm(e)){if(!Bm(t))return!1;a=!0,u=!1}if(p&&!u)return i||(i=new Cm),a||qm(e)?Am(e,t,r,n,o,i):Dm(e,t,l,r,n,o,i);if(!(1&r)){var f=u&&Vm.call(e,"__wrapped__"),m=d&&Vm.call(t,"__wrapped__");if(f||m){var h=f?e.value():e,g=m?t.value():t;return i||(i=new Cm),o(h,g,r,n,i)}}return!!p&&(i||(i=new Cm),Lm(e,t,r,n,o,i))},$m=cf;var Gm=function e(t,r,n,o,i){return t===r||(null==t||null==r||!$m(t)&&!$m(r)?t!=t&&r!=r:Hm(t,r,n,o,e,i))},Wm=Gm;var Km,Ym=function(e,t){return Wm(e,t)},Zm={exports:{}};"undefined"!=typeof self&&self,Km=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=109)}([function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(17),o=r(18),i=r(19),a=r(45),s=r(46),l=r(47),c=r(48),u=r(49),d=r(12),p=r(32),f=r(33),m=r(31),h=r(1),g={Scope:h.Scope,create:h.create,find:h.find,query:h.query,register:h.register,Container:n.default,Format:o.default,Leaf:i.default,Embed:c.default,Scroll:a.default,Block:l.default,Inline:s.default,Text:u.default,Attributor:{Attribute:d.default,Class:p.default,Style:f.default,Store:m.default}};t.default=g},function(e,t,r){var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var r=this;return t="[Parchment] "+t,(r=e.call(this,t)||this).message=t,r.name=r.constructor.name,r}return o(t,e),t}(Error);t.ParchmentError=i;var a,s,l={},c={},u={},d={};function p(e,t){var r;if(void 0===t&&(t=a.ANY),"string"==typeof e)r=d[e]||l[e];else if(e instanceof Text||e.nodeType===Node.TEXT_NODE)r=d.text;else if("number"==typeof e)e&a.LEVEL&a.BLOCK?r=d.block:e&a.LEVEL&a.INLINE&&(r=d.inline);else if(e instanceof HTMLElement){var n=(e.getAttribute("class")||"").split(/\s+/);for(var o in n)if(r=c[n[o]])break;r=r||u[e.tagName]}return null==r?null:t&a.LEVEL&r.scope&&t&a.TYPE&r.scope?r:null}t.DATA_KEY="__blot",(s=a=t.Scope||(t.Scope={}))[s.TYPE=3]="TYPE",s[s.LEVEL=12]="LEVEL",s[s.ATTRIBUTE=13]="ATTRIBUTE",s[s.BLOT=14]="BLOT",s[s.INLINE=7]="INLINE",s[s.BLOCK=11]="BLOCK",s[s.BLOCK_BLOT=10]="BLOCK_BLOT",s[s.INLINE_BLOT=6]="INLINE_BLOT",s[s.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",s[s.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",s[s.ANY=15]="ANY",t.create=function(e,t){var r=p(e);if(null==r)throw new i("Unable to create "+e+" blot");var n=r,o=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:n.create(t);return new n(o,t)},t.find=function e(r,n){return void 0===n&&(n=!1),null==r?null:null!=r[t.DATA_KEY]?r[t.DATA_KEY].blot:n?e(r.parentNode,n):null},t.query=p,t.register=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length>1)return t.map((function(t){return e(t)}));var n=t[0];if("string"!=typeof n.blotName&&"string"!=typeof n.attrName)throw new i("Invalid definition");if("abstract"===n.blotName)throw new i("Cannot register abstract class");return d[n.blotName||n.attrName]=n,"string"==typeof n.keyName?l[n.keyName]=n:(null!=n.className&&(c[n.className]=n),null!=n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map((function(e){return e.toUpperCase()})):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach((function(e){null!=u[e]&&null!=n.className||(u[e]=n)})))),n}},function(e,t,r){var n=r(51),o=r(11),i=r(3),a=r(20),s=String.fromCharCode(0),l=function(e){Array.isArray(e)?this.ops=e:null!=e&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]};l.prototype.insert=function(e,t){var r={};return 0===e.length?this:(r.insert=e,null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(r.attributes=t),this.push(r))},l.prototype.delete=function(e){return e<=0?this:this.push({delete:e})},l.prototype.retain=function(e,t){if(e<=0)return this;var r={retain:e};return null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(r.attributes=t),this.push(r)},l.prototype.push=function(e){var t=this.ops.length,r=this.ops[t-1];if(e=i(!0,{},e),"object"==typeof r){if("number"==typeof e.delete&&"number"==typeof r.delete)return this.ops[t-1]={delete:r.delete+e.delete},this;if("number"==typeof r.delete&&null!=e.insert&&(t-=1,"object"!=typeof(r=this.ops[t-1])))return this.ops.unshift(e),this;if(o(e.attributes,r.attributes)){if("string"==typeof e.insert&&"string"==typeof r.insert)return this.ops[t-1]={insert:r.insert+e.insert},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this;if("number"==typeof e.retain&&"number"==typeof r.retain)return this.ops[t-1]={retain:r.retain+e.retain},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this},l.prototype.chop=function(){var e=this.ops[this.ops.length-1];return e&&e.retain&&!e.attributes&&this.ops.pop(),this},l.prototype.filter=function(e){return this.ops.filter(e)},l.prototype.forEach=function(e){this.ops.forEach(e)},l.prototype.map=function(e){return this.ops.map(e)},l.prototype.partition=function(e){var t=[],r=[];return this.forEach((function(n){(e(n)?t:r).push(n)})),[t,r]},l.prototype.reduce=function(e,t){return this.ops.reduce(e,t)},l.prototype.changeLength=function(){return this.reduce((function(e,t){return t.insert?e+a.length(t):t.delete?e-t.delete:e}),0)},l.prototype.length=function(){return this.reduce((function(e,t){return e+a.length(t)}),0)},l.prototype.slice=function(e,t){e=e||0,"number"!=typeof t&&(t=1/0);for(var r=[],n=a.iterator(this.ops),o=0;o<t&&n.hasNext();){var i;o<e?i=n.next(e-o):(i=n.next(t-o),r.push(i)),o+=a.length(i)}return new l(r)},l.prototype.compose=function(e){var t=a.iterator(this.ops),r=a.iterator(e.ops),n=[],i=r.peek();if(null!=i&&"number"==typeof i.retain&&null==i.attributes){for(var s=i.retain;"insert"===t.peekType()&&t.peekLength()<=s;)s-=t.peekLength(),n.push(t.next());i.retain-s>0&&r.next(i.retain-s)}for(var c=new l(n);t.hasNext()||r.hasNext();)if("insert"===r.peekType())c.push(r.next());else if("delete"===t.peekType())c.push(t.next());else{var u=Math.min(t.peekLength(),r.peekLength()),d=t.next(u),p=r.next(u);if("number"==typeof p.retain){var f={};"number"==typeof d.retain?f.retain=u:f.insert=d.insert;var m=a.attributes.compose(d.attributes,p.attributes,"number"==typeof d.retain);if(m&&(f.attributes=m),c.push(f),!r.hasNext()&&o(c.ops[c.ops.length-1],f)){var h=new l(t.rest());return c.concat(h).chop()}}else"number"==typeof p.delete&&"number"==typeof d.retain&&c.push(p)}return c.chop()},l.prototype.concat=function(e){var t=new l(this.ops.slice());return e.ops.length>0&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t},l.prototype.diff=function(e,t){if(this.ops===e.ops)return new l;var r=[this,e].map((function(t){return t.map((function(r){if(null!=r.insert)return"string"==typeof r.insert?r.insert:s;throw new Error("diff() called "+(t===e?"on":"with")+" non-document")})).join("")})),i=new l,c=n(r[0],r[1],t),u=a.iterator(this.ops),d=a.iterator(e.ops);return c.forEach((function(e){for(var t=e[1].length;t>0;){var r=0;switch(e[0]){case n.INSERT:r=Math.min(d.peekLength(),t),i.push(d.next(r));break;case n.DELETE:r=Math.min(t,u.peekLength()),u.next(r),i.delete(r);break;case n.EQUAL:r=Math.min(u.peekLength(),d.peekLength(),t);var s=u.next(r),l=d.next(r);o(s.insert,l.insert)?i.retain(r,a.attributes.diff(s.attributes,l.attributes)):i.push(l).delete(r)}t-=r}})),i.chop()},l.prototype.eachLine=function(e,t){t=t||"\n";for(var r=a.iterator(this.ops),n=new l,o=0;r.hasNext();){if("insert"!==r.peekType())return;var i=r.peek(),s=a.length(i)-r.peekLength(),c="string"==typeof i.insert?i.insert.indexOf(t,s)-s:-1;if(c<0)n.push(r.next());else if(c>0)n.push(r.next(c));else{if(!1===e(n,r.next(1).attributes||{},o))return;o+=1,n=new l}}n.length()>0&&e(n,{},o)},l.prototype.transform=function(e,t){if(t=!!t,"number"==typeof e)return this.transformPosition(e,t);for(var r=a.iterator(this.ops),n=a.iterator(e.ops),o=new l;r.hasNext()||n.hasNext();)if("insert"!==r.peekType()||!t&&"insert"===n.peekType())if("insert"===n.peekType())o.push(n.next());else{var i=Math.min(r.peekLength(),n.peekLength()),s=r.next(i),c=n.next(i);if(s.delete)continue;c.delete?o.push(c):o.retain(i,a.attributes.transform(s.attributes,c.attributes,t))}else o.retain(a.length(r.next()));return o.chop()},l.prototype.transformPosition=function(e,t){t=!!t;for(var r=a.iterator(this.ops),n=0;r.hasNext()&&n<=e;){var o=r.peekLength(),i=r.peekType();r.next(),"delete"!==i?("insert"===i&&(n<e||!t)&&(e+=o),n+=o):e-=Math.min(o,e-n)}return e},e.exports=l},function(e,t){var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString,o=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},s=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var t,o=r.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!o&&!i)return!1;for(t in e);return void 0===t||r.call(e,t)},l=function(e,t){o&&"__proto__"===t.name?o(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c=function(e,t){if("__proto__"===t){if(!r.call(e,t))return;if(i)return i(e,t).value}return e[t]};e.exports=function e(){var t,r,n,o,i,u,d=arguments[0],p=1,f=arguments.length,m=!1;for("boolean"==typeof d&&(m=d,d=arguments[1]||{},p=2),(null==d||"object"!=typeof d&&"function"!=typeof d)&&(d={});p<f;++p)if(null!=(t=arguments[p]))for(r in t)n=c(d,r),d!==(o=c(t,r))&&(m&&o&&(s(o)||(i=a(o)))?(i?(i=!1,u=n&&a(n)?n:[]):u=n&&s(n)?n:{},l(d,{name:r,newValue:e(m,u,o)})):void 0!==o&&l(d,{name:r,newValue:o}));return d}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BlockEmbed=t.bubbleFormats=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},i=d(r(3)),a=d(r(2)),s=d(r(0)),l=d(r(16)),c=d(r(6)),u=d(r(7));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return p(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),n(t,[{key:"attach",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attach",this).call(this),this.attributes=new s.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new a.default).insert(this.value(),(0,i.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(e,t){var r=s.default.query(e,s.default.Scope.BLOCK_ATTRIBUTE);null!=r&&this.attributes.attribute(r,t)}},{key:"formatAt",value:function(e,t,r,n){this.format(r,n)}},{key:"insertAt",value:function(e,r,n){if("string"==typeof r&&r.endsWith("\n")){var i=s.default.create(g.blotName);this.parent.insertBefore(i,0===e?this:this.next),i.insertAt(0,r.slice(0,-1))}else o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,r,n)}}]),t}(s.default.Embed);h.scope=s.default.Scope.BLOCK_BLOT;var g=function(e){function t(e){p(this,t);var r=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.cache={},r}return m(t,e),n(t,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(s.default.Leaf).reduce((function(e,t){return 0===t.length()?e:e.insert(t.value(),b(t))}),new a.default).insert("\n",b(this))),this.cache.delta}},{key:"deleteAt",value:function(e,r){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,r),this.cache={}}},{key:"formatAt",value:function(e,r,n,i){r<=0||(s.default.query(n,s.default.Scope.BLOCK)?e+r===this.length()&&this.format(n,i):o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,Math.min(r,this.length()-e-1),n,i),this.cache={})}},{key:"insertAt",value:function(e,r,n){if(null!=n)return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,r,n);if(0!==r.length){var i=r.split("\n"),a=i.shift();a.length>0&&(e<this.length()-1||null==this.children.tail?o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,Math.min(e,this.length()-1),a):this.children.tail.insertAt(this.children.tail.length(),a),this.cache={});var s=this;i.reduce((function(e,t){return(s=s.split(e,!0)).insertAt(0,t),t.length}),e+a.length)}}},{key:"insertBefore",value:function(e,r){var n=this.children.head;o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,r),n instanceof l.default&&n.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(e,r){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveChildren",this).call(this,e,r),this.cache={}}},{key:"optimize",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.cache={}}},{key:"path",value:function(e){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e,!0)}},{key:"removeChild",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeChild",this).call(this,e),this.cache={}}},{key:"split",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r&&(0===e||e>=this.length()-1)){var n=this.clone();return 0===e?(this.parent.insertBefore(n,this),this):(this.parent.insertBefore(n,this.next),n)}var i=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"split",this).call(this,e,r);return this.cache={},i}}]),t}(s.default.Block);function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==e?t:("function"==typeof e.formats&&(t=(0,i.default)(t,e.formats())),null==e.parent||"scroll"==e.parent.blotName||e.parent.statics.scope!==e.statics.scope?t:b(e.parent,t))}g.blotName="block",g.tagName="P",g.defaultChild="break",g.allowedChildren=[c.default,s.default.Embed,u.default],t.bubbleFormats=b,t.BlockEmbed=h,t.default=g},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.overload=t.expandConfig=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){o=!0,i=l}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r(50);var a=g(r(2)),s=g(r(14)),l=g(r(8)),c=g(r(9)),u=g(r(0)),d=r(15),p=g(d),f=g(r(3)),m=g(r(10)),h=g(r(34));function g(e){return e&&e.__esModule?e:{default:e}}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=(0,m.default)("quill"),v=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=x(t,n),this.container=this.options.container,null==this.container)return y.error("Invalid Quill container",t);this.options.debug&&e.debug(this.options.debug);var o=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new l.default,this.scroll=u.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new s.default(this.scroll),this.selection=new p.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(l.default.events.EDITOR_CHANGE,(function(e){e===l.default.events.TEXT_CHANGE&&r.root.classList.toggle("ql-blank",r.editor.isBlank())})),this.emitter.on(l.default.events.SCROLL_UPDATE,(function(e,t){var n=r.selection.lastRange,o=n&&0===n.length?n.index:void 0;w.call(r,(function(){return r.editor.update(null,t,o)}),e)}));var i=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+o+"<p><br></p></div>");this.setContents(i),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return i(e,null,[{key:"debug",value:function(e){!0===e&&(e="log"),m.default.level(e)}},{key:"find",value:function(e){return e.__quill||u.default.find(e)}},{key:"import",value:function(e){return null==this.imports[e]&&y.error("Cannot import "+e+". Are you sure it was registered?"),this.imports[e]}},{key:"register",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof e){var o=e.attrName||e.blotName;"string"==typeof o?this.register("formats/"+o,e,t):Object.keys(e).forEach((function(n){r.register(n,e[n],t)}))}else null==this.imports[e]||n||y.warn("Overwriting "+e+" with",t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&"abstract"!==t.blotName?u.default.register(t):e.startsWith("modules")&&"function"==typeof t.register&&t.register()}}]),i(e,[{key:"addContainer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof e){var r=e;(e=document.createElement("div")).classList.add(r)}return this.container.insertBefore(e,t),e}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(e,t,r){var n=this,i=E(e,t,r),a=o(i,4);return e=a[0],t=a[1],r=a[3],w.call(this,(function(){return n.editor.deleteText(e,t)}),r,e,-1*t)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}},{key:"focus",value:function(){var e=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=e,this.scrollIntoView()}},{key:"format",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;return w.call(this,(function(){var n=r.getSelection(!0),o=new a.default;if(null==n)return o;if(u.default.query(e,u.default.Scope.BLOCK))o=r.editor.formatLine(n.index,n.length,b({},e,t));else{if(0===n.length)return r.selection.format(e,t),o;o=r.editor.formatText(n.index,n.length,b({},e,t))}return r.setSelection(n,l.default.sources.SILENT),o}),n)}},{key:"formatLine",value:function(e,t,r,n,i){var a,s=this,l=E(e,t,r,n,i),c=o(l,4);return e=c[0],t=c[1],a=c[2],i=c[3],w.call(this,(function(){return s.editor.formatLine(e,t,a)}),i,e,0)}},{key:"formatText",value:function(e,t,r,n,i){var a,s=this,l=E(e,t,r,n,i),c=o(l,4);return e=c[0],t=c[1],a=c[2],i=c[3],w.call(this,(function(){return s.editor.formatText(e,t,a)}),i,e,0)}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=void 0;r="number"==typeof e?this.selection.getBounds(e,t):this.selection.getBounds(e.index,e.length);var n=this.container.getBoundingClientRect();return{bottom:r.bottom-n.top,height:r.height,left:r.left-n.left,right:r.right-n.left,top:r.top-n.top,width:r.width}}},{key:"getContents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,r=E(e,t),n=o(r,2);return e=n[0],t=n[1],this.editor.getContents(e,t)}},{key:"getFormat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof e?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}},{key:"getIndex",value:function(e){return e.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(e){return this.scroll.leaf(e)}},{key:"getLine",value:function(e){return this.scroll.line(e)}},{key:"getLines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof e?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}},{key:"getModule",value:function(e){return this.theme.modules[e]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,r=E(e,t),n=o(r,2);return e=n[0],t=n[1],this.editor.getText(e,t)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(t,r,n){var o=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.sources.API;return w.call(this,(function(){return o.editor.insertEmbed(t,r,n)}),i,t)}},{key:"insertText",value:function(e,t,r,n,i){var a,s=this,l=E(e,0,r,n,i),c=o(l,4);return e=c[0],a=c[2],i=c[3],w.call(this,(function(){return s.editor.insertText(e,t,a)}),i,e,t.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(e,t,r){this.clipboard.dangerouslyPasteHTML(e,t,r)}},{key:"removeFormat",value:function(e,t,r){var n=this,i=E(e,t,r),a=o(i,4);return e=a[0],t=a[1],r=a[3],w.call(this,(function(){return n.editor.removeFormat(e,t)}),r,e)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return w.call(this,(function(){e=new a.default(e);var r=t.getLength(),n=t.editor.deleteText(0,r),o=t.editor.applyDelta(e),i=o.ops[o.ops.length-1];return null!=i&&"string"==typeof i.insert&&"\n"===i.insert[i.insert.length-1]&&(t.editor.deleteText(t.getLength()-1,1),o.delete(1)),n.compose(o)}),r)}},{key:"setSelection",value:function(t,r,n){if(null==t)this.selection.setRange(null,r||e.sources.API);else{var i=E(t,r,n),a=o(i,4);t=a[0],r=a[1],n=a[3],this.selection.setRange(new d.Range(t,r),n),n!==l.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API,r=(new a.default).insert(e);return this.setContents(r,t)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,t=this.scroll.update(e);return this.selection.update(e),t}},{key:"updateContents",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return w.call(this,(function(){return e=new a.default(e),t.editor.applyDelta(e,r)}),r,!0)}}]),e}();function x(e,t){if((t=(0,f.default)(!0,{container:e,modules:{clipboard:!0,keyboard:!0,history:!0}},t)).theme&&t.theme!==v.DEFAULTS.theme){if(t.theme=v.import("themes/"+t.theme),null==t.theme)throw new Error("Invalid theme "+t.theme+". Did you register it?")}else t.theme=h.default;var r=(0,f.default)(!0,{},t.theme.DEFAULTS);[r,t].forEach((function(e){e.modules=e.modules||{},Object.keys(e.modules).forEach((function(t){!0===e.modules[t]&&(e.modules[t]={})}))}));var n=Object.keys(r.modules).concat(Object.keys(t.modules)).reduce((function(e,t){var r=v.import("modules/"+t);return null==r?y.error("Cannot load "+t+" module. Are you sure you registered it?"):e[t]=r.DEFAULTS||{},e}),{});return null!=t.modules&&t.modules.toolbar&&t.modules.toolbar.constructor!==Object&&(t.modules.toolbar={container:t.modules.toolbar}),t=(0,f.default)(!0,{},v.DEFAULTS,{modules:n},r,t),["bounds","container","scrollingContainer"].forEach((function(e){"string"==typeof t[e]&&(t[e]=document.querySelector(t[e]))})),t.modules=Object.keys(t.modules).reduce((function(e,r){return t.modules[r]&&(e[r]=t.modules[r]),e}),{}),t}function w(e,t,r,n){if(this.options.strict&&!this.isEnabled()&&t===l.default.sources.USER)return new a.default;var o=null==r?null:this.getSelection(),i=this.editor.delta,s=e();if(null!=o&&(!0===r&&(r=o.index),null==n?o=j(o,s,t):0!==n&&(o=j(o,r,n,t)),this.setSelection(o,l.default.sources.SILENT)),s.length()>0){var c,u,d=[l.default.events.TEXT_CHANGE,s,i,t];(c=this.emitter).emit.apply(c,[l.default.events.EDITOR_CHANGE].concat(d)),t!==l.default.sources.SILENT&&(u=this.emitter).emit.apply(u,d)}return s}function E(e,t,r,o,i){var a={};return"number"==typeof e.index&&"number"==typeof e.length?"number"!=typeof t?(i=o,o=r,r=t,t=e.length,e=e.index):(t=e.length,e=e.index):"number"!=typeof t&&(i=o,o=r,r=t,t=0),"object"===(void 0===r?"undefined":n(r))?(a=r,i=o):"string"==typeof r&&(null!=o?a[r]=o:i=r),[e,t,a,i=i||l.default.sources.API]}function j(e,t,r,n){if(null==e)return null;var i=void 0,s=void 0;if(t instanceof a.default){var c=[e.index,e.index+e.length].map((function(e){return t.transformPosition(e,n!==l.default.sources.USER)})),u=o(c,2);i=u[0],s=u[1]}else{var p=[e.index,e.index+e.length].map((function(e){return e<t||e===t&&n===l.default.sources.USER?e:r>=0?e+r:Math.max(t,e+r)})),f=o(p,2);i=f[0],s=f[1]}return new d.Range(i,s-i)}v.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},v.events=l.default.events,v.sources=l.default.sources,v.version="1.3.7",v.imports={delta:a.default,parchment:u.default,"core/module":c.default,"core/theme":h.default},t.expandConfig=x,t.overload=E,t.default=v},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},i=s(r(7)),a=s(r(0));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"formatAt",value:function(e,r,n,i){if(t.compare(this.statics.blotName,n)<0&&a.default.query(n,a.default.Scope.BLOT)){var s=this.isolate(e,r);i&&s.wrap(n,i)}else o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,r,n,i)}},{key:"optimize",value:function(e){if(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.parent instanceof t&&t.compare(this.statics.blotName,this.parent.statics.blotName)>0){var r=this.parent.isolate(this.offset(),this.length());this.moveChildren(r),r.wrap(this)}}}],[{key:"compare",value:function(e,r){var n=t.order.indexOf(e),o=t.order.indexOf(r);return n>=0||o>=0?n-o:e===r?0:e<r?-1:1}}]),t}(a.default.Inline);l.allowedChildren=[l,a.default.Embed,i.default],l.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],t.default=l},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(0),i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=o)&&n.__esModule?n:{default:n}).default.Text);t.default=i},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},i=a(r(54));function a(e){return e&&e.__esModule?e:{default:e}}var s=(0,a(r(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((function(e){document.addEventListener(e,(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];[].slice.call(document.querySelectorAll(".ql-container")).forEach((function(e){var r;e.__quill&&e.__quill.emitter&&(r=e.__quill.emitter).handleDOM.apply(r,t)}))}))}));var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.listeners={},e.on("error",s.error),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"emit",value:function(){s.log.apply(s,arguments),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];(this.listeners[e.type]||[]).forEach((function(t){var n=t.node,o=t.handler;(e.target===n||n.contains(e.target))&&o.apply(void 0,[e].concat(r))}))}},{key:"listenDOM",value:function(e,t,r){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push({node:t,handler:r})}}]),t}(i.default);l.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},l.sources={API:"api",SILENT:"silent",USER:"user"},t.default=l},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=r};n.DEFAULTS={},t.default=n},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=["error","warn","log","info"],o="warn";function i(e){if(n.indexOf(e)<=n.indexOf(o)){for(var t,r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];(t=console)[e].apply(t,i)}}function a(e){return n.reduce((function(t,r){return t[r]=i.bind(console,r,e),t}),{})}i.level=a.level=function(e){o=e},t.default=a},function(e,t,r){var n=Array.prototype.slice,o=r(52),i=r(53),a=e.exports=function(e,t,r){return r||(r={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?r.strict?e===t:e==t:function(e,t,r){var c,u;if(s(e)||s(t))return!1;if(e.prototype!==t.prototype)return!1;if(i(e))return!!i(t)&&(e=n.call(e),t=n.call(t),a(e,t,r));if(l(e)){if(!l(t))return!1;if(e.length!==t.length)return!1;for(c=0;c<e.length;c++)if(e[c]!==t[c])return!1;return!0}try{var d=o(e),p=o(t)}catch(ot){return!1}if(d.length!=p.length)return!1;for(d.sort(),p.sort(),c=d.length-1;c>=0;c--)if(d[c]!=p[c])return!1;for(c=d.length-1;c>=0;c--)if(u=d[c],!a(e[u],t[u],r))return!1;return typeof e==typeof t}(e,t,r))};function s(e){return null==e}function l(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length||"function"!=typeof e.copy||"function"!=typeof e.slice||e.length>0&&"number"!=typeof e[0])}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=function(){function e(e,t,r){void 0===r&&(r={}),this.attrName=e,this.keyName=t;var o=n.Scope.TYPE&n.Scope.ATTRIBUTE;null!=r.scope?this.scope=r.scope&n.Scope.LEVEL|o:this.scope=n.Scope.ATTRIBUTE,null!=r.whitelist&&(this.whitelist=r.whitelist)}return e.keys=function(e){return[].map.call(e.attributes,(function(e){return e.name}))},e.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.setAttribute(this.keyName,t),!0)},e.prototype.canAdd=function(e,t){return null!=n.query(e,n.Scope.BLOT&(this.scope|n.Scope.TYPE))&&(null==this.whitelist||("string"==typeof t?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1))},e.prototype.remove=function(e){e.removeAttribute(this.keyName)},e.prototype.value=function(e){var t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""},e}();t.default=o},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Code=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){o=!0,i=l}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},a=d(r(2)),s=d(r(0)),l=d(r(4)),c=d(r(6)),u=d(r(7));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return p(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),t}(c.default);h.blotName="code",h.tagName="CODE";var g=function(e){function t(){return p(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),o(t,[{key:"delta",value:function(){var e=this,t=this.domNode.textContent;return t.endsWith("\n")&&(t=t.slice(0,-1)),t.split("\n").reduce((function(t,r){return t.insert(r).insert("\n",e.formats())}),new a.default)}},{key:"format",value:function(e,r){if(e!==this.statics.blotName||!r){var o=this.descendant(u.default,this.length()-1),a=n(o,1)[0];null!=a&&a.deleteAt(a.length()-1,1),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r)}}},{key:"formatAt",value:function(e,r,n,o){if(0!==r&&null!=s.default.query(n,s.default.Scope.BLOCK)&&(n!==this.statics.blotName||o!==this.statics.formats(this.domNode))){var i=this.newlineIndex(e);if(!(i<0||i>=e+r)){var a=this.newlineIndex(e,!0)+1,l=i-a+1,c=this.isolate(a,l),u=c.next;c.format(n,o),u instanceof t&&u.formatAt(0,e-a+r-l,n,o)}}}},{key:"insertAt",value:function(e,t,r){if(null==r){var o=this.descendant(u.default,e),i=n(o,2),a=i[0],s=i[1];a.insertAt(s,t)}}},{key:"length",value:function(){var e=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?e:e+1}},{key:"newlineIndex",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.domNode.textContent.slice(0,e).lastIndexOf("\n");var t=this.domNode.textContent.slice(e).indexOf("\n");return t>-1?e+t:-1}},{key:"optimize",value:function(e){this.domNode.textContent.endsWith("\n")||this.appendChild(s.default.create("text","\n")),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var r=this.next;null!=r&&r.prev===this&&r.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===r.statics.formats(r.domNode)&&(r.optimize(e),r.moveChildren(this),r.remove())}},{key:"replace",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e),[].slice.call(this.domNode.querySelectorAll("*")).forEach((function(e){var t=s.default.find(e);null==t?e.parentNode.removeChild(e):t instanceof s.default.Embed?t.remove():t.unwrap()}))}}],[{key:"create",value:function(e){var r=i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return r.setAttribute("spellcheck",!1),r}},{key:"formats",value:function(){return!0}}]),t}(l.default);g.blotName="code-block",g.tagName="PRE",g.TAB="  ",t.Code=h,t.default=g},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){o=!0,i=l}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=b(r(2)),s=b(r(20)),l=b(r(0)),c=b(r(13)),u=b(r(24)),d=r(4),p=b(d),f=b(r(16)),m=b(r(21)),h=b(r(11)),g=b(r(3));function b(e){return e&&e.__esModule?e:{default:e}}var y=/^[ -~]*$/,v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scroll=t,this.delta=this.getDelta()}return i(e,[{key:"applyDelta",value:function(e){var t=this,r=!1;this.scroll.update();var i=this.scroll.length();return this.scroll.batchStart(),(e=function(e){return e.reduce((function(e,t){if(1===t.insert){var r=(0,m.default)(t.attributes);return delete r.image,e.insert({image:t.attributes.image},r)}if(null==t.attributes||!0!==t.attributes.list&&!0!==t.attributes.bullet||((t=(0,m.default)(t)).attributes.list?t.attributes.list="ordered":(t.attributes.list="bullet",delete t.attributes.bullet)),"string"==typeof t.insert){var n=t.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return e.insert(n,t.attributes)}return e.push(t)}),new a.default)}(e)).reduce((function(e,a){var c=a.retain||a.delete||a.insert.length||1,u=a.attributes||{};if(null!=a.insert){if("string"==typeof a.insert){var f=a.insert;f.endsWith("\n")&&r&&(r=!1,f=f.slice(0,-1)),e>=i&&!f.endsWith("\n")&&(r=!0),t.scroll.insertAt(e,f);var m=t.scroll.line(e),h=o(m,2),b=h[0],y=h[1],v=(0,g.default)({},(0,d.bubbleFormats)(b));if(b instanceof p.default){var x=b.descendant(l.default.Leaf,y),w=o(x,1)[0];v=(0,g.default)(v,(0,d.bubbleFormats)(w))}u=s.default.attributes.diff(v,u)||{}}else if("object"===n(a.insert)){var E=Object.keys(a.insert)[0];if(null==E)return e;t.scroll.insertAt(e,E,a.insert[E])}i+=c}return Object.keys(u).forEach((function(r){t.scroll.formatAt(e,c,r,u[r])})),e+c}),0),e.reduce((function(e,r){return"number"==typeof r.delete?(t.scroll.deleteAt(e,r.delete),e):e+(r.retain||r.insert.length||1)}),0),this.scroll.batchEnd(),this.update(e)}},{key:"deleteText",value:function(e,t){return this.scroll.deleteAt(e,t),this.update((new a.default).retain(e).delete(t))}},{key:"formatLine",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(n).forEach((function(o){if(null==r.scroll.whitelist||r.scroll.whitelist[o]){var i=r.scroll.lines(e,Math.max(t,1)),a=t;i.forEach((function(t){var i=t.length();if(t instanceof c.default){var s=e-t.offset(r.scroll),l=t.newlineIndex(s+a)-s+1;t.formatAt(s,l,o,n[o])}else t.format(o,n[o]);a-=i}))}})),this.scroll.optimize(),this.update((new a.default).retain(e).retain(t,(0,m.default)(n)))}},{key:"formatText",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(n).forEach((function(o){r.scroll.formatAt(e,t,o,n[o])})),this.update((new a.default).retain(e).retain(t,(0,m.default)(n)))}},{key:"getContents",value:function(e,t){return this.delta.slice(e,e+t)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce((function(e,t){return e.concat(t.delta())}),new a.default)}},{key:"getFormat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[],n=[];0===t?this.scroll.path(e).forEach((function(e){var t=o(e,1)[0];t instanceof p.default?r.push(t):t instanceof l.default.Leaf&&n.push(t)})):(r=this.scroll.lines(e,t),n=this.scroll.descendants(l.default.Leaf,e,t));var i=[r,n].map((function(e){if(0===e.length)return{};for(var t=(0,d.bubbleFormats)(e.shift());Object.keys(t).length>0;){var r=e.shift();if(null==r)return t;t=x((0,d.bubbleFormats)(r),t)}return t}));return g.default.apply(g.default,i)}},{key:"getText",value:function(e,t){return this.getContents(e,t).filter((function(e){return"string"==typeof e.insert})).map((function(e){return e.insert})).join("")}},{key:"insertEmbed",value:function(e,t,r){return this.scroll.insertAt(e,t,r),this.update((new a.default).retain(e).insert(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},t,r)))}},{key:"insertText",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(e,t),Object.keys(n).forEach((function(o){r.scroll.formatAt(e,t.length,o,n[o])})),this.update((new a.default).retain(e).insert(t,(0,m.default)(n)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var e=this.scroll.children.head;return e.statics.blotName===p.default.blotName&&!(e.children.length>1)&&e.children.head instanceof f.default}},{key:"removeFormat",value:function(e,t){var r=this.getText(e,t),n=this.scroll.line(e+t),i=o(n,2),s=i[0],l=i[1],u=0,d=new a.default;null!=s&&(u=s instanceof c.default?s.newlineIndex(l)-l+1:s.length()-l,d=s.delta().slice(l,l+u-1).insert("\n"));var p=this.getContents(e,t+u).diff((new a.default).insert(r).concat(d)),f=(new a.default).retain(e).concat(p);return this.applyDelta(f)}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=this.delta;if(1===t.length&&"characterData"===t[0].type&&t[0].target.data.match(y)&&l.default.find(t[0].target)){var o=l.default.find(t[0].target),i=(0,d.bubbleFormats)(o),s=o.offset(this.scroll),c=t[0].oldValue.replace(u.default.CONTENTS,""),p=(new a.default).insert(c),f=(new a.default).insert(o.value());e=(new a.default).retain(s).concat(p.diff(f,r)).reduce((function(e,t){return t.insert?e.insert(t.insert,i):e.push(t)}),new a.default),this.delta=n.compose(e)}else this.delta=this.getDelta(),e&&(0,h.default)(n.compose(e),this.delta)||(e=n.diff(this.delta,r));return e}}]),e}();function x(e,t){return Object.keys(t).reduce((function(r,n){return null==e[n]||(t[n]===e[n]?r[n]=t[n]:Array.isArray(t[n])?t[n].indexOf(e[n])<0&&(r[n]=t[n].concat([e[n]])):r[n]=[t[n],e[n]]),r}),{})}t.default=v},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Range=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){o=!0,i=l}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=c(r(0)),a=c(r(21)),s=c(r(11)),l=c(r(8));function c(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p=(0,c(r(10)).default)("quill:selection"),f=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;d(this,e),this.index=t,this.length=r},m=function(){function e(t,r){var n=this;d(this,e),this.emitter=r,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=i.default.create("cursor",this),this.lastRange=this.savedRange=new f(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(function(){n.mouseDown||setTimeout(n.update.bind(n,l.default.sources.USER),1)})),this.emitter.on(l.default.events.EDITOR_CHANGE,(function(e,t){e===l.default.events.TEXT_CHANGE&&t.length()>0&&n.update(l.default.sources.SILENT)})),this.emitter.on(l.default.events.SCROLL_BEFORE_UPDATE,(function(){if(n.hasFocus()){var e=n.getNativeRange();null!=e&&e.start.node!==n.cursor.textNode&&n.emitter.once(l.default.events.SCROLL_UPDATE,(function(){try{n.setNativeRange(e.start.node,e.start.offset,e.end.node,e.end.offset)}catch(t){}}))}})),this.emitter.on(l.default.events.SCROLL_OPTIMIZE,(function(e,t){if(t.range){var r=t.range,o=r.startNode,i=r.startOffset,a=r.endNode,s=r.endOffset;n.setNativeRange(o,i,a,s)}})),this.update(l.default.sources.SILENT)}return o(e,[{key:"handleComposition",value:function(){var e=this;this.root.addEventListener("compositionstart",(function(){e.composing=!0})),this.root.addEventListener("compositionend",(function(){if(e.composing=!1,e.cursor.parent){var t=e.cursor.restore();if(!t)return;setTimeout((function(){e.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)}),1)}}))}},{key:"handleDragging",value:function(){var e=this;this.emitter.listenDOM("mousedown",document.body,(function(){e.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(function(){e.mouseDown=!1,e.update(l.default.sources.USER)}))}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(e,t){if(null==this.scroll.whitelist||this.scroll.whitelist[e]){this.scroll.update();var r=this.getNativeRange();if(null!=r&&r.native.collapsed&&!i.default.query(e,i.default.Scope.BLOCK)){if(r.start.node!==this.cursor.textNode){var n=i.default.find(r.start.node,!1);if(null==n)return;if(n instanceof i.default.Leaf){var o=n.split(r.start.offset);n.parent.insertBefore(this.cursor,o)}else n.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.scroll.length();e=Math.min(e,r-1),t=Math.min(e+t,r-1)-e;var o=void 0,i=this.scroll.leaf(e),a=n(i,2),s=a[0],l=a[1];if(null==s)return null;var c=s.position(l,!0),u=n(c,2);o=u[0],l=u[1];var d=document.createRange();if(t>0){d.setStart(o,l);var p=this.scroll.leaf(e+t),f=n(p,2);if(s=f[0],l=f[1],null==s)return null;var m=s.position(l,!0),h=n(m,2);return o=h[0],l=h[1],d.setEnd(o,l),d.getBoundingClientRect()}var g="left",b=void 0;return o instanceof Text?(l<o.data.length?(d.setStart(o,l),d.setEnd(o,l+1)):(d.setStart(o,l-1),d.setEnd(o,l),g="right"),b=d.getBoundingClientRect()):(b=s.domNode.getBoundingClientRect(),l>0&&(g="right")),{bottom:b.top+b.height,height:b.height,left:b[g],right:b[g],top:b.top,width:0}}},{key:"getNativeRange",value:function(){var e=document.getSelection();if(null==e||e.rangeCount<=0)return null;var t=e.getRangeAt(0);if(null==t)return null;var r=this.normalizeNative(t);return p.info("getNativeRange",r),r}},{key:"getRange",value:function(){var e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(e){var t=this,r=[[e.start.node,e.start.offset]];e.native.collapsed||r.push([e.end.node,e.end.offset]);var o=r.map((function(e){var r=n(e,2),o=r[0],a=r[1],s=i.default.find(o,!0),l=s.offset(t.scroll);return 0===a?l:s instanceof i.default.Container?l+s.length():l+s.index(o,a)})),a=Math.min(Math.max.apply(Math,u(o)),this.scroll.length()-1),s=Math.min.apply(Math,[a].concat(u(o)));return new f(s,a-s)}},{key:"normalizeNative",value:function(e){if(!h(this.root,e.startContainer)||!e.collapsed&&!h(this.root,e.endContainer))return null;var t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach((function(e){for(var t=e.node,r=e.offset;!(t instanceof Text)&&t.childNodes.length>0;)if(t.childNodes.length>r)t=t.childNodes[r],r=0;else{if(t.childNodes.length!==r)break;r=(t=t.lastChild)instanceof Text?t.data.length:t.childNodes.length+1}e.node=t,e.offset=r})),t}},{key:"rangeToNative",value:function(e){var t=this,r=e.collapsed?[e.index]:[e.index,e.index+e.length],o=[],i=this.scroll.length();return r.forEach((function(e,r){e=Math.min(i-1,e);var a,s=t.scroll.leaf(e),l=n(s,2),c=l[0],u=l[1],d=c.position(u,0!==r),p=n(d,2);a=p[0],u=p[1],o.push(a,u)})),o.length<2&&(o=o.concat(o)),o}},{key:"scrollIntoView",value:function(e){var t=this.lastRange;if(null!=t){var r=this.getBounds(t.index,t.length);if(null!=r){var o=this.scroll.length()-1,i=this.scroll.line(Math.min(t.index,o)),a=n(i,1)[0],s=a;if(t.length>0){var l=this.scroll.line(Math.min(t.index+t.length,o));s=n(l,1)[0]}if(null!=a&&null!=s){var c=e.getBoundingClientRect();r.top<c.top?e.scrollTop-=c.top-r.top:r.bottom>c.bottom&&(e.scrollTop+=r.bottom-c.bottom)}}}}},{key:"setNativeRange",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(p.info("setNativeRange",e,t,r,n),null==e||null!=this.root.parentNode&&null!=e.parentNode&&null!=r.parentNode){var i=document.getSelection();if(null!=i)if(null!=e){this.hasFocus()||this.root.focus();var a=(this.getNativeRange()||{}).native;if(null==a||o||e!==a.startContainer||t!==a.startOffset||r!==a.endContainer||n!==a.endOffset){"BR"==e.tagName&&(t=[].indexOf.call(e.parentNode.childNodes,e),e=e.parentNode),"BR"==r.tagName&&(n=[].indexOf.call(r.parentNode.childNodes,r),r=r.parentNode);var s=document.createRange();s.setStart(e,t),s.setEnd(r,n),i.removeAllRanges(),i.addRange(s)}}else i.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;if("string"==typeof t&&(r=t,t=!1),p.info("setRange",e),null!=e){var n=this.rangeToNative(e);this.setNativeRange.apply(this,u(n).concat([t]))}else this.setNativeRange(null);this.update(r)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,t=this.lastRange,r=this.getRange(),o=n(r,2),i=o[0],c=o[1];if(this.lastRange=i,null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,s.default)(t,this.lastRange)){var u;!this.composing&&null!=c&&c.native.collapsed&&c.start.node!==this.cursor.textNode&&this.cursor.restore();var d,p=[l.default.events.SELECTION_CHANGE,(0,a.default)(this.lastRange),(0,a.default)(t),e];(u=this.emitter).emit.apply(u,[l.default.events.EDITOR_CHANGE].concat(p)),e!==l.default.sources.SILENT&&(d=this.emitter).emit.apply(d,p)}}}]),e}();function h(e,t){try{t.parentNode}catch(ot){return!1}return t instanceof Text&&(t=t.parentNode),e.contains(t)}t.Range=f,t.default=m},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},a=r(0),s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"insertInto",value:function(e,r){0===e.children.length?i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertInto",this).call(this,e,r):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),t}(((n=a)&&n.__esModule?n:{default:n}).default.Embed);s.blotName="break",s.tagName="BR",t.default=s},function(e,t,r){var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(44),a=r(30),s=r(1),l=function(e){function t(t){var r=e.call(this,t)||this;return r.build(),r}return o(t,e),t.prototype.appendChild=function(e){this.insertBefore(e)},t.prototype.attach=function(){e.prototype.attach.call(this),this.children.forEach((function(e){e.attach()}))},t.prototype.build=function(){var e=this;this.children=new i.default,[].slice.call(this.domNode.childNodes).reverse().forEach((function(t){try{var r=c(t);e.insertBefore(r,e.children.head||void 0)}catch(n){if(n instanceof s.ParchmentError)return;throw n}}))},t.prototype.deleteAt=function(e,t){if(0===e&&t===this.length())return this.remove();this.children.forEachAt(e,t,(function(e,t,r){e.deleteAt(t,r)}))},t.prototype.descendant=function(e,r){var n=this.children.find(r),o=n[0],i=n[1];return null==e.blotName&&e(o)||null!=e.blotName&&o instanceof e?[o,i]:o instanceof t?o.descendant(e,i):[null,-1]},t.prototype.descendants=function(e,r,n){void 0===r&&(r=0),void 0===n&&(n=Number.MAX_VALUE);var o=[],i=n;return this.children.forEachAt(r,n,(function(r,n,a){(null==e.blotName&&e(r)||null!=e.blotName&&r instanceof e)&&o.push(r),r instanceof t&&(o=o.concat(r.descendants(e,n,i))),i-=a})),o},t.prototype.detach=function(){this.children.forEach((function(e){e.detach()})),e.prototype.detach.call(this)},t.prototype.formatAt=function(e,t,r,n){this.children.forEachAt(e,t,(function(e,t,o){e.formatAt(t,o,r,n)}))},t.prototype.insertAt=function(e,t,r){var n=this.children.find(e),o=n[0],i=n[1];if(o)o.insertAt(i,t,r);else{var a=null==r?s.create("text",t):s.create(t,r);this.appendChild(a)}},t.prototype.insertBefore=function(e,t){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some((function(t){return e instanceof t})))throw new s.ParchmentError("Cannot insert "+e.statics.blotName+" into "+this.statics.blotName);e.insertInto(this,t)},t.prototype.length=function(){return this.children.reduce((function(e,t){return e+t.length()}),0)},t.prototype.moveChildren=function(e,t){this.children.forEach((function(r){e.insertBefore(r,t)}))},t.prototype.optimize=function(t){if(e.prototype.optimize.call(this,t),0===this.children.length)if(null!=this.statics.defaultChild){var r=s.create(this.statics.defaultChild);this.appendChild(r),r.optimize(t)}else this.remove()},t.prototype.path=function(e,r){void 0===r&&(r=!1);var n=this.children.find(e,r),o=n[0],i=n[1],a=[[this,e]];return o instanceof t?a.concat(o.path(i,r)):(null!=o&&a.push([o,i]),a)},t.prototype.removeChild=function(e){this.children.remove(e)},t.prototype.replace=function(r){r instanceof t&&r.moveChildren(this),e.prototype.replace.call(this,r)},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var r=this.clone();return this.parent.insertBefore(r,this.next),this.children.forEachAt(e,this.length(),(function(e,n,o){e=e.split(n,t),r.appendChild(e)})),r},t.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},t.prototype.update=function(e,t){var r=this,n=[],o=[];e.forEach((function(e){e.target===r.domNode&&"childList"===e.type&&(n.push.apply(n,e.addedNodes),o.push.apply(o,e.removedNodes))})),o.forEach((function(e){if(!(null!=e.parentNode&&"IFRAME"!==e.tagName&&document.body.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var t=s.find(e);null!=t&&(null!=t.domNode.parentNode&&t.domNode.parentNode!==r.domNode||t.detach())}})),n.filter((function(e){return e.parentNode==r.domNode})).sort((function(e,t){return e===t?0:e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1})).forEach((function(e){var t=null;null!=e.nextSibling&&(t=s.find(e.nextSibling));var n=c(e);n.next==t&&null!=n.next||(null!=n.parent&&n.parent.removeChild(r),r.insertBefore(n,t||void 0))}))},t}(a.default);function c(e){var t=s.find(e);if(null==t)try{t=s.create(e)}catch(ot){t=s.create(s.Scope.INLINE),[].slice.call(e.childNodes).forEach((function(e){t.domNode.appendChild(e)})),e.parentNode&&e.parentNode.replaceChild(t.domNode,e),t.attach()}return t}t.default=l},function(e,t,r){var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(12),a=r(31),s=r(17),l=r(1),c=function(e){function t(t){var r=e.call(this,t)||this;return r.attributes=new a.default(r.domNode),r}return o(t,e),t.formats=function(e){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?e.tagName.toLowerCase():void 0)},t.prototype.format=function(e,t){var r=l.query(e);r instanceof i.default?this.attributes.attribute(r,t):t&&(null==r||e===this.statics.blotName&&this.formats()[e]===t||this.replaceWith(e,t))},t.prototype.formats=function(){var e=this.attributes.values(),t=this.statics.formats(this.domNode);return null!=t&&(e[this.statics.blotName]=t),e},t.prototype.replaceWith=function(t,r){var n=e.prototype.replaceWith.call(this,t,r);return this.attributes.copy(n),n},t.prototype.update=function(t,r){var n=this;e.prototype.update.call(this,t,r),t.some((function(e){return e.target===n.domNode&&"attributes"===e.type}))&&this.attributes.build()},t.prototype.wrap=function(r,n){var o=e.prototype.wrap.call(this,r,n);return o instanceof t&&o.statics.scope===this.statics.scope&&this.attributes.move(o),o},t}(s.default);t.default=c},function(e,t,r){var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(30),a=r(1),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.value=function(e){return!0},t.prototype.index=function(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1},t.prototype.position=function(e,t){var r=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]},t.prototype.value=function(){var e;return(e={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,e},t.scope=a.Scope.INLINE_BLOT,t}(i.default);t.default=s},function(e,t,r){var n=r(11),o=r(3),i={attributes:{compose:function(e,t,r){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});var n=o(!0,{},t);for(var i in r||(n=Object.keys(n).reduce((function(e,t){return null!=n[t]&&(e[t]=n[t]),e}),{})),e)void 0!==e[i]&&void 0===t[i]&&(n[i]=e[i]);return Object.keys(n).length>0?n:void 0},diff:function(e,t){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});var r=Object.keys(e).concat(Object.keys(t)).reduce((function(r,o){return n(e[o],t[o])||(r[o]=void 0===t[o]?null:t[o]),r}),{});return Object.keys(r).length>0?r:void 0},transform:function(e,t,r){if("object"!=typeof e)return t;if("object"==typeof t){if(!r)return t;var n=Object.keys(t).reduce((function(r,n){return void 0===e[n]&&(r[n]=t[n]),r}),{});return Object.keys(n).length>0?n:void 0}}},iterator:function(e){return new a(e)},length:function(e){return"number"==typeof e.delete?e.delete:"number"==typeof e.retain?e.retain:"string"==typeof e.insert?e.insert.length:1}};function a(e){this.ops=e,this.index=0,this.offset=0}a.prototype.hasNext=function(){return this.peekLength()<1/0},a.prototype.next=function(e){e||(e=1/0);var t=this.ops[this.index];if(t){var r=this.offset,n=i.length(t);if(e>=n-r?(e=n-r,this.index+=1,this.offset=0):this.offset+=e,"number"==typeof t.delete)return{delete:e};var o={};return t.attributes&&(o.attributes=t.attributes),"number"==typeof t.retain?o.retain=e:"string"==typeof t.insert?o.insert=t.insert.substr(r,e):o.insert=t.insert,o}return{retain:1/0}},a.prototype.peek=function(){return this.ops[this.index]},a.prototype.peekLength=function(){return this.ops[this.index]?i.length(this.ops[this.index])-this.offset:1/0},a.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},a.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var e=this.offset,t=this.index,r=this.next(),n=this.ops.slice(this.index);return this.offset=e,this.index=t,[r].concat(n)}return[]},e.exports=i},function(e,t){var r=function(){function e(e,t){return null!=t&&e instanceof t}var t,r,n;try{t=Map}catch(s){t=function(){}}try{r=Set}catch(s){r=function(){}}try{n=Promise}catch(s){n=function(){}}function o(i,s,l,c,u){"object"==typeof s&&(l=s.depth,c=s.prototype,u=s.includeNonEnumerable,s=s.circular);var d=[],p=[],f="undefined"!=typeof Buffer;return void 0===s&&(s=!0),void 0===l&&(l=1/0),function i(l,m){if(null===l)return null;if(0===m)return l;var h,g;if("object"!=typeof l)return l;if(e(l,t))h=new t;else if(e(l,r))h=new r;else if(e(l,n))h=new n((function(e,t){l.then((function(t){e(i(t,m-1))}),(function(e){t(i(e,m-1))}))}));else if(o.__isArray(l))h=[];else if(o.__isRegExp(l))h=new RegExp(l.source,a(l)),l.lastIndex&&(h.lastIndex=l.lastIndex);else if(o.__isDate(l))h=new Date(l.getTime());else{if(f&&Buffer.isBuffer(l))return h=Buffer.allocUnsafe?Buffer.allocUnsafe(l.length):new Buffer(l.length),l.copy(h),h;e(l,Error)?h=Object.create(l):void 0===c?(g=Object.getPrototypeOf(l),h=Object.create(g)):(h=Object.create(c),g=c)}if(s){var b=d.indexOf(l);if(-1!=b)return p[b];d.push(l),p.push(h)}for(var y in e(l,t)&&l.forEach((function(e,t){var r=i(t,m-1),n=i(e,m-1);h.set(r,n)})),e(l,r)&&l.forEach((function(e){var t=i(e,m-1);h.add(t)})),l){var v;g&&(v=Object.getOwnPropertyDescriptor(g,y)),v&&null==v.set||(h[y]=i(l[y],m-1))}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(l);for(y=0;y<x.length;y++){var w=x[y];(!(j=Object.getOwnPropertyDescriptor(l,w))||j.enumerable||u)&&(h[w]=i(l[w],m-1),j.enumerable||Object.defineProperty(h,w,{enumerable:!1}))}}if(u){var E=Object.getOwnPropertyNames(l);for(y=0;y<E.length;y++){var j,N=E[y];(j=Object.getOwnPropertyDescriptor(l,N))&&j.enumerable||(h[N]=i(l[N],m-1),Object.defineProperty(h,N,{enumerable:!1}))}}return h}(i,l)}function i(e){return Object.prototype.toString.call(e)}function a(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return o.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},o.__objToStr=i,o.__isDate=function(e){return"object"==typeof e&&"[object Date]"===i(e)},o.__isArray=function(e){return"object"==typeof e&&"[object Array]"===i(e)},o.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===i(e)},o.__getRegExpFlags=a,o}();"object"==typeof e&&e.exports&&(e.exports=r)},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){o=!0,i=l}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},a=f(r(0)),s=f(r(8)),l=r(4),c=f(l),u=f(r(16)),d=f(r(13)),p=f(r(25));function f(e){return e&&e.__esModule?e:{default:e}}function m(e){return e instanceof c.default||e instanceof l.BlockEmbed}var h=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.emitter=r.emitter,Array.isArray(r.whitelist)&&(n.whitelist=r.whitelist.reduce((function(e,t){return e[t]=!0,e}),{})),n.domNode.addEventListener("DOMNodeInserted",(function(){})),n.optimize(),n.enable(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(e,r){var o=this.line(e),a=n(o,2),s=a[0],c=a[1],p=this.line(e+r),f=n(p,1)[0];if(i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,r),null!=f&&s!==f&&c>0){if(s instanceof l.BlockEmbed||f instanceof l.BlockEmbed)return void this.optimize();if(s instanceof d.default){var m=s.newlineIndex(s.length(),!0);if(m>-1&&(s=s.split(m+1))===f)return void this.optimize()}else if(f instanceof d.default){var h=f.newlineIndex(0);h>-1&&f.split(h+1)}var g=f.children.head instanceof u.default?null:f.children.head;s.moveChildren(f,g),s.remove()}this.optimize()}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",e)}},{key:"formatAt",value:function(e,r,n,o){(null==this.whitelist||this.whitelist[n])&&(i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,r,n,o),this.optimize())}},{key:"insertAt",value:function(e,r,n){if(null==n||null==this.whitelist||this.whitelist[r]){if(e>=this.length())if(null==n||null==a.default.query(r,a.default.Scope.BLOCK)){var o=a.default.create(this.statics.defaultChild);this.appendChild(o),null==n&&r.endsWith("\n")&&(r=r.slice(0,-1)),o.insertAt(0,r,n)}else{var s=a.default.create(r,n);this.appendChild(s)}else i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,r,n);this.optimize()}}},{key:"insertBefore",value:function(e,r){if(e.statics.scope===a.default.Scope.INLINE_BLOT){var n=a.default.create(this.statics.defaultChild);n.appendChild(e),e=n}i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,r)}},{key:"leaf",value:function(e){return this.path(e).pop()||[null,-1]}},{key:"line",value:function(e){return e===this.length()?this.line(e-1):this.descendant(m,e)}},{key:"lines",value:function(){return function e(t,r,n){var o=[],i=n;return t.children.forEachAt(r,n,(function(t,r,n){m(t)?o.push(t):t instanceof a.default.Container&&(o=o.concat(e(t,r,i))),i-=n})),o}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}},{key:"optimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e,r),e.length>0&&this.emitter.emit(s.default.events.SCROLL_OPTIMIZE,e,r))}},{key:"path",value:function(e){return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e).slice(1)}},{key:"update",value:function(e){if(!0!==this.batch){var r=s.default.sources.USER;"string"==typeof e&&(r=e),Array.isArray(e)||(e=this.observer.takeRecords()),e.length>0&&this.emitter.emit(s.default.events.SCROLL_BEFORE_UPDATE,r,e),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e.concat([])),e.length>0&&this.emitter.emit(s.default.events.SCROLL_UPDATE,r,e)}}}]),t}(a.default.Scroll);h.blotName="scroll",h.className="ql-editor",h.tagName="DIV",h.defaultChild="block",h.allowedChildren=[c.default,l.BlockEmbed,p.default],t.default=h},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.SHORTKEY=t.default=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){o=!0,i=l}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=h(r(21)),s=h(r(11)),l=h(r(3)),c=h(r(2)),u=h(r(20)),d=h(r(0)),p=h(r(5)),f=h(r(10)),m=h(r(9));function h(e){return e&&e.__esModule?e:{default:e}}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=(0,f.default)("quill:keyboard"),y=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",v=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.bindings={},Object.keys(n.options.bindings).forEach((function(t){("list autofill"!==t||null==e.scroll.whitelist||e.scroll.whitelist.list)&&n.options.bindings[t]&&n.addBinding(n.options.bindings[t])})),n.addBinding({key:t.keys.ENTER,shiftKey:null},N),n.addBinding({key:t.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},(function(){})),/Firefox/i.test(navigator.userAgent)?(n.addBinding({key:t.keys.BACKSPACE},{collapsed:!0},w),n.addBinding({key:t.keys.DELETE},{collapsed:!0},E)):(n.addBinding({key:t.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},w),n.addBinding({key:t.keys.DELETE},{collapsed:!0,suffix:/^.?$/},E)),n.addBinding({key:t.keys.BACKSPACE},{collapsed:!1},j),n.addBinding({key:t.keys.DELETE},{collapsed:!1},j),n.addBinding({key:t.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},w),n.listen(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"match",value:function(e,t){return t=k(t),!["altKey","ctrlKey","metaKey","shiftKey"].some((function(r){return!!t[r]!==e[r]&&null!==t[r]}))&&t.key===(e.which||e.keyCode)}}]),i(t,[{key:"addBinding",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=k(e);if(null==n||null==n.key)return b.warn("Attempted to add invalid keyboard binding",n);"function"==typeof t&&(t={handler:t}),"function"==typeof r&&(r={handler:r}),n=(0,l.default)(n,t,r),this.bindings[n.key]=this.bindings[n.key]||[],this.bindings[n.key].push(n)}},{key:"listen",value:function(){var e=this;this.quill.root.addEventListener("keydown",(function(r){if(!r.defaultPrevented){var i=r.which||r.keyCode,a=(e.bindings[i]||[]).filter((function(e){return t.match(r,e)}));if(0!==a.length){var l=e.quill.getSelection();if(null!=l&&e.quill.hasFocus()){var c=e.quill.getLine(l.index),u=o(c,2),p=u[0],f=u[1],m=e.quill.getLeaf(l.index),h=o(m,2),g=h[0],b=h[1],y=0===l.length?[g,b]:e.quill.getLeaf(l.index+l.length),v=o(y,2),x=v[0],w=v[1],E=g instanceof d.default.Text?g.value().slice(0,b):"",j=x instanceof d.default.Text?x.value().slice(w):"",N={collapsed:0===l.length,empty:0===l.length&&p.length()<=1,format:e.quill.getFormat(l),offset:f,prefix:E,suffix:j};a.some((function(t){if(null!=t.collapsed&&t.collapsed!==N.collapsed)return!1;if(null!=t.empty&&t.empty!==N.empty)return!1;if(null!=t.offset&&t.offset!==N.offset)return!1;if(Array.isArray(t.format)){if(t.format.every((function(e){return null==N.format[e]})))return!1}else if("object"===n(t.format)&&!Object.keys(t.format).every((function(e){return!0===t.format[e]?null!=N.format[e]:!1===t.format[e]?null==N.format[e]:(0,s.default)(t.format[e],N.format[e])})))return!1;return!(null!=t.prefix&&!t.prefix.test(N.prefix)||null!=t.suffix&&!t.suffix.test(N.suffix)||!0===t.handler.call(e,l,N))}))&&r.preventDefault()}}}}))}}]),t}(m.default);function x(e,t){var r,n=e===v.keys.LEFT?"prefix":"suffix";return g(r={key:e,shiftKey:t,altKey:null},n,/^$/),g(r,"handler",(function(r){var n=r.index;e===v.keys.RIGHT&&(n+=r.length+1);var i=this.quill.getLeaf(n);return!(o(i,1)[0]instanceof d.default.Embed&&(e===v.keys.LEFT?t?this.quill.setSelection(r.index-1,r.length+1,p.default.sources.USER):this.quill.setSelection(r.index-1,p.default.sources.USER):t?this.quill.setSelection(r.index,r.length+1,p.default.sources.USER):this.quill.setSelection(r.index+r.length+1,p.default.sources.USER),1))})),r}function w(e,t){if(!(0===e.index||this.quill.getLength()<=1)){var r=this.quill.getLine(e.index),n=o(r,1)[0],i={};if(0===t.offset){var a=this.quill.getLine(e.index-1),s=o(a,1)[0];if(null!=s&&s.length()>1){var l=n.formats(),c=this.quill.getFormat(e.index-1,1);i=u.default.attributes.diff(l,c)||{}}}var d=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;this.quill.deleteText(e.index-d,d,p.default.sources.USER),Object.keys(i).length>0&&this.quill.formatLine(e.index-d,d,i,p.default.sources.USER),this.quill.focus()}}function E(e,t){var r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(!(e.index>=this.quill.getLength()-r)){var n={},i=0,a=this.quill.getLine(e.index),s=o(a,1)[0];if(t.offset>=s.length()-1){var l=this.quill.getLine(e.index+1),c=o(l,1)[0];if(c){var d=s.formats(),f=this.quill.getFormat(e.index,1);n=u.default.attributes.diff(d,f)||{},i=c.length()}}this.quill.deleteText(e.index,r,p.default.sources.USER),Object.keys(n).length>0&&this.quill.formatLine(e.index+i-1,r,n,p.default.sources.USER)}}function j(e){var t=this.quill.getLines(e),r={};if(t.length>1){var n=t[0].formats(),o=t[t.length-1].formats();r=u.default.attributes.diff(o,n)||{}}this.quill.deleteText(e,p.default.sources.USER),Object.keys(r).length>0&&this.quill.formatLine(e.index,1,r,p.default.sources.USER),this.quill.setSelection(e.index,p.default.sources.SILENT),this.quill.focus()}function N(e,t){var r=this;e.length>0&&this.quill.scroll.deleteAt(e.index,e.length);var n=Object.keys(t.format).reduce((function(e,r){return d.default.query(r,d.default.Scope.BLOCK)&&!Array.isArray(t.format[r])&&(e[r]=t.format[r]),e}),{});this.quill.insertText(e.index,"\n",n,p.default.sources.USER),this.quill.setSelection(e.index+1,p.default.sources.SILENT),this.quill.focus(),Object.keys(t.format).forEach((function(e){null==n[e]&&(Array.isArray(t.format[e])||"link"!==e&&r.quill.format(e,t.format[e],p.default.sources.USER))}))}function S(e){return{key:v.keys.TAB,shiftKey:!e,format:{"code-block":!0},handler:function(t){var r=d.default.query("code-block"),n=t.index,i=t.length,a=this.quill.scroll.descendant(r,n),s=o(a,2),l=s[0],c=s[1];if(null!=l){var u=this.quill.getIndex(l),f=l.newlineIndex(c,!0)+1,m=l.newlineIndex(u+c+i),h=l.domNode.textContent.slice(f,m).split("\n");c=0,h.forEach((function(t,o){e?(l.insertAt(f+c,r.TAB),c+=r.TAB.length,0===o?n+=r.TAB.length:i+=r.TAB.length):t.startsWith(r.TAB)&&(l.deleteAt(f+c,r.TAB.length),c-=r.TAB.length,0===o?n-=r.TAB.length:i-=r.TAB.length),c+=t.length+1})),this.quill.update(p.default.sources.USER),this.quill.setSelection(n,i,p.default.sources.SILENT)}}}}function _(e){return{key:e[0].toUpperCase(),shortKey:!0,handler:function(t,r){this.quill.format(e,!r.format[e],p.default.sources.USER)}}}function k(e){if("string"==typeof e||"number"==typeof e)return k({key:e});if("object"===(void 0===e?"undefined":n(e))&&(e=(0,a.default)(e,!1)),"string"==typeof e.key)if(null!=v.keys[e.key.toUpperCase()])e.key=v.keys[e.key.toUpperCase()];else{if(1!==e.key.length)return null;e.key=e.key.toUpperCase().charCodeAt(0)}return e.shortKey&&(e[y]=e.shortKey,delete e.shortKey),e}v.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},v.DEFAULTS={bindings:{bold:_("bold"),italic:_("italic"),underline:_("underline"),indent:{key:v.keys.TAB,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","+1",p.default.sources.USER)}},outdent:{key:v.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","-1",p.default.sources.USER)}},"outdent backspace":{key:v.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(e,t){null!=t.format.indent?this.quill.format("indent","-1",p.default.sources.USER):null!=t.format.list&&this.quill.format("list",!1,p.default.sources.USER)}},"indent code-block":S(!0),"outdent code-block":S(!1),"remove tab":{key:v.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(e){this.quill.deleteText(e.index-1,1,p.default.sources.USER)}},tab:{key:v.keys.TAB,handler:function(e){this.quill.history.cutoff();var t=(new c.default).retain(e.index).delete(e.length).insert("\t");this.quill.updateContents(t,p.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,p.default.sources.SILENT)}},"list empty enter":{key:v.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(e,t){this.quill.format("list",!1,p.default.sources.USER),t.format.indent&&this.quill.format("indent",!1,p.default.sources.USER)}},"checklist enter":{key:v.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(e){var t=this.quill.getLine(e.index),r=o(t,2),n=r[0],i=r[1],a=(0,l.default)({},n.formats(),{list:"checked"}),s=(new c.default).retain(e.index).insert("\n",a).retain(n.length()-i-1).retain(1,{list:"unchecked"});this.quill.updateContents(s,p.default.sources.USER),this.quill.setSelection(e.index+1,p.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:v.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(e,t){var r=this.quill.getLine(e.index),n=o(r,2),i=n[0],a=n[1],s=(new c.default).retain(e.index).insert("\n",t.format).retain(i.length()-a-1).retain(1,{header:null});this.quill.updateContents(s,p.default.sources.USER),this.quill.setSelection(e.index+1,p.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(e,t){var r=t.prefix.length,n=this.quill.getLine(e.index),i=o(n,2),a=i[0],s=i[1];if(s>r)return!0;var l=void 0;switch(t.prefix.trim()){case"[]":case"[ ]":l="unchecked";break;case"[x]":l="checked";break;case"-":case"*":l="bullet";break;default:l="ordered"}this.quill.insertText(e.index," ",p.default.sources.USER),this.quill.history.cutoff();var u=(new c.default).retain(e.index-s).delete(r+1).retain(a.length()-2-s).retain(1,{list:l});this.quill.updateContents(u,p.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-r,p.default.sources.SILENT)}},"code exit":{key:v.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(e){var t=this.quill.getLine(e.index),r=o(t,2),n=r[0],i=r[1],a=(new c.default).retain(e.index+n.length()-i-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(a,p.default.sources.USER)}},"embed left":x(v.keys.LEFT,!1),"embed left shift":x(v.keys.LEFT,!0),"embed right":x(v.keys.RIGHT,!1),"embed right shift":x(v.keys.RIGHT,!0)}},t.default=v,t.SHORTKEY=y},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){o=!0,i=l}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=l(r(0)),s=l(r(7));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.selection=r,n.textNode=document.createTextNode(t.CONTENTS),n.domNode.appendChild(n.textNode),n._length=0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"value",value:function(){}}]),i(t,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(e,r){if(0!==this._length)return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r);for(var n=this,i=0;null!=n&&n.statics.scope!==a.default.Scope.BLOCK_BLOT;)i+=n.offset(n.parent),n=n.parent;null!=n&&(this._length=t.CONTENTS.length,n.optimize(),n.formatAt(i,t.CONTENTS.length,e,r),this._length=0)}},{key:"index",value:function(e,r){return e===this.textNode?0:o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,r)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var e=this.textNode,r=this.selection.getNativeRange(),o=void 0,i=void 0,l=void 0;if(null!=r&&r.start.node===e&&r.end.node===e){var c=[e,r.start.offset,r.end.offset];o=c[0],i=c[1],l=c[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==t.CONTENTS){var u=this.textNode.data.split(t.CONTENTS).join("");this.next instanceof s.default?(o=this.next.domNode,this.next.insertAt(0,u),this.textNode.data=t.CONTENTS):(this.textNode.data=u,this.parent.insertBefore(a.default.create(this.textNode),this),this.textNode=document.createTextNode(t.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=i){var d=[i,l].map((function(e){return Math.max(0,Math.min(o.data.length,e-1))})),p=n(d,2);return i=p[0],l=p[1],{startNode:o,startOffset:i,endNode:o,endOffset:l}}}}},{key:"update",value:function(e,t){var r=this;if(e.some((function(e){return"characterData"===e.type&&e.target===r.textNode}))){var n=this.restore();n&&(t.range=n)}}},{key:"value",value:function(){return""}}]),t}(a.default.Embed);c.blotName="cursor",c.className="ql-cursor",c.tagName="span",c.CONTENTS="\ufeff",t.default=c},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(0)),o=r(4),i=a(o);function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(n.default.Container);s.allowedChildren=[i.default,o.BlockEmbed,s],t.default=s},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ColorStyle=t.ColorClass=t.ColorAttributor=void 0;var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},a=r(0),s=(n=a)&&n.__esModule?n:{default:n},l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"value",value:function(e){var r=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e);return r.startsWith("rgb(")?"#"+(r=r.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map((function(e){return("00"+parseInt(e).toString(16)).slice(-2)})).join(""):r}}]),t}(s.default.Attributor.Style),c=new s.default.Attributor.Class("color","ql-color",{scope:s.default.Scope.INLINE}),u=new l("color","color",{scope:s.default.Scope.INLINE});t.ColorAttributor=l,t.ColorClass=c,t.ColorStyle=u},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.sanitize=t.default=void 0;var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},a=r(6),s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"format",value:function(e,r){if(e!==this.statics.blotName||!r)return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r);r=this.constructor.sanitize(r),this.domNode.setAttribute("href",r)}}],[{key:"create",value:function(e){var r=i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return e=this.sanitize(e),r.setAttribute("href",e),r.setAttribute("rel","noopener noreferrer"),r.setAttribute("target","_blank"),r}},{key:"formats",value:function(e){return e.getAttribute("href")}},{key:"sanitize",value:function(e){return l(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}}]),t}(((n=a)&&n.__esModule?n:{default:n}).default);function l(e,t){var r=document.createElement("a");r.href=e;var n=r.href.slice(0,r.href.indexOf(":"));return t.indexOf(n)>-1}s.blotName="link",s.tagName="A",s.SANITIZED_URL="about:blank",s.PROTOCOL_WHITELIST=["http","https","mailto","tel"],t.default=s,t.sanitize=l},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=s(r(23)),a=s(r(107));function s(e){return e&&e.__esModule?e:{default:e}}var l=0;function c(e,t){e.setAttribute(t,!("true"===e.getAttribute(t)))}var u=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(function(){r.togglePicker()})),this.label.addEventListener("keydown",(function(e){switch(e.keyCode){case i.default.keys.ENTER:r.togglePicker();break;case i.default.keys.ESCAPE:r.escape(),e.preventDefault()}})),this.select.addEventListener("change",this.update.bind(this))}return o(e,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),c(this.label,"aria-expanded"),c(this.options,"aria-hidden")}},{key:"buildItem",value:function(e){var t=this,r=document.createElement("span");return r.tabIndex="0",r.setAttribute("role","button"),r.classList.add("ql-picker-item"),e.hasAttribute("value")&&r.setAttribute("data-value",e.getAttribute("value")),e.textContent&&r.setAttribute("data-label",e.textContent),r.addEventListener("click",(function(){t.selectItem(r,!0)})),r.addEventListener("keydown",(function(e){switch(e.keyCode){case i.default.keys.ENTER:t.selectItem(r,!0),e.preventDefault();break;case i.default.keys.ESCAPE:t.escape(),e.preventDefault()}})),r}},{key:"buildLabel",value:function(){var e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=a.default,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}},{key:"buildOptions",value:function(){var e=this,t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id="ql-picker-options-"+l,l+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,[].slice.call(this.select.options).forEach((function(r){var n=e.buildItem(r);t.appendChild(n),!0===r.selected&&e.selectItem(n)})),this.container.appendChild(t)}},{key:"buildPicker",value:function(){var e=this;[].slice.call(this.select.attributes).forEach((function(t){e.container.setAttribute(t.name,t.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var e=this;this.close(),setTimeout((function(){return e.label.focus()}),1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.container.querySelector(".ql-selected");if(e!==r&&(null!=r&&r.classList.remove("ql-selected"),null!=e&&(e.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(e.parentNode.children,e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"==typeof Event?"undefined":n(Event))){var o=document.createEvent("Event");o.initEvent("change",!0,!0),this.select.dispatchEvent(o)}this.close()}}},{key:"update",value:function(){var e=void 0;if(this.select.selectedIndex>-1){var t=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(t)}else this.selectItem(null);var r=null!=e&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",r)}}]),e}();t.default=u},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=b(r(0)),o=b(r(5)),i=r(4),a=b(i),s=b(r(16)),l=b(r(25)),c=b(r(24)),u=b(r(35)),d=b(r(6)),p=b(r(22)),f=b(r(7)),m=b(r(55)),h=b(r(42)),g=b(r(23));function b(e){return e&&e.__esModule?e:{default:e}}o.default.register({"blots/block":a.default,"blots/block/embed":i.BlockEmbed,"blots/break":s.default,"blots/container":l.default,"blots/cursor":c.default,"blots/embed":u.default,"blots/inline":d.default,"blots/scroll":p.default,"blots/text":f.default,"modules/clipboard":m.default,"modules/history":h.default,"modules/keyboard":g.default}),n.default.register(a.default,s.default,c.default,d.default,p.default,f.default),t.default=o.default},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=function(){function e(e){this.domNode=e,this.domNode[n.DATA_KEY]={blot:this}}return Object.defineProperty(e.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),e.create=function(e){if(null==this.tagName)throw new n.ParchmentError("Blot definition missing tagName");var t;return Array.isArray(this.tagName)?("string"==typeof e&&(e=e.toUpperCase(),parseInt(e).toString()===e&&(e=parseInt(e))),t="number"==typeof e?document.createElement(this.tagName[e-1]):this.tagName.indexOf(e)>-1?document.createElement(e):document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t},e.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},e.prototype.clone=function(){var e=this.domNode.cloneNode(!1);return n.create(e)},e.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[n.DATA_KEY]},e.prototype.deleteAt=function(e,t){this.isolate(e,t).remove()},e.prototype.formatAt=function(e,t,r,o){var i=this.isolate(e,t);if(null!=n.query(r,n.Scope.BLOT)&&o)i.wrap(r,o);else if(null!=n.query(r,n.Scope.ATTRIBUTE)){var a=n.create(this.statics.scope);i.wrap(a),a.format(r,o)}},e.prototype.insertAt=function(e,t,r){var o=null==r?n.create("text",t):n.create(t,r),i=this.split(e);this.parent.insertBefore(o,i)},e.prototype.insertInto=function(e,t){void 0===t&&(t=null),null!=this.parent&&this.parent.children.remove(this);var r=null;e.children.insertBefore(this,t),null!=t&&(r=t.domNode),this.domNode.parentNode==e.domNode&&this.domNode.nextSibling==r||e.domNode.insertBefore(this.domNode,r),this.parent=e,this.attach()},e.prototype.isolate=function(e,t){var r=this.split(e);return r.split(t),r},e.prototype.length=function(){return 1},e.prototype.offset=function(e){return void 0===e&&(e=this.parent),null==this.parent||this==e?0:this.parent.children.offset(this)+this.parent.offset(e)},e.prototype.optimize=function(e){null!=this.domNode[n.DATA_KEY]&&delete this.domNode[n.DATA_KEY].mutations},e.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},e.prototype.replace=function(e){null!=e.parent&&(e.parent.insertBefore(this,e.next),e.remove())},e.prototype.replaceWith=function(e,t){var r="string"==typeof e?n.create(e,t):e;return r.replace(this),r},e.prototype.split=function(e,t){return 0===e?this:this.next},e.prototype.update=function(e,t){},e.prototype.wrap=function(e,t){var r="string"==typeof e?n.create(e,t):e;return null!=this.parent&&this.parent.insertBefore(r,this.next),r.appendChild(this),r},e.blotName="abstract",e}();t.default=o},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(12),o=r(32),i=r(33),a=r(1),s=function(){function e(e){this.attributes={},this.domNode=e,this.build()}return e.prototype.attribute=function(e,t){t?e.add(this.domNode,t)&&(null!=e.value(this.domNode)?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])},e.prototype.build=function(){var e=this;this.attributes={};var t=n.default.keys(this.domNode),r=o.default.keys(this.domNode),s=i.default.keys(this.domNode);t.concat(r).concat(s).forEach((function(t){var r=a.query(t,a.Scope.ATTRIBUTE);r instanceof n.default&&(e.attributes[r.attrName]=r)}))},e.prototype.copy=function(e){var t=this;Object.keys(this.attributes).forEach((function(r){var n=t.attributes[r].value(t.domNode);e.format(r,n)}))},e.prototype.move=function(e){var t=this;this.copy(e),Object.keys(this.attributes).forEach((function(e){t.attributes[e].remove(t.domNode)})),this.attributes={}},e.prototype.values=function(){var e=this;return Object.keys(this.attributes).reduce((function(t,r){return t[r]=e.attributes[r].value(e.domNode),t}),{})},e}();t.default=s},function(e,t,r){var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function i(e,t){return(e.getAttribute("class")||"").split(/\s+/).filter((function(e){return 0===e.indexOf(t+"-")}))}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.keys=function(e){return(e.getAttribute("class")||"").split(/\s+/).map((function(e){return e.split("-").slice(0,-1).join("-")}))},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(this.remove(e),e.classList.add(this.keyName+"-"+t),!0)},t.prototype.remove=function(e){i(e,this.keyName).forEach((function(t){e.classList.remove(t)})),0===e.classList.length&&e.removeAttribute("class")},t.prototype.value=function(e){var t=(i(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""},t}(r(12).default);t.default=a},function(e,t,r){var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function i(e){var t=e.split("-"),r=t.slice(1).map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("");return t[0]+r}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.keys=function(e){return(e.getAttribute("style")||"").split(";").map((function(e){return e.split(":")[0].trim()}))},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.style[i(this.keyName)]=t,!0)},t.prototype.remove=function(e){e.style[i(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")},t.prototype.value=function(e){var t=e.style[i(this.keyName)];return this.canAdd(e,t)?t:""},t}(r(12).default);t.default=a},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=r,this.modules={}}return n(e,[{key:"init",value:function(){var e=this;Object.keys(this.options.modules).forEach((function(t){null==e.modules[t]&&e.addModule(t)}))}},{key:"addModule",value:function(e){var t=this.quill.constructor.import("modules/"+e);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}]),e}();o.DEFAULTS={modules:{}},o.themes={default:o},t.default=o},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},i=s(r(0)),a=s(r(7));function s(e){return e&&e.__esModule?e:{default:e}}var l="\ufeff",c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.contentNode=document.createElement("span"),r.contentNode.setAttribute("contenteditable",!1),[].slice.call(r.domNode.childNodes).forEach((function(e){r.contentNode.appendChild(e)})),r.leftGuard=document.createTextNode(l),r.rightGuard=document.createTextNode(l),r.domNode.appendChild(r.leftGuard),r.domNode.appendChild(r.contentNode),r.domNode.appendChild(r.rightGuard),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"index",value:function(e,r){return e===this.leftGuard?0:e===this.rightGuard?1:o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,r)}},{key:"restore",value:function(e){var t=void 0,r=void 0,n=e.data.split(l).join("");if(e===this.leftGuard)if(this.prev instanceof a.default){var o=this.prev.length();this.prev.insertAt(o,n),t={startNode:this.prev.domNode,startOffset:o+n.length}}else r=document.createTextNode(n),this.parent.insertBefore(i.default.create(r),this),t={startNode:r,startOffset:n.length};else e===this.rightGuard&&(this.next instanceof a.default?(this.next.insertAt(0,n),t={startNode:this.next.domNode,startOffset:n.length}):(r=document.createTextNode(n),this.parent.insertBefore(i.default.create(r),this.next),t={startNode:r,startOffset:n.length}));return e.data=l,t}},{key:"update",value:function(e,t){var r=this;e.forEach((function(e){if("characterData"===e.type&&(e.target===r.leftGuard||e.target===r.rightGuard)){var n=r.restore(e.target);n&&(t.range=n)}}))}}]),t}(i.default.Embed);t.default=c},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.AlignStyle=t.AlignClass=t.AlignAttribute=void 0;var n,o=r(0),i=(n=o)&&n.__esModule?n:{default:n},a={scope:i.default.Scope.BLOCK,whitelist:["right","center","justify"]},s=new i.default.Attributor.Attribute("align","align",a),l=new i.default.Attributor.Class("align","ql-align",a),c=new i.default.Attributor.Style("align","text-align",a);t.AlignAttribute=s,t.AlignClass=l,t.AlignStyle=c},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundStyle=t.BackgroundClass=void 0;var n,o=r(0),i=(n=o)&&n.__esModule?n:{default:n},a=r(26),s=new i.default.Attributor.Class("background","ql-bg",{scope:i.default.Scope.INLINE}),l=new a.ColorAttributor("background","background-color",{scope:i.default.Scope.INLINE});t.BackgroundClass=s,t.BackgroundStyle=l},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionStyle=t.DirectionClass=t.DirectionAttribute=void 0;var n,o=r(0),i=(n=o)&&n.__esModule?n:{default:n},a={scope:i.default.Scope.BLOCK,whitelist:["rtl"]},s=new i.default.Attributor.Attribute("direction","dir",a),l=new i.default.Attributor.Class("direction","ql-direction",a),c=new i.default.Attributor.Style("direction","direction",a);t.DirectionAttribute=s,t.DirectionClass=l,t.DirectionStyle=c},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.FontClass=t.FontStyle=void 0;var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},a=r(0),s=(n=a)&&n.__esModule?n:{default:n},l={scope:s.default.Scope.INLINE,whitelist:["serif","monospace"]},c=new s.default.Attributor.Class("font","ql-font",l),u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"value",value:function(e){return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e).replace(/["']/g,"")}}]),t}(s.default.Attributor.Style),d=new u("font","font-family",l);t.FontStyle=d,t.FontClass=c},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.SizeStyle=t.SizeClass=void 0;var n,o=r(0),i=(n=o)&&n.__esModule?n:{default:n},a=new i.default.Attributor.Class("size","ql-size",{scope:i.default.Scope.INLINE,whitelist:["small","large","huge"]}),s=new i.default.Attributor.Style("size","font-size",{scope:i.default.Scope.INLINE,whitelist:["10px","18px","32px"]});t.SizeClass=a,t.SizeStyle=s},function(e,t,r){e.exports={align:{"":r(76),center:r(77),right:r(78),justify:r(79)},background:r(80),blockquote:r(81),bold:r(82),clean:r(83),code:r(58),"code-block":r(58),color:r(84),direction:{"":r(85),rtl:r(86)},float:{center:r(87),full:r(88),left:r(89),right:r(90)},formula:r(91),header:{1:r(92),2:r(93)},italic:r(94),image:r(95),indent:{"+1":r(96),"-1":r(97)},link:r(98),list:{ordered:r(99),bullet:r(100),check:r(101)},script:{sub:r(102),super:r(103)},strike:r(104),underline:r(105),video:r(106)}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.getLastChangeIndex=t.default=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=a(r(0)),i=a(r(5));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.lastRecorded=0,n.ignoreChange=!1,n.clear(),n.quill.on(i.default.events.EDITOR_CHANGE,(function(e,t,r,o){e!==i.default.events.TEXT_CHANGE||n.ignoreChange||(n.options.userOnly&&o!==i.default.sources.USER?n.transform(t):n.record(t,r))})),n.quill.keyboard.addBinding({key:"Z",shortKey:!0},n.undo.bind(n)),n.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},n.redo.bind(n)),/Win/i.test(navigator.platform)&&n.quill.keyboard.addBinding({key:"Y",shortKey:!0},n.redo.bind(n)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"change",value:function(e,t){if(0!==this.stack[e].length){var r=this.stack[e].pop();this.stack[t].push(r),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r[e],i.default.sources.USER),this.ignoreChange=!1;var n=l(r[e]);this.quill.setSelection(n)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(e,t){if(0!==e.ops.length){this.stack.redo=[];var r=this.quill.getContents().diff(t),n=Date.now();if(this.lastRecorded+this.options.delay>n&&this.stack.undo.length>0){var o=this.stack.undo.pop();r=r.compose(o.undo),e=o.redo.compose(e)}else this.lastRecorded=n;this.stack.undo.push({redo:e,undo:r}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(e){this.stack.undo.forEach((function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)})),this.stack.redo.forEach((function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)}))}},{key:"undo",value:function(){this.change("undo","redo")}}]),t}(a(r(9)).default);function l(e){var t=e.reduce((function(e,t){return e+=t.delete||0}),0),r=e.length()-t;return function(e){var t=e.ops[e.ops.length-1];return null!=t&&(null!=t.insert?"string"==typeof t.insert&&t.insert.endsWith("\n"):null!=t.attributes&&Object.keys(t.attributes).some((function(e){return null!=o.default.query(e,o.default.Scope.BLOCK)})))}(e)&&(r-=1),r}s.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},t.default=s,t.getLastChangeIndex=l},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseTooltip=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},i=m(r(3)),a=m(r(2)),s=m(r(8)),l=m(r(23)),c=m(r(34)),u=m(r(59)),d=m(r(60)),p=m(r(28)),f=m(r(61));function m(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=[!1,"center","right","justify"],v=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],x=[!1,"serif","monospace"],w=["1","2","3",!1],E=["small",!1,"large","huge"],j=function(e){function t(e,r){h(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return e.emitter.listenDOM("click",document.body,(function t(r){if(!document.body.contains(e.root))return document.body.removeEventListener("click",t);null==n.tooltip||n.tooltip.root.contains(r.target)||document.activeElement===n.tooltip.textbox||n.quill.hasFocus()||n.tooltip.hide(),null!=n.pickers&&n.pickers.forEach((function(e){e.container.contains(r.target)||e.close()}))})),n}return b(t,e),n(t,[{key:"addModule",value:function(e){var r=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addModule",this).call(this,e);return"toolbar"===e&&this.extendToolbar(r),r}},{key:"buildButtons",value:function(e,t){e.forEach((function(e){(e.getAttribute("class")||"").split(/\s+/).forEach((function(r){if(r.startsWith("ql-")&&(r=r.slice(3),null!=t[r]))if("direction"===r)e.innerHTML=t[r][""]+t[r].rtl;else if("string"==typeof t[r])e.innerHTML=t[r];else{var n=e.value||"";null!=n&&t[r][n]&&(e.innerHTML=t[r][n])}}))}))}},{key:"buildPickers",value:function(e,t){var r=this;this.pickers=e.map((function(e){if(e.classList.contains("ql-align"))return null==e.querySelector("option")&&S(e,y),new d.default(e,t.align);if(e.classList.contains("ql-background")||e.classList.contains("ql-color")){var r=e.classList.contains("ql-background")?"background":"color";return null==e.querySelector("option")&&S(e,v,"background"===r?"#ffffff":"#000000"),new u.default(e,t[r])}return null==e.querySelector("option")&&(e.classList.contains("ql-font")?S(e,x):e.classList.contains("ql-header")?S(e,w):e.classList.contains("ql-size")&&S(e,E)),new p.default(e)})),this.quill.on(s.default.events.EDITOR_CHANGE,(function(){r.pickers.forEach((function(e){e.update()}))}))}}]),t}(c.default);j.DEFAULTS=(0,i.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var e=this,t=this.container.querySelector("input.ql-image[type=file]");null==t&&((t=document.createElement("input")).setAttribute("type","file"),t.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),t.classList.add("ql-image"),t.addEventListener("change",(function(){if(null!=t.files&&null!=t.files[0]){var r=new FileReader;r.onload=function(r){var n=e.quill.getSelection(!0);e.quill.updateContents((new a.default).retain(n.index).delete(n.length).insert({image:r.target.result}),s.default.sources.USER),e.quill.setSelection(n.index+1,s.default.sources.SILENT),t.value=""},r.readAsDataURL(t.files[0])}})),this.container.appendChild(t)),t.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var N=function(e){function t(e,r){h(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.textbox=n.root.querySelector('input[type="text"]'),n.listen(),n}return b(t,e),n(t,[{key:"listen",value:function(){var e=this;this.textbox.addEventListener("keydown",(function(t){l.default.match(t,"enter")?(e.save(),t.preventDefault()):l.default.match(t,"escape")&&(e.cancel(),t.preventDefault())}))}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=t?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+e)||""),this.root.setAttribute("data-mode",e)}},{key:"restoreFocus",value:function(){var e=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=e}},{key:"save",value:function(){var e,t,r=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var n=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",r,s.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",r,s.default.sources.USER)),this.quill.root.scrollTop=n;break;case"video":r=(t=(e=r).match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/))?(t[1]||"https")+"://www.youtube.com/embed/"+t[2]+"?showinfo=0":(t=e.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(t[1]||"https")+"://player.vimeo.com/video/"+t[2]+"/":e;case"formula":if(!r)break;var o=this.quill.getSelection(!0);if(null!=o){var i=o.index+o.length;this.quill.insertEmbed(i,this.root.getAttribute("data-mode"),r,s.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(i+1," ",s.default.sources.USER),this.quill.setSelection(i+2,s.default.sources.USER)}}this.textbox.value="",this.hide()}}]),t}(f.default);function S(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach((function(t){var n=document.createElement("option");t===r?n.setAttribute("selected","selected"):n.setAttribute("value",t),e.appendChild(n)}))}t.BaseTooltip=N,t.default=j},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.head=this.tail=null,this.length=0}return e.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.insertBefore(e[0],null),e.length>1&&this.append.apply(this,e.slice(1))},e.prototype.contains=function(e){for(var t,r=this.iterator();t=r();)if(t===e)return!0;return!1},e.prototype.insertBefore=function(e,t){e&&(e.next=t,null!=t?(e.prev=t.prev,null!=t.prev&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):null!=this.tail?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)},e.prototype.offset=function(e){for(var t=0,r=this.head;null!=r;){if(r===e)return t;t+=r.length(),r=r.next}return-1},e.prototype.remove=function(e){this.contains(e)&&(null!=e.prev&&(e.prev.next=e.next),null!=e.next&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)},e.prototype.iterator=function(e){return void 0===e&&(e=this.head),function(){var t=e;return null!=e&&(e=e.next),t}},e.prototype.find=function(e,t){void 0===t&&(t=!1);for(var r,n=this.iterator();r=n();){var o=r.length();if(e<o||t&&e===o&&(null==r.next||0!==r.next.length()))return[r,e];e-=o}return[null,0]},e.prototype.forEach=function(e){for(var t,r=this.iterator();t=r();)e(t)},e.prototype.forEachAt=function(e,t,r){if(!(t<=0))for(var n,o=this.find(e),i=o[0],a=e-o[1],s=this.iterator(i);(n=s())&&a<e+t;){var l=n.length();e>a?r(n,e-a,Math.min(t,a+l-e)):r(n,0,Math.min(l,e+t-a)),a+=l}},e.prototype.map=function(e){return this.reduce((function(t,r){return t.push(e(r)),t}),[])},e.prototype.reduce=function(e,t){for(var r,n=this.iterator();r=n();)t=e(t,r);return t},e}();t.default=n},function(e,t,r){var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(17),a=r(1),s={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},l=function(e){function t(t){var r=e.call(this,t)||this;return r.scroll=r,r.observer=new MutationObserver((function(e){r.update(e)})),r.observer.observe(r.domNode,s),r.attach(),r}return o(t,e),t.prototype.detach=function(){e.prototype.detach.call(this),this.observer.disconnect()},t.prototype.deleteAt=function(t,r){this.update(),0===t&&r===this.length()?this.children.forEach((function(e){e.remove()})):e.prototype.deleteAt.call(this,t,r)},t.prototype.formatAt=function(t,r,n,o){this.update(),e.prototype.formatAt.call(this,t,r,n,o)},t.prototype.insertAt=function(t,r,n){this.update(),e.prototype.insertAt.call(this,t,r,n)},t.prototype.optimize=function(t,r){var n=this;void 0===t&&(t=[]),void 0===r&&(r={}),e.prototype.optimize.call(this,r);for(var o=[].slice.call(this.observer.takeRecords());o.length>0;)t.push(o.pop());for(var s=function(e,t){void 0===t&&(t=!0),null!=e&&e!==n&&null!=e.domNode.parentNode&&(null==e.domNode[a.DATA_KEY].mutations&&(e.domNode[a.DATA_KEY].mutations=[]),t&&s(e.parent))},l=function(e){null!=e.domNode[a.DATA_KEY]&&null!=e.domNode[a.DATA_KEY].mutations&&(e instanceof i.default&&e.children.forEach(l),e.optimize(r))},c=t,u=0;c.length>0;u+=1){if(u>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach((function(e){var t=a.find(e.target,!0);null!=t&&(t.domNode===e.target&&("childList"===e.type?(s(a.find(e.previousSibling,!1)),[].forEach.call(e.addedNodes,(function(e){var t=a.find(e,!1);s(t,!1),t instanceof i.default&&t.children.forEach((function(e){s(e,!1)}))}))):"attributes"===e.type&&s(t.prev)),s(t))})),this.children.forEach(l),o=(c=[].slice.call(this.observer.takeRecords())).slice();o.length>0;)t.push(o.pop())}},t.prototype.update=function(t,r){var n=this;void 0===r&&(r={}),(t=t||this.observer.takeRecords()).map((function(e){var t=a.find(e.target,!0);return null==t?null:null==t.domNode[a.DATA_KEY].mutations?(t.domNode[a.DATA_KEY].mutations=[e],t):(t.domNode[a.DATA_KEY].mutations.push(e),null)})).forEach((function(e){null!=e&&e!==n&&null!=e.domNode[a.DATA_KEY]&&e.update(e.domNode[a.DATA_KEY].mutations||[],r)})),null!=this.domNode[a.DATA_KEY].mutations&&e.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,r),this.optimize(t,r)},t.blotName="scroll",t.defaultChild="block",t.scope=a.Scope.BLOCK_BLOT,t.tagName="DIV",t}(i.default);t.default=l},function(e,t,r){var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(18),a=r(1),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.formats=function(r){if(r.tagName!==t.tagName)return e.formats.call(this,r)},t.prototype.format=function(r,n){var o=this;r!==this.statics.blotName||n?e.prototype.format.call(this,r,n):(this.children.forEach((function(e){e instanceof i.default||(e=e.wrap(t.blotName,!0)),o.attributes.copy(e)})),this.unwrap())},t.prototype.formatAt=function(t,r,n,o){null!=this.formats()[n]||a.query(n,a.Scope.ATTRIBUTE)?this.isolate(t,r).format(n,o):e.prototype.formatAt.call(this,t,r,n,o)},t.prototype.optimize=function(r){e.prototype.optimize.call(this,r);var n=this.formats();if(0===Object.keys(n).length)return this.unwrap();var o=this.next;o instanceof t&&o.prev===this&&function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(e[r]!==t[r])return!1;return!0}(n,o.formats())&&(o.moveChildren(this),o.remove())},t.blotName="inline",t.scope=a.Scope.INLINE_BLOT,t.tagName="SPAN",t}(i.default);t.default=s},function(e,t,r){var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(18),a=r(1),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.formats=function(r){var n=a.query(t.blotName).tagName;if(r.tagName!==n)return e.formats.call(this,r)},t.prototype.format=function(r,n){null!=a.query(r,a.Scope.BLOCK)&&(r!==this.statics.blotName||n?e.prototype.format.call(this,r,n):this.replaceWith(t.blotName))},t.prototype.formatAt=function(t,r,n,o){null!=a.query(n,a.Scope.BLOCK)?this.format(n,o):e.prototype.formatAt.call(this,t,r,n,o)},t.prototype.insertAt=function(t,r,n){if(null==n||null!=a.query(r,a.Scope.INLINE))e.prototype.insertAt.call(this,t,r,n);else{var o=this.split(t),i=a.create(r,n);o.parent.insertBefore(i,o)}},t.prototype.update=function(t,r){navigator.userAgent.match(/Trident/)?this.build():e.prototype.update.call(this,t,r)},t.blotName="block",t.scope=a.Scope.BLOCK_BLOT,t.tagName="P",t}(i.default);t.default=s},function(e,t,r){var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.formats=function(e){},t.prototype.format=function(t,r){e.prototype.formatAt.call(this,0,this.length(),t,r)},t.prototype.formatAt=function(t,r,n,o){0===t&&r===this.length()?this.format(n,o):e.prototype.formatAt.call(this,t,r,n,o)},t.prototype.formats=function(){return this.statics.formats(this.domNode)},t}(r(19).default);t.default=i},function(e,t,r){var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(19),a=r(1),s=function(e){function t(t){var r=e.call(this,t)||this;return r.text=r.statics.value(r.domNode),r}return o(t,e),t.create=function(e){return document.createTextNode(e)},t.value=function(e){var t=e.data;return t.normalize&&(t=t.normalize()),t},t.prototype.deleteAt=function(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)},t.prototype.index=function(e,t){return this.domNode===e?t:-1},t.prototype.insertAt=function(t,r,n){null==n?(this.text=this.text.slice(0,t)+r+this.text.slice(t),this.domNode.data=this.text):e.prototype.insertAt.call(this,t,r,n)},t.prototype.length=function(){return this.text.length},t.prototype.optimize=function(r){e.prototype.optimize.call(this,r),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},t.prototype.position=function(e,t){return[this.domNode,e]},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var r=a.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next),this.text=this.statics.value(this.domNode),r},t.prototype.update=function(e,t){var r=this;e.some((function(e){return"characterData"===e.type&&e.target===r.domNode}))&&(this.text=this.statics.value(this.domNode))},t.prototype.value=function(){return this.text},t.blotName="text",t.scope=a.Scope.INLINE_BLOT,t}(i.default);t.default=s},function(e,t,r){var n=document.createElement("div");if(n.classList.toggle("test-class",!1),n.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return arguments.length>1&&!this.contains(e)==!t?t:o.call(this,e)}}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var r=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>r.length)&&(t=r.length),t-=e.length;var n=r.indexOf(e,t);return-1!==n&&n===t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,r=Object(this),n=r.length>>>0,o=arguments[1],i=0;i<n;i++)if(t=r[i],e.call(o,t,i,r))return t}}),document.addEventListener("DOMContentLoaded",(function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)}))},function(e,t){var r=-1;function n(e,t,l){if(e==t)return e?[[0,e]]:[];(l<0||e.length<l)&&(l=null);var u=i(e,t),d=e.substring(0,u);u=a(e=e.substring(u),t=t.substring(u));var p=e.substring(e.length-u),f=function(e,t){var s;if(!e)return[[1,t]];if(!t)return[[r,e]];var l=e.length>t.length?e:t,c=e.length>t.length?t:e,u=l.indexOf(c);if(-1!=u)return s=[[1,l.substring(0,u)],[0,c],[1,l.substring(u+c.length)]],e.length>t.length&&(s[0][0]=s[2][0]=r),s;if(1==c.length)return[[r,e],[1,t]];var d=function(e,t){var r=e.length>t.length?e:t,n=e.length>t.length?t:e;if(r.length<4||2*n.length<r.length)return null;function o(e,t,r){for(var n,o,s,l,c=e.substring(r,r+Math.floor(e.length/4)),u=-1,d="";-1!=(u=t.indexOf(c,u+1));){var p=i(e.substring(r),t.substring(u)),f=a(e.substring(0,r),t.substring(0,u));d.length<f+p&&(d=t.substring(u-f,u)+t.substring(u,u+p),n=e.substring(0,r-f),o=e.substring(r+p),s=t.substring(0,u-f),l=t.substring(u+p))}return 2*d.length>=e.length?[n,o,s,l,d]:null}var s,l,c,u,d,p=o(r,n,Math.ceil(r.length/4)),f=o(r,n,Math.ceil(r.length/2));if(!p&&!f)return null;s=f?p&&p[4].length>f[4].length?p:f:p,e.length>t.length?(l=s[0],c=s[1],u=s[2],d=s[3]):(u=s[0],d=s[1],l=s[2],c=s[3]);var m=s[4];return[l,c,u,d,m]}(e,t);if(d){var p=d[0],f=d[1],m=d[2],h=d[3],g=d[4],b=n(p,m),y=n(f,h);return b.concat([[0,g]],y)}return function(e,t){for(var n=e.length,i=t.length,a=Math.ceil((n+i)/2),s=a,l=2*a,c=new Array(l),u=new Array(l),d=0;d<l;d++)c[d]=-1,u[d]=-1;c[s+1]=0,u[s+1]=0;for(var p=n-i,f=p%2!=0,m=0,h=0,g=0,b=0,y=0;y<a;y++){for(var v=-y+m;v<=y-h;v+=2){for(var x=s+v,w=(_=v==-y||v!=y&&c[x-1]<c[x+1]?c[x+1]:c[x-1]+1)-v;_<n&&w<i&&e.charAt(_)==t.charAt(w);)_++,w++;if(c[x]=_,_>n)h+=2;else if(w>i)m+=2;else if(f&&(N=s+p-v)>=0&&N<l&&-1!=u[N]&&_>=(j=n-u[N]))return o(e,t,_,w)}for(var E=-y+g;E<=y-b;E+=2){for(var j,N=s+E,S=(j=E==-y||E!=y&&u[N-1]<u[N+1]?u[N+1]:u[N-1]+1)-E;j<n&&S<i&&e.charAt(n-j-1)==t.charAt(i-S-1);)j++,S++;if(u[N]=j,j>n)b+=2;else if(S>i)g+=2;else if(!f){var _;if((x=s+p-E)>=0&&x<l&&-1!=c[x]&&(w=s+(_=c[x])-x,_>=(j=n-j)))return o(e,t,_,w)}}}return[[r,e],[1,t]]}(e,t)}(e=e.substring(0,e.length-u),t=t.substring(0,t.length-u));return d&&f.unshift([0,d]),p&&f.push([0,p]),s(f),null!=l&&(f=function(e,t){var n=function(e,t){if(0===t)return[0,e];for(var n=0,o=0;o<e.length;o++){var i=e[o];if(i[0]===r||0===i[0]){var a=n+i[1].length;if(t===a)return[o+1,e];if(t<a){e=e.slice();var s=t-n,l=[i[0],i[1].slice(0,s)],c=[i[0],i[1].slice(s)];return e.splice(o,1,l,c),[o+1,e]}n=a}}throw new Error("cursor_pos is out of bounds!")}(e,t),o=n[1],i=n[0],a=o[i],s=o[i+1];if(null==a)return e;if(0!==a[0])return e;if(null!=s&&a[1]+s[1]===s[1]+a[1])return o.splice(i,2,s,a),c(o,i,2);if(null!=s&&0===s[1].indexOf(a[1])){o.splice(i,2,[s[0],a[1]],[0,a[1]]);var l=s[1].slice(a[1].length);return l.length>0&&o.splice(i+2,0,[s[0],l]),c(o,i,3)}return e}(f,l)),f=function(e){for(var t=!1,n=function(e){return e.charCodeAt(0)>=56320&&e.charCodeAt(0)<=57343},o=function(e){return e.charCodeAt(e.length-1)>=55296&&e.charCodeAt(e.length-1)<=56319},i=2;i<e.length;i+=1)0===e[i-2][0]&&o(e[i-2][1])&&e[i-1][0]===r&&n(e[i-1][1])&&1===e[i][0]&&n(e[i][1])&&(t=!0,e[i-1][1]=e[i-2][1].slice(-1)+e[i-1][1],e[i][1]=e[i-2][1].slice(-1)+e[i][1],e[i-2][1]=e[i-2][1].slice(0,-1));if(!t)return e;var a=[];for(i=0;i<e.length;i+=1)e[i][1].length>0&&a.push(e[i]);return a}(f),f}function o(e,t,r,o){var i=e.substring(0,r),a=t.substring(0,o),s=e.substring(r),l=t.substring(o),c=n(i,a),u=n(s,l);return c.concat(u)}function i(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var r=0,n=Math.min(e.length,t.length),o=n,i=0;r<o;)e.substring(i,o)==t.substring(i,o)?i=r=o:n=o,o=Math.floor((n-r)/2+r);return o}function a(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var r=0,n=Math.min(e.length,t.length),o=n,i=0;r<o;)e.substring(e.length-o,e.length-i)==t.substring(t.length-o,t.length-i)?i=r=o:n=o,o=Math.floor((n-r)/2+r);return o}function s(e){e.push([0,""]);for(var t,n=0,o=0,l=0,c="",u="";n<e.length;)switch(e[n][0]){case 1:l++,u+=e[n][1],n++;break;case r:o++,c+=e[n][1],n++;break;case 0:o+l>1?(0!==o&&0!==l&&(0!==(t=i(u,c))&&(n-o-l>0&&0==e[n-o-l-1][0]?e[n-o-l-1][1]+=u.substring(0,t):(e.splice(0,0,[0,u.substring(0,t)]),n++),u=u.substring(t),c=c.substring(t)),0!==(t=a(u,c))&&(e[n][1]=u.substring(u.length-t)+e[n][1],u=u.substring(0,u.length-t),c=c.substring(0,c.length-t))),0===o?e.splice(n-l,o+l,[1,u]):0===l?e.splice(n-o,o+l,[r,c]):e.splice(n-o-l,o+l,[r,c],[1,u]),n=n-o-l+(o?1:0)+(l?1:0)+1):0!==n&&0==e[n-1][0]?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,l=0,o=0,c="",u=""}""===e[e.length-1][1]&&e.pop();var d=!1;for(n=1;n<e.length-1;)0==e[n-1][0]&&0==e[n+1][0]&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),d=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),d=!0)),n++;d&&s(e)}var l=n;function c(e,t,r){for(var n=t+r-1;n>=0&&n>=t-1;n--)if(n+1<e.length){var o=e[n],i=e[n+1];o[0]===i[1]&&e.splice(n,2,[o[0],o[1]+i[1]])}return e}l.INSERT=1,l.DELETE=r,l.EQUAL=0,e.exports=l},function(e,t){function r(e){var t=[];for(var r in e)t.push(r);return t}(e.exports="function"==typeof Object.keys?Object.keys:r).shim=r},function(e,t){var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function n(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function o(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=r?n:o).supported=n,t.unsupported=o},function(e,t){var r=Object.prototype.hasOwnProperty,n="~";function o(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,t,o=[];if(0===this._eventsCount)return o;for(t in e=this._events)r.call(e,t)&&o.push(n?t.slice(1):t);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},a.prototype.listeners=function(e,t){var r=n?n+e:e,o=this._events[r];if(t)return!!o;if(!o)return[];if(o.fn)return[o.fn];for(var i=0,a=o.length,s=new Array(a);i<a;i++)s[i]=o[i].fn;return s},a.prototype.emit=function(e,t,r,o,i,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,o),!0;case 5:return u.fn.call(u.context,t,r,o,i),!0;case 6:return u.fn.call(u.context,t,r,o,i,a),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var p,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,o);break;default:if(!l)for(p=1,l=new Array(d-1);p<d;p++)l[p-1]=arguments[p];u[c].fn.apply(u[c].context,l)}}return!0},a.prototype.on=function(e,t,r){var o=new i(t,r||this),a=n?n+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],o]:this._events[a].push(o):(this._events[a]=o,this._eventsCount++),this},a.prototype.once=function(e,t,r){var o=new i(t,r||this,!0),a=n?n+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],o]:this._events[a].push(o):(this._events[a]=o,this._eventsCount++),this},a.prototype.removeListener=function(e,t,r,i){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return 0==--this._eventsCount?this._events=new o:delete this._events[a],this;var s=this._events[a];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||(0==--this._eventsCount?this._events=new o:delete this._events[a]);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||i&&!s[l].once||r&&s[l].context!==r)&&c.push(s[l]);c.length?this._events[a]=1===c.length?c[0]:c:0==--this._eventsCount?this._events=new o:delete this._events[a]}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new o:delete this._events[t])):(this._events=new o,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prototype.setMaxListeners=function(){return this},a.prefixed=n,a.EventEmitter=a,void 0!==e&&(e.exports=a)},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.matchText=t.matchSpacing=t.matchNewline=t.matchBlot=t.matchAttributor=t.default=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){o=!0,i=l}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=v(r(3)),s=v(r(2)),l=v(r(0)),c=v(r(5)),u=v(r(10)),d=v(r(9)),p=r(36),f=r(37),m=v(r(13)),h=r(26),g=r(38),b=r(39),y=r(40);function v(e){return e&&e.__esModule?e:{default:e}}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=(0,u.default)("quill:clipboard"),E="__ql-matcher",j=[[Node.TEXT_NODE,M],[Node.TEXT_NODE,L],["br",function(e,t){return P(t,"\n")||t.insert("\n"),t}],[Node.ELEMENT_NODE,L],[Node.ELEMENT_NODE,D],[Node.ELEMENT_NODE,R],[Node.ELEMENT_NODE,A],[Node.ELEMENT_NODE,function(e,t){var r={},n=e.style||{};return n.fontStyle&&"italic"===O(e).fontStyle&&(r.italic=!0),n.fontWeight&&(O(e).fontWeight.startsWith("bold")||parseInt(O(e).fontWeight)>=700)&&(r.bold=!0),Object.keys(r).length>0&&(t=k(t,r)),parseFloat(n.textIndent||0)>0&&(t=(new s.default).insert("\t").concat(t)),t}],["li",function(e,t){var r=l.default.query(e);if(null==r||"list-item"!==r.blotName||!P(t,"\n"))return t;for(var n=-1,o=e.parentNode;!o.classList.contains("ql-clipboard");)"list"===(l.default.query(o)||{}).blotName&&(n+=1),o=o.parentNode;return n<=0?t:t.compose((new s.default).retain(t.length()-1).retain(1,{indent:n}))}],["b",C.bind(C,"bold")],["i",C.bind(C,"italic")],["style",function(){return new s.default}]],N=[p.AlignAttribute,g.DirectionAttribute].reduce((function(e,t){return e[t.keyName]=t,e}),{}),S=[p.AlignStyle,f.BackgroundStyle,h.ColorStyle,g.DirectionStyle,b.FontStyle,y.SizeStyle].reduce((function(e,t){return e[t.keyName]=t,e}),{}),_=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.quill.root.addEventListener("paste",n.onPaste.bind(n)),n.container=n.quill.addContainer("ql-clipboard"),n.container.setAttribute("contenteditable",!0),n.container.setAttribute("tabindex",-1),n.matchers=[],j.concat(n.options.matchers).forEach((function(e){var t=o(e,2),i=t[0],a=t[1];(r.matchVisual||a!==R)&&n.addMatcher(i,a)})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"addMatcher",value:function(e,t){this.matchers.push([e,t])}},{key:"convert",value:function(e){if("string"==typeof e)return this.container.innerHTML=e.replace(/\>\r?\n +\</g,"><"),this.convert();var t=this.quill.getFormat(this.quill.selection.savedRange.index);if(t[m.default.blotName]){var r=this.container.innerText;return this.container.innerHTML="",(new s.default).insert(r,x({},m.default.blotName,t[m.default.blotName]))}var n=this.prepareMatching(),i=o(n,2),a=i[0],l=i[1],c=I(this.container,a,l);return P(c,"\n")&&null==c.ops[c.ops.length-1].attributes&&(c=c.compose((new s.default).retain(c.length()-1).delete(1))),w.log("convert",this.container.innerHTML,c),this.container.innerHTML="",c}},{key:"dangerouslyPasteHTML",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.default.sources.API;if("string"==typeof e)this.quill.setContents(this.convert(e),t),this.quill.setSelection(0,c.default.sources.SILENT);else{var n=this.convert(t);this.quill.updateContents((new s.default).retain(e).concat(n),r),this.quill.setSelection(e+n.length(),c.default.sources.SILENT)}}},{key:"onPaste",value:function(e){var t=this;if(!e.defaultPrevented&&this.quill.isEnabled()){var r=this.quill.getSelection(),n=(new s.default).retain(r.index),o=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(c.default.sources.SILENT),setTimeout((function(){n=n.concat(t.convert()).delete(r.length),t.quill.updateContents(n,c.default.sources.USER),t.quill.setSelection(n.length()-r.length,c.default.sources.SILENT),t.quill.scrollingContainer.scrollTop=o,t.quill.focus()}),1)}}},{key:"prepareMatching",value:function(){var e=this,t=[],r=[];return this.matchers.forEach((function(n){var i=o(n,2),a=i[0],s=i[1];switch(a){case Node.TEXT_NODE:r.push(s);break;case Node.ELEMENT_NODE:t.push(s);break;default:[].forEach.call(e.container.querySelectorAll(a),(function(e){e[E]=e[E]||[],e[E].push(s)}))}})),[t,r]}}]),t}(d.default);function k(e,t,r){return"object"===(void 0===t?"undefined":n(t))?Object.keys(t).reduce((function(e,r){return k(e,r,t[r])}),e):e.reduce((function(e,n){return n.attributes&&n.attributes[t]?e.push(n):e.insert(n.insert,(0,a.default)({},x({},t,r),n.attributes))}),new s.default)}function O(e){if(e.nodeType!==Node.ELEMENT_NODE)return{};var t="__ql-computed-style";return e[t]||(e[t]=window.getComputedStyle(e))}function P(e,t){for(var r="",n=e.ops.length-1;n>=0&&r.length<t.length;--n){var o=e.ops[n];if("string"!=typeof o.insert)break;r=o.insert+r}return r.slice(-1*t.length)===t}function T(e){if(0===e.childNodes.length)return!1;var t=O(e);return["block","list-item"].indexOf(t.display)>-1}function I(e,t,r){return e.nodeType===e.TEXT_NODE?r.reduce((function(t,r){return r(e,t)}),new s.default):e.nodeType===e.ELEMENT_NODE?[].reduce.call(e.childNodes||[],(function(n,o){var i=I(o,t,r);return o.nodeType===e.ELEMENT_NODE&&(i=t.reduce((function(e,t){return t(o,e)}),i),i=(o[E]||[]).reduce((function(e,t){return t(o,e)}),i)),n.concat(i)}),new s.default):new s.default}function C(e,t,r){return k(r,e,!0)}function A(e,t){var r=l.default.Attributor.Attribute.keys(e),n=l.default.Attributor.Class.keys(e),o=l.default.Attributor.Style.keys(e),i={};return r.concat(n).concat(o).forEach((function(t){var r=l.default.query(t,l.default.Scope.ATTRIBUTE);null!=r&&(i[r.attrName]=r.value(e),i[r.attrName])||(null==(r=N[t])||r.attrName!==t&&r.keyName!==t||(i[r.attrName]=r.value(e)||void 0),null==(r=S[t])||r.attrName!==t&&r.keyName!==t||(r=S[t],i[r.attrName]=r.value(e)||void 0))})),Object.keys(i).length>0&&(t=k(t,i)),t}function D(e,t){var r=l.default.query(e);if(null==r)return t;if(r.prototype instanceof l.default.Embed){var n={},o=r.value(e);null!=o&&(n[r.blotName]=o,t=(new s.default).insert(n,r.formats(e)))}else"function"==typeof r.formats&&(t=k(t,r.blotName,r.formats(e)));return t}function L(e,t){return P(t,"\n")||(T(e)||t.length()>0&&e.nextSibling&&T(e.nextSibling))&&t.insert("\n"),t}function R(e,t){if(T(e)&&null!=e.nextElementSibling&&!P(t,"\n\n")){var r=e.offsetHeight+parseFloat(O(e).marginTop)+parseFloat(O(e).marginBottom);e.nextElementSibling.offsetTop>e.offsetTop+1.5*r&&t.insert("\n")}return t}function M(e,t){var r=e.data;if("O:P"===e.parentNode.tagName)return t.insert(r.trim());if(0===r.trim().length&&e.parentNode.classList.contains("ql-clipboard"))return t;if(!O(e.parentNode).whiteSpace.startsWith("pre")){var n=function(e,t){return(t=t.replace(/[^\u00a0]/g,"")).length<1&&e?" ":t};r=(r=r.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,n.bind(n,!0)),(null==e.previousSibling&&T(e.parentNode)||null!=e.previousSibling&&T(e.previousSibling))&&(r=r.replace(/^\s+/,n.bind(n,!1))),(null==e.nextSibling&&T(e.parentNode)||null!=e.nextSibling&&T(e.nextSibling))&&(r=r.replace(/\s+$/,n.bind(n,!1)))}return t.insert(r)}_.DEFAULTS={matchers:[],matchVisual:!0},t.default=_,t.matchAttributor=A,t.matchBlot=D,t.matchNewline=L,t.matchSpacing=R,t.matchText=M},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},a=r(6),s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"optimize",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),t}(((n=a)&&n.__esModule?n:{default:n}).default);s.blotName="bold",s.tagName=["STRONG","B"],t.default=s},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.addControls=t.default=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){o=!0,i=l}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=u(r(2)),a=u(r(0)),s=u(r(5)),l=u(r(10)),c=u(r(9));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=(0,l.default)("quill:toolbar"),f=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o,i=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));if(Array.isArray(i.options.container)){var a=document.createElement("div");h(a,i.options.container),e.container.parentNode.insertBefore(a,e.container),i.container=a}else"string"==typeof i.options.container?i.container=document.querySelector(i.options.container):i.container=i.options.container;return i.container instanceof HTMLElement?(i.container.classList.add("ql-toolbar"),i.controls=[],i.handlers={},Object.keys(i.options.handlers).forEach((function(e){i.addHandler(e,i.options.handlers[e])})),[].forEach.call(i.container.querySelectorAll("button, select"),(function(e){i.attach(e)})),i.quill.on(s.default.events.EDITOR_CHANGE,(function(e,t){e===s.default.events.SELECTION_CHANGE&&i.update(t)})),i.quill.on(s.default.events.SCROLL_OPTIMIZE,(function(){var e=i.quill.selection.getRange(),t=n(e,1)[0];i.update(t)})),i):(o=p.error("Container required for toolbar",i.options),d(i,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"addHandler",value:function(e,t){this.handlers[e]=t}},{key:"attach",value:function(e){var t=this,r=[].find.call(e.classList,(function(e){return 0===e.indexOf("ql-")}));if(r){if(r=r.slice(3),"BUTTON"===e.tagName&&e.setAttribute("type","button"),null==this.handlers[r]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[r])return void p.warn("ignoring attaching to disabled format",r,e);if(null==a.default.query(r))return void p.warn("ignoring attaching to nonexistent format",r,e)}var o="SELECT"===e.tagName?"change":"click";e.addEventListener(o,(function(o){var l=void 0;if("SELECT"===e.tagName){if(e.selectedIndex<0)return;var c=e.options[e.selectedIndex];l=!c.hasAttribute("selected")&&(c.value||!1)}else l=!e.classList.contains("ql-active")&&(e.value||!e.hasAttribute("value")),o.preventDefault();t.quill.focus();var u=t.quill.selection.getRange(),d=n(u,1)[0];if(null!=t.handlers[r])t.handlers[r].call(t,l);else if(a.default.query(r).prototype instanceof a.default.Embed){if(!(l=prompt("Enter "+r)))return;t.quill.updateContents((new i.default).retain(d.index).delete(d.length).insert(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},r,l)),s.default.sources.USER)}else t.quill.format(r,l,s.default.sources.USER);t.update(d)})),this.controls.push([r,e])}}},{key:"update",value:function(e){var t=null==e?{}:this.quill.getFormat(e);this.controls.forEach((function(r){var o=n(r,2),i=o[0],a=o[1];if("SELECT"===a.tagName){var s=void 0;if(null==e)s=null;else if(null==t[i])s=a.querySelector("option[selected]");else if(!Array.isArray(t[i])){var l=t[i];"string"==typeof l&&(l=l.replace(/\"/g,'\\"')),s=a.querySelector('option[value="'+l+'"]')}null==s?(a.value="",a.selectedIndex=-1):s.selected=!0}else if(null==e)a.classList.remove("ql-active");else if(a.hasAttribute("value")){var c=t[i]===a.getAttribute("value")||null!=t[i]&&t[i].toString()===a.getAttribute("value")||null==t[i]&&!a.getAttribute("value");a.classList.toggle("ql-active",c)}else a.classList.toggle("ql-active",null!=t[i])}))}}]),t}(c.default);function m(e,t,r){var n=document.createElement("button");n.setAttribute("type","button"),n.classList.add("ql-"+t),null!=r&&(n.value=r),e.appendChild(n)}function h(e,t){Array.isArray(t[0])||(t=[t]),t.forEach((function(t){var r=document.createElement("span");r.classList.add("ql-formats"),t.forEach((function(e){if("string"==typeof e)m(r,e);else{var t=Object.keys(e)[0],n=e[t];Array.isArray(n)?function(e,t,r){var n=document.createElement("select");n.classList.add("ql-"+t),r.forEach((function(e){var t=document.createElement("option");!1!==e?t.setAttribute("value",e):t.setAttribute("selected","selected"),n.appendChild(t)})),e.appendChild(n)}(r,t,n):m(r,t,n)}})),e.appendChild(r)}))}f.DEFAULTS={},f.DEFAULTS={container:null,handlers:{clean:function(){var e=this,t=this.quill.getSelection();if(null!=t)if(0==t.length){var r=this.quill.getFormat();Object.keys(r).forEach((function(t){null!=a.default.query(t,a.default.Scope.INLINE)&&e.quill.format(t,!1)}))}else this.quill.removeFormat(t,s.default.sources.USER)},direction:function(e){var t=this.quill.getFormat().align;"rtl"===e&&null==t?this.quill.format("align","right",s.default.sources.USER):e||"right"!==t||this.quill.format("align",!1,s.default.sources.USER),this.quill.format("direction",e,s.default.sources.USER)},indent:function(e){var t=this.quill.getSelection(),r=this.quill.getFormat(t),n=parseInt(r.indent||0);if("+1"===e||"-1"===e){var o="+1"===e?1:-1;"rtl"===r.direction&&(o*=-1),this.quill.format("indent",n+o,s.default.sources.USER)}},link:function(e){!0===e&&(e=prompt("Enter link URL:")),this.quill.format("link",e,s.default.sources.USER)},list:function(e){var t=this.quill.getSelection(),r=this.quill.getFormat(t);"check"===e?"checked"===r.list||"unchecked"===r.list?this.quill.format("list",!1,s.default.sources.USER):this.quill.format("list","unchecked",s.default.sources.USER):this.quill.format("list",e,s.default.sources.USER)}}},t.default=f,t.addControls=h},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},a=r(28),s=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.label.innerHTML=r,n.container.classList.add("ql-color-picker"),[].slice.call(n.container.querySelectorAll(".ql-picker-item"),0,7).forEach((function(e){e.classList.add("ql-primary")})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"buildItem",value:function(e){var r=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buildItem",this).call(this,e);return r.style.backgroundColor=e.getAttribute("value")||"",r}},{key:"selectItem",value:function(e,r){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,r);var n=this.label.querySelector(".ql-color-label"),o=e&&e.getAttribute("data-value")||"";n&&("line"===n.tagName?n.style.stroke=o:n.style.fill=o)}}]),t}(((n=a)&&n.__esModule?n:{default:n}).default);t.default=s},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},a=r(28),s=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.container.classList.add("ql-icon-picker"),[].forEach.call(n.container.querySelectorAll(".ql-picker-item"),(function(e){e.innerHTML=r[e.getAttribute("data-value")||""]})),n.defaultItem=n.container.querySelector(".ql-selected"),n.selectItem(n.defaultItem),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"selectItem",value:function(e,r){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,r),e=e||this.defaultItem,this.label.innerHTML=e.innerHTML}}]),t}(((n=a)&&n.__esModule?n:{default:n}).default);t.default=s},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.boundsContainer=r||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",(function(){n.root.style.marginTop=-1*n.quill.root.scrollTop+"px"})),this.hide()}return n(e,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(e){var t=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=t+"px",this.root.style.top=r+"px",this.root.classList.remove("ql-flip");var n=this.boundsContainer.getBoundingClientRect(),o=this.root.getBoundingClientRect(),i=0;if(o.right>n.right&&(i=n.right-o.right,this.root.style.left=t+i+"px"),o.left<n.left&&(i=n.left-o.left,this.root.style.left=t+i+"px"),o.bottom>n.bottom){var a=o.bottom-o.top,s=e.bottom-e.top+a;this.root.style.top=r-s+"px",this.root.classList.add("ql-flip")}return i}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),e}();t.default=o},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(l){o=!0,i=l}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=f(r(3)),s=f(r(8)),l=r(43),c=f(l),u=f(r(27)),d=r(15),p=f(r(41));function f(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],y=function(e){function t(e,r){m(this,t),null!=r.modules.toolbar&&null==r.modules.toolbar.container&&(r.modules.toolbar.container=b);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.quill.container.classList.add("ql-snow"),n}return g(t,e),i(t,[{key:"extendToolbar",value:function(e){e.container.classList.add("ql-snow"),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),p.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),p.default),this.tooltip=new v(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},(function(t,r){e.handlers.link.call(e,!r.format.link)}))}}]),t}(c.default);y.DEFAULTS=(0,a.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){if(e){var t=this.quill.getSelection();if(null==t||0==t.length)return;var r=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(r)&&0!==r.indexOf("mailto:")&&(r="mailto:"+r),this.quill.theme.tooltip.edit("link",r)}else this.quill.format("link",!1)}}}}});var v=function(e){function t(e,r){m(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.preview=n.root.querySelector("a.ql-preview"),n}return g(t,e),i(t,[{key:"listen",value:function(){var e=this;o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",(function(t){e.root.classList.contains("ql-editing")?e.save():e.edit("link",e.preview.textContent),t.preventDefault()})),this.root.querySelector("a.ql-remove").addEventListener("click",(function(t){if(null!=e.linkRange){var r=e.linkRange;e.restoreFocus(),e.quill.formatText(r,"link",!1,s.default.sources.USER),delete e.linkRange}t.preventDefault(),e.hide()})),this.quill.on(s.default.events.SELECTION_CHANGE,(function(t,r,o){if(null!=t){if(0===t.length&&o===s.default.sources.USER){var i=e.quill.scroll.descendant(u.default,t.index),a=n(i,2),l=a[0],c=a[1];if(null!=l){e.linkRange=new d.Range(t.index-c,l.length());var p=u.default.formats(l.domNode);return e.preview.textContent=p,e.preview.setAttribute("href",p),e.show(),void e.position(e.quill.getBounds(e.linkRange))}}else delete e.linkRange;e.hide()}}))}},{key:"show",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),t}(l.BaseTooltip);v.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),t.default=y},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=L(r(29)),o=r(36),i=r(38),a=r(64),s=L(r(65)),l=L(r(66)),c=r(67),u=L(c),d=r(37),p=r(26),f=r(39),m=r(40),h=L(r(56)),g=L(r(68)),b=L(r(27)),y=L(r(69)),v=L(r(70)),x=L(r(71)),w=L(r(72)),E=L(r(73)),j=r(13),N=L(j),S=L(r(74)),_=L(r(75)),k=L(r(57)),O=L(r(41)),P=L(r(28)),T=L(r(59)),I=L(r(60)),C=L(r(61)),A=L(r(108)),D=L(r(62));function L(e){return e&&e.__esModule?e:{default:e}}n.default.register({"attributors/attribute/direction":i.DirectionAttribute,"attributors/class/align":o.AlignClass,"attributors/class/background":d.BackgroundClass,"attributors/class/color":p.ColorClass,"attributors/class/direction":i.DirectionClass,"attributors/class/font":f.FontClass,"attributors/class/size":m.SizeClass,"attributors/style/align":o.AlignStyle,"attributors/style/background":d.BackgroundStyle,"attributors/style/color":p.ColorStyle,"attributors/style/direction":i.DirectionStyle,"attributors/style/font":f.FontStyle,"attributors/style/size":m.SizeStyle},!0),n.default.register({"formats/align":o.AlignClass,"formats/direction":i.DirectionClass,"formats/indent":a.IndentClass,"formats/background":d.BackgroundStyle,"formats/color":p.ColorStyle,"formats/font":f.FontClass,"formats/size":m.SizeClass,"formats/blockquote":s.default,"formats/code-block":N.default,"formats/header":l.default,"formats/list":u.default,"formats/bold":h.default,"formats/code":j.Code,"formats/italic":g.default,"formats/link":b.default,"formats/script":y.default,"formats/strike":v.default,"formats/underline":x.default,"formats/image":w.default,"formats/video":E.default,"formats/list/item":c.ListItem,"modules/formula":S.default,"modules/syntax":_.default,"modules/toolbar":k.default,"themes/bubble":A.default,"themes/snow":D.default,"ui/icons":O.default,"ui/picker":P.default,"ui/icon-picker":I.default,"ui/color-picker":T.default,"ui/tooltip":C.default},!0),t.default=n.default},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.IndentClass=void 0;var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},a=r(0),s=(n=a)&&n.__esModule?n:{default:n},l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"add",value:function(e,r){if("+1"===r||"-1"===r){var n=this.value(e)||0;r="+1"===r?n+1:n-1}return 0===r?(this.remove(e),!0):i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e,r)}},{key:"canAdd",value:function(e,r){return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,r)||i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,parseInt(r))}},{key:"value",value:function(e){return parseInt(i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e))||void 0}}]),t}(s.default.Attributor.Class),c=new l("indent","ql-indent",{scope:s.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});t.IndentClass=c},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(4),i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=o)&&n.__esModule?n:{default:n}).default);i.blotName="blockquote",i.tagName="blockquote",t.default=i},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(4),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,null,[{key:"formats",value:function(e){return this.tagName.indexOf(e.tagName)+1}}]),t}(((n=i)&&n.__esModule?n:{default:n}).default);a.blotName="header",a.tagName=["H1","H2","H3","H4","H5","H6"],t.default=a},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ListItem=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},i=l(r(0)),a=l(r(4)),s=l(r(25));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return c(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),n(t,[{key:"format",value:function(e,r){e!==f.blotName||r?o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r):this.replaceWith(i.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(e,r){return this.parent.isolate(this.offset(this.parent),this.length()),e===this.parent.statics.blotName?(this.parent.replaceWith(e,r),this):(this.parent.unwrap(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e,r))}}],[{key:"formats",value:function(e){return e.tagName===this.tagName?void 0:o(t.__proto__||Object.getPrototypeOf(t),"formats",this).call(this,e)}}]),t}(a.default);p.blotName="list-item",p.tagName="LI";var f=function(e){function t(e){c(this,t);var r=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=function(t){if(t.target.parentNode===e){var n=r.statics.formats(e),o=i.default.find(t.target);"checked"===n?o.format("list","unchecked"):"unchecked"===n&&o.format("list","checked")}};return e.addEventListener("touchstart",n),e.addEventListener("mousedown",n),r}return d(t,e),n(t,null,[{key:"create",value:function(e){var r="ordered"===e?"OL":"UL",n=o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,r);return"checked"!==e&&"unchecked"!==e||n.setAttribute("data-checked","checked"===e),n}},{key:"formats",value:function(e){return"OL"===e.tagName?"ordered":"UL"===e.tagName?e.hasAttribute("data-checked")?"true"===e.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),n(t,[{key:"format",value:function(e,t){this.children.length>0&&this.children.tail.format(e,t)}},{key:"formats",value:function(){return e={},t=this.statics.blotName,r=this.statics.formats(this.domNode),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e;var e,t,r}},{key:"insertBefore",value:function(e,r){if(e instanceof p)o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,r);else{var n=null==r?this.length():r.offset(this),i=this.split(n);i.parent.insertBefore(e,i)}}},{key:"optimize",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var r=this.next;null!=r&&r.prev===this&&r.statics.blotName===this.statics.blotName&&r.domNode.tagName===this.domNode.tagName&&r.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(r.moveChildren(this),r.remove())}},{key:"replace",value:function(e){if(e.statics.blotName!==this.statics.blotName){var r=i.default.create(this.statics.defaultChild);e.moveChildren(r),this.appendChild(r)}o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e)}}]),t}(s.default);f.blotName="list",f.scope=i.default.Scope.BLOCK_BLOT,f.tagName=["OL","UL"],f.defaultChild="list-item",f.allowedChildren=[p],t.ListItem=p,t.default=f},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(56),i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=o)&&n.__esModule?n:{default:n}).default);i.blotName="italic",i.tagName=["EM","I"],t.default=i},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},a=r(6),s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,null,[{key:"create",value:function(e){return"super"===e?document.createElement("sup"):"sub"===e?document.createElement("sub"):i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e)}},{key:"formats",value:function(e){return"SUB"===e.tagName?"sub":"SUP"===e.tagName?"super":void 0}}]),t}(((n=a)&&n.__esModule?n:{default:n}).default);s.blotName="script",s.tagName=["SUB","SUP"],t.default=s},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(6),i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=o)&&n.__esModule?n:{default:n}).default);i.blotName="strike",i.tagName="S",t.default=i},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(6),i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=o)&&n.__esModule?n:{default:n}).default);i.blotName="underline",i.tagName="U",t.default=i},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},a=r(0),s=(n=a)&&n.__esModule?n:{default:n},l=r(27),c=["alt","height","width"],u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"format",value:function(e,r){c.indexOf(e)>-1?r?this.domNode.setAttribute(e,r):this.domNode.removeAttribute(e):i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r)}}],[{key:"create",value:function(e){var r=i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"==typeof e&&r.setAttribute("src",this.sanitize(e)),r}},{key:"formats",value:function(e){return c.reduce((function(t,r){return e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t}),{})}},{key:"match",value:function(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}},{key:"sanitize",value:function(e){return(0,l.sanitize)(e,["http","https","data"])?e:"//:0"}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(s.default.Embed);u.blotName="image",u.tagName="IMG",t.default=u},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n,o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},a=r(4),s=r(27),l=(n=s)&&n.__esModule?n:{default:n},c=["height","width"],u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"format",value:function(e,r){c.indexOf(e)>-1?r?this.domNode.setAttribute(e,r):this.domNode.removeAttribute(e):i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r)}}],[{key:"create",value:function(e){var r=i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return r.setAttribute("frameborder","0"),r.setAttribute("allowfullscreen",!0),r.setAttribute("src",this.sanitize(e)),r}},{key:"formats",value:function(e){return c.reduce((function(t,r){return e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t}),{})}},{key:"sanitize",value:function(e){return l.default.sanitize(e)}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(a.BlockEmbed);u.blotName="video",u.className="ql-video",u.tagName="IFRAME",t.default=u},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FormulaBlot=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},i=l(r(35)),a=l(r(5)),s=l(r(9));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return c(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),n(t,null,[{key:"create",value:function(e){var r=o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"==typeof e&&(window.katex.render(e,r,{throwOnError:!1,errorColor:"#f00"}),r.setAttribute("data-value",e)),r}},{key:"value",value:function(e){return e.getAttribute("data-value")}}]),t}(i.default);p.blotName="formula",p.className="ql-formula",p.tagName="SPAN";var f=function(e){function t(){c(this,t);var e=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return e}return d(t,e),n(t,null,[{key:"register",value:function(){a.default.register(p,!0)}}]),t}(s.default);t.FormulaBlot=p,t.default=f},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CodeToken=t.CodeBlock=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},i=l(r(0)),a=l(r(5)),s=l(r(9));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return c(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),n(t,[{key:"replaceWith",value:function(e){this.domNode.textContent=this.domNode.textContent,this.attach(),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e)}},{key:"highlight",value:function(e){var t=this.domNode.textContent;this.cachedText!==t&&((t.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=e(t),this.domNode.normalize(),this.attach()),this.cachedText=t)}}]),t}(l(r(13)).default);p.className="ql-syntax";var f=new i.default.Attributor.Class("token","hljs",{scope:i.default.Scope.INLINE}),m=function(e){function t(e,r){c(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));if("function"!=typeof n.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var o=null;return n.quill.on(a.default.events.SCROLL_OPTIMIZE,(function(){clearTimeout(o),o=setTimeout((function(){n.highlight(),o=null}),n.options.interval)})),n.highlight(),n}return d(t,e),n(t,null,[{key:"register",value:function(){a.default.register(f,!0),a.default.register(p,!0)}}]),n(t,[{key:"highlight",value:function(){var e=this;if(!this.quill.selection.composing){this.quill.update(a.default.sources.USER);var t=this.quill.getSelection();this.quill.scroll.descendants(p).forEach((function(t){t.highlight(e.options.highlight)})),this.quill.update(a.default.sources.SILENT),null!=t&&this.quill.setSelection(t,a.default.sources.SILENT)}}}]),t}(s.default);m.DEFAULTS={highlight:null==window.hljs?null:function(e){return window.hljs.highlightAuto(e).value},interval:1e3},t.CodeBlock=p,t.CodeToken=f,t.default=m},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BubbleTooltip=void 0;var n=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=d(r(3)),a=d(r(8)),s=r(43),l=d(s),c=r(15),u=d(r(41));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],g=function(e){function t(e,r){p(this,t),null!=r.modules.toolbar&&null==r.modules.toolbar.container&&(r.modules.toolbar.container=h);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.quill.container.classList.add("ql-bubble"),n}return m(t,e),o(t,[{key:"extendToolbar",value:function(e){this.tooltip=new b(this.quill,this.options.bounds),this.tooltip.root.appendChild(e.container),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),u.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),u.default)}}]),t}(l.default);g.DEFAULTS=(0,i.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){e?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var b=function(e){function t(e,r){p(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.quill.on(a.default.events.EDITOR_CHANGE,(function(e,t,r,o){if(e===a.default.events.SELECTION_CHANGE)if(null!=t&&t.length>0&&o===a.default.sources.USER){n.show(),n.root.style.left="0px",n.root.style.width="",n.root.style.width=n.root.offsetWidth+"px";var i=n.quill.getLines(t.index,t.length);if(1===i.length)n.position(n.quill.getBounds(t));else{var s=i[i.length-1],l=n.quill.getIndex(s),u=Math.min(s.length()-1,t.index+t.length-l),d=n.quill.getBounds(new c.Range(l,u));n.position(d)}}else document.activeElement!==n.textbox&&n.quill.hasFocus()&&n.hide()})),n}return m(t,e),o(t,[{key:"listen",value:function(){var e=this;n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",(function(){e.root.classList.remove("ql-editing")})),this.quill.on(a.default.events.SCROLL_OPTIMIZE,(function(){setTimeout((function(){if(!e.root.classList.contains("ql-hidden")){var t=e.quill.getSelection();null!=t&&e.position(e.quill.getBounds(t))}}),1)}))}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(e){var r=n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"position",this).call(this,e),o=this.root.querySelector(".ql-tooltip-arrow");if(o.style.marginLeft="",0===r)return r;o.style.marginLeft=-1*r-o.offsetWidth/2+"px"}}]),t}(s.BaseTooltip);b.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),t.BubbleTooltip=b,t.default=g},function(e,t,r){e.exports=r(63)}]).default};var Jm,Xm=Zm.exports=Km(),Qm=c&&c.__extends||(Jm=function(e,t){return(Jm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Jm(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),eh=c&&c.__assign||function(){return eh=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},eh.apply(this,arguments)},th=c&&c.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n},rh=c&&c.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},nh=rh(n),oh=rh(s),ih=rh(Ym),ah=rh(Xm),sh=function(e){function t(t){var r=e.call(this,t)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(e,t,n,o){var i,a,s,l;"text-change"===e?null===(a=(i=r).onEditorChangeText)||void 0===a||a.call(i,r.editor.root.innerHTML,t,o,r.unprivilegedEditor):"selection-change"===e&&(null===(l=(s=r).onEditorChangeSelection)||void 0===l||l.call(s,t,o,r.unprivilegedEditor))};var n=r.isControlled()?t.value:t.defaultValue;return r.value=null!=n?n:"",r}return Qm(t,e),t.prototype.validateProps=function(e){var t;if(nh.default.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(nh.default.Children.count(e.children)&&"textarea"===(null===(t=nh.default.Children.only(e.children))||void 0===t?void 0:t.type))throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(e,t){var r,n=this;if(this.validateProps(e),!this.editor||this.state.generation!==t.generation)return!0;if("value"in e){var o=this.getEditorContents(),i=null!=(r=e.value)?r:"";this.isEqualValue(i,o)||this.setEditorContents(this.editor,i)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),th(this.cleanProps,this.dirtyProps).some((function(t){return!ih.default(e[t],n.props[t])}))},t.prototype.shouldComponentRegenerate=function(e){var t=this;return this.dirtyProps.some((function(r){return!ih.default(e[r],t.props[r])}))},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(e,t){var r=this;if(this.editor&&this.shouldComponentRegenerate(e)){var n=this.editor.getContents(),o=this.editor.getSelection();this.regenerationSnapshot={delta:n,selection:o},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==t.generation){var i=this.regenerationSnapshot,a=(n=i.delta,i.selection);delete this.regenerationSnapshot,this.instantiateEditor();var s=this.editor;s.setContents(n),lh((function(){return r.setEditorSelection(s,a)}))}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(e,t){var r=new ah.default(e,t);return null!=t.tabIndex&&this.setEditorTabIndex(r,t.tabIndex),this.hookEditor(r),r},t.prototype.hookEditor=function(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(e){e.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(e){return e&&e.ops},t.prototype.isEqualValue=function(e,t){return this.isDelta(e)&&this.isDelta(t)?ih.default(e.ops,t.ops):ih.default(e,t)},t.prototype.setEditorContents=function(e,t){var r=this;this.value=t;var n=this.getEditorSelection();"string"==typeof t?e.setContents(e.clipboard.convert(t)):e.setContents(t),lh((function(){return r.setEditorSelection(e,n)}))},t.prototype.setEditorSelection=function(e,t){if(this.selection=t,t){var r=e.getLength();t.index=Math.max(0,Math.min(t.index,r-1)),t.length=Math.max(0,Math.min(t.length,r-1-t.index)),e.setSelection(t)}},t.prototype.setEditorTabIndex=function(e,t){var r,n;(null===(n=null===(r=e)||void 0===r?void 0:r.scroll)||void 0===n?void 0:n.domNode)&&(e.scroll.domNode.tabIndex=t)},t.prototype.setEditorReadOnly=function(e,t){t?e.disable():e.enable()},t.prototype.makeUnprivilegedEditor=function(e){var t=e;return{getHTML:function(){return t.root.innerHTML},getLength:t.getLength.bind(t),getText:t.getText.bind(t),getContents:t.getContents.bind(t),getSelection:t.getSelection.bind(t),getBounds:t.getBounds.bind(t)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var e=oh.default.findDOMNode(this.editingArea);if(!e)throw new Error("Cannot find element for editing area");if(3===e.nodeType)throw new Error("Editing area cannot be a text node");return e},t.prototype.renderEditingArea=function(){var e=this,t=this.props,r=t.children,n=t.preserveWhitespace,o={key:this.state.generation,ref:function(t){e.editingArea=t}};return nh.default.Children.count(r)?nh.default.cloneElement(nh.default.Children.only(r),o):n?nh.default.createElement("pre",eh({},o)):nh.default.createElement("div",eh({},o))},t.prototype.render=function(){var e;return nh.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(e=this.props.className,null!=e?e:""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(e,t,r,n){var o,i;if(this.editor){var a=this.isDelta(this.value)?n.getContents():n.getHTML();a!==this.getEditorContents()&&(this.lastDeltaChangeSet=t,this.value=a,null===(i=(o=this.props).onChange)||void 0===i||i.call(o,e,t,r,n))}},t.prototype.onEditorChangeSelection=function(e,t,r){var n,o,i,a,s,l;if(this.editor){var c=this.getEditorSelection(),u=!c&&e,d=c&&!e;ih.default(e,c)||(this.selection=e,null===(o=(n=this.props).onChangeSelection)||void 0===o||o.call(n,e,t,r),u?null===(a=(i=this.props).onFocus)||void 0===a||a.call(i,e,t,r):d&&(null===(l=(s=this.props).onBlur)||void 0===l||l.call(s,c,t,r)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=ah.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(nh.default.Component);function lh(e){Promise.resolve().then(e)}const ch=l(sh);var uh={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},dh=o.createContext&&o.createContext(uh),ph=globalThis&&globalThis.__assign||function(){return ph=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ph.apply(this,arguments)},fh=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};function mh(e){return e&&e.map((function(e,t){return o.createElement(e.tag,ph({key:t},e.attr),mh(e.child))}))}function hh(e){return function(t){return o.createElement(gh,ph({attr:ph({},e.attr)},t),mh(e.child))}}function gh(e){var t=function(t){var r,n=e.attr,i=e.size,a=e.title,s=fh(e,["attr","size","title"]),l=i||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),o.createElement("svg",ph({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,s,{className:r,style:ph(ph({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&o.createElement("title",null,a),e.children)};return void 0!==dh?o.createElement(dh.Consumer,null,(function(e){return t(e)})):t(uh)}function bh(e){return hh({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"}},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"}}]})(e)}function yh(e){return hh({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"}}]})(e)}function vh(e){return hh({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"polyline",attr:{points:"12 6 12 12 16 14"}}]})(e)}function xh(e){return hh({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"}},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}}]})(e)}function wh(e){return hh({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}}]})(e)}function Eh(e){return hh({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}}]})(e)}function jh(e){return hh({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"}}]})(e)}function Nh(e){return hh({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"8",y1:"6",x2:"21",y2:"6"}},{tag:"line",attr:{x1:"8",y1:"12",x2:"21",y2:"12"}},{tag:"line",attr:{x1:"8",y1:"18",x2:"21",y2:"18"}},{tag:"line",attr:{x1:"3",y1:"6",x2:"3.01",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"12",x2:"3.01",y2:"12"}},{tag:"line",attr:{x1:"3",y1:"18",x2:"3.01",y2:"18"}}]})(e)}function Sh(e){return hh({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"}}]})(e)}function _h(e){return hh({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"}}]})(e)}function kh(e){return hh({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"}},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(e)}function Oh(e){return hh({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}}]})(e)}function Ph(e){return hh({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}},{tag:"line",attr:{x1:"7",y1:"7",x2:"7.01",y2:"7"}}]})(e)}function Th(e){return hh({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"}},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"}},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"}}]})(e)}function Ih(e){return hh({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}},{tag:"polyline",attr:{points:"17 8 12 3 7 8"}},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"}}]})(e)}function Ch(e){return hh({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"}}]})(e)}function Ah(e){return hh({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"23 7 16 12 23 17 23 7"}},{tag:"rect",attr:{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"}}]})(e)}function Dh(e){return hh({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"}},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"}}]})(e)}const Lh={toolbar:{container:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],[{list:"ordered"},{list:"bullet"}],["blockquote","code-block"],["link","image"],["clean"]],handlers:{}},clipboard:{matchVisual:!1},keyboard:{bindings:{handleEnter:{key:13,handler:function(){return!0}}}}},Rh=["header","font","size","bold","italic","underline","strike","color","background","align","list","bullet","indent","link","image","video","blockquote","code-block"],Mh={standardArticle:'\n    <h1 class="title-main" style="font-size: 2.5rem; font-weight: 700; margin: 1.5rem 0; color: #111827; text-align: center; border-bottom: 2px solid #f59e0b; padding-bottom: 10px;">T√≠tulo Principal del Art√≠culo</h1>\n    \n    <p class="first-paragraph">Este es el p√°rrafo de introducci√≥n donde puedes plantear el tema central del art√≠culo y despertar el inter√©s del lector. Un buen art√≠culo capta la atenci√≥n desde las primeras l√≠neas y establece claramente de qu√© va a tratar.</p>\n    \n    <h2 style="font-size: 2rem; margin-top: 3.5rem; margin-bottom: 1.5rem; font-weight: 800; color: #111827; letter-spacing: -0.025em; position: relative; padding-bottom: 0.75rem; border-bottom: 3px solid rgba(245, 158, 11, 0.5);">Primera secci√≥n importante</h2>\n    \n    <p>Desarrolla aqu√≠ el primer punto clave de tu art√≠culo con informaci√≥n relevante y datos interesantes. Recuerda que los p√°rrafos no deben ser demasiado extensos para facilitar la lectura.</p>\n    \n    <blockquote style="margin: 3rem 0; padding: 2rem; background-color: rgba(245, 158, 11, 0.05); border-radius: 1rem; position: relative; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05);">\n      <p style="font-size: 1.25rem; line-height: 1.6; color: #4b5563; font-weight: 500;">"Una cita relevante o testimonio puede a√±adir credibilidad y un toque humano a tu art√≠culo"</p>\n    </blockquote>\n    \n    <h3 style="font-size: 1.5rem; margin-top: 2.5rem; margin-bottom: 1.25rem; font-weight: 700; color: #1f2937; background: rgba(245, 158, 11, 0.1); padding: 0.25rem 0.75rem; border-radius: 4px; display: inline-block;">Subtema relevante</h3>\n    \n    <p style="margin-left: 2rem; padding-left: 1.5rem; border-left: 3px solid #f59e0b; font-style: italic;">Profundiza en aspectos espec√≠ficos del tema principal. Este p√°rrafo tiene un estilo especial para destacar informaci√≥n importante.</p>\n    \n    <hr style="border: 0; height: 6px; margin: 4rem auto; width: 50%; background-image: radial-gradient(circle, #f59e0b 0%, transparent 60%), radial-gradient(circle, #f59e0b 0%, transparent 60%); background-size: 15px 15px; background-position: top center; opacity: 0.5;">\n    \n    <h2 style="font-size: 2rem; margin-top: 3.5rem; margin-bottom: 1.5rem; font-weight: 800; color: #111827; letter-spacing: -0.025em; position: relative; padding-bottom: 0.75rem; border-bottom: 3px solid rgba(245, 158, 11, 0.5);">Segunda secci√≥n importante</h2>\n    \n    <p>Contin√∫a con el desarrollo de tu segundo punto principal. Usa transiciones suaves entre p√°rrafos para mantener un flujo de lectura agradable.</p>\n    \n    <div class="highlight-block" style="background-color: #fffde7; border-left: 3px solid #f59e0b; padding: 16px 20px; margin: 1.5rem 0; border-radius: 4px;">\n      <p>Este bloque destacado puede utilizarse para resaltar informaci√≥n importante que no quieres que el lector pase por alto.</p>\n    </div>\n    \n    <h2 style="font-size: 2rem; margin-top: 3.5rem; margin-bottom: 1.5rem; font-weight: 800; color: #111827; letter-spacing: -0.025em; position: relative; padding-bottom: 0.75rem; border-bottom: 3px solid rgba(245, 158, 11, 0.5);">Conclusiones</h2>\n    \n    <p>Resume los puntos principales tratados en el art√≠culo y ofrece una conclusi√≥n o reflexi√≥n final que invite al lector a la acci√≥n o a profundizar m√°s en el tema.</p>\n  ',realEstateAnalysis:'\n    <h1 class="title-main" style="font-size: 2.5rem; font-weight: 700; margin: 1.5rem 0; color: #2a3f5f; text-align: center; border-bottom: 2px solid #e0e0e0; padding-bottom: 10px;">An√°lisis del Mercado Inmobiliario en Madrid 2023</h1>\n    \n    <p>El mercado inmobiliario de Madrid ha experimentado cambios significativos durante el √∫ltimo a√±o. En este an√°lisis, examinaremos las tendencias actuales, los precios por zona, y las proyecciones para los pr√≥ximos meses.</p>\n    \n    <h2 class="title-section" style="font-size: 1.8rem; font-weight: 600; margin: 1.2rem 0; color: #3a5482; border-left: 4px solid #3a5482; padding-left: 12px;">Panorama General del Mercado</h2>\n    \n    <p>Madrid contin√∫a siendo uno de los mercados inmobiliarios m√°s activos de Espa√±a, con un volumen de transacciones que ha aumentado un 8% respecto al a√±o anterior. La demanda se mantiene s√≥lida, especialmente en viviendas con espacios exteriores y ubicaciones bien conectadas.</p>\n    \n    <div class="pro-callout pro-info" style="margin: 1.5rem 0; padding: 1.5rem; border-radius: 0.5rem; border: 1px solid #bee3f8; background-color: #ebf8ff; position: relative; overflow: hidden;">\n      <p style="margin-left: 0.5rem;"><strong>Dato clave:</strong> El precio medio por metro cuadrado en Madrid capital ha alcanzado los 3,890‚Ç¨, representando un incremento del 5.7% interanual.</p>\n    </div>\n    \n    <h2 class="title-section" style="font-size: 1.8rem; font-weight: 600; margin: 1.2rem 0; color: #3a5482; border-left: 4px solid #3a5482; padding-left: 12px;">An√°lisis por Distritos</h2>\n    \n    <p>Las diferencias de precio entre distritos siguen siendo notables, con Salamanca y Chamber√≠ liderando el ranking de las zonas m√°s exclusivas, mientras que Villaverde y Usera ofrecen opciones m√°s asequibles.</p>\n    \n    <table style="width: 100%; border-collapse: collapse; margin: 2rem 0; font-size: 0.95rem; border-radius: 0.25rem; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">\n      <thead style="background-color: #4a5568; color: white;">\n        <tr>\n          <th style="text-align: left; padding: 0.75rem 1rem;">Distrito</th>\n          <th style="text-align: left; padding: 0.75rem 1rem;">Precio medio (‚Ç¨/m¬≤)</th>\n          <th style="text-align: left; padding: 0.75rem 1rem;">Variaci√≥n anual</th>\n          <th style="text-align: left; padding: 0.75rem 1rem;">Tiempo medio de venta</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td style="padding: 0.75rem 1rem; border-bottom: 1px solid #e2e8f0;">Salamanca</td>\n          <td style="padding: 0.75rem 1rem; border-bottom: 1px solid #e2e8f0;">6,250</td>\n          <td style="padding: 0.75rem 1rem; border-bottom: 1px solid #e2e8f0;">+7.3%</td>\n          <td style="padding: 0.75rem 1rem; border-bottom: 1px solid #e2e8f0;">45 d√≠as</td>\n        </tr>\n        <tr style="background-color: #f7fafc;">\n          <td style="padding: 0.75rem 1rem; border-bottom: 1px solid #e2e8f0;">Chamber√≠</td>\n          <td style="padding: 0.75rem 1rem; border-bottom: 1px solid #e2e8f0;">5,890</td>\n          <td style="padding: 0.75rem 1rem; border-bottom: 1px solid #e2e8f0;">+6.8%</td>\n          <td style="padding: 0.75rem 1rem; border-bottom: 1px solid #e2e8f0;">52 d√≠as</td>\n        </tr>\n        <tr>\n          <td style="padding: 0.75rem 1rem; border-bottom: 1px solid #e2e8f0;">Chamart√≠n</td>\n          <td style="padding: 0.75rem 1rem; border-bottom: 1px solid #e2e8f0;">5,420</td>\n          <td style="padding: 0.75rem 1rem; border-bottom: 1px solid #e2e8f0;">+5.2%</td>\n          <td style="padding: 0.75rem 1rem; border-bottom: 1px solid #e2e8f0;">60 d√≠as</td>\n        </tr>\n        <tr style="background-color: #f7fafc;">\n          <td style="padding: 0.75rem 1rem; border-bottom: 1px solid #e2e8f0;">Villaverde</td>\n          <td style="padding: 0.75rem 1rem; border-bottom: 1px solid #e2e8f0;">2,180</td>\n          <td style="padding: 0.75rem 1rem; border-bottom: 1px solid #e2e8f0;">+3.1%</td>\n          <td style="padding: 0.75rem 1rem; border-bottom: 1px solid #e2e8f0;">95 d√≠as</td>\n        </tr>\n      </tbody>\n    </table>\n    \n    <h3 class="title-subsection" style="font-size: 1.4rem; font-weight: 600; margin: 1rem 0; color: #4a6fa5;">‚Ä¢ Zonas emergentes</h3>\n    \n    <p>Distritos como Arganzuela, Tetu√°n y algunas √°reas de Carabanchel est√°n experimentando una revitalizaci√≥n, con incrementos de precio superiores a la media debido a proyectos de renovaci√≥n urbana y mejor conectividad.</p>\n    \n    <div class="highlight-block" style="background-color: #fffde7; border-left: 3px solid #ffc107; padding: 10px 15px; margin: 10px 0;">\n      <p>El barrio de Malasa√±a en el distrito Centro sigue siendo uno de los m√°s demandados por inversores, con una rentabilidad bruta por alquiler cercana al 5.8%.</p>\n    </div>\n    \n    <h2 class="title-section" style="font-size: 1.8rem; font-weight: 600; margin: 1.2rem 0; color: #3a5482; border-left: 4px solid #3a5482; padding-left: 12px;">Perspectivas para el Pr√≥ximo A√±o</h2>\n    \n    <p>Los expertos proyectan una estabilizaci√≥n de precios en los pr√≥ximos meses, con crecimientos m√°s moderados que en a√±os anteriores. La oferta de obra nueva sigue siendo limitada, lo que mantendr√° la presi√≥n sobre los precios en ciertas zonas.</p>\n    \n    <div class="pro-callout pro-warning" style="margin: 1.5rem 0; padding: 1.5rem; border-radius: 0.5rem; border: 1px solid #feebc8; background-color: #fffaf0; position: relative; overflow: hidden;">\n      <p style="margin-left: 0.5rem;"><strong>Importante:</strong> Los cambios en la pol√≠tica de tipos de inter√©s podr√≠an afectar la capacidad de financiaci√≥n de los compradores, moderando el crecimiento de precios en los segmentos medios del mercado.</p>\n    </div>\n    \n    <h2 class="title-section" style="font-size: 1.8rem; font-weight: 600; margin: 1.2rem 0; color: #3a5482; border-left: 4px solid #3a5482; padding-left: 12px;">Conclusiones</h2>\n    \n    <p>El mercado inmobiliario madrile√±o mantiene su dinamismo, con tendencias de crecimiento sostenible. Las oportunidades m√°s interesantes se encuentran en barrios emergentes y en propiedades que ofrecen espacios flexibles adaptados a las nuevas formas de vida y trabajo.</p>\n  ',calculationGuide:'\n    <h1 class="title-main" style="font-size: 2.5rem; font-weight: 700; margin: 1.5rem 0; color: #2a3f5f; text-align: center; border-bottom: 2px solid #e0e0e0; padding-bottom: 10px;">Gu√≠a de C√°lculos Hipotecarios</h1>\n    \n    <p>Entender los c√°lculos hipotecarios es fundamental para tomar decisiones financieras informadas al comprar una vivienda. Esta gu√≠a explica las f√≥rmulas m√°s importantes y presenta ejemplos pr√°cticos.</p>\n    \n    <h2 class="title-section" style="font-size: 1.8rem; font-weight: 600; margin: 1.2rem 0; color: #3a5482; border-left: 4px solid #3a5482; padding-left: 12px;">C√°lculo de la Cuota Mensual</h2>\n    \n    <div class="formula-block" style="background-color: #f8f9fa; border-left: 3px solid #4a89dc; padding: 10px 15px; margin: 10px 0; font-family: Courier New, monospace;">\n      <p><strong>F√≥rmula de la cuota mensual:</strong></p>\n      <p>Cuota = [C √ó i √ó (1 + i)^n] / [(1 + i)^n - 1]</p>\n      <p>Donde:</p>\n      <ul>\n        <li>C = Capital prestado</li>\n        <li>i = Tipo de inter√©s mensual (inter√©s anual √∑ 12)</li>\n        <li>n = N√∫mero total de cuotas (a√±os del pr√©stamo √ó 12)</li>\n      </ul>\n    </div>\n    \n    <h3 class="title-subsection" style="font-size: 1.4rem; font-weight: 600; margin: 1rem 0; color: #4a6fa5;">‚Ä¢ Ejemplo pr√°ctico</h3>\n    \n    <p>Para un pr√©stamo de ‚Ç¨200,000 a 30 a√±os con un inter√©s anual del 3%:</p>\n    <ul>\n      <li>Capital = ‚Ç¨200,000</li>\n      <li>Inter√©s mensual = 0.03 √∑ 12 = 0.0025</li>\n      <li>Plazo = 30 a√±os √ó 12 meses = 360 meses</li>\n    </ul>\n    \n    <p>Aplicando la f√≥rmula:</p>\n    <p>Cuota = [200,000 √ó 0.0025 √ó (1 + 0.0025)^360] / [(1 + 0.0025)^360 - 1] = ‚Ç¨843.21</p>\n    \n    <div class="pro-card" style="background-color: white; border-radius: 0.5rem; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08); margin: 1.5rem 0; padding: 1.5rem; border: 1px solid #e2e8f0;">\n      <h4 style="margin-top: 0; color: #2c5282;">Tabla de Amortizaci√≥n</h4>\n      <p>La siguiente tabla muestra los primeros meses de amortizaci√≥n:</p>\n      <table style="width: 100%; border-collapse: collapse; margin: 1rem 0; font-size: 0.9rem;">\n        <thead>\n          <tr>\n            <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid #e2e8f0;">Mes</th>\n            <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid #e2e8f0;">Cuota</th>\n            <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid #e2e8f0;">Inter√©s</th>\n            <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid #e2e8f0;">Amortizaci√≥n</th>\n            <th style="padding: 0.75rem; text-align: left; border-bottom: 2px solid #e2e8f0;">Capital Pendiente</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td style="padding: 0.75rem; border-bottom: 1px solid #e2e8f0;">1</td>\n            <td style="padding: 0.75rem; border-bottom: 1px solid #e2e8f0;">‚Ç¨843.21</td>\n            <td style="padding: 0.75rem; border-bottom: 1px solid #e2e8f0;">‚Ç¨500.00</td>\n            <td style="padding: 0.75rem; border-bottom: 1px solid #e2e8f0;">‚Ç¨343.21</td>\n            <td style="padding: 0.75rem; border-bottom: 1px solid #e2e8f0;">‚Ç¨199,656.79</td>\n          </tr>\n          <tr>\n            <td style="padding: 0.75rem; border-bottom: 1px solid #e2e8f0;">2</td>\n            <td style="padding: 0.75rem; border-bottom: 1px solid #e2e8f0;">‚Ç¨843.21</td>\n            <td style="padding: 0.75rem; border-bottom: 1px solid #e2e8f0;">‚Ç¨499.14</td>\n            <td style="padding: 0.75rem; border-bottom: 1px solid #e2e8f0;">‚Ç¨344.07</td>\n            <td style="padding: 0.75rem; border-bottom: 1px solid #e2e8f0;">‚Ç¨199,312.72</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    \n    <h2 class="title-section" style="font-size: 1.8rem; font-weight: 600; margin: 1.2rem 0; color: #3a5482; border-left: 4px solid #3a5482; padding-left: 12px;">Rentabilidad de Inversiones Inmobiliarias</h2>\n    \n    <div class="formula-block" style="background-color: #f8f9fa; border-left: 3px solid #4a89dc; padding: 10px 15px; margin: 10px 0; font-family: Courier New, monospace;">\n      <p><strong>ROI (Retorno sobre la Inversi√≥n):</strong></p>\n      <p>ROI = (Beneficio Neto Anual √∑ Inversi√≥n Total) √ó 100</p>\n      <p>Donde:</p>\n      <ul>\n        <li>Beneficio Neto Anual = Ingresos por alquiler anuales - Gastos anuales</li>\n        <li>Inversi√≥n Total = Precio de compra + Costes de adquisici√≥n + Reformas</li>\n      </ul>\n    </div>\n    \n    <div class="pro-callout pro-warning" style="margin: 1.5rem 0; padding: 1.5rem; border-radius: 0.5rem; border: 1px solid #feebc8; background-color: #fffaf0; position: relative; overflow: hidden;">\n      <p style="margin-left: 0.5rem;"><strong>Importante:</strong> No olvide incluir en los gastos los impuestos, seguros, mantenimiento y posibles per√≠odos sin alquilar.</p>\n    </div>\n  '};function Bh(e,t){localStorage.setItem(e,JSON.stringify(t))}function qh(e,t){const r=localStorage.getItem(e);if(!r)return t;try{const n=JSON.parse(r);return Array.isArray(t)&&!Array.isArray(n)?(console.warn(`Se esperaba un array para ${e}, pero se recibi√≥:`,n),t):n}catch(n){return console.error(`Error al parsear ${e} desde localStorage:`,n),t}}function Fh(){const e=d(),t=u();W();const o=n.useRef(null),i=n.useRef(null),[a,s]=n.useState(!1),[l,c]=n.useState(null),[p,f]=n.useState((()=>qh("blog_currentStep",1))),[m,h]=n.useState({title:"",subtitle:"",content:"",description:"",category:"Inmobiliaria",tags:[],url:"",image:{src:"",alt:""},images:[],readTime:"5",button:{title:"",variant:"primary",size:"medium",iconRight:""}}),[g,b]=n.useState(null),[y,v]=n.useState(!1),[x,w]=n.useState(!1),[E,j]=n.useState((()=>qh("blog_previewImage",""))),[_,k]=n.useState((()=>qh("blog_previewImages",[])));n.useState(""),n.useEffect((()=>{const e=new URLSearchParams(t.search).get("edit");console.log("Par√°metros de URL detectados:",t.search),console.log("ID de blog a editar:",e),e?(s(!0),c(e),T(e)):(f(1),h((e=>({...e,title:e.title||"",description:e.description||"",content:e.content||"",category:e.category||"Inmobiliaria"}))))}),[t.search]);const T=async e=>{try{const t=await P(e);if(!t)throw new Error("No se pudo obtener la informaci√≥n del blog");let r=[];if(t.image&&"object"==typeof t.image&&t.image.src?r.push(t.image):t.image&&"string"==typeof t.image&&r.push({src:t.image,alt:"Imagen principal"}),t.images&&Array.isArray(t.images)){const e=t.images.map((e=>"string"==typeof e?{src:e,alt:"Imagen del blog"}:"object"==typeof e&&e.src?e:null)).filter((e=>null!==e));r=[...r,...e]}h({title:t.title||"",subtitle:t.subtitle||"",content:t.content||"",description:t.description||"",category:t.category||"Inmobiliaria",tags:t.tags||[],url:t.url||"",image:t.image&&"object"==typeof t.image?t.image:{src:"",alt:""},images:r||[],readTime:t.readTime||"5",button:t.button||{title:"",variant:"primary",size:"medium",iconRight:""}}),r.length>0&&j(r[0].src),ie.success("Datos del blog cargados correctamente")}catch(t){console.error("Error al cargar los datos del blog:",t),ie.error("Error al cargar los datos del blog")}};n.useEffect((()=>{Bh("blog_currentStep",p)}),[p]),n.useEffect((()=>{Bh("blog_formData",m)}),[m]),n.useEffect((()=>{Bh("blog_previewImage",E)}),[E]),n.useEffect((()=>{Bh("blog_previewImages",_)}),[_]),n.useEffect((()=>{if(3===p){console.log("Paso 3 activo - Verificando sincronizaci√≥n de imagen"),m.image&&!E?(console.log("Sincronizando previsualizaci√≥n con la imagen del formulario:",m.image),j(m.image)):m.image||!E||E.startsWith("blob:")||(console.log("Sincronizando formData con la previsualizaci√≥n:",E),h({...m,image:E}),localStorage.setItem("blog_formData",JSON.stringify({...m,image:E})));const e=localStorage.getItem("blog_previewImage"),t=JSON.parse(localStorage.getItem("blog_formData")||"{}");!E&&e&&(console.log("Recuperando previsualizaci√≥n desde localStorage"),j(e)),!m.image&&t.image&&(console.log("Recuperando imagen desde localStorage"),h((e=>({...e,image:t.image}))))}}),[p,m.image,E]),n.useEffect((()=>()=>{}),[]),n.useEffect((()=>{const e=document.createElement("style");return e.innerHTML="\n  /* Variables de colores */\n  :root {\n    --color-amarillo: #f59e0b;\n  }\n  \n  /* Editor b√°sico */\n  .ql-editor {\n    font-family: 'Inter', system-ui, sans-serif;\n    color: #374151;\n    line-height: 1.8;\n    font-size: 16px;\n    min-height: 300px;\n    padding: 16px;\n  }\n  \n  /* Estilos para p√°rrafos */\n  .ql-editor p {\n    margin-bottom: 1.75rem;\n    letter-spacing: -0.01em;\n    position: relative;\n  }\n  \n  /* Para simular el efecto de primera letra, a√±adiremos una clase especial */\n  .ql-editor .first-paragraph::first-letter {\n    float: left;\n    font-size: 5rem;\n    line-height: 0.65;\n    padding: 0.1em 0.1em 0 0;\n    color: #f59e0b;\n    font-weight: 800;\n  }\n  \n  /* T√≠tulos con dise√±o m√°s atractivo */\n  .ql-editor h2 {\n    font-size: 2rem;\n    margin-top: 3.5rem;\n    margin-bottom: 1.5rem;\n    font-weight: 800;\n    color: #111827;\n    letter-spacing: -0.025em;\n    padding-bottom: 0.75rem;\n    border-bottom: 3px solid rgba(245, 158, 11, 0.5);\n  }\n  \n  .ql-editor h3 {\n    font-size: 1.5rem;\n    margin-top: 2.5rem;\n    margin-bottom: 1.25rem;\n    font-weight: 700;\n    color: #1f2937;\n    background: rgba(245, 158, 11, 0.1);\n    padding: 0.25rem 0.75rem;\n    border-radius: 4px;\n    display: inline-block;\n  }\n  \n  /* Citas destacadas */\n  .ql-editor blockquote {\n    margin: 3rem 0;\n    padding: 2rem;\n    background-color: rgba(245, 158, 11, 0.05);\n    border-radius: 1rem;\n    position: relative;\n    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05);\n    border-left: none;\n  }\n  \n  .ql-editor blockquote p {\n    font-size: 1.25rem;\n    line-height: 1.6;\n    color: #4b5563;\n    font-weight: 500;\n    position: relative;\n    margin-bottom: 0;\n  }\n  \n  /* Listas con dise√±o mejorado */\n  .ql-editor ul, .ql-editor ol {\n    margin-left: 2rem;\n    margin-bottom: 2rem;\n  }\n  \n  .ql-editor li {\n    margin-bottom: 1rem;\n    padding-left: 0.5rem;\n  }\n  \n  /* Enlaces con estilo */\n  .ql-editor a {\n    color: #f59e0b;\n    text-decoration: none;\n    font-weight: 500;\n    padding: 0 0.15rem;\n    background-color: rgba(245, 158, 11, 0.1);\n    border-radius: 3px;\n  }\n  \n  /* Bloques especiales */\n  .ql-editor .formula-block,\n  .formula-block {\n    background-color: #f8f9fa;\n    border-left: 3px solid #4a89dc;\n    padding: 16px 20px;\n    margin: 1.5rem 0;\n    font-family: 'Courier New', monospace;\n    border-radius: 4px;\n    color: #2c5282;\n  }\n  \n  .ql-editor .highlight-block,\n  .highlight-block {\n    background-color: #fffde7;\n    border-left: 3px solid #f59e0b;\n    padding: 16px 20px;\n    margin: 1.5rem 0;\n    border-radius: 4px;\n  }\n  \n  .ql-editor .note-block,\n  .note-block {\n    background-color: #e8f5e9;\n    border-left: 3px solid #4caf50;\n    padding: 16px 20px;\n    margin: 1.5rem 0;\n    font-style: italic;\n    border-radius: 4px;\n  }\n  \n  /* T√≠tulos especiales */\n  .ql-editor .title-main,\n  .title-main {\n    font-size: 2.5rem !important;\n    font-weight: 700 !important;\n    margin: 1.5rem 0 !important;\n    color: #111827 !important;\n    text-align: center !important;\n    border-bottom: 2px solid #f59e0b !important;\n    padding-bottom: 10px !important;\n  }\n  \n  .ql-editor .title-section,\n  .title-section {\n    font-size: 1.8rem !important;\n    font-weight: 600 !important;\n    margin: 1.2rem 0 !important;\n    color: #1f2937 !important;\n    border-left: 4px solid #f59e0b !important;\n    padding-left: 12px !important;\n  }\n  \n  .ql-editor .title-subsection,\n  .title-subsection {\n    font-size: 1.4rem !important;\n    font-weight: 600 !important;\n    margin: 1rem 0 !important;\n    color: #4a6fa5 !important;\n    display: flex !important;\n    align-items: center !important;\n  }\n  \n  /* Separator personalizado expl√≠cito */\n  .separator-decorative {\n    border: 0; \n    height: 6px; \n    margin: 4rem auto; \n    width: 50%; \n    background-image: radial-gradient(circle, #f59e0b 0%, transparent 60%), radial-gradient(circle, #f59e0b 0%, transparent 60%); \n    background-size: 15px 15px; \n    background-position: top center; \n    opacity: 0.5;\n  }\n",document.head.appendChild(e),()=>{document.head.removeChild(e)}}),[]);const I=e=>{const{name:t,value:r}=e.target;console.log(`Campo ${t} actualizado:`,r),h((e=>({...e,[t]:r})))};function C(){const e=p+1;console.log("Avanzando al paso:",e),f(e)}function A(){const e=p-1;console.log("Retrocediendo al paso:",e),f(e)}const D=async t=>{t.preventDefault(),v(!0),b(null);try{if(!m.title||!m.content)throw new Error("Por favor, completa todos los campos requeridos");let t;m.image.src||m.images&&0!==m.images.length||(m.image={src:"https://via.placeholder.com/800x400?text=Blog+GozaMadrid",alt:m.title}),console.log((a?"Actualizando":"Creando")+" blog:",m),a&&l?(t=await O(l,m),ie.success("¬°Blog actualizado exitosamente!")):(t=await S(m),ie.success("¬°Blog creado exitosamente!")),console.log("Respuesta del servidor:",t),localStorage.removeItem("blog_currentStep"),localStorage.removeItem("blog_formData"),localStorage.removeItem("blog_previewImage"),e("/ver-blogs")}catch(r){console.error(`Error al ${a?"actualizar":"crear"} el blog:`,r),b(`Error al ${a?"actualizar":"crear"} el blog: ${r.message}`),ie.error(`Error al ${a?"actualizar":"crear"} el blog: ${r.message}`)}finally{v(!1)}},L=e=>{console.log("Contenido del editor actualizado:",e),h((t=>({...t,content:e})))};function R(e){let t="";switch(e){case"formula":t='\n          <div class="formula-block" style="background-color: #f8f9fa; border-left: 3px solid #4a89dc; padding: 16px 20px; margin: 1.5rem 0; font-family: \'Courier New\', monospace; border-radius: 4px; color: #2c5282;">\n            <p><strong>F√≥rmula o c√°lculo:</strong></p>\n            <p>Ejemplo: Precio total = Precio base √ó (1 + IVA)</p>\n            <p>Variables:</p>\n            <ul>\n              <li>Precio base = precio sin impuestos</li>\n              <li>IVA = 0.21 (21%)</li>\n            </ul>\n          </div>\n        ';break;case"highlight":t='\n          <div class="highlight-block" style="background-color: #fffde7; border-left: 3px solid #f59e0b; padding: 16px 20px; margin: 1.5rem 0; border-radius: 4px;">\n            <p style="font-weight: 500; color: #1f2937; font-size: 1.1rem;">Informaci√≥n destacada</p>\n            <p>Este bloque es ideal para enfatizar datos importantes, estad√≠sticas o conclusiones clave que quieres que el lector recuerde.</p>\n          </div>\n        ';break;case"note":t='\n          <div class="note-block" style="background-color: #e8f5e9; border-left: 3px solid #4caf50; padding: 16px 20px; margin: 1.5rem 0; border-radius: 4px; font-style: italic;">\n            <p><strong>Nota:</strong> Informaci√≥n adicional o advertencia relevante para el lector.</p>\n          </div>\n        ';break;case"title-main":t='\n          <h1 class="title-main" style="font-size: 2.5rem; font-weight: 800; margin: 2rem 0 1.5rem; color: #111827; text-align: center; border-bottom: 2px solid #f59e0b; padding-bottom: 12px; letter-spacing: -0.025em; line-height: 1.2;">T√≠tulo Principal</h1>\n        ';break;case"title-section":t='\n          <h2 style="font-size: 2rem; margin-top: 3.5rem; margin-bottom: 1.5rem; font-weight: 800; color: #111827; letter-spacing: -0.025em; position: relative; padding-bottom: 0.75rem; width: fit-content; border-bottom: 3px solid rgba(245, 158, 11, 0.5);">T√≠tulo de Secci√≥n</h2>\n        ';break;case"title-subsection":t='\n          <h3 style="font-size: 1.5rem; margin-top: 2.5rem; margin-bottom: 1.25rem; font-weight: 700; color: #1f2937; background: rgba(245, 158, 11, 0.1); padding: 0.25rem 0.75rem; border-radius: 4px; display: inline-block;">Subt√≠tulo</h3>\n        ';break;case"separator":t='<hr class="separator-decorative" style="border: 0; height: 6px; margin: 4rem auto; width: 50%; background-image: radial-gradient(circle, #f59e0b 0%, transparent 60%), radial-gradient(circle, #f59e0b 0%, transparent 60%); background-size: 15px 15px; background-position: top center; opacity: 0.5;">';break;case"emphasis-paragraph":t='<p style="margin-left: 2rem; padding-left: 1.5rem; border-left: 3px solid #f59e0b; font-style: italic; margin-bottom: 1.75rem;">P√°rrafo con √©nfasis especial que destaca informaci√≥n importante dentro del art√≠culo.</p>';break;case"first-paragraph":t='<p class="first-paragraph" style="margin-bottom: 1.75rem; letter-spacing: -0.01em; position: relative; font-size: 1.1rem; color: #1f2937;">Este p√°rrafo tendr√° la primera letra destacada. Es ideal para comenzar tu art√≠culo con un impacto visual que atraiga la atenci√≥n del lector desde el primer momento.</p>';break;case"quote":t='\n          <blockquote style="margin: 3rem 0; padding: 2rem; background-color: rgba(245, 158, 11, 0.05); border-radius: 1rem; position: relative; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05); border-left: none;">\n            <p style="font-size: 1.25rem; line-height: 1.6; color: #4b5563; font-weight: 500; position: relative; z-index: 1; margin-bottom: 0.5rem;">"Una cita inspiradora o relevante para tu art√≠culo."</p>\n            <p style="text-align: right; font-style: italic; color: #6b7280;">‚Äî Autor de la cita</p>\n          </blockquote>\n        ';break;case"pro-table":t='\n          <div style="margin: 2rem 0; overflow-x: auto;">\n            <table style="width: 100%; border-collapse: collapse; margin: 2rem 0; font-size: 0.95rem; border-radius: 0.25rem; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">\n              <thead style="background-color: #4a5568; color: white;">\n                <tr>\n                  <th style="text-align: left; padding: 0.75rem 1rem; font-weight: 600;">Encabezado 1</th>\n                  <th style="text-align: left; padding: 0.75rem 1rem; font-weight: 600;">Encabezado 2</th>\n                  <th style="text-align: left; padding: 0.75rem 1rem; font-weight: 600;">Encabezado 3</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr>\n                  <td style="padding: 0.75rem 1rem; border-bottom: 1px solid #e2e8f0;">Celda 1</td>\n                  <td style="padding: 0.75rem 1rem; border-bottom: 1px solid #e2e8f0;">Celda 2</td>\n                  <td style="padding: 0.75rem 1rem; border-bottom: 1px solid #e2e8f0;">Celda 3</td>\n                </tr>\n                <tr style="background-color: #f7fafc;">\n                  <td style="padding: 0.75rem 1rem; border-bottom: 1px solid #e2e8f0;">Celda 4</td>\n                  <td style="padding: 0.75rem 1rem; border-bottom: 1px solid #e2e8f0;">Celda 5</td>\n                  <td style="padding: 0.75rem 1rem; border-bottom: 1px solid #e2e8f0;">Celda 6</td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        ';break;default:return}h({...m,content:m.content+t})}function M(e){m.content&&""!==m.content.trim()&&!confirm("¬øEst√°s seguro de que quieres reemplazar el contenido actual?")||(h({...m,content:Mh[e]||""}),ie.success("Plantilla cargada correctamente"))}const B=async e=>{var t;if(!e.target.files||0===e.target.files.length)return void ie.info("No se seleccionaron archivos.");w(!0),b(null);const r=Array.from(e.target.files),n=[];let o;console.log("Obteniendo firma de Cloudinary UNA VEZ para todo el lote...");try{if(o=await N(),!o||!o.success){const e=(null==o?void 0:o.message)||"No se pudo obtener la firma para la subida";throw new Error(e)}console.log("Firma obtenida con √©xito para el lote.")}catch(a){return console.error("Error al obtener firma de Cloudinary:",a),ie.error(`Error al configurar subida: ${a.message}`),void w(!1)}for(const i of r)if(i.size>5242880)ie.warning(`El archivo ${i.name} excede 5MB y ser√° omitido.`);else if(i.type.startsWith("image/"))try{const e=new FormData;e.append("file",i),e.append("signature",o.signature),e.append("timestamp",o.timestamp),e.append("api_key",o.apiKey),e.append("folder",o.folder),console.log(`Subiendo a Cloudinary (signed): ${i.name}`);const r=`https://api.cloudinary.com/v1_1/${o.cloudName}/image/upload`,a=await fetch(r,{method:"POST",body:e}),s=await a.json();if(!a.ok||s.error)throw new Error((null==(t=s.error)?void 0:t.message)||`Error al subir ${i.name}`);n.push({src:s.secure_url,alt:i.name,publicId:s.public_id}),ie.success(`${i.name} subido correctamente.`)}catch(s){console.error(`Error procesando ${i.name}:`,s),ie.error(`Error al subir ${i.name}: ${s.message}`);continue}else ie.warning(`El archivo ${i.name} no es una imagen v√°lida y ser√° omitido.`);n.length>0&&setTimeout((()=>{h((e=>({...e,images:[...e.images||[],...n]}))),k((e=>[...e,...n.map((e=>e.src))]))}),0),w(!1),i.current&&(i.current.value="")},q=(e,t="")=>"string"==typeof e?{src:e,alt:t||"Imagen del blog"}:"object"==typeof e&&null!==e&&"string"==typeof e.src?{src:e.src,alt:e.alt||t||"Imagen del blog"}:null,F=e=>{try{h((t=>{const r=Array.isArray(t.images)?t.images:[];if(!r[e])throw new Error("Imagen no encontrada");const n=q(r[e],t.title);if(!n)throw new Error("Formato de imagen inv√°lido");return{...t,image:n,images:r.map((e=>q(e,t.title))).filter((e=>null!==e))}}));const t=JSON.parse(localStorage.getItem("blog_formData")||"{}");if(t.images&&t.images[e]){const r=q(t.images[e],t.title);localStorage.setItem("blog_formData",JSON.stringify({...t,image:r}))}ie.success("Imagen principal actualizada")}catch(t){console.error("Error al establecer la imagen principal:",t),ie.error("Error al establecer la imagen principal")}},z=e=>{var t,r;try{h((t=>{var r,n;const o=Array.isArray(t.images)?[...t.images]:[];if(o.length<=1)throw new Error("No se puede eliminar la √∫nica imagen disponible");const i=(null==(r=t.image)?void 0:r.src)===(null==(n=o[e])?void 0:n.src);return o.splice(e,1),{...t,images:o.map((e=>q(e,t.title))).filter((e=>null!==e)),image:i?q(o[0],t.title):t.image}}));const n=JSON.parse(localStorage.getItem("blog_formData")||"{}");if(Array.isArray(n.images)){const o=[...n.images],i=(null==(t=n.image)?void 0:t.src)===(null==(r=o[e])?void 0:r.src);o.splice(e,1),localStorage.setItem("blog_formData",JSON.stringify({...n,images:o.map((e=>q(e,n.title))).filter((e=>null!==e)),image:i?q(o[0],n.title):n.image}))}ie.success("Imagen eliminada")}catch(n){console.error("Error al eliminar la imagen:",n),ie.error(n.message||"Error al eliminar la imagen")}},U=e=>{if(e.preventDefault(),e.stopPropagation(),x)return;const t=Array.from(e.dataTransfer.files);t.length&&B({target:{files:t}})};return r.jsxs("div",{className:"bg-gray-100 min-h-screen",children:[r.jsx("div",{className:"bg-indigo-600 text-white py-6 px-6 md:px-12",children:r.jsxs("div",{className:"container mx-auto",children:[r.jsx("h1",{className:"text-3xl font-bold",children:a?"Editar Blog":"Crear Nuevo Blog"}),r.jsx("p",{className:"mt-2 text-indigo-200",children:"Comparte informaci√≥n valiosa con tus lectores"})]})}),r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 md:p-8",children:[r.jsx("div",{className:"mb-8 flex justify-between border-b pb-4",children:r.jsxs("div",{className:"flex space-x-4",children:[r.jsx("span",{className:1===p?"font-bold text-blue-600":"text-gray-500",children:"1. Informaci√≥n"}),r.jsx("span",{className:2===p?"font-bold text-blue-600":"text-gray-500",children:"2. Contenido"}),r.jsx("span",{className:3===p?"font-bold text-blue-600":"text-gray-500",children:"3. Im√°genes"}),r.jsx("span",{className:4===p?"font-bold text-blue-600":"text-gray-500",children:"4. Publicar"})]})}),r.jsxs("form",{onSubmit:D,className:"max-w-4xl mx-auto",children:[g&&r.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 p-4 text-red-700",children:r.jsx("p",{children:g})}),function(){switch(console.log("Renderizando paso:",p),m.title,m.description,m.content,m.category,Array.isArray(m.tags)&&m.tags,m.image,Array.isArray(m.images)&&m.images,m.readTime,p){case 1:return r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-6",children:"Informaci√≥n b√°sica"}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"T√≠tulo"}),r.jsx("input",{type:"text",name:"title",value:m.title,onChange:I,className:"w-full border-2 border-blue-200 p-3 rounded-lg focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition",placeholder:"Ej: Gu√≠a completa sobre hipotecas en Madrid"})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"Descripci√≥n"}),r.jsx("textarea",{name:"description",value:m.description,onChange:I,className:"w-full border-2 border-blue-200 p-3 rounded-lg focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition",rows:"3",placeholder:"Breve descripci√≥n del contenido del blog..."})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"Categor√≠a"}),r.jsxs("select",{name:"category",value:m.category,onChange:I,className:"w-full border-2 border-blue-200 p-3 rounded-lg focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition",children:[r.jsx("option",{value:"Inmobiliaria",children:"Inmobiliaria"}),r.jsx("option",{value:"Finanzas",children:"Finanzas"}),r.jsx("option",{value:"Legal",children:"Legal"}),r.jsx("option",{value:"Consejos",children:"Consejos y tips"}),r.jsx("option",{value:"Mercado",children:"An√°lisis de mercado"}),r.jsx("option",{value:"Inversi√≥n",children:"Inversi√≥n"})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{type:"button",onClick:C,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-blue-700 transition",children:"Siguiente"})})]});case 2:return r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-800 mb-6",children:"Contenido del blog"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"Plantillas profesionales"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[r.jsxs("button",{type:"button",onClick:()=>M("standardArticle"),className:"bg-white border-2 border-blue-200 hover:border-blue-500 p-3 rounded-lg text-left transition",children:[r.jsx("div",{className:"font-medium text-blue-800",children:"Art√≠culo est√°ndar"}),r.jsx("div",{className:"text-xs text-gray-500",children:"Estructura b√°sica con introducci√≥n, desarrollo y conclusi√≥n"})]}),r.jsxs("button",{type:"button",onClick:()=>M("realEstateAnalysis"),className:"bg-white border-2 border-blue-200 hover:border-blue-500 p-3 rounded-lg text-left transition",children:[r.jsx("div",{className:"font-medium text-blue-800",children:"An√°lisis inmobiliario"}),r.jsx("div",{className:"text-xs text-gray-500",children:"Incluye tablas comparativas y an√°lisis de zonas"})]}),r.jsxs("button",{type:"button",onClick:()=>M("calculationGuide"),className:"bg-white border-2 border-blue-200 hover:border-blue-500 p-3 rounded-lg text-left transition",children:[r.jsx("div",{className:"font-medium text-blue-800",children:"Gu√≠a de c√°lculos"}),r.jsx("div",{className:"text-xs text-gray-500",children:"Formato ideal para explicar f√≥rmulas y ejemplos"})]})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-gray-700 font-semibold mb-2",children:"Contenido"}),r.jsxs("div",{className:"border border-gray-300 rounded-lg overflow-hidden quill-container bg-white",children:[r.jsx(ch,{ref:o,value:m.content||"",onChange:L,modules:Lh,formats:Rh,className:"min-h-[400px]",preserveWhitespace:!0,theme:"snow",placeholder:"Escribe el contenido del blog aqu√≠...",bounds:".quill-container"}),r.jsx("div",{className:"p-3 bg-gray-50 border-t border-gray-200",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("h3",{className:"text-sm text-gray-600 font-medium mb-1 flex items-center",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),"T√≠tulos"]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("button",{type:"button",onClick:()=>R("title-main"),className:"text-sm px-3 py-2 rounded hover:bg-indigo-50 border border-indigo-100 flex items-center gap-1 text-left",children:r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{className:"font-bold text-lg text-indigo-800 block",children:"T√≠tulo Principal"}),r.jsx("span",{className:"text-xs text-gray-500",children:"T√≠tulo grande centrado"})]})}),r.jsx("button",{type:"button",onClick:()=>R("title-section"),className:"text-sm px-3 py-2 rounded hover:bg-indigo-50 border border-indigo-100 flex items-center gap-1 text-left",children:r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{className:"font-bold text-base text-indigo-800 block",style:{borderBottom:"2px solid #f59e0b"},children:"T√≠tulo de Secci√≥n"}),r.jsx("span",{className:"text-xs text-gray-500",children:"T√≠tulo con subrayado"})]})}),r.jsx("button",{type:"button",onClick:()=>R("title-subsection"),className:"text-sm px-3 py-2 rounded hover:bg-indigo-50 border border-indigo-100 flex items-center gap-1 text-left",children:r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{className:"font-bold text-indigo-800 inline-block px-2 py-1",style:{backgroundColor:"rgba(79, 70, 229, 0.1)",borderRadius:"4px"},children:"Subt√≠tulo"}),r.jsx("span",{className:"text-xs text-gray-500 block mt-1",children:"Subt√≠tulo con fondo"})]})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("h3",{className:"text-sm text-gray-600 font-medium mb-1 flex items-center",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M5 3a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2V5a2 2 0 00-2-2H5zm0 2h10v7h-2l-1 2H8l-1-2H5V5z",clipRule:"evenodd"})}),"Bloques especiales"]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("button",{type:"button",onClick:()=>R("formula"),className:"text-sm px-3 py-2 rounded hover:bg-blue-50 border border-blue-100 flex items-center gap-1 text-left",children:r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{className:"font-bold text-blue-800 block",children:"Bloque de c√°lculo"}),r.jsx("span",{className:"text-xs text-gray-500 block",style:{fontFamily:"monospace",backgroundColor:"#f8f9fa",padding:"2px 6px",borderLeft:"2px solid #4a89dc"},children:"F√≥rmulas y c√°lculos"})]})}),r.jsx("button",{type:"button",onClick:()=>R("highlight"),className:"text-sm px-3 py-2 rounded hover:bg-yellow-50 border border-yellow-100 flex items-center gap-1 text-left",children:r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{className:"font-bold text-yellow-800 block",children:"Bloque destacado"}),r.jsx("span",{className:"text-xs text-gray-500 block",style:{backgroundColor:"#fffde7",padding:"2px 6px",borderLeft:"2px solid #f59e0b"},children:"Informaci√≥n importante"})]})}),r.jsx("button",{type:"button",onClick:()=>R("note"),className:"text-sm px-3 py-2 rounded hover:bg-green-50 border border-green-100 flex items-center gap-1 text-left",children:r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{className:"font-bold text-green-800 block",children:"Bloque de nota"}),r.jsx("span",{className:"text-xs text-gray-500 block",style:{backgroundColor:"#e8f5e9",padding:"2px 6px",borderLeft:"2px solid #4caf50",fontStyle:"italic"},children:"Nota aclaratoria"})]})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("h3",{className:"text-sm text-gray-600 font-medium mb-1 flex items-center",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Elementos adicionales"]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("button",{type:"button",onClick:()=>R("quote"),className:"text-sm px-3 py-2 rounded hover:bg-purple-50 border border-purple-100 flex items-center gap-1 text-left",children:r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{className:"font-bold text-purple-800 block",children:"Cita o testimonio"}),r.jsx("span",{className:"text-xs text-gray-500 block",style:{backgroundColor:"rgba(245, 158, 11, 0.05)",padding:"6px",borderRadius:"0.5rem",fontStyle:"italic"},children:'"Texto destacado entre comillas"'})]})}),r.jsx("button",{type:"button",onClick:()=>R("emphasis-paragraph"),className:"text-sm px-3 py-2 rounded hover:bg-orange-50 border border-orange-100 flex items-center gap-1 text-left",children:r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{className:"font-bold text-orange-800 block",children:"P√°rrafo enfatizado"}),r.jsx("span",{className:"text-xs text-gray-500 block",style:{borderLeft:"2px solid #f59e0b",paddingLeft:"8px",fontStyle:"italic"},children:"P√°rrafo con estilo especial"})]})}),r.jsx("button",{type:"button",onClick:()=>R("separator"),className:"text-sm px-3 py-2 rounded hover:bg-orange-50 border border-orange-100 flex items-center gap-1 text-left",children:r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{className:"font-bold text-orange-800 block",children:"Separador decorativo"}),r.jsx("div",{className:"my-1",style:{height:"4px",width:"100%",backgroundImage:"radial-gradient(circle, #f59e0b 0%, transparent 60%), radial-gradient(circle, #f59e0b 0%, transparent 60%)",backgroundSize:"15px 15px"}}),r.jsx("span",{className:"text-xs text-gray-500",children:"L√≠nea decorativa"})]})})]})]})]})})]}),r.jsxs("div",{className:"mt-8 border rounded-lg p-4 bg-white shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-3 flex items-center",children:[r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-blue-600",viewBox:"0 0 20 20",fill:"currentColor",children:[r.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),r.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),"Vista previa del contenido"]}),r.jsx("div",{className:"ql-editor preview-container p-4 border rounded bg-gray-50",dangerouslySetInnerHTML:{__html:m.content}})]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("button",{type:"button",onClick:A,className:"bg-gray-200 text-gray-800 px-6 py-3 rounded-lg font-bold hover:bg-gray-300 transition",children:"Anterior"}),r.jsx("button",{type:"button",onClick:C,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-blue-700 transition",children:"Siguiente"})]})]});case 3:return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[r.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Im√°genes del Blog"}),r.jsxs("div",{className:"mb-6 border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-500 transition-colors",onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:U,children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subir Im√°genes"}),r.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:B,ref:i,className:"hidden",disabled:x}),r.jsx("button",{type:"button",onClick:()=>{var e;return null==(e=i.current)?void 0:e.click()},className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-center bg-white hover:bg-gray-50 transition-colors",disabled:x,children:x?r.jsxs("span",{className:"flex items-center justify-center",children:[r.jsxs("svg",{className:"animate-spin h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Subiendo..."]}):r.jsxs("span",{className:"flex items-center justify-center",children:[r.jsx(Ih,{className:"mr-2"}),"Seleccionar Im√°genes"]})}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"o arrastra y suelta los archivos aqu√≠"})," "]}),m.images&&m.images.length>0&&r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mt-4",children:m.images.map(((e,t)=>{var n;return r.jsxs("div",{className:"relative group",children:[r.jsx("img",{src:e.src,alt:e.alt||"Imagen del blog",className:"w-full h-40 object-cover rounded-lg"}),r.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center space-x-2",children:[r.jsx("button",{type:"button",onClick:()=>F(t),className:"p-2 bg-blue-500 text-white rounded-full hover:bg-blue-600",title:"Establecer como imagen principal",children:r.jsx(wh,{size:16})}),r.jsx("button",{type:"button",onClick:()=>z(t),className:"p-2 bg-red-500 text-white rounded-full hover:bg-red-600",title:"Eliminar imagen",children:r.jsx(Dh,{size:16})})]}),(null==(n=m.image)?void 0:n.src)===e.src&&r.jsx("div",{className:"absolute top-2 left-2 bg-blue-500 text-white px-2 py-1 rounded-md text-xs",children:"Principal"})]},t)}))})]}),r.jsxs("div",{className:"flex justify-between mt-6",children:[r.jsx("button",{type:"button",onClick:A,className:"px-6 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Anterior"}),r.jsx("button",{type:"submit",onClick:D,className:"px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors duration-200 ease-in-out flex items-center justify-center",disabled:x,children:y?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Publicando..."]}):"Publicar Blog"})]})]});default:return null}}()]})]})})]})}function zh(){var e,t,o,i,a,s;const{id:l}=m(),[c,u]=n.useState(null);n.useState(!1);const[f,h]=n.useState({}),[g,b]=n.useState(!1);n.useState([]),n.useState([]),n.useState(!1),n.useState(null);const[y,v]=n.useState(!0),[x,w]=n.useState(0);n.useState(""),n.useState(!1),W();const E=d();n.useEffect((()=>{(async()=>{try{const e=await P(l);console.log("Datos del blog recibidos:",e);let t=[];if(e.image&&"object"==typeof e.image&&e.image.src&&(t.push(e.image),console.log("Imagen principal a√±adida:",e.image)),e.images&&Array.isArray(e.images)&&e.images.length>0){console.log("Im√°genes adicionales encontradas en data.images:",e.images);const r=e.images.map((e=>"string"==typeof e?{src:e,alt:"Imagen del blog"}:"object"==typeof e&&e.src?e:{src:e,alt:"Imagen del blog"}));console.log("Im√°genes adicionales procesadas:",r),t=[...t,...r]}const r={...e,images:t};console.log("Blog formateado con todas las im√°genes:",r),console.log("N√∫mero total de im√°genes:",t.length),u(r),h(r)}catch(e){console.error("Error al obtener el blog:",e),ie.error("Error al cargar el blog")}finally{v(!1)}})()}),[l]);if(y)return r.jsx("div",{className:"min-h-screen bg-gradient-to-tr from-blue-900 to-black/60 flex justify-center items-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white"})});if(!c)return r.jsxs("div",{className:"min-h-screen bg-gradient-to-tr from-blue-900 to-black/60 flex flex-col justify-center items-center text-white px-4",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Blog no encontrado"}),r.jsx("p",{className:"mb-6",children:"El blog que buscas no existe o ha sido eliminado."}),r.jsx(p,{to:"/ver-blogs",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Volver a blogs"})]});return c&&c.images?c.images:!(c&&c.image&&c.image.src)||c.image.src,r.jsxs("div",{className:"min-h-screen bg-gradient-to-tr from-blue-900 to-black/60 py-6 sm:py-10 px-4 sm:px-6",children:[r.jsxs("div",{className:"container mx-auto",children:[r.jsx("div",{className:"mb-6",children:r.jsxs(p,{to:"/ver-blogs",className:"text-white hover:text-yellow-300 transition flex items-center text-sm sm:text-base",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Volver a blogs"]})}),r.jsxs("div",{className:"bg-white rounded-lg shadow-xl overflow-hidden",children:[r.jsx("div",{className:"relative",children:r.jsx("div",{className:"h-48 sm:h-64 md:h-80 bg-gray-200 relative",children:c.images&&c.images.length>0?r.jsxs(r.Fragment,{children:[r.jsx("img",{src:(null==(e=c.images[x])?void 0:e.src)||"",alt:(null==(t=c.images[x])?void 0:t.alt)||"Imagen del blog",className:"w-full h-full object-cover",onError:e=>{e.target.src="https://via.placeholder.com/800x400?text=Imagen+no+disponible"}}),c.images.length>1&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>{c&&c.images&&Array.isArray(c.images)&&c.images.length>0&&w((e=>0===e?c.images.length-1:e-1))},className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition","aria-label":"Imagen anterior",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsx("button",{onClick:()=>{c&&c.images&&Array.isArray(c.images)&&c.images.length>0&&w((e=>e===c.images.length-1?0:e+1))},className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition","aria-label":"Imagen siguiente",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),r.jsx("div",{className:"absolute bottom-2 left-0 right-0 flex justify-center space-x-2",children:c.images.map(((e,t)=>r.jsx("button",{className:"w-2 h-2 rounded-full "+(x===t?"bg-white":"bg-white/50"),onClick:()=>w(t),"aria-label":`Ver imagen ${t+1}`},t)))})]})]}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx("span",{className:"text-gray-400",children:"Sin im√°genes disponibles"})})})}),r.jsxs("div",{className:"p-4 sm:p-6 md:p-8",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-xs sm:text-sm text-gray-600 mb-4",children:[r.jsxs("span",{className:"flex items-center",children:[r.jsx(bh,{className:"mr-1"}),new Date(c.createdAt).toLocaleDateString("es-ES")]}),c.readTime&&r.jsxs("span",{className:"flex items-center",children:[r.jsx(vh,{className:"mr-1"}),c.readTime," min"]}),c.author&&r.jsxs("span",{className:"flex items-center",children:[r.jsx(Ch,{className:"mr-1"}),c.author]}),c.category&&r.jsxs("span",{className:"flex items-center",children:[r.jsx(Ph,{className:"mr-1"}),c.category]})]}),r.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-gray-800 mb-4",children:c.title}),r.jsx("p",{className:"text-gray-600 text-sm sm:text-base md:text-lg mb-6",children:c.description}),r.jsx("div",{className:"prose prose-sm sm:prose lg:prose-lg max-w-none text-gray-800",dangerouslySetInnerHTML:{__html:c.content}}),c.tags&&c.tags.length>0&&r.jsxs("div",{className:"mt-8 pt-4 border-t border-gray-200",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Tags:"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:c.tags.map(((e,t)=>r.jsx("span",{className:"inline-block bg-gray-100 text-gray-800 px-2 py-1 rounded text-xs",children:e},t)))})]}),r.jsx("div",{className:"flex flex-wrap gap-3 mt-6 border-t border-gray-200 pt-6",children:r.jsxs("button",{onClick:()=>{E(`/crear-blog?edit=${l}`)},className:"flex items-center gap-1 px-3 py-1.5 sm:px-4 sm:py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition text-sm",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Editar Blog"]})})]})]})]}),r.jsxs(kr,{open:g,onClose:()=>b(!1),className:"fixed inset-0 z-50 flex items-center justify-center",children:[r.jsx(kr.Overlay,{className:"fixed inset-0 bg-black opacity-75"}),r.jsxs("div",{className:"relative z-50 max-w-4xl w-full mx-4",children:[r.jsx("img",{src:null==(i=null==(o=c.images)?void 0:o[x])?void 0:i.src,alt:(null==(s=null==(a=c.images)?void 0:a[x])?void 0:s.alt)||`Imagen ${x+1}`,className:"w-full h-auto max-h-[80vh] object-contain rounded-lg"}),r.jsx("button",{onClick:()=>b(!1),className:"absolute top-4 right-4 text-white bg-black/50 p-2 rounded-full hover:bg-black/75",children:r.jsx(Dh,{className:"w-6 h-6"})})]})]})]})}const Uh=e=>{if(!e)return"";return(new DOMParser).parseFromString(e,"text/html").body.textContent||""},Vh=({src:e,alt:t,className:o})=>{const[i,a]=n.useState(!1);return i||!e?r.jsx("div",{className:`bg-gray-100 flex items-center justify-center ${o}`,children:r.jsx("span",{className:"text-gray-400",children:"Sin imagen disponible"})}):r.jsx("img",{src:e,alt:t||"Imagen",className:o,onError:()=>a(!0),loading:"lazy"})};function Hh(){const[e,t]=n.useState([]),[o,i]=n.useState(!1),[a,s]=n.useState(null),[l,c]=n.useState(!0),[u,d]=n.useState({}),f=n.useContext($),m=(null==f?void 0:f.user)||null;n.useEffect((()=>{let e=!0;return(async()=>{try{const r=await _();if(!e)return;if(!Array.isArray(r))return console.error("Error: blogsData no es un array:",r),t([]),void c(!1);const n=r.map((e=>{console.log("Procesando blog:",e._id),console.log("Blog data completa:",JSON.stringify(e,null,2));let t=[];if(e.images&&Array.isArray(e.images)&&(console.log("Procesando array de im√°genes:",e.images),t=e.images.filter((e=>null!=e)).map((e=>{if(console.log("Procesando imagen individual:",e),"string"==typeof e)return{src:e,alt:"Imagen del blog"};if(e&&"object"==typeof e){if(e.url)return{src:e.url,alt:e.alt||"Imagen del blog"};if(e.path)return{src:e.path,alt:e.alt||"Imagen del blog"};if(e.src)return e}return null})).filter((e=>null!==e)),console.log("Im√°genes procesadas del array:",t)),e.image){let r;console.log("Procesando imagen principal:",e.image),"string"==typeof e.image?r={src:e.image,alt:"Imagen principal"}:"object"==typeof e.image&&(r=e.image.url?{src:e.image.url,alt:"Imagen principal"}:e.image.path?{src:e.image.path,alt:"Imagen principal"}:e.image.src?e.image:null),r&&!t.some((e=>e.src===r.src))&&t.unshift(r)}return console.log("Total de im√°genes procesadas:",t.length),console.log("Im√°genes procesadas final:",t),{...e,images:t}}));console.log("Blogs normalizados:",n),t(n),c(!1)}catch(r){console.error("Error al obtener los blogs:",r),e&&(ie.error("Error al cargar los blogs"),c(!1),t([]))}})(),()=>{e=!1}}),[]);const h=t=>{const r=e.find((e=>e._id===t));var n;r&&(n=r,m&&("admin"===m.role||"ADMIN"===m.role||m.isAdmin)?(s(n),i(!0)):ie.error("No tienes permisos para eliminar blogs"))};return l?r.jsx("div",{className:"min-h-screen bg-gradient-to-tr from-blue-900 to-black/60 flex justify-center items-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white"})}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-tr from-blue-900 to-black/60",children:[r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-6 sm:py-8",children:[r.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-center mb-6 sm:mb-8",children:r.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-white via-yellow-400 to-white",children:"Blogs"})}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:0===e.length?r.jsx("p",{className:"text-white col-span-full text-center",children:"No hay blogs disponibles."}):e.map((e=>r.jsxs("article",{className:"bg-white rounded-xl shadow-lg overflow-hidden transform transition duration-300 hover:-translate-y-1 hover:shadow-xl",children:[r.jsxs("div",{className:"relative h-40 sm:h-48 overflow-hidden",children:[e.images&&e.images.length>0?r.jsx(Vh,{src:e.images[0].src,alt:e.images[0].alt||e.title,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:r.jsx("span",{className:"text-gray-400",children:"Sin imagen disponible"})}),e.images&&e.images.length>1&&r.jsxs("span",{className:"absolute bottom-2 right-2 bg-black/50 text-white px-2 py-1 rounded text-xs",children:["+",e.images.length-1," fotos"]})]}),r.jsxs("div",{className:"p-4 sm:p-6",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-xs sm:text-sm text-gray-600 mb-2 sm:mb-3",children:[r.jsxs("span",{className:"flex items-center",children:[r.jsx(bh,{className:"mr-1"}),new Date(e.createdAt).toLocaleDateString("es-ES")]}),r.jsxs("span",{className:"flex items-center",children:[r.jsx(vh,{className:"mr-1"}),e.readTime," min"]})]}),r.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-2 text-gray-800 line-clamp-2",children:e.title}),r.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base line-clamp-3",children:Uh(e.description||"")}),r.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[r.jsx(Ch,{className:"text-gray-500"}),r.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:e.author})]}),e.category&&r.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[r.jsx(Ph,{className:"text-gray-500"}),r.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:e.category})]}),r.jsx("div",{className:"flex justify-between items-center mt-4",children:r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs(p,{to:`/blog/${e._id}`,className:"flex items-center gap-1 px-2 sm:px-3 py-1 sm:py-1.5 bg-indigo-500 text-white rounded hover:bg-indigo-600 transition-colors text-xs sm:text-sm",title:"Ver blog completo",children:[r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 sm:h-4 sm:w-4",viewBox:"0 0 20 20",fill:"currentColor",children:[r.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),r.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),r.jsx("span",{children:"Ver blog"})]}),m&&("admin"===m.role||"ADMIN"===m.role||m.isAdmin)&&r.jsxs(r.Fragment,{children:[r.jsxs(p,{to:`/crear-blog?edit=${e._id}`,className:"flex items-center gap-1 px-2 sm:px-3 py-1 sm:py-1.5 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors text-xs sm:text-sm",title:"Editar blog",children:[r.jsx(wh,{className:"h-3 w-3 sm:h-4 sm:w-4"}),r.jsx("span",{children:"Editar"})]}),r.jsxs("button",{onClick:()=>h(e._id),className:"flex items-center gap-1 px-2 sm:px-3 py-1 sm:py-1.5 bg-red-500 text-white rounded hover:bg-red-600 transition-colors text-xs sm:text-sm",title:"Eliminar blog",disabled:u[e._id],children:[r.jsx(Th,{className:"h-3 w-3 sm:h-4 sm:w-4"}),r.jsx("span",{children:u[e._id]?"Eliminando...":"Eliminar"})]})]})]})})]})]},e._id)))})]}),r.jsx(On,{appear:!0,show:o,as:n.Fragment,children:r.jsxs(kr,{as:"div",className:"relative z-50",onClose:()=>i(!1),children:[r.jsx(On.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),r.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:r.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:r.jsx(On.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:r.jsxs(kr.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[r.jsx(kr.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"Confirmar eliminaci√≥n"}),r.jsx("div",{className:"mt-2",children:r.jsx("p",{className:"text-sm text-gray-500",children:"¬øEst√°s seguro de que quieres eliminar este blog?"})}),r.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[r.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-gray-100 px-4 py-2 text-sm font-medium text-gray-900 hover:bg-gray-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-500 focus-visible:ring-offset-2",onClick:()=>i(!1),disabled:u[null==a?void 0:a._id],children:"Cancelar"}),r.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",onClick:()=>(async e=>{try{if(d((t=>({...t,[e]:!0}))),await k(e)){try{ie("Blog eliminado correctamente",{icon:"‚úÖ",duration:4e3})}catch(ot){console.error("Error al mostrar notificaci√≥n:",ot)}t((t=>t.filter((t=>t._id!==e))))}else try{ie("Error al eliminar el blog",{icon:"‚ùå",duration:4e3})}catch(ot){console.error("Error al mostrar notificaci√≥n:",ot),alert("Error al eliminar el blog")}}catch(r){console.error("Error al eliminar el blog:",r);try{ie("Error al eliminar el blog",{icon:"‚ùå",duration:4e3})}catch(ot){console.error("Error al mostrar notificaci√≥n:",ot),alert("Error al eliminar el blog")}}finally{d((t=>({...t,[e]:!1})))}})(null==a?void 0:a._id),disabled:u[null==a?void 0:a._id],children:u[null==a?void 0:a._id]?"Eliminando...":"Eliminar"})]})]})})})})]})})]})}function $h(){const[e,t]=n.useState([]),[o,i]=n.useState(!1),[a,s]=n.useState(null),[l,c]=n.useState(!0),[u,d]=n.useState({}),f=n.useContext($),m=(null==f?void 0:f.user)||null;n.useEffect((()=>{let e=!0;return(async()=>{try{const r=await B();if(!e)return;if(!Array.isArray(r))return console.error("Error: PropertyData no es un array:",r),t([]),void c(!1);const n=r.map((e=>{let t=[];if(e.image&&"object"==typeof e.image&&e.image.src?t.push(e.image):e.image&&"string"==typeof e.image&&t.push({src:e.image,alt:"Imagen principal"}),e.images&&Array.isArray(e.images)){const r=e.images.map((e=>"string"==typeof e?{src:e,alt:"Imagen de la propiedad"}:"object"==typeof e&&e.src?e:null)).filter((e=>null!==e));t=[...t,...r]}return{...e,images:t}}));e&&(t(n),c(!1))}catch(r){if(console.error("Error al obtener las propiedades:",r),e){try{ie("Error al cargar las propiedades",{icon:"‚ùå",duration:4e3})}catch(ot){console.error("Error al mostrar notificaci√≥n:",ot),alert("Error al cargar las propiedades")}c(!1),t([])}}})(),()=>{e=!1}}),[]);const h=t=>{const r=e.find((e=>e._id===t));var n;r&&(n=r,m&&("admin"===m.role||"ADMIN"===m.role||m.isAdmin)?(s(n),i(!0)):ie.error("No tienes permisos para eliminar propiedades"))};return l?r.jsx("div",{className:"flex justify-center items-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):r.jsxs("div",{className:"bg-gradient-to-tr from-blue-900 to-black/60 min-h-screen py-6 sm:py-8",children:[r.jsxs("div",{className:"container mx-auto px-4 sm:px-6",children:[r.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-center mb-6 sm:mb-8",children:r.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-white via-yellow-400 to-white",children:"Propiedades"})}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:0===e.length?r.jsx("p",{className:"text-white col-span-full text-center",children:"No hay propiedades disponibles."}):e.map((e=>r.jsxs("div",{className:"bg-white rounded-lg shadow-xl overflow-hidden",children:[r.jsxs("div",{className:"relative h-40 sm:h-48",children:[e.images&&e.images.length>0?r.jsx("img",{src:e.images[0].src,alt:e.images[0].alt||"Imagen de la propiedad",className:"w-full h-full object-cover",onError:e=>{e.target.src="https://via.placeholder.com/400x300?text=Imagen+no+disponible"}}):r.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:r.jsx("span",{className:"text-gray-400",children:"Sin imagen disponible"})}),e.images&&e.images.length>1&&r.jsxs("span",{className:"absolute bottom-2 right-2 bg-black/50 text-white px-2 py-1 rounded text-xs",children:["+",e.images.length-1," fotos"]})]}),r.jsxs("div",{className:"p-4 sm:p-5",children:[r.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-2 line-clamp-1",children:e.typeProperty}),r.jsx("div",{className:"text-gray-600 mb-4 text-sm sm:text-base line-clamp-2 property-description-preview",dangerouslySetInnerHTML:{__html:e.description||""}}),r.jsxs("div",{className:"space-y-2 text-xs sm:text-sm text-gray-600 mb-3",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Sh,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4"}),r.jsx("span",{className:"line-clamp-1",children:e.address})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(_h,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4"}),r.jsxs("span",{children:[e.m2," m¬≤"]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(xh,{className:"mr-2 h-3 w-3 sm:h-4 sm:w-4"}),r.jsx("span",{children:e.price})]})]}),r.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs(p,{to:`/property/${e._id}`,className:"flex items-center gap-1 px-2 sm:px-3 py-1 sm:py-1.5 bg-indigo-500 text-white rounded hover:bg-indigo-600 transition-colors text-xs sm:text-sm",title:"Ver detalles de la propiedad",children:[r.jsx(Eh,{className:"h-3 w-3 sm:h-4 sm:w-4"}),r.jsx("span",{children:"Ver detalles"})]}),m&&("admin"===m.role||"ADMIN"===m.role||m.isAdmin)&&r.jsxs(r.Fragment,{children:[r.jsxs(p,{to:`/add-property?edit=${e._id}`,className:"flex items-center gap-1 px-2 sm:px-3 py-1 sm:py-1.5 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors text-xs sm:text-sm",title:"Editar propiedad",children:[r.jsx(wh,{className:"h-3 w-3 sm:h-4 sm:w-4"}),r.jsx("span",{children:"Editar"})]}),r.jsxs("button",{onClick:()=>h(e._id),className:"flex items-center gap-1 px-2 sm:px-3 py-1 sm:py-1.5 bg-red-500 text-white rounded hover:bg-red-600 transition-colors text-xs sm:text-sm",title:"Eliminar propiedad",disabled:u[e._id],children:[r.jsx(Th,{className:"h-3 w-3 sm:h-4 sm:w-4"}),r.jsx("span",{children:u[e._id]?"Eliminando...":"Eliminar"})]})]})]})})]})]},e._id)))})]}),r.jsx(On,{appear:!0,show:o,as:n.Fragment,children:r.jsxs(kr,{as:"div",className:"relative z-50",onClose:()=>i(!1),children:[r.jsx(On.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),r.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:r.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:r.jsx(On.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:r.jsxs(kr.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[r.jsx(kr.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:"Confirmar eliminaci√≥n"}),r.jsx("div",{className:"mt-2",children:r.jsx("p",{className:"text-sm text-gray-500",children:"¬øEst√°s seguro de que quieres eliminar esta propiedad?"})}),r.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[r.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-gray-100 px-4 py-2 text-sm font-medium text-gray-900 hover:bg-gray-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-500 focus-visible:ring-offset-2",onClick:()=>i(!1),disabled:a&&u[a._id],children:"Cancelar"}),r.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",onClick:()=>(async e=>{try{if(d((t=>({...t,[e]:!0}))),await q(e)){try{ie("Propiedad eliminada correctamente",{icon:"‚úÖ",duration:4e3})}catch(ot){console.error("Error al mostrar notificaci√≥n:",ot)}t((t=>t.filter((t=>t._id!==e))))}else try{ie("Error al eliminar la propiedad",{icon:"‚ùå",duration:4e3})}catch(ot){console.error("Error al mostrar notificaci√≥n:",ot),alert("Error al eliminar la propiedad")}}catch(r){console.error("Error al eliminar la propiedad:",r);try{ie("Error al eliminar la propiedad",{icon:"‚ùå",duration:4e3})}catch(ot){console.error("Error al mostrar notificaci√≥n:",ot),alert("Error al eliminar la propiedad")}}finally{d((t=>({...t,[e]:!1})))}})(a._id),disabled:a&&u[a._id],children:a&&u[a._id]?"Eliminando...":"Eliminar"})]})]})})})})]})})]})}function Gh(e){return hh({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M21 10H7V7c0-1.103.897-2 2-2s2 .897 2 2h2c0-2.206-1.794-4-4-4S5 4.794 5 7v3H3a1 1 0 0 0-1 1v2c0 2.606 1.674 4.823 4 5.65V22h2v-3h8v3h2v-3.35c2.326-.827 4-3.044 4-5.65v-2a1 1 0 0 0-1-1zm-1 3c0 2.206-1.794 4-4 4H8c-2.206 0-4-1.794-4-4v-1h16v1z"}}]})(e)}function Wh(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Kh=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),Yh=()=>Math.random().toString(36).substring(7).split("").join("."),Zh={INIT:`@@redux/INIT${Yh()}`,REPLACE:`@@redux/REPLACE${Yh()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Yh()}`};function Jh(e,t,r){if("function"!=typeof e)throw new Error(Wh(2));if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(Wh(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(Wh(1));return r(Jh)(e,t)}let n=e,o=t,i=new Map,a=i,s=0,l=!1;function c(){a===i&&(a=new Map,i.forEach(((e,t)=>{a.set(t,e)})))}function u(){if(l)throw new Error(Wh(3));return o}function d(e){if("function"!=typeof e)throw new Error(Wh(4));if(l)throw new Error(Wh(5));let t=!0;c();const r=s++;return a.set(r,e),function(){if(t){if(l)throw new Error(Wh(6));t=!1,c(),a.delete(r),i=null}}}function p(e){if(!function(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}(e))throw new Error(Wh(7));if(void 0===e.type)throw new Error(Wh(8));if("string"!=typeof e.type)throw new Error(Wh(17));if(l)throw new Error(Wh(9));try{l=!0,o=n(o,e)}finally{l=!1}return(i=a).forEach((e=>{e()})),e}p({type:Zh.INIT});return{dispatch:p,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error(Wh(10));n=e,p({type:Zh.REPLACE})},[Kh]:function(){const e=d;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(Wh(11));function r(){const e=t;e.next&&e.next(u())}r();return{unsubscribe:e(r)}},[Kh](){return this}}}}}function Xh(e,t){return function(...r){return t(e.apply(this,r))}}function Qh(e,t){if("function"==typeof e)return Xh(e,t);if("object"!=typeof e||null===e)throw new Error(Wh(16));const r={};for(const n in e){const o=e[n];"function"==typeof o&&(r[n]=Xh(o,t))}return r}function eg(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce(((e,t)=>(...r)=>e(t(...r))))}var tg=n;
/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */"function"==typeof Object.is&&Object.is,tg.useSyncExternalStore,tg.useRef,tg.useEffect,tg.useMemo,tg.useDebugValue;var rg=n.version.startsWith("19"),ng=Symbol.for(rg?"react.transitional.element":"react.element"),og=Symbol.for("react.portal"),ig=Symbol.for("react.fragment"),ag=Symbol.for("react.strict_mode"),sg=Symbol.for("react.profiler"),lg=Symbol.for("react.consumer"),cg=Symbol.for("react.context"),ug=Symbol.for("react.forward_ref"),dg=Symbol.for("react.suspense"),pg=Symbol.for("react.suspense_list"),fg=Symbol.for("react.memo"),mg=Symbol.for("react.lazy"),hg=ug,gg=fg;function bg(e){return function(e){if("object"==typeof e&&null!==e){const{$$typeof:t}=e;switch(t){case ng:switch(e=e.type){case ig:case sg:case ag:case dg:case pg:return e;default:switch(e=e&&e.$$typeof){case cg:case ug:case mg:case fg:case lg:return e;default:return t}}case og:return t}}}(e)===fg}function yg(e,t,r,n,{areStatesEqual:o,areOwnPropsEqual:i,areStatePropsEqual:a}){let s,l,c,u,d,p=!1;function f(p,f){const m=!i(f,l),h=!o(p,s,f,l);return s=p,l=f,m&&h?(c=e(s,l),t.dependsOnOwnProps&&(u=t(n,l)),d=r(c,u,l),d):m?(e.dependsOnOwnProps&&(c=e(s,l)),t.dependsOnOwnProps&&(u=t(n,l)),d=r(c,u,l),d):h?function(){const t=e(s,l),n=!a(t,c);return c=t,n&&(d=r(c,u,l)),d}():d}return function(o,i){return p?f(o,i):(s=o,l=i,c=e(s,l),u=t(n,l),d=r(c,u,l),p=!0,d)}}function vg(e){return function(t){const r=e(t);function n(){return r}return n.dependsOnOwnProps=!1,n}}function xg(e){return e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function wg(e,t){return function(t,{displayName:r}){const n=function(e,t){return n.dependsOnOwnProps?n.mapToProps(e,t):n.mapToProps(e,void 0)};return n.dependsOnOwnProps=!0,n.mapToProps=function(t,r){n.mapToProps=e,n.dependsOnOwnProps=xg(e);let o=n(t,r);return"function"==typeof o&&(n.mapToProps=o,n.dependsOnOwnProps=xg(o),o=n(t,r)),o},n}}function Eg(e,t){return(r,n)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${n.wrappedComponentName}.`)}}function jg(e,t,r){return{...r,...e,...t}}var Ng={notify(){},get:()=>[]};function Sg(e,t){let r,n=Ng,o=0,i=!1;function a(){c.onStateChange&&c.onStateChange()}function s(){o++,r||(r=t?t.addNestedSub(a):e.subscribe(a),n=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){(()=>{let t=e;for(;t;)t.callback(),t=t.next})()},get(){const t=[];let r=e;for(;r;)t.push(r),r=r.next;return t},subscribe(r){let n=!0;const o=t={callback:r,next:null,prev:t};return o.prev?o.prev.next=o:e=o,function(){n&&null!==e&&(n=!1,o.next?o.next.prev=o.prev:t=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}())}function l(){o--,r&&0===o&&(r(),r=void 0,n.clear(),n=Ng)}const c={addNestedSub:function(e){s();const t=n.subscribe(e);let r=!1;return()=>{r||(r=!0,t(),l())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:a,isSubscribed:function(){return i},trySubscribe:function(){i||(i=!0,s())},tryUnsubscribe:function(){i&&(i=!1,l())},getListeners:()=>n};return c}var _g=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),kg=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),Og=(()=>_g||kg?n.useLayoutEffect:n.useEffect)();function Pg(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function Tg(e,t){if(Pg(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let o=0;o<r.length;o++)if(!Object.prototype.hasOwnProperty.call(t,r[o])||!Pg(e[r[o]],t[r[o]]))return!1;return!0}var Ig={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Cg={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Ag={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Dg={[hg]:{$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},[gg]:Ag};function Lg(e){return bg(e)?Ag:Dg[e.$$typeof]||Ig}var Rg=Object.defineProperty,Mg=Object.getOwnPropertyNames,Bg=Object.getOwnPropertySymbols,qg=Object.getOwnPropertyDescriptor,Fg=Object.getPrototypeOf,zg=Object.prototype;function Ug(e,t){if("string"!=typeof t){if(zg){const r=Fg(t);r&&r!==zg&&Ug(e,r)}let r=Mg(t);Bg&&(r=r.concat(Bg(t)));const n=Lg(e),o=Lg(t);for(let i=0;i<r.length;++i){const a=r[i];if(!(Cg[a]||o&&o[a]||n&&n[a])){const r=qg(t,a);try{Rg(e,a,r)}catch(ot){}}}}return e}var Vg=Symbol.for("react-redux-context"),Hg="undefined"!=typeof globalThis?globalThis:{};function $g(){if(!n.createContext)return{};const e=Hg[Vg]??(Hg[Vg]=new Map);let t=e.get(n.createContext);return t||(t=n.createContext(null),e.set(n.createContext,t)),t}var Gg=$g(),Wg=[null,null];function Kg(e,t,r,n,o,i){e.current=n,r.current=!1,o.current&&(o.current=null,i())}function Yg(e,t){return e===t}var Zg=function(e,t,r,{pure:o,areStatesEqual:i=Yg,areOwnPropsEqual:a=Tg,areStatePropsEqual:s=Tg,areMergedPropsEqual:l=Tg,forwardRef:c=!1,context:u=Gg}={}){const d=u,p=function(e){return e?"function"==typeof e?wg(e):Eg(e,"mapStateToProps"):vg((()=>({})))}(e),f=function(e){return e&&"object"==typeof e?vg((t=>function(e,t){const r={};for(const n in e){const o=e[n];"function"==typeof o&&(r[n]=(...e)=>t(o(...e)))}return r}(e,t))):e?"function"==typeof e?wg(e):Eg(e,"mapDispatchToProps"):vg((e=>({dispatch:e})))}(t),m=function(e){return e?"function"==typeof e?function(e){return function(t,{displayName:r,areMergedPropsEqual:n}){let o,i=!1;return function(t,r,a){const s=e(t,r,a);return i?n(s,o)||(o=s):(i=!0,o=s),o}}}(e):Eg(e,"mergeProps"):()=>jg}(r),h=Boolean(e);return e=>{const t=e.displayName||e.name||"Component",r=`Connect(${t})`,o={shouldHandleStateChanges:h,displayName:r,wrappedComponentName:t,WrappedComponent:e,initMapStateToProps:p,initMapDispatchToProps:f,initMergeProps:m,areStatesEqual:i,areStatePropsEqual:s,areOwnPropsEqual:a,areMergedPropsEqual:l};function u(t){const[r,i,a]=n.useMemo((()=>{const{reactReduxForwardedRef:e,...r}=t;return[t.context,e,r]}),[t]),s=n.useMemo((()=>{let e=d;return null==r||r.Consumer,e}),[r,d]),l=n.useContext(s),c=Boolean(t.store)&&Boolean(t.store.getState)&&Boolean(t.store.dispatch),u=Boolean(l)&&Boolean(l.store),p=c?t.store:l.store,f=u?l.getServerState:p.getState,m=n.useMemo((()=>function(e,{initMapStateToProps:t,initMapDispatchToProps:r,initMergeProps:n,...o}){return yg(t(e,o),r(e,o),n(e,o),e,o)}(p.dispatch,o)),[p]),[g,b]=n.useMemo((()=>{if(!h)return Wg;const e=Sg(p,c?void 0:l.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[p,c,l]),y=n.useMemo((()=>c?l:{...l,subscription:g}),[c,l,g]),v=n.useRef(void 0),x=n.useRef(a),w=n.useRef(void 0),E=n.useRef(!1),j=n.useRef(!1),N=n.useRef(void 0);Og((()=>(j.current=!0,()=>{j.current=!1})),[]);const S=n.useMemo((()=>()=>w.current&&a===x.current?w.current:m(p.getState(),a)),[p,a]),_=n.useMemo((()=>e=>g?function(e,t,r,n,o,i,a,s,l,c,u){if(!e)return()=>{};let d=!1,p=null;const f=()=>{if(d||!s.current)return;const e=t.getState();let r,f;try{r=n(e,o.current)}catch(ot){f=ot,p=ot}f||(p=null),r===i.current?a.current||c():(i.current=r,l.current=r,a.current=!0,u())};return r.onStateChange=f,r.trySubscribe(),f(),()=>{if(d=!0,r.tryUnsubscribe(),r.onStateChange=null,p)throw p}}(h,p,g,m,x,v,E,j,w,b,e):()=>{}),[g]);var k,O,P;let T;k=Kg,O=[x,v,E,a,w,b],Og((()=>k(...O)),P);try{T=n.useSyncExternalStore(_,S,f?()=>m(f(),a):S)}catch(C){throw N.current&&(C.message+=`\nThe error may be correlated with this previous error:\n${N.current.stack}\n\n`),C}Og((()=>{N.current=void 0,w.current=void 0,v.current=T}));const I=n.useMemo((()=>n.createElement(e,{...T,ref:i})),[i,e,T]);return n.useMemo((()=>h?n.createElement(s.Provider,{value:y},I):I),[s,I,y])}const g=n.memo(u);if(g.WrappedComponent=e,g.displayName=u.displayName=r,c){const t=n.forwardRef((function(e,t){return n.createElement(g,{...e,reactReduxForwardedRef:t})}));return t.displayName=r,t.WrappedComponent=e,Ug(t,e)}return Ug(g,e)}};var Jg=function(e){const{children:t,context:r,serverState:o,store:i}=e,a=n.useMemo((()=>{const e=Sg(i);return{store:i,subscription:e,getServerState:o?()=>o:void 0}}),[i,o]),s=n.useMemo((()=>i.getState()),[i]);Og((()=>{const{subscription:e}=a;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),s!==i.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[a,s]);const l=r||Gg;return n.createElement(l.Provider,{value:a},t)},Xg="Invariant failed";var Qg=function(e){var t=e.top,r=e.right,n=e.bottom,o=e.left;return{top:t,right:r,bottom:n,left:o,width:r-o,height:n-t,x:o,y:t,center:{x:(r+o)/2,y:(n+t)/2}}},eb=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},tb=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},rb={top:0,right:0,bottom:0,left:0},nb=function(e){var t=e.borderBox,r=e.margin,n=void 0===r?rb:r,o=e.border,i=void 0===o?rb:o,a=e.padding,s=void 0===a?rb:a,l=Qg(eb(t,n)),c=Qg(tb(t,i)),u=Qg(tb(c,s));return{marginBox:l,borderBox:Qg(t),paddingBox:c,contentBox:u,margin:n,border:i,padding:s}},ob=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var r=Number(t);return isNaN(r)&&function(e){if(!e)throw new Error(Xg)}(!1),r},ib=function(e,t){var r,n,o=e.borderBox,i=e.border,a=e.margin,s=e.padding,l=(n=t,{top:(r=o).top+n.y,left:r.left+n.x,bottom:r.bottom+n.y,right:r.right+n.x});return nb({borderBox:l,border:i,margin:a,padding:s})},ab=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),ib(e,t)},sb=function(e,t){var r={top:ob(t.marginTop),right:ob(t.marginRight),bottom:ob(t.marginBottom),left:ob(t.marginLeft)},n={top:ob(t.paddingTop),right:ob(t.paddingRight),bottom:ob(t.paddingBottom),left:ob(t.paddingLeft)},o={top:ob(t.borderTopWidth),right:ob(t.borderRightWidth),bottom:ob(t.borderBottomWidth),left:ob(t.borderLeftWidth)};return nb({borderBox:e,margin:r,padding:n,border:o})},lb=function(e){var t=e.getBoundingClientRect(),r=window.getComputedStyle(e);return sb(t,r)};const cb=function(e){var t=[],r=null,n=function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];t=o,r||(r=requestAnimationFrame((function(){r=null,e.apply(void 0,t)})))};return n.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},n};function ub(){return ub=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ub.apply(null,arguments)}function db(e,t){}function pb(){}function fb(e,t,r){const n=t.map((t=>{const n=(o=r,i=t.options,{...o,...i});var o,i;return e.addEventListener(t.eventName,t.fn,n),function(){e.removeEventListener(t.eventName,t.fn,n)}}));return function(){n.forEach((e=>{e()}))}}db.bind(null,"warn"),db.bind(null,"error");class mb extends Error{}function hb(e,t){throw new mb("Invariant failed")}mb.prototype.toString=function(){return this.message};let gb=class extends o.Component{constructor(...e){super(...e),this.callbacks=null,this.unbind=pb,this.onWindowError=e=>{const t=this.getCallbacks();t.isDragging()&&t.tryAbort();e.error instanceof mb&&e.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=e=>{this.callbacks=e}}componentDidMount(){this.unbind=fb(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(e){if(!(e instanceof mb))throw e;this.setState({})}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}};const bb=e=>e+1,yb=(e,t)=>{const r=e.droppableId===t.droppableId,n=bb(e.index),o=bb(t.index);return r?`\n      You have moved the item from position ${n}\n      to position ${o}\n    `:`\n    You have moved the item from position ${n}\n    in list ${e.droppableId}\n    to list ${t.droppableId}\n    in position ${o}\n  `},vb=(e,t,r)=>t.droppableId===r.droppableId?`\n      The item ${e}\n      has been combined with ${r.draggableId}`:`\n      The item ${e}\n      in list ${t.droppableId}\n      has been combined with ${r.draggableId}\n      in list ${r.droppableId}\n    `,xb=e=>`\n  The item has returned to its starting position\n  of ${bb(e.index)}\n`,wb={dragHandleUsageInstructions:"\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",onDragStart:e=>`\n  You have lifted an item in position ${bb(e.source.index)}\n`,onDragUpdate:e=>{const t=e.destination;if(t)return yb(e.source,t);const r=e.combine;return r?vb(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},onDragEnd:e=>{if("CANCEL"===e.reason)return`\n      Movement cancelled.\n      ${xb(e.source)}\n    `;const t=e.destination,r=e.combine;return t?`\n      You have dropped the item.\n      ${yb(e.source,t)}\n    `:r?`\n      You have dropped the item.\n      ${vb(e.draggableId,e.source,r)}\n    `:`\n    The item has been dropped while not over a drop area.\n    ${xb(e.source)}\n  `}};function Eb(e,t){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(r=e[o],n=t[o],!(r===n||Number.isNaN(r)&&Number.isNaN(n)))return!1;var r,n;return!0}function jb(e,t){const r=n.useState((()=>({inputs:t,result:e()})))[0],o=n.useRef(!0),i=n.useRef(r),a=o.current||Boolean(t&&i.current.inputs&&Eb(t,i.current.inputs))?i.current:{inputs:t,result:e()};return n.useEffect((()=>{o.current=!1,i.current=a}),[a]),a.result}function Nb(e,t){return jb((()=>e),t)}const Sb={x:0,y:0},_b=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),kb=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),Ob=(e,t)=>e.x===t.x&&e.y===t.y,Pb=e=>({x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}),Tb=(e,t,r=0)=>"x"===e?{x:t,y:r}:{x:r,y:t},Ib=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),Cb=(e,t)=>Math.min(...t.map((t=>Ib(e,t)))),Ab=e=>t=>({x:e(t.x),y:e(t.y)});const Db=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),Lb=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],Rb=(e,t)=>t&&t.shouldClipSubject?((e,t)=>{const r=Qg({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r})(t.pageMarginBox,e):Qg(e);var Mb=({page:e,withPlaceholder:t,axis:r,frame:n})=>{const o=((e,t)=>t?Db(e,t.scroll.diff.displacement):e)(e.marginBox,n),i=((e,t,r)=>r&&r.increasedBy?{...e,[t.end]:e[t.end]+r.increasedBy[t.line]}:e)(o,r,t);return{page:e,withPlaceholder:t,active:Rb(i,n)}},Bb=(e,t)=>{e.frame||hb();const r=e.frame,n=kb(t,r.scroll.initial),o=Pb(n),i={...r,scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:o},max:r.scroll.max}},a=Mb({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i});return{...e,frame:i,subject:a}};function qb(e,t=Eb){let r=null;function n(...n){if(r&&r.lastThis===this&&t(n,r.lastArgs))return r.lastResult;const o=e.apply(this,n);return r={lastResult:o,lastArgs:n,lastThis:this},o}return n.clear=function(){r=null},n}const Fb=qb((e=>e.reduce(((e,t)=>(e[t.descriptor.id]=t,e)),{}))),zb=qb((e=>e.reduce(((e,t)=>(e[t.descriptor.id]=t,e)),{}))),Ub=qb((e=>Object.values(e))),Vb=qb((e=>Object.values(e)));var Hb=qb(((e,t)=>{const r=Vb(t).filter((t=>e===t.descriptor.droppableId)).sort(((e,t)=>e.descriptor.index-t.descriptor.index));return r}));function $b(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function Gb(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var Wb=qb(((e,t)=>t.filter((t=>t.descriptor.id!==e.descriptor.id)))),Kb=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const Yb={point:Sb,value:0},Zb={invisible:{},visible:{},all:[]},Jb={displaced:Zb,displacedBy:Yb,at:null};var Xb=(e,t)=>r=>e<=r&&r<=t,Qb=e=>{const t=Xb(e.top,e.bottom),r=Xb(e.left,e.right);return n=>{if(t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right))return!0;const o=t(n.top)||t(n.bottom),i=r(n.left)||r(n.right);if(o&&i)return!0;const a=n.top<e.top&&n.bottom>e.bottom,s=n.left<e.left&&n.right>e.right;if(a&&s)return!0;return a&&i||s&&o}},ey=e=>{const t=Xb(e.top,e.bottom),r=Xb(e.left,e.right);return e=>t(e.top)&&t(e.bottom)&&r(e.left)&&r(e.right)};const ty={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},ry={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};const ny=({target:e,destination:t,viewport:r,withDroppableDisplacement:n,isVisibleThroughFrameFn:o})=>{const i=n?((e,t)=>{const r=t.frame?t.frame.scroll.diff.displacement:Sb;return Db(e,r)})(e,t):e;return((e,t,r)=>!!t.subject.active&&r(t.subject.active)(e))(i,t,o)&&((e,t,r)=>r(t)(e))(i,r,o)},oy=e=>ny({...e,isVisibleThroughFrameFn:ey});function iy({afterDragging:e,destination:t,displacedBy:r,viewport:n,forceShouldAnimate:o,last:i}){return e.reduce((function(e,a){const s=function(e,t){const r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return Qg(eb(r,n))}(a,r),l=a.descriptor.id;e.all.push(l);var c;if(!(c={target:s,destination:t,viewport:n,withDroppableDisplacement:!0},ny({...c,isVisibleThroughFrameFn:Qb})))return e.invisible[a.descriptor.id]=!0,e;const u=((e,t,r)=>{if("boolean"==typeof r)return r;if(!t)return!0;const{invisible:n,visible:o}=t;if(n[e])return!1;const i=o[e];return!i||i.shouldAnimate})(l,i,o),d={draggableId:l,shouldAnimate:u};return e.visible[l]=d,e}),{all:[],visible:{},invisible:{}})}function ay({insideDestination:e,inHomeList:t,displacedBy:r,destination:n}){const o=function(e,t){if(!e.length)return 0;const r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}(e,{inHomeList:t});return{displaced:Zb,displacedBy:r,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function sy({draggable:e,insideDestination:t,destination:r,viewport:n,displacedBy:o,last:i,index:a,forceShouldAnimate:s}){const l=Kb(e,r);if(null==a)return ay({insideDestination:t,inHomeList:l,displacedBy:o,destination:r});const c=t.find((e=>e.descriptor.index===a));if(!c)return ay({insideDestination:t,inHomeList:l,displacedBy:o,destination:r});const u=Wb(e,t),d=t.indexOf(c);return{displaced:iy({afterDragging:u.slice(d),destination:r,displacedBy:o,last:i,viewport:n.frame,forceShouldAnimate:s}),displacedBy:o,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:a}}}}function ly(e,t){return Boolean(t.effected[e])}var cy=({isMovingForward:e,isInHomeList:t,draggable:r,draggables:n,destination:o,insideDestination:i,previousImpact:a,viewport:s,afterCritical:l})=>{const c=a.at;if(c||hb(),"REORDER"===c.type){const n=(({isMovingForward:e,isInHomeList:t,insideDestination:r,location:n})=>{if(!r.length)return null;const o=n.index,i=e?o+1:o-1,a=r[0].descriptor.index,s=r[r.length-1].descriptor.index;return i<a||i>(t?s:s+1)?null:i})({isMovingForward:e,isInHomeList:t,location:c.destination,insideDestination:i});return null==n?null:sy({draggable:r,insideDestination:i,destination:o,viewport:s,last:a.displaced,displacedBy:a.displacedBy,index:n})}const u=(({isMovingForward:e,destination:t,draggables:r,combine:n,afterCritical:o})=>{if(!t.isCombineEnabled)return null;const i=n.draggableId,a=r[i].descriptor.index;return ly(i,o)?e?a:a-1:e?a+1:a})({isMovingForward:e,destination:o,displaced:a.displaced,draggables:n,combine:c.combine,afterCritical:l});return null==u?null:sy({draggable:r,insideDestination:i,destination:o,viewport:s,last:a.displaced,displacedBy:a.displacedBy,index:u})},uy=({afterCritical:e,impact:t,draggables:r})=>{const n=Gb(t);n||hb();const o=n.draggableId,i=r[o].page.borderBox.center,a=(({displaced:e,afterCritical:t,combineWith:r,displacedBy:n})=>{const o=Boolean(e.visible[r]||e.invisible[r]);return ly(r,t)?o?Sb:Pb(n.point):o?n.point:Sb})({displaced:t.displaced,afterCritical:e,combineWith:o,displacedBy:t.displacedBy});return _b(i,a)};const dy=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,py=(e,t,r)=>t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2,fy=({axis:e,moveRelativeTo:t,isMoving:r})=>Tb(e.line,t.marginBox[e.end]+dy(e,r),py(e,t.marginBox,r)),my=({axis:e,moveRelativeTo:t,isMoving:r})=>Tb(e.line,t.marginBox[e.start]-((e,t)=>t.margin[e.end]+t.borderBox[e.size]/2)(e,r),py(e,t.marginBox,r));var hy=({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:o})=>{const i=Hb(n.descriptor.id,r),a=t.page,s=n.axis;if(!i.length)return(({axis:e,moveInto:t,isMoving:r})=>Tb(e.line,t.contentBox[e.start]+dy(e,r),py(e,t.contentBox,r)))({axis:s,moveInto:n.page,isMoving:a});const{displaced:l,displacedBy:c}=e,u=l.all[0];if(u){const e=r[u];if(ly(u,o))return my({axis:s,moveRelativeTo:e.page,isMoving:a});const t=ib(e.page,c.point);return my({axis:s,moveRelativeTo:t,isMoving:a})}const d=i[i.length-1];if(d.descriptor.id===t.descriptor.id)return a.borderBox.center;if(ly(d.descriptor.id,o)){const e=ib(d.page,Pb(o.displacedBy.point));return fy({axis:s,moveRelativeTo:e,isMoving:a})}return fy({axis:s,moveRelativeTo:d.page,isMoving:a})},gy=(e,t)=>{const r=e.frame;return r?_b(t,r.scroll.diff.displacement):t};var by=e=>{const t=(({impact:e,draggable:t,droppable:r,draggables:n,afterCritical:o})=>{const i=t.page.borderBox.center,a=e.at;return r&&a?"REORDER"===a.type?hy({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:o}):uy({impact:e,draggables:n,afterCritical:o}):i})(e),r=e.droppable;return r?gy(r,t):t},yy=(e,t)=>{const r=kb(t,e.scroll.initial),n=Pb(r);return{frame:Qg({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}}};function vy(e,t){return e.map((e=>t[e]))}var xy=({pageBorderBoxCenter:e,draggable:t,viewport:r})=>{const n=((e,t)=>_b(e.scroll.diff.displacement,t))(r,e),o=kb(n,t.page.borderBox.center);return _b(t.client.borderBox.center,o)},wy=({draggable:e,destination:t,newPageBorderBoxCenter:r,viewport:n,withDroppableDisplacement:o,onlyOnMainAxis:i=!1})=>{const a=kb(r,e.page.borderBox.center),s={target:Db(e.page.borderBox,a),destination:t,withDroppableDisplacement:o,viewport:n};return i?(e=>{return ny({...e,isVisibleThroughFrameFn:(t=e.destination.axis,e=>{const r=Xb(e.top,e.bottom),n=Xb(e.left,e.right);return e=>t===ty?r(e.top)&&r(e.bottom):n(e.left)&&n(e.right)})});var t})(s):oy(s)},Ey=({isMovingForward:e,draggable:t,destination:r,draggables:n,previousImpact:o,viewport:i,previousPageBorderBoxCenter:a,previousClientSelection:s,afterCritical:l})=>{if(!r.isEnabled)return null;const c=Hb(r.descriptor.id,n),u=Kb(t,r),d=(({isMovingForward:e,draggable:t,destination:r,insideDestination:n,previousImpact:o})=>{if(!r.isCombineEnabled)return null;if(!$b(o))return null;function i(e){const t={type:"COMBINE",combine:{draggableId:e,droppableId:r.descriptor.id}};return{...o,at:t}}const a=o.displaced.all,s=a.length?a[0]:null;if(e)return s?i(s):null;const l=Wb(t,n);if(!s)return l.length?i(l[l.length-1].descriptor.id):null;const c=l.findIndex((e=>e.descriptor.id===s));-1===c&&hb();const u=c-1;return u<0?null:i(l[u].descriptor.id)})({isMovingForward:e,draggable:t,destination:r,insideDestination:c,previousImpact:o})||cy({isMovingForward:e,isInHomeList:u,draggable:t,draggables:n,destination:r,insideDestination:c,previousImpact:o,viewport:i,afterCritical:l});if(!d)return null;const p=by({impact:d,draggable:t,droppable:r,draggables:n,afterCritical:l});if(wy({draggable:t,destination:r,newPageBorderBoxCenter:p,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})){return{clientSelection:xy({pageBorderBoxCenter:p,draggable:t,viewport:i}),impact:d,scrollJumpRequest:null}}const f=kb(p,a),m=(({impact:e,viewport:t,destination:r,draggables:n,maxScrollChange:o})=>{const i=yy(t,_b(t.scroll.current,o)),a=r.frame?Bb(r,_b(r.frame.scroll.current,o)):r,s=e.displaced,l=iy({afterDragging:vy(s.all,n),destination:r,displacedBy:e.displacedBy,viewport:i.frame,last:s,forceShouldAnimate:!1}),c=iy({afterDragging:vy(s.all,n),destination:a,displacedBy:e.displacedBy,viewport:t.frame,last:s,forceShouldAnimate:!1}),u={},d={},p=[s,l,c];return s.all.forEach((e=>{const t=function(e,t){for(let r=0;r<t.length;r++){const n=t[r].visible[e];if(n)return n}return null}(e,p);t?d[e]=t:u[e]=!0})),{...e,displaced:{all:s.all,invisible:u,visible:d}}})({impact:d,viewport:i,destination:r,draggables:n,maxScrollChange:f});return{clientSelection:s,impact:m,scrollJumpRequest:f}};const jy=e=>{const t=e.subject.active;return t||hb(),t};const Ny=(e,t)=>{const r=e.page.borderBox.center;return ly(e.descriptor.id,t)?kb(r,t.displacedBy.point):r},Sy=(e,t)=>{const r=e.page.borderBox;return ly(e.descriptor.id,t)?Db(r,Pb(t.displacedBy.point)):r};var _y=qb((function(e,t){const r=t[e.line];return{value:r,point:Tb(e.line,r)}}));const ky=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),Oy=(e,t,r)=>{const n=e.frame;Kb(t,e)&&hb(),e.subject.withPlaceholder&&hb();const o=_y(e.axis,t.displaceBy).point,i=((e,t,r)=>{const n=e.axis;if("virtual"===e.descriptor.mode)return Tb(n.line,t[n.line]);const o=e.subject.page.contentBox[n.size],i=Hb(e.descriptor.id,r).reduce(((e,t)=>e+t.client.marginBox[n.size]),0)+t[n.line]-o;return i<=0?null:Tb(n.line,i)})(e,o,r),a={placeholderSize:o,increasedBy:i,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!n){const t=Mb({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:e.frame});return{...e,subject:t}}const s=i?_b(n.scroll.max,i):n.scroll.max,l=ky(n,s),c=Mb({page:e.subject.page,withPlaceholder:a,axis:e.axis,frame:l});return{...e,subject:c,frame:l}};var Py=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:r,isOver:n,draggables:o,droppables:i,viewport:a,afterCritical:s})=>{const l=(({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:n,viewport:o})=>{const i=r.subject.active;if(!i)return null;const a=r.axis,s=Xb(i[a.start],i[a.end]),l=Ub(n).filter((e=>e!==r)).filter((e=>e.isEnabled)).filter((e=>Boolean(e.subject.active))).filter((e=>Qb(o.frame)(jy(e)))).filter((t=>{const r=jy(t);return e?i[a.crossAxisEnd]<r[a.crossAxisEnd]:r[a.crossAxisStart]<i[a.crossAxisStart]})).filter((e=>{const t=jy(e),r=Xb(t[a.start],t[a.end]);return s(t[a.start])||s(t[a.end])||r(i[a.start])||r(i[a.end])})).sort(((t,r)=>{const n=jy(t)[a.crossAxisStart],o=jy(r)[a.crossAxisStart];return e?n-o:o-n})).filter(((e,t,r)=>jy(e)[a.crossAxisStart]===jy(r[0])[a.crossAxisStart]));if(!l.length)return null;if(1===l.length)return l[0];const c=l.filter((e=>Xb(jy(e)[a.start],jy(e)[a.end])(t[a.line])));return 1===c.length?c[0]:c.length>1?c.sort(((e,t)=>jy(e)[a.start]-jy(t)[a.start]))[0]:l.sort(((e,r)=>{const n=Cb(t,Lb(jy(e))),o=Cb(t,Lb(jy(r)));return n!==o?n-o:jy(e)[a.start]-jy(r)[a.start]}))[0]})({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:i,viewport:a});if(!l)return null;const c=Hb(l.descriptor.id,o),u=(({pageBorderBoxCenter:e,viewport:t,destination:r,insideDestination:n,afterCritical:o})=>{const i=n.filter((e=>oy({target:Sy(e,o),destination:r,viewport:t.frame,withDroppableDisplacement:!0}))).sort(((t,n)=>{const i=Ib(e,gy(r,Ny(t,o))),a=Ib(e,gy(r,Ny(n,o)));return i<a?-1:a<i?1:t.descriptor.index-n.descriptor.index}));return i[0]||null})({pageBorderBoxCenter:t,viewport:a,destination:l,insideDestination:c,afterCritical:s}),d=(({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:r,draggable:n,draggables:o,destination:i,viewport:a,afterCritical:s})=>{if(!t){if(r.length)return null;const e={displaced:Zb,displacedBy:Yb,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},t=by({impact:e,draggable:n,droppable:i,draggables:o,afterCritical:s}),l=Kb(n,i)?i:Oy(i,n,o);return wy({draggable:n,destination:l,newPageBorderBoxCenter:t,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?e:null}const l=Boolean(e[i.axis.line]<=t.page.borderBox.center[i.axis.line]),c=(()=>{const e=t.descriptor.index;return t.descriptor.id===n.descriptor.id||l?e:e+1})(),u=_y(i.axis,n.displaceBy);return sy({draggable:n,insideDestination:r,destination:i,viewport:a,displacedBy:u,last:Zb,index:c})})({previousPageBorderBoxCenter:t,destination:l,draggable:r,draggables:o,moveRelativeTo:u,insideDestination:c,viewport:a,afterCritical:s});if(!d)return null;const p=by({impact:d,draggable:r,droppable:l,draggables:o,afterCritical:s});return{clientSelection:xy({pageBorderBoxCenter:p,draggable:r,viewport:a}),impact:d,scrollJumpRequest:null}},Ty=e=>{const t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null};var Iy=({state:e,type:t})=>{const r=((e,t)=>{const r=Ty(e);return r?t[r]:null})(e.impact,e.dimensions.droppables),n=Boolean(r),o=e.dimensions.droppables[e.critical.droppable.id],i=r||o,a=i.axis.direction,s="vertical"===a&&("MOVE_UP"===t||"MOVE_DOWN"===t)||"horizontal"===a&&("MOVE_LEFT"===t||"MOVE_RIGHT"===t);if(s&&!n)return null;const l="MOVE_DOWN"===t||"MOVE_RIGHT"===t,c=e.dimensions.draggables[e.critical.draggable.id],u=e.current.page.borderBoxCenter,{draggables:d,droppables:p}=e.dimensions;return s?Ey({isMovingForward:l,previousPageBorderBoxCenter:u,draggable:c,destination:i,draggables:d,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):Py({isMovingForward:l,previousPageBorderBoxCenter:u,draggable:c,isOver:i,draggables:d,droppables:p,viewport:e.viewport,afterCritical:e.afterCritical})};function Cy(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function Ay(e){const t=Xb(e.top,e.bottom),r=Xb(e.left,e.right);return function(e){return t(e.y)&&r(e.x)}}function Dy({pageBorderBox:e,draggable:t,droppables:r}){const n=Ub(r).filter((t=>{if(!t.isEnabled)return!1;const r=t.subject.active;if(!r)return!1;if(o=r,!((n=e).left<o.right&&n.right>o.left&&n.top<o.bottom&&n.bottom>o.top))return!1;var n,o;if(Ay(r)(e.center))return!0;const i=t.axis,a=r.center[i.crossAxisLine],s=e[i.crossAxisStart],l=e[i.crossAxisEnd],c=Xb(r[i.crossAxisStart],r[i.crossAxisEnd]),u=c(s),d=c(l);return!u&&!d||(u?s<a:l>a)}));return n.length?1===n.length?n[0].descriptor.id:function({pageBorderBox:e,draggable:t,candidates:r}){const n=t.page.borderBox.center,o=r.map((t=>{const r=t.axis,o=Tb(t.axis.line,e.center[r.line],t.page.borderBox.center[r.crossAxisLine]);return{id:t.descriptor.id,distance:Ib(n,o)}})).sort(((e,t)=>t.distance-e.distance));return o[0]?o[0].id:null}({pageBorderBox:e,draggable:t,candidates:n}):null}const Ly=(e,t)=>Qg(Db(e,t));function Ry({displaced:e,id:t}){return Boolean(e.visible[t]||e.invisible[t])}var My=({pageOffset:e,draggable:t,draggables:r,droppables:n,previousImpact:o,viewport:i,afterCritical:a})=>{const s=Ly(t.page.borderBox,e),l=Dy({pageBorderBox:s,draggable:t,droppables:n});if(!l)return Jb;const c=n[l],u=Hb(c.descriptor.id,r),d=((e,t)=>{const r=e.frame;return r?Ly(t,r.scroll.diff.value):t})(c,s);return(({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:r,destination:n,insideDestination:o,afterCritical:i})=>{if(!n.isCombineEnabled)return null;const a=n.axis,s=_y(n.axis,e.displaceBy),l=s.value,c=t[a.start],u=t[a.end],d=Wb(e,o).find((e=>{const t=e.descriptor.id,n=e.page.borderBox,o=n[a.size]/4,s=ly(t,i),d=Ry({displaced:r.displaced,id:t});return s?d?u>n[a.start]+o&&u<n[a.end]-o:c>n[a.start]-l+o&&c<n[a.end]-l-o:d?u>n[a.start]+l+o&&u<n[a.end]+l-o:c>n[a.start]+o&&c<n[a.end]-o}));return d?{displacedBy:s,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:d.descriptor.id,droppableId:n.descriptor.id}}}:null})({pageBorderBoxWithDroppableScroll:d,draggable:t,previousImpact:o,destination:c,insideDestination:u,afterCritical:a})||(({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:r,insideDestination:n,last:o,viewport:i,afterCritical:a})=>{const s=r.axis,l=_y(r.axis,t.displaceBy),c=l.value,u=e[s.start],d=e[s.end],p=function({draggable:e,closest:t,inHomeList:r}){return t?r&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}({draggable:t,closest:Wb(t,n).find((e=>{const t=e.descriptor.id,r=e.page.borderBox.center[s.line],n=ly(t,a),i=Ry({displaced:o,id:t});return n?i?d<=r:u<r-c:i?d<=r+c:u<r}))||null,inHomeList:Kb(t,r)});return sy({draggable:t,insideDestination:n,destination:r,viewport:i,last:o,displacedBy:l,index:p})})({pageBorderBoxWithDroppableScroll:d,draggable:t,destination:c,insideDestination:u,last:o.displaced,viewport:i,afterCritical:a})},By=(e,t)=>({...e,[t.descriptor.id]:t});const qy=({previousImpact:e,impact:t,droppables:r})=>{const n=Ty(e),o=Ty(t);if(!n)return r;if(n===o)return r;const i=r[n];if(!i.subject.withPlaceholder)return r;const a=(e=>{const t=e.subject.withPlaceholder;t||hb();const r=e.frame;if(!r){const t=Mb({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:t}}const n=t.oldFrameMaxScroll;n||hb();const o=ky(r,n),i=Mb({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null});return{...e,subject:i,frame:o}})(i);return By(r,a)};var Fy=({state:e,clientSelection:t,dimensions:r,viewport:n,impact:o,scrollJumpRequest:i})=>{const a=n||e.viewport,s=r||e.dimensions,l=t||e.current.client.selection,c=kb(l,e.initial.client.selection),u={offset:c,selection:l,borderBoxCenter:_b(e.initial.client.borderBoxCenter,c)},d={selection:_b(u.selection,a.scroll.current),borderBoxCenter:_b(u.borderBoxCenter,a.scroll.current),offset:_b(u.offset,a.scroll.diff.value)},p={client:u,page:d};if("COLLECTING"===e.phase)return{...e,dimensions:s,viewport:a,current:p};const f=s.draggables[e.critical.draggable.id],m=o||My({pageOffset:d.offset,draggable:f,draggables:s.draggables,droppables:s.droppables,previousImpact:e.impact,viewport:a,afterCritical:e.afterCritical}),h=(({draggable:e,draggables:t,droppables:r,previousImpact:n,impact:o})=>{const i=qy({previousImpact:n,impact:o,droppables:r}),a=Ty(o);if(!a)return i;const s=r[a];if(Kb(e,s))return i;if(s.subject.withPlaceholder)return i;const l=Oy(s,e,t);return By(i,l)})({draggable:f,impact:m,previousImpact:e.impact,draggables:s.draggables,droppables:s.droppables});return{...e,current:p,dimensions:{draggables:s.draggables,droppables:h},impact:m,viewport:a,scrollJumpRequest:i||null,forceShouldAnimate:!i&&null}};var zy=({impact:e,viewport:t,draggables:r,destination:n,forceShouldAnimate:o})=>{const i=e.displaced,a=function(e,t){return e.map((e=>t[e]))}(i.all,r),s=iy({afterDragging:a,destination:n,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:o,last:i});return{...e,displaced:s}},Uy=({impact:e,draggable:t,droppable:r,draggables:n,viewport:o,afterCritical:i})=>{const a=by({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:i});return xy({pageBorderBoxCenter:a,draggable:t,viewport:o})},Vy=({state:e,dimensions:t,viewport:r})=>{"SNAP"!==e.movementMode&&hb();const n=e.impact,o=r||e.viewport,i=t||e.dimensions,{draggables:a,droppables:s}=i,l=a[e.critical.draggable.id],c=Ty(n);c||hb();const u=s[c],d=zy({impact:n,viewport:o,destination:u,draggables:a}),p=Uy({impact:d,draggable:l,droppable:u,draggables:a,viewport:o,afterCritical:e.afterCritical});return Fy({impact:d,clientSelection:p,state:e,dimensions:i,viewport:o})},Hy=({draggable:e,home:t,draggables:r,viewport:n})=>{const o=_y(t.axis,e.displaceBy),i=Hb(t.descriptor.id,r),a=i.indexOf(e);-1===a&&hb();const s=i.slice(a+1),l=s.reduce(((e,t)=>(e[t.descriptor.id]=!0,e)),{}),c={inVirtualList:"virtual"===t.descriptor.mode,displacedBy:o,effected:l};var u;return{impact:{displaced:iy({afterDragging:s,destination:t,displacedBy:o,last:null,viewport:n.frame,forceShouldAnimate:!1}),displacedBy:o,at:{type:"REORDER",destination:(u=e.descriptor,{index:u.index,droppableId:u.droppableId})}},afterCritical:c}},$y=({additions:e,updatedDroppables:t,viewport:r})=>{const n=r.scroll.diff.value;return e.map((e=>{const o=e.descriptor.droppableId,i=(e=>{const t=e.frame;return t||hb(),t})(t[o]).scroll.diff.value,a=(({draggable:e,offset:t,initialWindowScroll:r})=>{const n=ib(e.client,t),o=ab(n,r);return{...e,placeholder:{...e.placeholder,client:n},client:n,page:o}})({draggable:e,offset:_b(n,i),initialWindowScroll:r.scroll.initial});return a}))};const Gy=e=>"SNAP"===e.movementMode,Wy=(e,t,r)=>{const n=((e,t)=>({draggables:e.draggables,droppables:By(e.droppables,t)}))(e.dimensions,t);return!Gy(e)||r?Fy({state:e,dimensions:n}):Vy({state:e,dimensions:n})};function Ky(e){return e.isDragging&&"SNAP"===e.movementMode?{...e,scrollJumpRequest:null}:e}const Yy={phase:"IDLE",completed:null,shouldFlush:!1};var Zy=(e=Yy,t)=>{if("FLUSH"===t.type)return{...Yy,shouldFlush:!0};if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&hb();const{critical:r,clientSelection:n,viewport:o,dimensions:i,movementMode:a}=t.payload,s=i.draggables[r.draggable.id],l=i.droppables[r.droppable.id],c={selection:n,borderBoxCenter:s.client.borderBox.center,offset:Sb},u={client:c,page:{selection:_b(c.selection,o.scroll.initial),borderBoxCenter:_b(c.selection,o.scroll.initial),offset:_b(c.selection,o.scroll.diff.value)}},d=Ub(i.droppables).every((e=>!e.isFixedOnPage)),{impact:p,afterCritical:f}=Hy({draggable:s,home:l,draggables:i.draggables,viewport:o});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:a,dimensions:i,initial:u,current:u,isWindowScrollAllowed:d,impact:p,afterCritical:f,onLiftImpact:p,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&hb();return{...e,phase:"COLLECTING"}}if("PUBLISH_WHILE_DRAGGING"===t.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&hb(),(({state:e,published:t})=>{const r=t.modified.map((t=>{const r=e.dimensions.droppables[t.droppableId];return Bb(r,t.scroll)})),n={...e.dimensions.droppables,...Fb(r)},o=zb($y({additions:t.additions,updatedDroppables:n,viewport:e.viewport})),i={...e.dimensions.draggables,...o};t.removals.forEach((e=>{delete i[e]}));const a={droppables:n,draggables:i},s=Ty(e.impact),l=s?a.droppables[s]:null,c=a.draggables[e.critical.draggable.id],u=a.droppables[e.critical.droppable.id],{impact:d,afterCritical:p}=Hy({draggable:c,home:u,draggables:i,viewport:e.viewport}),f=l&&l.isCombineEnabled?e.impact:d,m=My({pageOffset:e.current.page.offset,draggable:a.draggables[e.critical.draggable.id],draggables:a.draggables,droppables:a.droppables,previousImpact:f,viewport:e.viewport,afterCritical:p}),h={...e,phase:"DRAGGING",impact:m,onLiftImpact:d,dimensions:a,afterCritical:p,forceShouldAnimate:!1};return"COLLECTING"===e.phase?h:{...h,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}})({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;Cy(e)||hb();const{client:r}=t.payload;return Ob(r,e.current.client.selection)?e:Fy({state:e,clientSelection:r,impact:Gy(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return Ky(e);if("COLLECTING"===e.phase)return Ky(e);Cy(e)||hb();const{id:r,newScroll:n}=t.payload,o=e.dimensions.droppables[r];if(!o)return e;const i=Bb(o,n);return Wy(e,i,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;Cy(e)||hb();const{id:r,isEnabled:n}=t.payload,o=e.dimensions.droppables[r];o||hb(),o.isEnabled===n&&hb();const i={...o,isEnabled:n};return Wy(e,i,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;Cy(e)||hb();const{id:r,isCombineEnabled:n}=t.payload,o=e.dimensions.droppables[r];o||hb(),o.isCombineEnabled===n&&hb();const i={...o,isCombineEnabled:n};return Wy(e,i,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;Cy(e)||hb(),e.isWindowScrollAllowed||hb();const r=t.payload.newScroll;if(Ob(e.viewport.scroll.current,r))return Ky(e);const n=yy(e.viewport,r);return Gy(e)?Vy({state:e,viewport:n}):Fy({state:e,viewport:n})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!Cy(e))return e;const r=t.payload.maxScroll;if(Ob(r,e.viewport.scroll.max))return e;const n={...e.viewport,scroll:{...e.viewport.scroll,max:r}};return{...e,viewport:n}}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&hb();const r=Iy({state:e,type:t.type});return r?Fy({state:e,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){const r=t.payload.reason;"COLLECTING"!==e.phase&&hb();return{...e,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if("DROP_ANIMATE"===t.type){const{completed:r,dropDuration:n,newHomeClientOffset:o}=t.payload;"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&hb();return{phase:"DROP_ANIMATING",completed:r,dropDuration:n,newHomeClientOffset:o,dimensions:e.dimensions}}if("DROP_COMPLETE"===t.type){const{completed:e}=t.payload;return{phase:"IDLE",completed:e,shouldFlush:!1}}return e};function Jy(e,t){return e instanceof Object&&"type"in e&&e.type===t}const Xy=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),Qy=()=>({type:"COLLECTION_STARTING",payload:null}),ev=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),tv=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),rv=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),nv=e=>({type:"MOVE",payload:e}),ov=()=>({type:"MOVE_UP",payload:null}),iv=()=>({type:"MOVE_DOWN",payload:null}),av=()=>({type:"MOVE_RIGHT",payload:null}),sv=()=>({type:"MOVE_LEFT",payload:null}),lv=e=>({type:"DROP_COMPLETE",payload:e}),cv=e=>({type:"DROP",payload:e}),uv=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});const dv="cubic-bezier(.2,1,.1,1)",pv={drop:0,combining:.7},fv={drop:.75},mv={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},hv=`${mv.outOfTheWay}s ${"cubic-bezier(0.2, 0, 0, 1)"}`,gv={fluid:`opacity ${hv}`,snap:`transform ${hv}, opacity ${hv}`,drop:e=>{const t=`${e}s ${dv}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${hv}`,placeholder:`height ${hv}, width ${hv}, margin ${hv}`},bv=e=>Ob(e,Sb)?void 0:`translate(${e.x}px, ${e.y}px)`,yv=bv,vv=(e,t)=>{const r=bv(e);if(r)return t?`${r} scale(${fv.drop})`:r},{minDropTime:xv,maxDropTime:wv}=mv,Ev=wv-xv;const jv=({getState:e,dispatch:t})=>r=>n=>{if(!Jy(n,"DROP"))return void r(n);const o=e(),i=n.payload.reason;if("COLLECTING"===o.phase)return void t((e=>({type:"DROP_PENDING",payload:e}))({reason:i}));if("IDLE"===o.phase)return;"DROP_PENDING"===o.phase&&o.isWaiting&&hb(),"DRAGGING"!==o.phase&&"DROP_PENDING"!==o.phase&&hb();const a=o.critical,s=o.dimensions,l=s.draggables[o.critical.draggable.id],{impact:c,didDropInsideDroppable:u}=(({draggables:e,reason:t,lastImpact:r,home:n,viewport:o,onLiftImpact:i})=>{if(!r.at||"DROP"!==t)return{impact:zy({draggables:e,impact:i,destination:n,viewport:o,forceShouldAnimate:!0}),didDropInsideDroppable:!1};return"REORDER"===r.at.type?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:Zb},didDropInsideDroppable:!0}})({reason:i,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),d=u?$b(c):null,p=u?Gb(c):null,f={index:a.draggable.index,droppableId:a.droppable.id},m={draggableId:l.descriptor.id,type:l.descriptor.type,source:f,reason:i,mode:o.movementMode,destination:d,combine:p},h=(({impact:e,draggable:t,dimensions:r,viewport:n,afterCritical:o})=>{const{draggables:i,droppables:a}=r,s=Ty(e),l=s?a[s]:null,c=a[t.descriptor.droppableId],u=Uy({impact:e,draggable:t,draggables:i,afterCritical:o,droppable:l||c,viewport:n});return kb(u,t.client.borderBox.center)})({impact:c,draggable:l,dimensions:s,viewport:o.viewport,afterCritical:o.afterCritical}),g={critical:o.critical,afterCritical:o.afterCritical,result:m,impact:c};if(!(!Ob(o.current.client.offset,h)||Boolean(m.combine)))return void t(lv({completed:g}));const b=(({current:e,destination:t,reason:r})=>{const n=Ib(e,t);if(n<=0)return xv;if(n>=1500)return wv;const o=xv+Ev*(n/1500);return Number(("CANCEL"===r?.6*o:o).toFixed(2))})({current:o.current.client.offset,destination:h,reason:i});t((e=>({type:"DROP_ANIMATE",payload:e}))({newHomeClientOffset:h,dropDuration:b,completed:g}))};var Nv=()=>({x:window.pageXOffset,y:window.pageYOffset});function Sv({onWindowScroll:e}){const t=cb((function(){e(Nv())})),r=(n=t,{eventName:"scroll",options:{passive:!0,capture:!1},fn:e=>{e.target!==window&&e.target!==window.document||n()}});var n;let o=pb;function i(){return o!==pb}return{start:function(){i()&&hb(),o=fb(window,[r])},stop:function(){i()||hb(),t.cancel(),o(),o=pb},isActive:i}}const _v=e=>{const t=Sv({onWindowScroll:t=>{e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:t}})}});return e=>r=>{!t.isActive()&&Jy(r,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&(e=>Jy(e,"DROP_COMPLETE")||Jy(e,"DROP_ANIMATE")||Jy(e,"FLUSH"))(r)&&t.stop(),e(r)}};var kv=()=>{const e=[];return{add:t=>{const r=setTimeout((()=>(t=>{const r=e.findIndex((e=>e.timerId===t));-1===r&&hb();const[n]=e.splice(r,1);n.callback()})(r))),n={timerId:r,callback:t};e.push(n)},flush:()=>{if(!e.length)return;const t=[...e];e.length=0,t.forEach((e=>{clearTimeout(e.timerId),e.callback()}))}}};const Ov=(e,t)=>{t()},Pv=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function Tv(e,t,r,n){if(!e)return void r(n(t));const o=(e=>{let t=!1,r=!1;const n=setTimeout((()=>{r=!0})),o=o=>{t||r||(t=!0,e(o),clearTimeout(n))};return o.wasCalled=()=>t,o})(r);e(t,{announce:o}),o.wasCalled()||r(n(t))}var Iv=(e,t)=>{const r=((e,t)=>{const r=kv();let n=null;const o=r=>{n||hb(),n=null,Ov(0,(()=>Tv(e().onDragEnd,r,t,wb.onDragEnd)))};return{beforeCapture:(t,r)=>{n&&hb(),Ov(0,(()=>{const n=e().onBeforeCapture;n&&n({draggableId:t,mode:r})}))},beforeStart:(t,r)=>{n&&hb(),Ov(0,(()=>{const n=e().onBeforeDragStart;n&&n(Pv(t,r))}))},start:(o,i)=>{n&&hb();const a=Pv(o,i);n={mode:i,lastCritical:o,lastLocation:a.source,lastCombine:null},r.add((()=>{Ov(0,(()=>Tv(e().onDragStart,a,t,wb.onDragStart)))}))},update:(o,i)=>{const a=$b(i),s=Gb(i);n||hb();const l=!((e,t)=>{if(e===t)return!0;const r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,n=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&n})(o,n.lastCritical);l&&(n.lastCritical=o);const c=(d=a,!(null==(u=n.lastLocation)&&null==d||null!=u&&null!=d&&u.droppableId===d.droppableId&&u.index===d.index));var u,d;c&&(n.lastLocation=a);const p=!((e,t)=>null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId)(n.lastCombine,s);if(p&&(n.lastCombine=s),!l&&!c&&!p)return;const f={...Pv(o,n.mode),combine:s,destination:a};r.add((()=>{Ov(0,(()=>Tv(e().onDragUpdate,f,t,wb.onDragUpdate)))}))},flush:()=>{n||hb(),r.flush()},drop:o,abort:()=>{if(!n)return;const e={...Pv(n.lastCritical,n.mode),combine:null,destination:null,reason:"CANCEL"};o(e)}}})(e,t);return e=>t=>n=>{if(Jy(n,"BEFORE_INITIAL_CAPTURE"))return void r.beforeCapture(n.payload.draggableId,n.payload.movementMode);if(Jy(n,"INITIAL_PUBLISH")){const e=n.payload.critical;return r.beforeStart(e,n.payload.movementMode),t(n),void r.start(e,n.payload.movementMode)}if(Jy(n,"DROP_COMPLETE")){const e=n.payload.completed.result;return r.flush(),t(n),void r.drop(e)}if(t(n),Jy(n,"FLUSH"))return void r.abort();const o=e.getState();"DRAGGING"===o.phase&&r.update(o.critical,o.impact)}};const Cv=e=>t=>r=>{if(!Jy(r,"DROP_ANIMATION_FINISHED"))return void t(r);const n=e.getState();"DROP_ANIMATING"!==n.phase&&hb(),e.dispatch(lv({completed:n.completed}))},Av=e=>{let t=null,r=null;return n=>o=>{if((Jy(o,"FLUSH")||Jy(o,"DROP_COMPLETE")||Jy(o,"DROP_ANIMATION_FINISHED"))&&(r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)),n(o),!Jy(o,"DROP_ANIMATE"))return;const i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};r=requestAnimationFrame((()=>{r=null,t=fb(window,[i])}))}};var Dv=e=>t=>r=>n=>{if((e=>Jy(e,"DROP_COMPLETE")||Jy(e,"DROP_ANIMATE")||Jy(e,"FLUSH"))(n))return e.stop(),void r(n);if(Jy(n,"INITIAL_PUBLISH")){r(n);const o=t.getState();return"DRAGGING"!==o.phase&&hb(),void e.start(o)}r(n),e.scroll(t.getState())};const Lv=e=>t=>r=>{if(t(r),!Jy(r,"PUBLISH_WHILE_DRAGGING"))return;const n=e.getState();"DROP_PENDING"===n.phase&&(n.isWaiting||e.dispatch(cv({reason:n.reason})))},Rv=eg;var Mv=({dimensionMarshal:e,focusMarshal:t,styleMarshal:r,getResponders:n,announce:o,autoScroller:i})=>{return Jh(Zy,Rv(function(...e){return t=>(r,n)=>{const o=t(r,n);let i=()=>{throw new Error(Wh(15))};const a={getState:o.getState,dispatch:(e,...t)=>i(e,...t)},s=e.map((e=>e(a)));return i=eg(...s)(o.dispatch),{...o,dispatch:i}}}((a=r,()=>e=>t=>{Jy(t,"INITIAL_PUBLISH")&&a.dragging(),Jy(t,"DROP_ANIMATE")&&a.dropping(t.payload.completed.result.reason),(Jy(t,"FLUSH")||Jy(t,"DROP_COMPLETE"))&&a.resting(),e(t)}),(e=>()=>t=>r=>{(Jy(r,"DROP_COMPLETE")||Jy(r,"FLUSH")||Jy(r,"DROP_ANIMATE"))&&e.stopPublishing(),t(r)})(e),(e=>({getState:t,dispatch:r})=>n=>o=>{if(!Jy(o,"LIFT"))return void n(o);const{id:i,clientSelection:a,movementMode:s}=o.payload,l=t();"DROP_ANIMATING"===l.phase&&r(lv({completed:l.completed})),"IDLE"!==t().phase&&hb(),r({type:"FLUSH",payload:null}),r({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:i,movementMode:s}});const c={draggableId:i,scrollOptions:{shouldPublishImmediately:"SNAP"===s}},{critical:u,dimensions:d,viewport:p}=e.startPublishing(c);r({type:"INITIAL_PUBLISH",payload:{critical:u,dimensions:d,clientSelection:a,movementMode:s,viewport:p}})})(e),jv,Cv,Av,Lv,Dv(i),_v,(e=>{let t=!1;return()=>r=>n=>{if(Jy(n,"INITIAL_PUBLISH"))return t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),void e.tryRestoreFocusRecorded();if(r(n),t){if(Jy(n,"FLUSH"))return t=!1,void e.tryRestoreFocusRecorded();if(Jy(n,"DROP_COMPLETE")){t=!1;const r=n.payload.completed.result;r.combine&&e.tryShiftRecord(r.draggableId,r.combine.draggableId),e.tryRestoreFocusRecorded()}}}})(t),Iv(n,o))));var a};var Bv=({scrollHeight:e,scrollWidth:t,height:r,width:n})=>{const o=kb({x:t,y:e},{x:n,y:r});return{x:Math.max(0,o.x),y:Math.max(0,o.y)}},qv=()=>{const e=document.documentElement;return e||hb(),e},Fv=()=>{const e=qv();return Bv({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},zv=({critical:e,scrollOptions:t,registry:r})=>{const n=(()=>{const e=Nv(),t=Fv(),r=e.y,n=e.x,o=qv(),i=o.clientWidth,a=o.clientHeight;return{frame:Qg({top:r,left:n,right:n+i,bottom:r+a}),scroll:{initial:e,current:e,max:t,diff:{value:Sb,displacement:Sb}}}})(),o=n.scroll.current,i=e.droppable,a=r.droppable.getAllByType(i.type).map((e=>e.callbacks.getDimensionAndWatchScroll(o,t))),s=r.draggable.getAllByType(e.draggable.type).map((e=>e.getDimension(o)));return{dimensions:{draggables:zb(s),droppables:Fb(a)},critical:e,viewport:n}};function Uv(e,t,r){if(r.descriptor.id===t.id)return!1;if(r.descriptor.type!==t.type)return!1;return"virtual"===e.droppable.getById(r.descriptor.droppableId).descriptor.mode}var Vv=(e,t)=>{let r=null;const n=function({registry:e,callbacks:t}){let r={additions:{},removals:{},modified:{}},n=null;const o=()=>{n||(t.collectionStarting(),n=requestAnimationFrame((()=>{n=null;const{additions:o,removals:i,modified:a}=r,s=Object.keys(o).map((t=>e.draggable.getById(t).getDimension(Sb))).sort(((e,t)=>e.descriptor.index-t.descriptor.index)),l=Object.keys(a).map((t=>({droppableId:t,scroll:e.droppable.getById(t).callbacks.getScrollWhileDragging()}))),c={additions:s,removals:Object.keys(i),modified:l};r={additions:{},removals:{},modified:{}},t.publish(c)})))};return{add:e=>{const t=e.descriptor.id;r.additions[t]=e,r.modified[e.descriptor.droppableId]=!0,r.removals[t]&&delete r.removals[t],o()},remove:e=>{const t=e.descriptor;r.removals[t.id]=!0,r.modified[t.droppableId]=!0,r.additions[t.id]&&delete r.additions[t.id],o()},stop:()=>{n&&(cancelAnimationFrame(n),n=null,r={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),o=t=>{r||hb();const o=r.critical.draggable;"ADDITION"===t.type&&Uv(e,o,t.value)&&n.add(t.value),"REMOVAL"===t.type&&Uv(e,o,t.value)&&n.remove(t.value)};return{updateDroppableIsEnabled:(n,o)=>{e.droppable.exists(n)||hb(),r&&t.updateDroppableIsEnabled({id:n,isEnabled:o})},updateDroppableIsCombineEnabled:(n,o)=>{r&&(e.droppable.exists(n)||hb(),t.updateDroppableIsCombineEnabled({id:n,isCombineEnabled:o}))},scrollDroppable:(t,n)=>{r&&e.droppable.getById(t).callbacks.scroll(n)},updateDroppableScroll:(n,o)=>{r&&(e.droppable.exists(n)||hb(),t.updateDroppableScroll({id:n,newScroll:o}))},startPublishing:t=>{r&&hb();const n=e.draggable.getById(t.draggableId),i=e.droppable.getById(n.descriptor.droppableId),a={draggable:n.descriptor,droppable:i.descriptor},s=e.subscribe(o);return r={critical:a,unsubscribe:s},zv({critical:a,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:()=>{if(!r)return;n.stop();const t=r.critical.droppable;e.droppable.getAllByType(t.type).forEach((e=>e.callbacks.dragStopped())),r.unsubscribe(),r=null}}},Hv=(e,t)=>"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&(e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason),$v=e=>{window.scrollBy(e.x,e.y)};const Gv=qb((e=>Ub(e).filter((e=>!!e.isEnabled&&!!e.frame))));var Wv=({center:e,destination:t,droppables:r})=>{if(t){const e=r[t];return e.frame?e:null}const n=((e,t)=>Gv(t).find((t=>(t.frame||hb(),Ay(t.frame.pageMarginBox)(e))))||null)(e,r);return n};const Kv={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Yv=({startOfRange:e,endOfRange:t,current:r})=>{const n=t-e;if(0===n)return 0;return(r-e)/n},Zv=({distanceToEdge:e,thresholds:t,dragStartTime:r,shouldUseTimeDampening:n,getAutoScrollerOptions:o})=>{const i=((e,t,r=()=>Kv)=>{const n=r();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return n.maxPixelScroll;if(e===t.startScrollingFrom)return 1;const o=1-Yv({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),i=n.maxPixelScroll*n.ease(o);return Math.ceil(i)})(e,t,o);return 0===i?0:n?Math.max(((e,t,r)=>{const n=r(),o=n.durationDampening.accelerateAt,i=n.durationDampening.stopDampeningAt,a=t,s=i,l=Date.now()-a;if(l>=i)return e;if(l<o)return 1;const c=Yv({startOfRange:o,endOfRange:s,current:l}),u=e*n.ease(c);return Math.ceil(u)})(i,r,o),1):i},Jv=({container:e,distanceToEdges:t,dragStartTime:r,axis:n,shouldUseTimeDampening:o,getAutoScrollerOptions:i})=>{const a=((e,t,r=()=>Kv)=>{const n=r();return{startScrollingFrom:e[t.size]*n.startFromPercentage,maxScrollValueAt:e[t.size]*n.maxScrollAtPercentage}})(e,n,i);return t[n.end]<t[n.start]?Zv({distanceToEdge:t[n.end],thresholds:a,dragStartTime:r,shouldUseTimeDampening:o,getAutoScrollerOptions:i}):-1*Zv({distanceToEdge:t[n.start],thresholds:a,dragStartTime:r,shouldUseTimeDampening:o,getAutoScrollerOptions:i})};const Xv=Ab((e=>0===e?0:e));var Qv=({dragStartTime:e,container:t,subject:r,center:n,shouldUseTimeDampening:o,getAutoScrollerOptions:i})=>{const a={top:n.y-t.top,right:t.right-n.x,bottom:t.bottom-n.y,left:n.x-t.left},s=Jv({container:t,distanceToEdges:a,dragStartTime:e,axis:ty,shouldUseTimeDampening:o,getAutoScrollerOptions:i}),l=Jv({container:t,distanceToEdges:a,dragStartTime:e,axis:ry,shouldUseTimeDampening:o,getAutoScrollerOptions:i}),c=Xv({x:l,y:s});if(Ob(c,Sb))return null;const u=(({container:e,subject:t,proposedScroll:r})=>{const n=t.height>e.height,o=t.width>e.width;return o||n?o&&n?null:{x:o?0:r.x,y:n?0:r.y}:r})({container:t,subject:r,proposedScroll:c});return u?Ob(u,Sb)?null:u:null};const ex=Ab((e=>0===e?0:e>0?1:-1)),tx=(()=>{const e=(e,t)=>e<0?e:e>t?e-t:0;return({current:t,max:r,change:n})=>{const o=_b(t,n),i={x:e(o.x,r.x),y:e(o.y,r.y)};return Ob(i,Sb)?null:i}})(),rx=({max:e,current:t,change:r})=>{const n={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},o=ex(r),i=tx({max:n,current:t,change:o});return!i||(0!==o.x&&0===i.x||0!==o.y&&0===i.y)},nx=(e,t)=>rx({current:e.scroll.current,max:e.scroll.max,change:t}),ox=(e,t)=>{const r=e.frame;return!!r&&rx({current:r.scroll.current,max:r.scroll.max,change:t})};var ix=({state:e,dragStartTime:t,shouldUseTimeDampening:r,scrollWindow:n,scrollDroppable:o,getAutoScrollerOptions:i})=>{const a=e.current.page.borderBoxCenter,s=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const o=(({viewport:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:o,getAutoScrollerOptions:i})=>{const a=Qv({dragStartTime:n,container:e.frame,subject:t,center:r,shouldUseTimeDampening:o,getAutoScrollerOptions:i});return a&&nx(e,a)?a:null})({dragStartTime:t,viewport:e.viewport,subject:s,center:a,shouldUseTimeDampening:r,getAutoScrollerOptions:i});if(o)return void n(o)}const l=Wv({center:a,destination:Ty(e.impact),droppables:e.dimensions.droppables});if(!l)return;const c=(({droppable:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:o,getAutoScrollerOptions:i})=>{const a=e.frame;if(!a)return null;const s=Qv({dragStartTime:n,container:a.pageMarginBox,subject:t,center:r,shouldUseTimeDampening:o,getAutoScrollerOptions:i});return s&&ox(e,s)?s:null})({dragStartTime:t,droppable:l,subject:s,center:a,shouldUseTimeDampening:r,getAutoScrollerOptions:i});c&&o(l.descriptor.id,c)},ax=({move:e,scrollDroppable:t,scrollWindow:r})=>{const n=(e,r)=>{if(!ox(e,r))return r;const n=((e,t)=>{const r=e.frame;return r&&ox(e,t)?tx({current:r.scroll.current,max:r.scroll.max,change:t}):null})(e,r);if(!n)return t(e.descriptor.id,r),null;const o=kb(r,n);t(e.descriptor.id,o);return kb(r,o)},o=(e,t,n)=>{if(!e)return n;if(!nx(t,n))return n;const o=((e,t)=>{if(!nx(e,t))return null;const r=e.scroll.max,n=e.scroll.current;return tx({current:n,max:r,change:t})})(t,n);if(!o)return r(n),null;const i=kb(n,o);r(i);return kb(n,i)};return t=>{const r=t.scrollJumpRequest;if(!r)return;const i=Ty(t.impact);i||hb();const a=n(t.dimensions.droppables[i],r);if(!a)return;const s=t.viewport,l=o(t.isWindowScrollAllowed,s,a);l&&((t,r)=>{const n=_b(t.current.client.selection,r);e({client:n})})(t,l)}},sx=({scrollDroppable:e,scrollWindow:t,move:r,getAutoScrollerOptions:n})=>{const o=(({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:r=()=>Kv})=>{const n=cb(e),o=cb(t);let i=null;const a=e=>{i||hb();const{shouldUseTimeDampening:t,dragStartTime:a}=i;ix({state:e,scrollWindow:n,scrollDroppable:o,dragStartTime:a,shouldUseTimeDampening:t,getAutoScrollerOptions:r})};return{start:e=>{i&&hb();const t=Date.now();let n=!1;const o=()=>{n=!0};ix({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:o,scrollDroppable:o,getAutoScrollerOptions:r}),i={dragStartTime:t,shouldUseTimeDampening:n},n&&a(e)},stop:()=>{i&&(n.cancel(),o.cancel(),i=null)},scroll:a}})({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:n}),i=ax({move:r,scrollWindow:t,scrollDroppable:e});return{scroll:e=>{n().disabled||"DRAGGING"!==e.phase||("FLUID"!==e.movementMode?e.scrollJumpRequest&&i(e):o.scroll(e))},start:o.start,stop:o.stop}};const lx="data-rfd",cx=(()=>{const e=`${lx}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),ux=(()=>{const e=`${lx}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),dx=(()=>{const e=`${lx}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),px={contextId:`${lx}-scroll-container-context-id`},fx=(e,t)=>e.map((e=>{const r=e.styles[t];return r?`${e.selector} { ${r} }`:""})).join(" ");const mx="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?n.useLayoutEffect:n.useEffect,hx=()=>{const e=document.querySelector("head");return e||hb(),e},gx=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function bx(e,t){const r=jb((()=>(e=>{const t=(r=e,e=>`[${e}="${r}"]`);var r;const n=(()=>{const e="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ";return{selector:t(cx.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:e,dragging:"pointer-events: none;",dropAnimating:e}}})(),o=[(()=>{const e=`\n      transition: ${gv.outOfTheWay};\n    `;return{selector:t(ux.contextId),styles:{dragging:e,dropAnimating:e,userCancel:e}}})(),n,{selector:t(dx.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:fx(o,"always"),resting:fx(o,"resting"),dragging:fx(o,"dragging"),dropAnimating:fx(o,"dropAnimating"),userCancel:fx(o,"userCancel")}})(e)),[e]),o=n.useRef(null),i=n.useRef(null),a=Nb(qb((e=>{const t=i.current;t||hb(),t.textContent=e})),[]),s=Nb((e=>{const t=o.current;t||hb(),t.textContent=e}),[]);mx((()=>{(o.current||i.current)&&hb();const n=gx(t),l=gx(t);return o.current=n,i.current=l,n.setAttribute(`${lx}-always`,e),l.setAttribute(`${lx}-dynamic`,e),hx().appendChild(n),hx().appendChild(l),s(r.always),a(r.resting),()=>{const e=e=>{const t=e.current;t||hb(),hx().removeChild(t),e.current=null};e(o),e(i)}}),[t,s,a,r.always,r.resting,e]);const l=Nb((()=>a(r.dragging)),[a,r.dragging]),c=Nb((e=>{a("DROP"!==e?r.userCancel:r.dropAnimating)}),[a,r.dropAnimating,r.userCancel]),u=Nb((()=>{i.current&&a(r.resting)}),[a,r.resting]);return jb((()=>({dragging:l,dropping:c,resting:u})),[l,c,u])}function yx(e,t){return Array.from(e.querySelectorAll(t))}var vx=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function xx(e){return e instanceof vx(e).HTMLElement}function wx(e){const t=n.useRef({}),r=n.useRef(null),o=n.useRef(null),i=n.useRef(!1),a=Nb((function(e,r){const n={id:e,focus:r};return t.current[e]=n,function(){const r=t.current;r[e]!==n&&delete r[e]}}),[]),s=Nb((function(t){const r=function(e,t){const r=`[${cx.contextId}="${e}"]`,n=yx(document,r);if(!n.length)return null;const o=n.find((e=>e.getAttribute(cx.draggableId)===t));return o&&xx(o)?o:null}(e,t);r&&r!==document.activeElement&&r.focus()}),[e]),l=Nb((function(e,t){r.current===e&&(r.current=t)}),[]),c=Nb((function(){o.current||i.current&&(o.current=requestAnimationFrame((()=>{o.current=null;const e=r.current;e&&s(e)})))}),[s]),u=Nb((function(e){r.current=null;const t=document.activeElement;t&&t.getAttribute(cx.draggableId)===e&&(r.current=e)}),[]);mx((()=>(i.current=!0,function(){i.current=!1;const e=o.current;e&&cancelAnimationFrame(e)})),[]);return jb((()=>({register:a,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:l})),[a,u,c,l])}function Ex(){const e={draggables:{},droppables:{}},t=[];function r(e){t.length&&t.forEach((t=>t(e)))}function n(t){return e.draggables[t]||null}function o(t){return e.droppables[t]||null}return{draggable:{register:t=>{e.draggables[t.descriptor.id]=t,r({type:"ADDITION",value:t})},update:(t,r)=>{const n=e.draggables[r.descriptor.id];n&&n.uniqueId===t.uniqueId&&(delete e.draggables[r.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:t=>{const o=t.descriptor.id,i=n(o);i&&t.uniqueId===i.uniqueId&&(delete e.draggables[o],e.droppables[t.descriptor.droppableId]&&r({type:"REMOVAL",value:t}))},getById:function(e){const t=n(e);return t||hb(),t},findById:n,exists:e=>Boolean(n(e)),getAllByType:t=>Object.values(e.draggables).filter((e=>e.descriptor.type===t))},droppable:{register:t=>{e.droppables[t.descriptor.id]=t},unregister:t=>{const r=o(t.descriptor.id);r&&t.uniqueId===r.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){const t=o(e);return t||hb(),t},findById:o,exists:e=>Boolean(o(e)),getAllByType:t=>Object.values(e.droppables).filter((e=>e.descriptor.type===t))},subscribe:function(e){return t.push(e),function(){const r=t.indexOf(e);-1!==r&&t.splice(r,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var jx=o.createContext(null),Nx=()=>{const e=document.body;return e||hb(),e};const Sx={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};const _x={separator:"::"};function kx(e,t=_x){const r=o.useId();return jb((()=>`${e}${t.separator}${r}`),[t.separator,e,r])}var Ox=o.createContext(null);function Px(e){const t=n.useRef(e);return n.useEffect((()=>{t.current=e})),t}function Tx(e){return"IDLE"!==e.phase&&"DROP_ANIMATING"!==e.phase&&e.isDragging}const Ix=9,Cx=13,Ax=33,Dx=34,Lx=35,Rx=36,Mx={[Cx]:!0,[Ix]:!0};var Bx=e=>{Mx[e.keyCode]&&e.preventDefault()};const qx=(()=>{const e="visibilitychange";if("undefined"==typeof document)return e;return[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find((e=>`on${e}`in document))||e})();const Fx={type:"IDLE"};function zx({cancel:e,completed:t,getPhase:r,setPhase:n}){return[{eventName:"mousemove",fn:e=>{const{button:t,clientX:o,clientY:i}=e;if(0!==t)return;const a={x:o,y:i},s=r();if("DRAGGING"===s.type)return e.preventDefault(),void s.actions.move(a);"PENDING"!==s.type&&hb();const l=s.point;if(c=l,u=a,!(Math.abs(u.x-c.x)>=5||Math.abs(u.y-c.y)>=5))return;var c,u;e.preventDefault();const d=s.actions.fluidLift(a);n({type:"DRAGGING",actions:d})}},{eventName:"mouseup",fn:n=>{const o=r();"DRAGGING"===o.type?(n.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()):e()}},{eventName:"mousedown",fn:t=>{"DRAGGING"===r().type&&t.preventDefault(),e()}},{eventName:"keydown",fn:t=>{if("PENDING"!==r().type)return 27===t.keyCode?(t.preventDefault(),void e()):void Bx(t);e()}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{"PENDING"===r().type&&e()}},{eventName:"webkitmouseforcedown",fn:t=>{const n=r();"IDLE"===n.type&&hb(),n.actions.shouldRespectForcePress()?e():t.preventDefault()}},{eventName:qx,fn:e}]}function Ux(){}const Vx={[Dx]:!0,[Ax]:!0,[Rx]:!0,[Lx]:!0};function Hx(e,t){function r(){t(),e.cancel()}return[{eventName:"keydown",fn:n=>27===n.keyCode?(n.preventDefault(),void r()):32===n.keyCode?(n.preventDefault(),t(),void e.drop()):40===n.keyCode?(n.preventDefault(),void e.moveDown()):38===n.keyCode?(n.preventDefault(),void e.moveUp()):39===n.keyCode?(n.preventDefault(),void e.moveRight()):37===n.keyCode?(n.preventDefault(),void e.moveLeft()):void(Vx[n.keyCode]?n.preventDefault():Bx(n))},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:qx,fn:r}]}const $x={type:"IDLE"};const Gx=["input","button","textarea","select","option","optgroup","video","audio"];function Wx(e,t){if(null==t)return!1;if(Gx.includes(t.tagName.toLowerCase()))return!0;const r=t.getAttribute("contenteditable");return"true"===r||""===r||t!==e&&Wx(e,t.parentElement)}function Kx(e,t){const r=t.target;return!!xx(r)&&Wx(e,r)}var Yx=e=>Qg(e.getBoundingClientRect()).center;const Zx=(()=>{const e="matches";if("undefined"==typeof document)return e;return[e,"msMatchesSelector","webkitMatchesSelector"].find((e=>e in Element.prototype))||e})();function Jx(e,t){return null==e?null:e[Zx](t)?e:Jx(e.parentElement,t)}function Xx(e,t){return e.closest?e.closest(t):Jx(e,t)}function Qx(e,t){const r=t.target;if(!((n=r)instanceof vx(n).Element))return null;var n;const o=function(e){return`[${cx.contextId}="${e}"]`}(e),i=Xx(r,o);return i&&xx(i)?i:null}function ew(e){e.preventDefault()}function tw({expected:e,phase:t,isLockActive:r,shouldWarn:n}){return!!r()&&e===t}function rw({lockAPI:e,store:t,registry:r,draggableId:n}){if(e.isClaimed())return!1;const o=r.draggable.findById(n);return!!o&&(!!o.options.isEnabled&&!!Hv(t.getState(),n))}function nw({lockAPI:e,contextId:t,store:r,registry:n,draggableId:o,forceSensorStop:i,sourceEvent:a}){if(!rw({lockAPI:e,store:r,registry:n,draggableId:o}))return null;const s=n.draggable.getById(o),l=function(e,t){const r=`[${ux.contextId}="${e}"]`,n=yx(document,r).find((e=>e.getAttribute(ux.id)===t));return n&&xx(n)?n:null}(t,s.descriptor.id);if(!l)return null;if(a&&!s.options.canDragInteractiveElements&&Kx(l,a))return null;const c=e.claim(i||pb);let u="PRE_DRAG";function d(){return s.options.shouldRespectForcePress}function p(){return e.isActive(c)}const f=function(e,t){tw({expected:e,phase:u,isLockActive:p,shouldWarn:!0})&&r.dispatch(t())}.bind(null,"DRAGGING");function m(t){function n(){e.release(),u="COMPLETED"}function o(e,o={shouldBlockNextClick:!1}){if(t.cleanup(),o.shouldBlockNextClick){const e=fb(window,[{eventName:"click",fn:ew,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(e)}n(),r.dispatch(cv({reason:e}))}return"PRE_DRAG"!==u&&(n(),hb()),r.dispatch((e=>({type:"LIFT",payload:e}))(t.liftActionArgs)),u="DRAGGING",{isActive:()=>tw({expected:"DRAGGING",phase:u,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:d,drop:e=>o("DROP",e),cancel:e=>o("CANCEL",e),...t.actions}}return{isActive:()=>tw({expected:"PRE_DRAG",phase:u,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:d,fluidLift:function(e){const t=cb((e=>{f((()=>nv({client:e})))}));return{...m({liftActionArgs:{id:o,clientSelection:e,movementMode:"FLUID"},cleanup:()=>t.cancel(),actions:{move:t}}),move:t}},snapLift:function(){const e={moveUp:()=>f(ov),moveRight:()=>f(av),moveDown:()=>f(iv),moveLeft:()=>f(sv)};return m({liftActionArgs:{id:o,clientSelection:Yx(l),movementMode:"SNAP"},cleanup:pb,actions:e})},abort:function(){tw({expected:"PRE_DRAG",phase:u,isLockActive:p,shouldWarn:!0})&&e.release()}}}const ow=[function(e){const t=n.useRef(Fx),r=n.useRef(pb),o=jb((()=>({eventName:"mousedown",fn:function(t){if(t.defaultPrevented)return;if(0!==t.button)return;if(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)return;const n=e.findClosestDraggableId(t);if(!n)return;const o=e.tryGetLock(n,s,{sourceEvent:t});if(!o)return;t.preventDefault();const i={x:t.clientX,y:t.clientY};r.current(),u(o,i)}})),[e]),i=jb((()=>({eventName:"webkitmouseforcewillbegin",fn:t=>{if(t.defaultPrevented)return;const r=e.findClosestDraggableId(t);if(!r)return;const n=e.findOptionsForDraggable(r);n&&(n.shouldRespectForcePress||e.canGetLock(r)&&t.preventDefault())}})),[e]),a=Nb((function(){r.current=fb(window,[i,o],{passive:!1,capture:!0})}),[i,o]),s=Nb((()=>{"IDLE"!==t.current.type&&(t.current=Fx,r.current(),a())}),[a]),l=Nb((()=>{const e=t.current;s(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[s]),c=Nb((function(){const e=zx({cancel:l,completed:s,getPhase:()=>t.current,setPhase:e=>{t.current=e}});r.current=fb(window,e,{capture:!0,passive:!1})}),[l,s]),u=Nb((function(e,r){"IDLE"!==t.current.type&&hb(),t.current={type:"PENDING",point:r,actions:e},c()}),[c]);mx((function(){return a(),function(){r.current()}}),[a])},function(e){const t=n.useRef(Ux),r=jb((()=>({eventName:"keydown",fn:function(r){if(r.defaultPrevented)return;if(32!==r.keyCode)return;const n=e.findClosestDraggableId(r);if(!n)return;const i=e.tryGetLock(n,l,{sourceEvent:r});if(!i)return;r.preventDefault();let a=!0;const s=i.snapLift();function l(){a||hb(),a=!1,t.current(),o()}t.current(),t.current=fb(window,Hx(s,l),{capture:!0,passive:!1})}})),[e]),o=Nb((function(){t.current=fb(window,[r],{passive:!1,capture:!0})}),[r]);mx((function(){return o(),function(){t.current()}}),[o])},function(e){const t=n.useRef($x),r=n.useRef(pb),o=Nb((function(){return t.current}),[]),i=Nb((function(e){t.current=e}),[]),a=jb((()=>({eventName:"touchstart",fn:function(t){if(t.defaultPrevented)return;const n=e.findClosestDraggableId(t);if(!n)return;const o=e.tryGetLock(n,l,{sourceEvent:t});if(!o)return;const i=t.touches[0],{clientX:a,clientY:s}=i,c={x:a,y:s};r.current(),p(o,c)}})),[e]),s=Nb((function(){r.current=fb(window,[a],{capture:!0,passive:!1})}),[a]),l=Nb((()=>{const e=t.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),i($x),r.current(),s())}),[s,i]),c=Nb((()=>{const e=t.current;l(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[l]),u=Nb((function(){const e={capture:!0,passive:!1},t={cancel:c,completed:l,getPhase:o},n=fb(window,function({cancel:e,completed:t,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:t=>{const n=r();if("DRAGGING"!==n.type)return void e();n.hasMoved=!0;const{clientX:o,clientY:i}=t.touches[0],a={x:o,y:i};t.preventDefault(),n.actions.move(a)}},{eventName:"touchend",fn:n=>{const o=r();"DRAGGING"===o.type?(n.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),t()):e()}},{eventName:"touchcancel",fn:t=>{"DRAGGING"===r().type?(t.preventDefault(),e()):e()}},{eventName:"touchforcechange",fn:t=>{const n=r();"IDLE"===n.type&&hb();const o=t.touches[0];if(!o)return;if(!(o.force>=.15))return;const i=n.actions.shouldRespectForcePress();if("PENDING"!==n.type)return i?n.hasMoved?void t.preventDefault():void e():void t.preventDefault();i&&e()}},{eventName:qx,fn:e}]}(t),e),i=fb(window,function({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:e=>{e.preventDefault()}},{eventName:"keydown",fn:r=>{"DRAGGING"===t().type?(27===r.keyCode&&r.preventDefault(),e()):e()}},{eventName:qx,fn:e}]}(t),e);r.current=function(){n(),i()}}),[c,o,l]),d=Nb((function(){const e=o();"PENDING"!==e.type&&hb();const t=e.actions.fluidLift(e.point);i({type:"DRAGGING",actions:t,hasMoved:!1})}),[o,i]),p=Nb((function(e,t){"IDLE"!==o().type&&hb();const r=setTimeout(d,120);i({type:"PENDING",point:t,actions:e,longPressTimerId:r}),u()}),[u,o,i,d]);mx((function(){return s(),function(){r.current();const e=o();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),i($x))}}),[o,s,i]),mx((function(){return fb(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])}),[])}];function iw({contextId:e,store:t,registry:r,customSensors:o,enableDefaultSensors:i}){const a=[...i?ow:[],...o||[]],s=n.useState((()=>function(){let e=null;function t(){e||hb(),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){e&&hb();const r={abandon:t};return e=r,r},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}()))[0],l=Nb((function(e,t){Tx(e)&&!Tx(t)&&s.tryAbandon()}),[s]);mx((function(){let e=t.getState();return t.subscribe((()=>{const r=t.getState();l(e,r),e=r}))}),[s,t,l]),mx((()=>s.tryAbandon),[s.tryAbandon]);const c=Nb((e=>rw({lockAPI:s,registry:r,store:t,draggableId:e})),[s,r,t]),u=Nb(((n,o,i)=>nw({lockAPI:s,registry:r,contextId:e,store:t,draggableId:n,forceSensorStop:o||null,sourceEvent:i&&i.sourceEvent?i.sourceEvent:null})),[e,s,r,t]),d=Nb((t=>function(e,t){const r=Qx(e,t);return r?r.getAttribute(cx.draggableId):null}(e,t)),[e]),p=Nb((e=>{const t=r.draggable.findById(e);return t?t.options:null}),[r.draggable]),f=Nb((function(){s.isClaimed()&&(s.tryAbandon(),"IDLE"!==t.getState().phase&&t.dispatch({type:"FLUSH",payload:null}))}),[s,t]),m=Nb((()=>s.isClaimed()),[s]),h=jb((()=>({canGetLock:c,tryGetLock:u,findClosestDraggableId:d,findOptionsForDraggable:p,tryReleaseLock:f,isLockClaimed:m})),[c,u,d,p,f,m]);for(let n=0;n<a.length;n++)a[n](h)}function aw(e){return e.current||hb(),e.current}function sw(e){const{contextId:t,setCallbacks:r,sensors:i,nonce:a,dragHandleUsageInstructions:l}=e,c=n.useRef(null),u=Px(e),d=Nb((()=>(e=>({onBeforeCapture:t=>{s.flushSync((()=>{e.onBeforeCapture&&e.onBeforeCapture(t)}))},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}))(u.current)),[u]),p=Nb((()=>(e=>({...Kv,...e.autoScrollerOptions,durationDampening:{...Kv.durationDampening,...e.autoScrollerOptions}}))(u.current)),[u]),f=function(e){const t=jb((()=>(e=>`rfd-announcement-${e}`)(e)),[e]),r=n.useRef(null);return n.useEffect((function(){const e=document.createElement("div");return r.current=e,e.id=t,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),ub(e.style,Sx),Nx().appendChild(e),function(){setTimeout((function(){const t=Nx();t.contains(e)&&t.removeChild(e),e===r.current&&(r.current=null)}))}}),[t]),Nb((e=>{const t=r.current;t&&(t.textContent=e)}),[])}(t),m=function({contextId:e,text:t}){const r=kx("hidden-text",{separator:"-"}),o=jb((()=>function({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}({contextId:e,uniqueId:r})),[r,e]);return n.useEffect((function(){const e=document.createElement("div");return e.id=o,e.textContent=t,e.style.display="none",Nx().appendChild(e),function(){const t=Nx();t.contains(e)&&t.removeChild(e)}}),[o,t]),o}({contextId:t,text:l}),h=bx(t,a),g=Nb((e=>{aw(c).dispatch(e)}),[]),b=jb((()=>Qh({publishWhileDragging:Xy,updateDroppableScroll:ev,updateDroppableIsEnabled:tv,updateDroppableIsCombineEnabled:rv,collectionStarting:Qy},g)),[g]),y=function(){const e=jb(Ex,[]);return n.useEffect((()=>function(){e.clean()}),[e]),e}(),v=jb((()=>Vv(y,b)),[y,b]),x=jb((()=>sx({scrollWindow:$v,scrollDroppable:v.scrollDroppable,getAutoScrollerOptions:p,...Qh({move:nv},g)})),[v.scrollDroppable,g,p]),w=wx(t),E=jb((()=>Mv({announce:f,autoScroller:x,dimensionMarshal:v,focusMarshal:w,getResponders:d,styleMarshal:h})),[f,x,v,w,d,h]);c.current=E;const j=Nb((()=>{const e=aw(c);"IDLE"!==e.getState().phase&&e.dispatch({type:"FLUSH",payload:null})}),[]),N=Nb((()=>{const e=aw(c).getState();return"DROP_ANIMATING"===e.phase||"IDLE"!==e.phase&&e.isDragging}),[]);r(jb((()=>({isDragging:N,tryAbort:j})),[N,j]));const S=Nb((e=>Hv(aw(c).getState(),e)),[]),_=Nb((()=>Cy(aw(c).getState())),[]),k=jb((()=>({marshal:v,focus:w,contextId:t,canLift:S,isMovementAllowed:_,dragHandleUsageInstructionsId:m,registry:y})),[t,v,m,w,S,_,y]);return iw({contextId:t,store:E,registry:y,customSensors:i||null,enableDefaultSensors:!1!==e.enableDefaultSensors}),n.useEffect((()=>j),[j]),o.createElement(Ox.Provider,{value:k},o.createElement(Jg,{context:jx,store:E},e.children))}function lw(e){const t=o.useId(),r=e.dragHandleUsageInstructions||wb.dragHandleUsageInstructions;return o.createElement(gb,null,(n=>o.createElement(sw,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children)))}const cw=5e3,uw=4500,dw=(e,t)=>t?gv.drop(t.duration):e?gv.snap:gv.fluid,pw=(e,t)=>{if(e)return t?pv.drop:pv.combining};function fw(e){return"DRAGGING"===e.type?function(e){const t=e.dimension.client,{offset:r,combineWith:n,dropping:o}=e,i=Boolean(n),a=(e=>null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode)(e),s=Boolean(o),l=s?vv(r,i):yv(r);return{position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:dw(a,o),transform:l,opacity:pw(i,s),zIndex:s?uw:cw,pointerEvents:"none"}}(e):{transform:yv((t=e).offset),transition:t.shouldAnimateDisplacement?void 0:"none"};var t}function mw(e){const t=kx("draggable"),{descriptor:r,registry:o,getDraggableRef:i,canDragInteractiveElements:a,shouldRespectForcePress:s,isEnabled:l}=e,c=jb((()=>({canDragInteractiveElements:a,shouldRespectForcePress:s,isEnabled:l})),[a,l,s]),u=Nb((e=>{const t=i();return t||hb(),function(e,t,r=Sb){const n=window.getComputedStyle(t),o=t.getBoundingClientRect(),i=sb(o,n),a=ab(i,r);return{descriptor:e,placeholder:{client:i,tagName:t.tagName.toLowerCase(),display:n.display},displaceBy:{x:i.marginBox.width,y:i.marginBox.height},client:i,page:a}}(r,t,e)}),[r,i]),d=jb((()=>({uniqueId:t,descriptor:r,options:c,getDimension:u})),[r,u,c,t]),p=n.useRef(d),f=n.useRef(!0);mx((()=>(o.draggable.register(p.current),()=>o.draggable.unregister(p.current))),[o.draggable]),mx((()=>{if(f.current)return void(f.current=!1);const e=p.current;p.current=d,o.draggable.update(d,e)}),[d,o.draggable])}var hw=o.createContext(null);function gw(e){const t=n.useContext(e);return t||hb(),t}function bw(e){e.preventDefault()}var yw=(e,t)=>e===t,vw=e=>{const{combine:t,destination:r}=e;return r?r.droppableId:t?t.droppableId:null};function xw(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const ww={mapped:{type:"SECONDARY",offset:Sb,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:xw(null)}};const Ew=Zg((()=>{const e=function(){const e=qb(((e,t)=>({x:e,y:t}))),t=qb(((e,t,r=null,n=null,o=null)=>({isDragging:!0,isClone:t,isDropAnimating:Boolean(o),dropAnimation:o,mode:e,draggingOver:r,combineWith:n,combineTargetFor:null}))),r=qb(((e,r,n,o,i=null,a=null,s=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:i,combineWith:a,mode:r,offset:e,dimension:n,forceShouldAnimate:s,snapshot:t(r,o,i,a,null)}})));return(n,o)=>{if(Tx(n)){if(n.critical.draggable.id!==o.draggableId)return null;const t=n.current.client.offset,a=n.dimensions.draggables[o.draggableId],s=Ty(n.impact),l=(i=n.impact).at&&"COMBINE"===i.at.type?i.at.combine.draggableId:null,c=n.forceShouldAnimate;return r(e(t.x,t.y),n.movementMode,a,o.isClone,s,l,c)}var i;if("DROP_ANIMATING"===n.phase){const e=n.completed;if(e.result.draggableId!==o.draggableId)return null;const r=o.isClone,i=n.dimensions.draggables[o.draggableId],a=e.result,s=a.mode,l=vw(a),c=(e=>e.combine?e.combine.draggableId:null)(a),u={duration:n.dropDuration,curve:dv,moveTo:n.newHomeClientOffset,opacity:c?pv.drop:null,scale:c?fv.drop:null};return{mapped:{type:"DRAGGING",offset:n.newHomeClientOffset,dimension:i,dropping:u,draggingOver:l,combineWith:c,mode:s,forceShouldAnimate:null,snapshot:t(s,r,l,c,u)}}}return null}}(),t=function(){const e=qb(((e,t)=>({x:e,y:t}))),t=qb(xw),r=qb(((e,r=null,n)=>({mapped:{type:"SECONDARY",offset:e,combineTargetFor:r,shouldAnimateDisplacement:n,snapshot:t(r)}}))),n=e=>e?r(Sb,e,!0):null,o=(t,o,i,a)=>{const s=i.displaced.visible[t],l=Boolean(a.inVirtualList&&a.effected[t]),c=Gb(i),u=c&&c.draggableId===t?o:null;if(!s){if(!l)return n(u);if(i.displaced.invisible[t])return null;const o=Pb(a.displacedBy.point),s=e(o.x,o.y);return r(s,u,!0)}if(l)return n(u);const d=i.displacedBy.point,p=e(d.x,d.y);return r(p,u,s.shouldAnimate)};return(e,t)=>{if(Tx(e))return e.critical.draggable.id===t.draggableId?null:o(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){const r=e.completed;return r.result.draggableId===t.draggableId?null:o(t.draggableId,r.result.draggableId,r.impact,r.afterCritical)}return null}}();return(r,n)=>e(r,n)||t(r,n)||ww}),{dropAnimationFinished:uv},null,{context:jx,areStatePropsEqual:yw})((e=>{const t=n.useRef(null),r=Nb(((e=null)=>{t.current=e}),[]),i=Nb((()=>t.current),[]),{contextId:a,dragHandleUsageInstructionsId:l,registry:c}=gw(Ox),{type:u,droppableId:d}=gw(hw),p=jb((()=>({id:e.draggableId,index:e.index,type:u,droppableId:d})),[e.draggableId,e.index,u,d]),{children:f,draggableId:m,isEnabled:h,shouldRespectForcePress:g,canDragInteractiveElements:b,isClone:y,mapped:v,dropAnimationFinished:x}=e;if(!y){mw(jb((()=>({descriptor:p,registry:c,getDraggableRef:i,canDragInteractiveElements:b,shouldRespectForcePress:g,isEnabled:h})),[p,c,i,b,g,h]))}const w=jb((()=>h?{tabIndex:0,role:"button","aria-describedby":l,"data-rfd-drag-handle-draggable-id":m,"data-rfd-drag-handle-context-id":a,draggable:!1,onDragStart:bw}:null),[a,l,m,h]),E=Nb((e=>{"DRAGGING"===v.type&&v.dropping&&"transform"===e.propertyName&&s.flushSync(x)}),[x,v]),j=jb((()=>{const e=fw(v),t="DRAGGING"===v.type&&v.dropping?E:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":a,"data-rfd-draggable-id":m,style:e,onTransitionEnd:t},dragHandleProps:w}}),[a,w,m,v,E,r]),N=jb((()=>({draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}})),[p.droppableId,p.id,p.index,p.type]);return o.createElement(o.Fragment,null,f(j,v.snapshot,N))}));function jw(e){return gw(hw).isUsingCloneFor!==e.draggableId||e.isClone?o.createElement(Ew,e):null}function Nw(e){const t="boolean"!=typeof e.isDragDisabled||!e.isDragDisabled,r=Boolean(e.disableInteractiveElementBlocking),n=Boolean(e.shouldRespectForcePress);return o.createElement(jw,ub({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}const Sw=e=>t=>e===t,_w=Sw("scroll"),kw=Sw("auto"),Ow=(e,t)=>t(e.overflowX)||t(e.overflowY),Pw=e=>null==e||e===document.body||e===document.documentElement?null:(e=>{const t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return Ow(r,_w)||Ow(r,kw)})(e)?e:Pw(e.parentElement);var Tw=e=>({x:e.scrollLeft,y:e.scrollTop});const Iw=e=>{if(!e)return!1;return"fixed"===window.getComputedStyle(e).position||Iw(e.parentElement)};var Cw=({ref:e,descriptor:t,env:r,windowScroll:n,direction:o,isDropDisabled:i,isCombineEnabled:a,shouldClipSubject:s})=>{const l=r.closestScrollable,c=((e,t)=>{const r=lb(e);if(!t)return r;if(e!==t)return r;const n=r.paddingBox.top-t.scrollTop,o=r.paddingBox.left-t.scrollLeft,i=n+t.scrollHeight,a=o+t.scrollWidth,s=eb({top:n,right:a,bottom:i,left:o},r.border);return nb({borderBox:s,margin:r.margin,border:r.border,padding:r.padding})})(e,l),u=ab(c,n),d=(()=>{if(!l)return null;const e=lb(l),t={scrollHeight:l.scrollHeight,scrollWidth:l.scrollWidth};return{client:e,page:ab(e,n),scroll:Tw(l),scrollSize:t,shouldClipSubject:s}})(),p=(({descriptor:e,isEnabled:t,isCombineEnabled:r,isFixedOnPage:n,direction:o,client:i,page:a,closest:s})=>{const l=(()=>{if(!s)return null;const{scrollSize:e,client:t}=s,r=Bv({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:s.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:s.shouldClipSubject,scroll:{initial:s.scroll,current:s.scroll,max:r,diff:{value:Sb,displacement:Sb}}}})(),c="vertical"===o?ty:ry;return{descriptor:e,isCombineEnabled:r,isFixedOnPage:n,axis:c,isEnabled:t,client:i,page:a,frame:l,subject:Mb({page:a,withPlaceholder:null,axis:c,frame:l})}})({descriptor:t,isEnabled:!i,isCombineEnabled:a,isFixedOnPage:r.isFixedOnPage,direction:o,client:c,page:u,closest:d});return p};const Aw={passive:!1},Dw={passive:!0};var Lw=e=>e.shouldPublishImmediately?Aw:Dw;const Rw=e=>e&&e.env.closestScrollable||null;function Mw(e){const t=n.useRef(null),r=gw(Ox),o=kx("droppable"),{registry:i,marshal:a}=r,s=Px(e),l=jb((()=>({id:e.droppableId,type:e.type,mode:e.mode})),[e.droppableId,e.mode,e.type]),c=n.useRef(l),u=jb((()=>qb(((e,r)=>{t.current||hb();const n={x:e,y:r};a.updateDroppableScroll(l.id,n)}))),[l.id,a]),d=Nb((()=>{const e=t.current;return e&&e.env.closestScrollable?Tw(e.env.closestScrollable):Sb}),[]),p=Nb((()=>{const e=d();u(e.x,e.y)}),[d,u]),f=jb((()=>cb(p)),[p]),m=Nb((()=>{const e=t.current,r=Rw(e);e&&r||hb();e.scrollOptions.shouldPublishImmediately?p():f()}),[f,p]),h=Nb(((e,n)=>{t.current&&hb();const o=s.current,i=o.getDroppableRef();i||hb();const a={closestScrollable:Pw(c=i),isFixedOnPage:Iw(c)};var c;const u={ref:i,descriptor:l,env:a,scrollOptions:n};t.current=u;const d=Cw({ref:i,descriptor:l,env:a,windowScroll:e,direction:o.direction,isDropDisabled:o.isDropDisabled,isCombineEnabled:o.isCombineEnabled,shouldClipSubject:!o.ignoreContainerClipping}),p=a.closestScrollable;return p&&(p.setAttribute(px.contextId,r.contextId),p.addEventListener("scroll",m,Lw(u.scrollOptions))),d}),[r.contextId,l,m,s]),g=Nb((()=>{const e=t.current,r=Rw(e);return e&&r||hb(),Tw(r)}),[]),b=Nb((()=>{const e=t.current;e||hb();const r=Rw(e);t.current=null,r&&(f.cancel(),r.removeAttribute(px.contextId),r.removeEventListener("scroll",m,Lw(e.scrollOptions)))}),[m,f]),y=Nb((e=>{const r=t.current;r||hb();const n=Rw(r);n||hb(),n.scrollTop+=e.y,n.scrollLeft+=e.x}),[]),v=jb((()=>({getDimensionAndWatchScroll:h,getScrollWhileDragging:g,dragStopped:b,scroll:y})),[b,h,g,y]),x=jb((()=>({uniqueId:o,descriptor:l,callbacks:v})),[v,l,o]);mx((()=>(c.current=x.descriptor,i.droppable.register(x),()=>{t.current&&b(),i.droppable.unregister(x)})),[v,l,b,x,a,i.droppable]),mx((()=>{t.current&&a.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)}),[e.isDropDisabled,a]),mx((()=>{t.current&&a.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)}),[e.isCombineEnabled,a])}function Bw(){}const qw={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},Fw=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>{const n=(({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>e||"close"===r?qw:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin})({isAnimatingOpenOnMount:e,placeholder:t,animate:r});return{display:t.display,boxSizing:"border-box",width:n.width,height:n.height,marginTop:n.margin.top,marginRight:n.margin.right,marginBottom:n.margin.bottom,marginLeft:n.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==r?gv.placeholder:null}};var zw=o.memo((e=>{const t=n.useRef(null),r=Nb((()=>{t.current&&(clearTimeout(t.current),t.current=null)}),[]),{animate:i,onTransitionEnd:a,onClose:s,contextId:l}=e,[c,u]=n.useState("open"===e.animate);n.useEffect((()=>c?"open"!==i?(r(),u(!1),Bw):t.current?Bw:(t.current=setTimeout((()=>{t.current=null,u(!1)})),r):Bw),[i,c,r]);const d=Nb((e=>{"height"===e.propertyName&&(a(),"close"===i&&s())}),[i,s,a]),p=Fw({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return o.createElement(e.placeholder.tagName,{style:p,"data-rfd-placeholder-context-id":l,onTransitionEnd:d,ref:e.innerRef})}));class Uw extends o.PureComponent{constructor(...e){super(...e),this.state={isVisible:Boolean(this.props.on),data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{"close"===this.state.animate&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}}const Vw={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||hb(),document.body}},Hw=e=>{let t,r={...e};for(t in Vw)void 0===e[t]&&(r={...r,[t]:Vw[t]});return r},$w=(e,t)=>e===t.droppable.type,Gw=(e,t)=>t.draggables[e.draggable.id],Ww=Zg((()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},r=qb((e=>({draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}))),n=qb(((n,o,i,a,s,l)=>{const c=s.descriptor.id;if(s.descriptor.droppableId===n){const e=l?{render:l,dragging:r(s.descriptor)}:null,t={isDraggingOver:i,draggingOverWith:i?c:null,draggingFromThisWith:c,isUsingPlaceholder:!0};return{placeholder:s.placeholder,shouldAnimatePlaceholder:!1,snapshot:t,useClone:e}}if(!o)return t;if(!a)return e;const u={isDraggingOver:i,draggingOverWith:c,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:s.placeholder,shouldAnimatePlaceholder:!0,snapshot:u,useClone:null}}));return(r,o)=>{const i=Hw(o),a=i.droppableId,s=i.type,l=!i.isDropDisabled,c=i.renderClone;if(Tx(r)){const e=r.critical;if(!$w(s,e))return t;const o=Gw(e,r.dimensions),i=Ty(r.impact)===a;return n(a,l,i,i,o,c)}if("DROP_ANIMATING"===r.phase){const e=r.completed;if(!$w(s,e.critical))return t;const o=Gw(e.critical,r.dimensions);return n(a,l,vw(e.result)===a,Ty(e.impact)===a,o,c)}if("IDLE"===r.phase&&r.completed&&!r.shouldFlush){const n=r.completed;if(!$w(s,n.critical))return t;const o=Ty(n.impact)===a,i=Boolean(n.impact.at&&"COMBINE"===n.impact.at.type),l=n.critical.droppable.id===a;return o?i?e:t:l?e:t}return t}}),{updateViewportMaxScroll:e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e})},((e,t,r)=>({...Hw(r),...e,...t})),{context:jx,areStatePropsEqual:yw})((e=>{const t=n.useContext(Ox);t||hb();const{contextId:r,isMovementAllowed:a}=t,s=n.useRef(null),l=n.useRef(null),{children:c,droppableId:u,type:d,mode:p,direction:f,ignoreContainerClipping:m,isDropDisabled:h,isCombineEnabled:g,snapshot:b,useClone:y,updateViewportMaxScroll:v,getContainerForClone:x}=e,w=Nb((()=>s.current),[]),E=Nb(((e=null)=>{s.current=e}),[]);Nb((()=>l.current),[]);const j=Nb(((e=null)=>{l.current=e}),[]),N=Nb((()=>{a()&&v({maxScroll:Fv()})}),[a,v]);Mw({droppableId:u,type:d,mode:p,direction:f,isDropDisabled:h,isCombineEnabled:g,ignoreContainerClipping:m,getDroppableRef:w});const S=jb((()=>o.createElement(Uw,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},(({onClose:e,data:t,animate:n})=>o.createElement(zw,{placeholder:t,onClose:e,innerRef:j,animate:n,contextId:r,onTransitionEnd:N})))),[r,N,e.placeholder,e.shouldAnimatePlaceholder,j]),_=jb((()=>({innerRef:E,placeholder:S,droppableProps:{"data-rfd-droppable-id":u,"data-rfd-droppable-context-id":r}})),[r,u,S,E]),k=y?y.dragging.draggableId:null,O=jb((()=>({droppableId:u,type:d,isUsingCloneFor:k})),[u,k,d]);return o.createElement(hw.Provider,{value:O},c(_,b),function(){if(!y)return null;const{dragging:e,render:t}=y,r=o.createElement(jw,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},((r,n)=>t(r,n,e)));return i.createPortal(r,x())}())})),Kw={toolbar:{container:[[{header:[2,3,!1]}],["bold","italic","underline"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]}},Yw=["header","bold","italic","underline","list","bullet","link","color","background"],Zw={feature:'\n    <div class="property-feature-block">\n      <p><strong>Caracter√≠sticas destacadas:</strong></p>\n      <ul>\n        <li>Caracter√≠stica 1</li>\n        <li>Caracter√≠stica 2</li>\n        <li>Caracter√≠stica 3</li>\n      </ul>\n    </div>\n  ',highlight:'\n    <div class="property-highlight-block">\n      <p><strong>Beneficios de la propiedad:</strong></p>\n      <p>Descripci√≥n de los beneficios y ventajas que ofrece esta propiedad, como la ubicaci√≥n privilegiada, las vistas espectaculares o las amenidades cercanas.</p>\n    </div>\n  ',location:"\n    <h3>Informaci√≥n de la zona</h3>\n    <p>Esta propiedad se encuentra en una zona privilegiada con f√°cil acceso a:</p>\n    <ul>\n      <li>Centros comerciales a 5 minutos</li>\n      <li>Transporte p√∫blico a 2 minutos andando</li>\n      <li>Parques y zonas verdes en los alrededores</li>\n    </ul>\n  "},Jw={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6}}},Xw={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}};function Qw(){const e=d(),t=u();W();const o=n.useRef(null),i=n.useRef(null),a=n.useRef(null),s=n.useRef(null),[l,c]=n.useState(!1),[p,f]=n.useState(null),[m,h]=n.useState({title:"",description:"",address:"",price:"",images:[],bedrooms:"",bathrooms:"",area:"",typeProperty:"Propiedad",m2:"",priceM2:"",rooms:"",wc:"",piso:"",tags:[],template:"default",location:"",propertyType:"Venta",features:[],status:"Disponible",featured:!1,videos:[],videos360:[]}),[g,b]=n.useState([]),[y,v]=n.useState([]),[x,w]=n.useState([]),[E,j]=n.useState(!1),[S,_]=n.useState(!1),[k,O]=n.useState(!1),[P,T]=n.useState(!1),[I,C]=n.useState(null),[A,D]=n.useState(1),[L,R]=n.useState("");n.useEffect((()=>{if("undefined"!=typeof window){const e=document.createElement("style");return e.innerHTML="\n@keyframes shake {\n  0%, 100% { transform: translateX(0); }\n  20%, 60% { transform: translateX(-5px); }\n  40%, 80% { transform: translateX(5px); }\n}\n.animate-shake {\n  animation: shake 0.5s;\n}\n\n/* Estilos para el editor de descripci√≥n */\n.property-description .ql-editor {\n  font-family: 'Inter', system-ui, sans-serif;\n  color: #374151;\n  line-height: 1.8;\n  font-size: 16px;\n  min-height: 200px;\n  padding: 16px;\n}\n\n.property-description .ql-editor p {\n  margin-bottom: 1rem;\n}\n\n.property-description .ql-editor h2 {\n  font-size: 1.5rem;\n  font-weight: 700;\n  margin-top: 1.5rem;\n  margin-bottom: 1rem;\n  color: #1F2937;\n}\n\n.property-description .ql-editor h3 {\n  font-size: 1.25rem;\n  font-weight: 600;\n  margin-top: 1.25rem;\n  margin-bottom: 0.75rem;\n  color: #374151;\n}\n\n.property-description .ql-editor ul, \n.property-description .ql-editor ol {\n  margin-left: 1.5rem;\n  margin-bottom: 1rem;\n}\n\n.property-description .ql-editor li {\n  margin-bottom: 0.5rem;\n}\n\n.property-feature-block,\n.feature-block {\n  background-color: #f0f9ff;\n  border-left: 3px solid #3b82f6;\n  padding: 10px 15px;\n  margin: 10px 0;\n  border-radius: 4px;\n}\n\n.property-highlight-block,\n.highlight-block {\n  background-color: #fffbeb;\n  border-left: 3px solid #f59e0b;\n  padding: 10px 15px;\n  margin: 10px 0;\n  border-radius: 4px;\n}\n\n/* Estilos adicionales para drag & drop */\n.dragging-over {\n  background-color: #e0f2fe; /* Light blue background when dragging over */\n}\n.image-preview-item {\n  transition: background-color 0.2s ease;\n}\n",document.head.appendChild(e),()=>{document.head.removeChild(e)}}}),[]),n.useEffect((()=>{const e=new URLSearchParams(t.search).get("edit");e&&(c(!0),f(e),M(e))}),[t]);const M=async e=>{try{const t=await z(e);if(!t)throw new Error("No se pudo obtener la informaci√≥n de la propiedad");let r=[];if(t.image&&"object"==typeof t.image&&t.image.src?r.push(t.image):t.image&&"string"==typeof t.image&&r.push({src:t.image,alt:"Imagen principal"}),t.images&&Array.isArray(t.images)){const e=t.images.map((e=>"string"==typeof e?{src:e,alt:"Imagen de la propiedad"}:"object"==typeof e&&e.src?e:null)).filter((e=>null!==e));r=[...r,...e]}const n=Array.isArray(t.videos)?t.videos:[],o=Array.isArray(t.videos360)?t.videos360:[];h({title:t.title||"",description:t.description||"",address:t.address||t.location||"",price:t.price||"",images:r||[],bedrooms:t.bedrooms||t.rooms||"",bathrooms:t.bathrooms||t.wc||"",area:t.area||t.m2||"",typeProperty:t.typeProperty||"Propiedad",m2:t.m2||t.area||"",priceM2:t.priceM2||"",rooms:t.rooms||t.bedrooms||"",wc:t.wc||t.bathrooms||"",piso:t.piso||"",tags:t.tags||[],location:t.location||t.address||"",propertyType:t.propertyType||"Venta",features:t.features||[],status:t.status||"Disponible",featured:t.featured||!1,videos:n,videos360:o}),b(r),v(n.map((e=>({name:e.name||e.url||"Video",url:e.url})))),w(o.map((e=>({name:e.name||e.url||"Video 360",url:e.url})))),ie.success("Datos de la propiedad cargados correctamente")}catch(t){console.error("Error al cargar los datos de la propiedad:",t),ie.error("Error al cargar los datos de la propiedad")}},B=e=>{const{name:t,value:r}=e.target;h({...m,[t]:r})},q=e=>{h({...m,description:e})},V=e=>{const t=Zw[e]||"";h({...m,description:(m.description||"")+t})},H=()=>{L.trim()&&(h({...m,features:[...m.features,L.trim()]}),R(""))},$=async(e,t)=>{const r=Array.from(e.target.files);if(0===r.length)return;"standard"===t?(O(!0),v((e=>[...e,...r.map((e=>({name:e.name,loading:!0})))]))):(T(!0),w((e=>[...e,...r.map((e=>({name:e.name,loading:!0})))]))),console.log(`Simulando subida de ${r.length} video(s) de tipo ${t}`),await new Promise((e=>setTimeout(e,1500)));const n=r.map((e=>({src:URL.createObjectURL(e),alt:e.name,type:t})));h((e=>({...e,videos:[...e.videos||[],...n]}))),"standard"===t?(v((e=>e.map((e=>e.loading?{...e,loading:!1}:e)))),O(!1)):(w((e=>e.map((e=>e.loading?{...e,loading:!1}:e)))),T(!1)),ie.success(`${r.length} video(s) ${"standard"===t?"est√°ndar":"360"} cargado(s) para previsualizaci√≥n.`),"standard"===t&&i.current&&(i.current.value=null),"360"===t&&a.current&&(a.current.value=null)},G=(e,t)=>{"standard"===t?(v((t=>t.filter(((t,r)=>r!==e)))),h((t=>({...t,videos:(t.videos||[]).filter((r=>"standard"!==r.type||r!==(t.videos||[]).filter((e=>"standard"===e.type))[e]))})))):(w((t=>t.filter(((t,r)=>r!==e)))),h((t=>({...t,videos:(t.videos||[]).filter((r=>"360"!==r.type||r!==(t.videos||[]).filter((e=>"360"===e.type))[e]))}))))},K=async e=>{var t;if(!e.target.files||0===e.target.files.length)return void ie.info("No se seleccionaron archivos.");_(!0),C(null);const r=Array.from(e.target.files),n=5242880;try{const e=[];console.log("Obteniendo firma de Cloudinary UNA VEZ para todo el lote...");let o=null;try{if(o=await N(),!o||!o.success){const e=(null==o?void 0:o.message)||"No se pudo obtener la firma necesaria para la subida.";throw new Error(e)}console.log("Firma obtenida con √©xito para el lote.")}catch(i){throw console.error("Error cr√≠tico al obtener la firma de Cloudinary:",i),ie.error(`Error al obtener configuraci√≥n para subir: ${i.message}. No se subir√°n im√°genes.`),new Error("Falla al obtener firma, subida cancelada.")}for(const i of r)if(i.size>n)ie.warning(`El archivo ${i.name} excede el tama√±o m√°ximo de 5MB y ser√° omitido.`);else if(i.type.startsWith("image/"))try{const r=new FormData;r.append("file",i),r.append("signature",o.signature),r.append("timestamp",o.timestamp),r.append("api_key",o.apiKey),r.append("folder",o.folder),console.log(`Subiendo a Cloudinary (signed): ${i.name}`);const n=`https://api.cloudinary.com/v1_1/${o.cloudName}/image/upload`,a=await fetch(n,{method:"POST",body:r}),s=await a.json();if(!a.ok||s.error)throw new Error((null==(t=s.error)?void 0:t.message)||`Error de Cloudinary al subir ${i.name}`);console.log(`Cloudinary upload success for ${i.name}:`,{url:s.secure_url,public_id:s.public_id}),e.push({src:s.secure_url,alt:i.name||"Imagen de propiedad",publicId:s.public_id}),ie.success(`${i.name} subido correctamente.`)}catch(a){console.error(`Error procesando imagen ${i.name}:`,a),ie.error(`Error al subir ${i.name}: ${a.message}`);continue}else ie.warning(`El archivo ${i.name} no es una imagen v√°lida y ser√° omitido.`);const s=r.length,l=r.filter((e=>e.size<=n&&e.type.startsWith("image/"))).length;s>0&&0===l?ie.error("Ninguno de los archivos seleccionados era v√°lido para subir."):s>0&&0===e.length&&ie.warning("No se pudo subir ninguna de las im√°genes seleccionadas debido a errores."),console.warn("No se a√±adieron im√°genes nuevas en este lote."),setTimeout((()=>{e.length>0&&h((t=>({...t,images:[...t.images,...e]})))}),0)}catch(s){console.error("Error general en el proceso de subida de im√°genes:",s),C(`Error general al procesar im√°genes: ${s.message}`),ie.error(s.message||"Ocurri√≥ un error inesperado al procesar las im√°genes.")}finally{_(!1),o.current&&(o.current.value="")}},Y=(e,t)=>{e.preventDefault(),e.stopPropagation();const r=Array.from(e.dataTransfer.files);r.length&&("image"===t?K({target:{files:r}}):"video"===t?$({target:{files:r}},"standard"):"video360"===t&&$({target:{files:r}},"360"))},Z=()=>{D(A+1)},J=()=>{D(A-1)},X=e=>{const{source:t,destination:r}=e;if(!r||r.droppableId===t.droppableId&&r.index===t.index)return;const n=Array.from(m.images),[o]=n.splice(t.index,1);n.splice(r.index,0,o),setTimeout((()=>{h((e=>({...e,images:n})))}),0)};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4",children:r.jsxs(Su.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-4xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 py-6 px-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-white",children:l?"Editar Propiedad":"A√±adir Nueva Propiedad"}),r.jsx("p",{className:"text-blue-100 mt-2",children:l?"Actualiza los detalles de tu propiedad":"Completa el formulario para publicar tu propiedad"})]}),r.jsx("div",{className:"px-8 pt-6",children:r.jsxs("div",{className:"flex items-center justify-between mb-8 relative",children:[[1,2,3].map((e=>r.jsxs("div",{className:"flex flex-col items-center z-10",children:[r.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-bold "+(A===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"),children:A>e?"‚úì":e}),r.jsx("span",{className:"text-sm mt-2 "+(A>=e?"text-blue-600 font-medium":"text-gray-500"),children:1===e?"Informaci√≥n":2===e?"Caracter√≠sticas":"Medios"})]},e))),r.jsx("div",{className:"absolute left-0 right-0 top-5 h-0.5 bg-gray-200 -z-10",children:r.jsx("div",{className:"h-full bg-blue-600 transition-all duration-300",style:{width:(A-1)/2*100+"%"}})})]})}),r.jsxs("form",{onSubmit:async t=>{t.preventDefault(),j(!0),C(null);try{const t=[{name:"title",label:"T√≠tulo"},{name:"description",label:"Descripci√≥n"},{name:"price",label:"Precio"},{name:"location",label:"Ubicaci√≥n"},{name:"bedrooms",label:"Dormitorios"},{name:"bathrooms",label:"Ba√±os"},{name:"area",label:"√Årea"}].filter((e=>!m[e.name]));if(t.length>0)throw new Error(`Por favor, completa los siguientes campos: ${t.map((e=>e.label)).join(", ")}`);if(!m.images||0===m.images.length)throw new Error("Por favor, sube al menos una imagen");const r=Array.isArray(m.images)?m.images.map((e=>"string"==typeof e?{src:e,alt:"Imagen de la propiedad"}:"object"==typeof e&&null!==e&&"string"==typeof e.src?{src:e.src,alt:e.alt||"Imagen de la propiedad"}:null)).filter((e=>null!==e)):[];if(0===r.length)throw new Error("No hay im√°genes v√°lidas para la propiedad");const n={...m,m2:m.area,rooms:m.bedrooms,wc:m.bathrooms,address:m.location,price:Number(m.price),bedrooms:Number(m.bedrooms),bathrooms:Number(m.bathrooms),area:Number(m.area),images:r};let o;console.log((l?"Actualizando":"Creando")+" propiedad:",n),l&&p?(o=await U(p,n),ie.success("¬°Propiedad actualizada exitosamente!")):(o=await F(n),ie.success("¬°Propiedad creada exitosamente!")),console.log("Respuesta del servidor:",o),e("/propiedades")}catch(r){console.error(`Error al ${l?"actualizar":"crear"} la propiedad:`,r),C(`Error al ${l?"actualizar":"crear"} la propiedad: ${r.message}`),ie.error(`Error al ${l?"actualizar":"crear"} la propiedad: ${r.message}`)}finally{j(!1)}},className:"px-8 pb-8",children:[I&&r.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded",children:[r.jsx("p",{className:"font-medium",children:"Error"}),r.jsx("p",{children:I})]}),(()=>{switch(A){case 1:return r.jsxs(Su.div,{variants:Xw,initial:"hidden",animate:"visible",className:"space-y-6",children:[r.jsx(Su.h2,{variants:Jw,className:"text-2xl font-bold text-blue-800",children:"Informaci√≥n b√°sica"}),r.jsxs(Su.div,{variants:Jw,className:"mb-6",children:[r.jsxs("label",{className:"block text-gray-700 font-semibold mb-2",children:[r.jsx(jh,{className:"inline mr-2"}),"T√≠tulo"]}),r.jsx("input",{type:"text",name:"title",value:m.title,onChange:B,className:"w-full border-2 border-blue-200 p-3 rounded-lg focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition",placeholder:"Ej: Apartamento moderno en el centro",required:!0})]}),r.jsxs(Su.div,{variants:Jw,className:"mb-6",children:[r.jsxs("label",{className:"block text-gray-700 font-semibold mb-2",children:[r.jsx(Nh,{className:"inline mr-2"}),"Descripci√≥n"]}),r.jsxs("div",{className:"border border-gray-300 rounded-lg overflow-hidden property-description",children:[r.jsx(ch,{ref:s,value:m.description||"",onChange:q,modules:Kw,formats:Yw,className:"min-h-[250px]",theme:"snow",placeholder:"Describe la propiedad con detalle..."}),r.jsx("div",{className:"p-3 bg-gray-50 border-t border-gray-200",children:r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx("h3",{className:"w-full text-sm text-gray-600 font-medium mb-1",children:"A√±adir bloques especiales:"}),r.jsx("button",{type:"button",onClick:()=>V("feature"),className:"text-sm px-3 py-2 rounded hover:bg-blue-50 border border-blue-100 flex items-center gap-1 text-left",children:r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{className:"font-bold text-blue-800 block",children:"Lista de caracter√≠sticas"}),r.jsx("span",{className:"text-xs text-gray-500 block",style:{backgroundColor:"#f0f9ff",padding:"2px 6px",borderLeft:"2px solid #3b82f6"},children:"Estructura con vi√±etas"})]})}),r.jsx("button",{type:"button",onClick:()=>V("highlight"),className:"text-sm px-3 py-2 rounded hover:bg-yellow-50 border border-yellow-100 flex items-center gap-1 text-left",children:r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{className:"font-bold text-yellow-800 block",children:"Bloque destacado"}),r.jsx("span",{className:"text-xs text-gray-500 block",style:{backgroundColor:"#fffbeb",padding:"2px 6px",borderLeft:"2px solid #f59e0b"},children:"Informaci√≥n importante"})]})}),r.jsx("button",{type:"button",onClick:()=>V("location"),className:"text-sm px-3 py-2 rounded hover:bg-green-50 border border-green-100 flex items-center gap-1 text-left",children:r.jsxs("div",{className:"flex-1",children:[r.jsx("span",{className:"font-bold text-green-800 block",children:"Informaci√≥n de zona"}),r.jsx("span",{className:"text-xs text-gray-500 block",style:{backgroundColor:"#ecfdf5",padding:"2px 6px",borderLeft:"2px solid #10b981"},children:"Detalles de la ubicaci√≥n"})]})})]})})]}),r.jsxs("div",{className:"mt-4 border rounded-lg p-4 bg-white shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-3 flex items-center",children:[r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-blue-600",viewBox:"0 0 20 20",fill:"currentColor",children:[r.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),r.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),"Vista previa"]}),r.jsx("div",{className:"property-description p-4 border rounded bg-gray-50",dangerouslySetInnerHTML:{__html:m.description}})]})]}),r.jsxs(Su.div,{variants:Jw,className:"mb-6",children:[r.jsxs("label",{className:"block text-gray-700 font-semibold mb-2",children:[r.jsx(xh,{className:"inline mr-2"}),"Precio (‚Ç¨)"]}),r.jsx("input",{type:"number",name:"price",value:m.price,onChange:B,className:"w-full border-2 border-blue-200 p-3 rounded-lg focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition",placeholder:"Ej: 250000",required:!0})]}),r.jsxs(Su.div,{variants:Jw,className:"mb-6",children:[r.jsxs("label",{className:"block text-gray-700 font-semibold mb-2",children:[r.jsx(Sh,{className:"inline mr-2"}),"Ubicaci√≥n"]}),r.jsx("input",{type:"text",name:"location",value:m.location,onChange:B,className:"w-full border-2 border-blue-200 p-3 rounded-lg focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition",placeholder:"Ej: Calle Mayor 123, Madrid",required:!0})]}),r.jsx(Su.div,{variants:Jw,className:"flex justify-end",children:r.jsx("button",{type:"button",onClick:Z,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-blue-700 transition focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",children:"Siguiente"})})]});case 2:return r.jsxs(Su.div,{variants:Xw,initial:"hidden",animate:"visible",className:"space-y-6",children:[r.jsx(Su.h2,{variants:Jw,className:"text-2xl font-bold text-blue-800",children:"Caracter√≠sticas"}),r.jsxs(Su.div,{variants:Jw,className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-gray-700 font-semibold mb-2",children:[r.jsx(Ch,{className:"inline mr-2"}),"Habitaciones"]}),r.jsx("input",{type:"number",name:"bedrooms",value:m.bedrooms,onChange:B,className:"w-full border-2 border-blue-200 p-3 rounded-lg focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-gray-700 font-semibold mb-2",children:[r.jsx(Gh,{className:"inline mr-2"}),"Ba√±os"]}),r.jsx("input",{type:"number",name:"bathrooms",value:m.bathrooms,onChange:B,className:"w-full border-2 border-blue-200 p-3 rounded-lg focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition",min:"0"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-gray-700 font-semibold mb-2",children:[r.jsx(Oh,{className:"inline mr-2"}),"√Årea (m¬≤)"]}),r.jsx("input",{type:"number",name:"area",value:m.area,onChange:B,className:"w-full border-2 border-blue-200 p-3 rounded-lg focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition",min:"0"})]})]}),r.jsxs(Su.div,{variants:Jw,className:"mb-6",children:[r.jsxs("label",{className:"block text-gray-700 font-semibold mb-2",children:[r.jsx(Ph,{className:"inline mr-2"}),"Tipo de Propiedad"]}),r.jsxs("select",{name:"propertyType",value:m.propertyType,onChange:B,className:"w-full border-2 border-blue-200 p-3 rounded-lg focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition",children:[r.jsx("option",{value:"Venta",children:"Venta"}),r.jsx("option",{value:"Alquiler",children:"Alquiler"}),r.jsx("option",{value:"Vacacional",children:"Vacacional"})]})]}),r.jsxs(Su.div,{variants:Jw,className:"mb-6",children:[r.jsxs("label",{className:"block text-gray-700 font-semibold mb-2",children:[r.jsx(Nh,{className:"inline mr-2"}),"Caracter√≠sticas Adicionales"]}),r.jsxs("div",{className:"flex items-center mb-3",children:[r.jsx("input",{type:"text",value:L,onChange:e=>R(e.target.value),className:"flex-1 border-2 border-blue-200 p-3 rounded-lg focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 transition",placeholder:"Ej: Piscina, Jard√≠n, Garaje...",onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),H())}),r.jsx("button",{type:"button",onClick:H,className:"ml-2 bg-blue-600 text-white p-3 rounded-lg hover:bg-blue-700 transition",children:r.jsx(kh,{size:20})})]}),m.features.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:m.features.map(((e,t)=>r.jsxs("div",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full flex items-center",children:[r.jsx("span",{children:e}),r.jsx("button",{type:"button",onClick:()=>(e=>{h((t=>({...t,features:t.features.filter(((t,r)=>r!==e))})))})(t),className:"ml-2 text-blue-600 hover:text-blue-800",children:r.jsx(Dh,{size:16})})]},t)))}),r.jsxs("div",{className:"mt-4",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Caracter√≠sticas comunes:"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:["Piscina","Garaje","Terraza","Aire acondicionado","Calefacci√≥n","Ascensor","Amueblado","Jard√≠n"].map((e=>r.jsxs("button",{type:"button",onClick:()=>{m.features.includes(e)||h({...m,features:[...m.features,e]})},disabled:m.features.includes(e),className:"text-xs px-3 py-1 rounded-full "+(m.features.includes(e)?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-800 hover:bg-gray-300"),children:["+ ",e]},e)))})]})]}),r.jsxs(Su.div,{variants:Jw,className:"flex justify-between",children:[r.jsx("button",{type:"button",onClick:J,className:"bg-gray-300 text-gray-800 px-6 py-3 rounded-lg font-bold hover:bg-gray-400 transition focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50",children:"Anterior"}),r.jsx("button",{type:"button",onClick:Z,className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-blue-700 transition focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",children:"Siguiente"})]})]});case 3:return r.jsxs(Su.div,{variants:Xw,initial:"hidden",animate:"visible",className:"space-y-8",children:[r.jsxs(Su.div,{variants:Jw,children:[r.jsxs("h3",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[r.jsx(yh,{className:"mr-2"}),"Im√°genes (Arrastra para reordenar)"]}),r.jsxs("div",{className:"border-2 border-dashed border-blue-300 rounded-lg p-6 text-center cursor-pointer hover:border-blue-500 transition mb-4",onClick:()=>o.current.click(),onDragOver:e=>e.preventDefault(),onDrop:e=>Y(e,"image"),children:[r.jsx(Ih,{className:"mx-auto text-blue-500 mb-3",size:40}),r.jsx("p",{className:"text-md text-blue-800 font-medium",children:"Arrastra im√°genes o haz clic"}),r.jsx("input",{type:"file",multiple:!0,ref:o,onChange:K,className:"hidden",accept:"image/*"})]}),S&&r.jsx("div",{className:"text-center text-blue-600",children:"Subiendo im√°genes..."}),r.jsx(lw,{onDragEnd:X,children:r.jsx(Ww,{droppableId:"imageList",children:(e,t)=>r.jsxs("div",{ref:e.innerRef,...e.droppableProps,className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 mt-4 p-2 rounded-lg "+(t.isDraggingOver?"bg-blue-50":""),children:[m.images.map(((e,t)=>r.jsx(Nw,{draggableId:e.publicId||e.src+t,index:t,children:(n,o)=>r.jsxs("div",{ref:n.innerRef,...n.draggableProps,...n.dragHandleProps,className:`relative group rounded-lg overflow-hidden shadow border ${o.isDragging?"shadow-lg scale-105":""} image-preview-item`,style:{...n.draggableProps.style},children:[0===t&&r.jsx("span",{className:"absolute top-1 left-1 bg-blue-600 text-white px-1.5 py-0.5 rounded text-xs z-10",children:"Principal"}),r.jsx("img",{src:e.src,alt:e.alt||`Imagen ${t+1}`,className:"w-full h-32 object-cover",onError:e=>{e.target.src="https://via.placeholder.com/400x300?text=Error"}}),r.jsx("button",{type:"button",onClick:()=>(e=>{setPreviewImages((t=>t.filter(((t,r)=>r!==e)))),h((t=>({...t,images:t.images.filter(((t,r)=>r!==e))})))})(t),className:"absolute top-1 right-1 bg-red-600 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity z-10 hover:bg-red-700",title:"Eliminar imagen",children:r.jsx(Dh,{size:14})}),o.isDragging&&r.jsx("div",{className:"absolute inset-0 bg-blue-100 opacity-50"})]})},e.publicId||e.src+t))),e.placeholder]})})}),0===m.images.length&&!S&&r.jsx("p",{className:"text-center text-gray-500 mt-4",children:"No hay im√°genes a√±adidas."})]}),r.jsxs(Su.div,{variants:Jw,children:[r.jsxs("h3",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[r.jsx(Ah,{className:"mr-2"}),"Videos Est√°ndar"]}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-gray-500 transition mb-4",onClick:()=>i.current.click(),onDragOver:e=>e.preventDefault(),onDrop:e=>Y(e,"video"),children:[r.jsx(Ih,{className:"mx-auto text-gray-500 mb-3",size:40}),r.jsx("p",{className:"text-md text-gray-800 font-medium",children:"Arrastra videos est√°ndar o haz clic"}),r.jsx("input",{type:"file",multiple:!0,ref:i,onChange:e=>$(e,"standard"),className:"hidden",accept:"video/*"})]}),k&&r.jsx("div",{className:"text-center text-blue-600",children:"Subiendo videos..."}),y.length>0&&r.jsxs("div",{className:"mt-4 space-y-2",children:[r.jsx("h4",{className:"text-md font-semibold mb-2",children:"Videos subidos:"}),y.map(((e,t)=>r.jsxs("div",{className:"flex items-center justify-between bg-gray-100 p-2 rounded",children:[r.jsx("span",{className:"text-sm text-gray-700 truncate",children:e.name}),r.jsx("button",{type:"button",onClick:()=>G(t,"standard"),className:"text-red-500 hover:text-red-700 ml-2",children:r.jsx(Dh,{size:16})})]},t)))]})]}),r.jsxs(Su.div,{variants:Jw,children:[r.jsxs("h3",{className:"text-xl font-semibold text-blue-800 mb-4 flex items-center",children:[r.jsx(Ah,{className:"mr-2"}),"Videos 360¬∫ (Para Tour Virtual)"]}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-gray-500 transition mb-4",onClick:()=>a.current.click(),onDragOver:e=>e.preventDefault(),onDrop:e=>Y(e,"video360"),children:[r.jsx(Ih,{className:"mx-auto text-gray-500 mb-3",size:40}),r.jsx("p",{className:"text-md text-gray-800 font-medium",children:"Arrastra videos 360¬∫ o haz clic"}),r.jsx("input",{type:"file",multiple:!0,ref:a,onChange:e=>$(e,"360"),className:"hidden",accept:"video/*"})]}),P&&r.jsx("div",{className:"text-center text-blue-600",children:"Subiendo videos 360..."}),x.length>0&&r.jsxs("div",{className:"mt-4 space-y-2",children:[r.jsx("h4",{className:"text-md font-semibold mb-2",children:"Videos 360 subidos:"}),x.map(((e,t)=>r.jsxs("div",{className:"flex items-center justify-between bg-gray-100 p-2 rounded",children:[r.jsx("span",{className:"text-sm text-gray-700 truncate",children:e.name}),r.jsx("button",{type:"button",onClick:()=>G(t,"360"),className:"text-red-500 hover:text-red-700 ml-2",children:r.jsx(Dh,{size:16})})]},t)))]})]}),r.jsxs(Su.div,{variants:Jw,className:"flex justify-between pt-4",children:[r.jsx("button",{type:"button",onClick:J,className:"bg-gray-300 text-gray-800 px-6 py-3 rounded-lg font-bold hover:bg-gray-400 transition focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50",children:"Anterior"}),r.jsx("button",{type:"submit",disabled:E||S||k||P,className:"px-6 py-3 rounded-lg font-bold transform transition hover:scale-105 focus:outline-none focus:ring-2 focus:ring-opacity-50 "+(E||S||k||P?"bg-gray-400 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500"),children:E?l?"Actualizando...":"Publicando...":l?"Actualizar Propiedad":"Publicar Propiedad"})]})]});default:return null}})()]})]})})}function eE(){var e,t;const{id:o}=m(),[i,a]=n.useState(null),[s,l]=n.useState(!1),[c,u]=n.useState({}),[f,h]=n.useState(!1);n.useState(!1),n.useState(null);const[g,b]=n.useState(!0),[y,v]=n.useState(0);n.useState(""),n.useState(!1),W();const x=d();n.useEffect((()=>{(async()=>{var e;try{const t=await z(o);console.log("Datos de la propiedad recibidos:",t);let r=[];t.images&&Array.isArray(t.images)&&t.images.length>0&&(console.log("Procesando im√°genes del array principal:",t.images.length,"im√°genes"),r=t.images.map(((e,r)=>"object"==typeof e&&e.src?{src:e.src,alt:e.alt||`Imagen ${r+1} de ${t.title||"la propiedad"}`}:"string"==typeof e?{src:e,alt:`Imagen ${r+1} de ${t.title||"la propiedad"}`}:null)).filter((e=>null!==e&&e.src))),0===r.length&&t.image&&(console.log("No hay im√°genes en array, intentando con imagen principal"),"object"==typeof t.image&&t.image.src?r.push({src:t.image.src,alt:t.image.alt||`Imagen principal de ${t.title||"la propiedad"}`}):"string"==typeof t.image&&r.push({src:t.image,alt:`Imagen principal de ${t.title||"la propiedad"}`}));const n={...t,images:r,price:t.price||0,bedrooms:t.bedrooms||t.rooms||0,bathrooms:t.bathrooms||t.wc||0,area:t.area||t.m2||0,m2:t.m2||t.area||0,address:t.address||t.location||"Ubicaci√≥n no especificada",location:t.location||t.address||"Ubicaci√≥n no especificada"};console.log("Propiedad formateada:",{title:n.title,imagesCount:n.images.length,featuresCount:(null==(e=n.features)?void 0:e.length)||0,price:n.price,description:n.description?"Presente":"Faltante"}),a(n),u(n)}catch(t){console.error("Error al obtener la propiedad:",t),ie.error("Error al cargar la propiedad")}finally{b(!1)}})()}),[o]);return g?r.jsx("div",{className:"min-h-screen bg-gradient-to-tr from-blue-900 to-black/60 flex justify-center items-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white"})}):i?r.jsxs("div",{className:"min-h-screen bg-gradient-to-tr from-blue-900 to-black/60 py-6 sm:py-10 px-4 sm:px-6",children:[r.jsxs("div",{className:"container mx-auto",children:[r.jsx("div",{className:"mb-6",children:r.jsxs(p,{to:"/propiedades",className:"text-white hover:text-yellow-300 transition flex items-center text-sm sm:text-base",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Volver a propiedades"]})}),r.jsxs("div",{className:"bg-white rounded-lg shadow-xl overflow-hidden",children:[r.jsx("div",{className:"relative",children:r.jsx("div",{className:"h-48 sm:h-64 md:h-96 bg-gray-200 relative",children:i.images&&i.images.length>0?r.jsxs(r.Fragment,{children:[r.jsx("img",{src:(null==(e=i.images[y])?void 0:e.src)||"",alt:(null==(t=i.images[y])?void 0:t.alt)||"Imagen de la propiedad",className:"w-full h-full object-cover",onError:e=>{e.target.src="https://via.placeholder.com/800x600?text=Imagen+no+disponible"}}),i.images.length>1&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>{i.images&&Array.isArray(i.images)&&i.images.length>0&&v((e=>0===e?i.images.length-1:e-1))},className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition","aria-label":"Imagen anterior",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsx("button",{onClick:()=>{i.images&&Array.isArray(i.images)&&i.images.length>0&&v((e=>e===i.images.length-1?0:e+1))},className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition","aria-label":"Imagen siguiente",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),r.jsx("div",{className:"absolute bottom-2 left-0 right-0 flex justify-center space-x-2",children:i.images.map(((e,t)=>r.jsx("button",{className:"w-2 h-2 rounded-full "+(y===t?"bg-white":"bg-white/50"),onClick:()=>v(t),"aria-label":`Ver imagen ${t+1}`},t)))})]})]}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx("span",{className:"text-gray-400",children:"Sin im√°genes disponibles"})})})}),r.jsxs("div",{className:"p-4 sm:p-6 md:p-8",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start mb-6",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-gray-800 mb-2",children:i.title||i.typeProperty}),r.jsxs("p",{className:"text-gray-500 text-sm sm:text-base mb-1",children:[r.jsx(Sh,{className:"inline-block mr-1"}),i.address]})]}),r.jsxs("div",{className:"mt-4 md:mt-0 flex flex-col md:items-end",children:[r.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-blue-600 mb-2",children:"number"==typeof i.price?new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(i.price):i.price}),r.jsx("span",{className:"inline-block bg-indigo-100 text-indigo-800 text-xs font-semibold px-2.5 py-0.5 rounded",children:i.status||"En venta"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 border-t border-b border-gray-200 py-4 mb-6",children:[r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx(jh,{className:"text-blue-600 h-6 w-6 mb-1"}),r.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Tipo"}),r.jsx("span",{className:"font-semibold text-sm sm:text-base",children:i.typeProperty})]}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx(_h,{className:"text-blue-600 h-6 w-6 mb-1"}),r.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Superficie"}),r.jsxs("span",{className:"font-semibold text-sm sm:text-base",children:[i.m2," m¬≤"]})]}),i.bedrooms&&r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("svg",{className:"text-blue-600 h-6 w-6 mb-1",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M21 9h-8V3H3v18h18V9zM5 19V5h6v14H5zm14 0h-6v-8h6v8z"})}),r.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Habitaciones"}),r.jsx("span",{className:"font-semibold text-sm sm:text-base",children:i.bedrooms})]}),i.bathrooms&&r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("svg",{className:"text-blue-600 h-6 w-6 mb-1",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M21 10H7V7c0-1.103.897-2 2-2s2 .897 2 2h2c0-2.206-1.794-4-4-4S5 4.794 5 7v3H3a1 1 0 0 0-1 1v2c0 2.606 1.674 4.823 4 5.65V22h2v-3h8v3h2v-3.35c2.326-.827 4-3.044 4-5.65v-2a1 1 0 0 0-1-1zm-1 3c0 2.206-1.794 4-4 4H8c-2.206 0-4-1.794-4-4v-1h16v1z"})}),r.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Ba√±os"}),r.jsx("span",{className:"font-semibold text-sm sm:text-base",children:i.bathrooms})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-3",children:"Descripci√≥n"}),r.jsx("div",{className:"property-description mt-4 text-gray-600 leading-relaxed text-sm sm:text-base",dangerouslySetInnerHTML:{__html:i.description}})]}),i.features&&i.features.length>0&&r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-3",children:"Caracter√≠sticas"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:i.features.map(((e,t)=>r.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsx("svg",{className:"h-5 w-5 text-green-500 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:e})]},t)))})]}),(i.location||i.propertyType)&&r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-3",children:"Informaci√≥n adicional"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.location&&r.jsxs("div",{className:"flex items-center p-3 bg-blue-50 rounded-lg",children:[r.jsx(Sh,{className:"h-5 w-5 text-blue-500 mr-2"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-xs text-gray-500 block",children:"Ubicaci√≥n"}),r.jsx("span",{className:"font-medium text-gray-700",children:i.location})]})]}),i.propertyType&&r.jsxs("div",{className:"flex items-center p-3 bg-green-50 rounded-lg",children:[r.jsx(jh,{className:"h-5 w-5 text-green-500 mr-2"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-xs text-gray-500 block",children:"Tipo de operaci√≥n"}),r.jsx("span",{className:"font-medium text-gray-700",children:i.propertyType})]})]})]})]}),r.jsx("div",{className:"flex flex-wrap gap-3 mt-6",children:r.jsxs("button",{onClick:()=>{x(`/add-property?edit=${o}`)},className:"flex items-center gap-1 px-3 py-1.5 sm:px-4 sm:py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition text-sm",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Editar Propiedad"]})})]})]})]}),r.jsx(kr,{open:f,onClose:()=>h(!1),className:"fixed inset-0 z-10 overflow-y-auto",children:r.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[r.jsx(kr.Overlay,{className:"fixed inset-0 bg-black opacity-30"}),r.jsxs("div",{className:"relative bg-white rounded-lg max-w-md w-full mx-4 p-6",children:[r.jsx(kr.Title,{className:"text-lg font-semibold",children:"Confirmar cambios"}),r.jsx(kr.Description,{className:"mt-2 text-gray-600",children:"¬øEst√°s seguro de que quieres guardar los cambios?"}),r.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-gray-300 rounded hover:bg-gray-400",children:"Cancelar"}),r.jsx("button",{onClick:async()=>{try{console.log("Preparando datos para guardar..."),console.log("Estado actual de la propiedad editada:",c);const e=c.images||[];console.log("Todas las im√°genes disponibles:",e);const t=e[0]||null,r=e.slice(1)||[];console.log("Imagen principal:",t),console.log("Im√°genes adicionales:",r);const n={...c,image:t,images:r.map((e=>e.src))};delete n._id,delete n.__v,delete n.createdAt,delete n.updatedAt,console.log("Datos preparados para enviar:",n);const i=await U(o,n);if(console.log("Respuesta del servidor:",i),i){ie.success("Propiedad actualizada correctamente");const e={...i,images:[i.image,...(i.images||[]).map((e=>({src:e,alt:"Imagen de la propiedad"})))].filter((e=>e&&e.src))};console.log("Propiedad actualizada con todas las im√°genes:",e),a(e),u(e),l(!1),h(!1)}}catch(e){console.error("Error al guardar cambios:",e),ie.error("Error al guardar los cambios")}},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Confirmar"})]})]})]})})]}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-tr from-blue-900 to-black/60 flex flex-col justify-center items-center text-white px-4",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Propiedad no encontrada"}),r.jsx("p",{className:"mb-6",children:"La propiedad que buscas no existe o ha sido eliminada."}),r.jsx(p,{to:"/propiedades",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Volver a propiedades"})]})}function tE(){const[e,t]=n.useState(""),[o,i]=n.useState(null),[a,s]=n.useState(!1),[l,c]=n.useState(null),[u,p]=n.useState(null),[f,m]=n.useState(""),h=d(),{user:g,refreshUserData:b,safeProfileSync:y,loading:v,setUser:x}=W(),E=(null==g?void 0:g.profileImage)||fallbackImageBase4;n.useEffect((()=>{g&&g.name&&(t(g.name),m(g.name))}),[g]),n.useEffect((()=>()=>{o&&URL.revokeObjectURL(o)}),[o]),console.log(`üîÑ CambiarPerfil usando API base: ${w}`);const j=n.useCallback((()=>o||E),[o,E]);return console.log("Estado CambiarPerfil Render:",{userLoading:v,userId:null==g?void 0:g.id,isUserValid:!!(null==g?void 0:g.id),localLoading:a}),r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-amber-600 py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md mx-auto bg-white/10 backdrop-blur-md rounded-xl shadow-xl overflow-hidden p-8 border border-white/20",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h2",{className:"text-3xl font-bold text-white",children:"Actualizar Perfil"}),r.jsx("p",{className:"mt-2 text-blue-100",children:"Cambia tu nombre o foto de perfil"})]}),l&&r.jsx("div",{className:"mb-4 p-3 bg-red-500/30 border border-red-500 rounded-lg text-white",children:l}),u&&r.jsx("div",{className:"mb-4 p-3 bg-green-500/30 border border-green-500 rounded-lg text-white",children:u}),r.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),e)if(e!==f)try{s(!0),c(null),p(null);const t=localStorage.getItem("token");if(!t)throw new Error("No hay sesi√≥n activa. Por favor, inicia sesi√≥n nuevamente.");const o={name:e};console.log("Enviando nombre para actualizar perfil...");const i=await fetch(`${w}/user/update-profile`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(o)});if(console.log("Respuesta del servidor:",{status:i.status,statusText:i.statusText,headers:Object.fromEntries([...i.headers.entries()])}),!i.ok){if(console.error("Error del servidor:",i.status,i.statusText),401===i.status)return console.warn("Error de autorizaci√≥n al actualizar perfil. Actualizando solo localmente."),e&&localStorage.setItem("name",e),p("Perfil actualizado localmente. Los cambios se sincronizar√°n cuando inicies sesi√≥n."),void setTimeout((()=>h("/")),2e3);let t;try{const e=await i.json();t=e.message||`Error al actualizar el perfil: ${i.status}`,console.error("Detalles del error:",e)}catch(r){t=`Error al actualizar el perfil: ${i.status}`;try{const e=await i.text();console.error("Respuesta de error (texto):",e)}catch(n){console.error("No se pudo leer la respuesta de error")}}throw new Error(t)}console.log("Nombre actualizado correctamente en el servidor."),e&&(localStorage.setItem("name",e),console.log("Nombre actualizado en localStorage:",e),g&&(x((t=>({...t,name:e}))),console.log("Nombre actualizado en contexto de usuario:",e))),p("¬°Nombre actualizado correctamente!"),m(e),setTimeout((()=>h("/")),2e3)}catch(o){console.error("Error al actualizar perfil:",o),c(o.message||"No se pudo actualizar el perfil. Int√©ntalo de nuevo.")}finally{s(!1)}else c("Escribe un nombre diferente al actual para guardar.");else c("El nombre no puede estar vac√≠o.")},className:"space-y-6",children:[r.jsx("div",{className:"flex justify-center mb-6",children:r.jsxs("div",{className:"relative",children:[a||v?r.jsx("div",{className:"w-32 h-32 rounded-full border-4 border-white/30 shadow-lg flex items-center justify-center bg-gray-200",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})}):r.jsx("img",{src:j(),alt:"Vista previa",className:"w-32 h-32 rounded-full object-cover border-4 border-white/30 shadow-lg",onError:()=>{console.warn("Error al cargar la imagen principal, usando fallback.")}}),r.jsxs("label",{htmlFor:"profilePic",className:"absolute bottom-0 right-0 bg-blue-600 text-white p-2 rounded-full shadow-lg transition "+(v||!(null==g?void 0:g.id)||a?"opacity-50 cursor-not-allowed":"cursor-pointer hover:bg-blue-700"),children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),r.jsx("input",{type:"file",id:"profilePic",name:"profilePic",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(!t)return;const r=URL.createObjectURL(t);i(r),s(!0),c(null),p(null);try{if(!t.type.startsWith("image/"))throw new Error("El archivo debe ser una imagen (jpg, png, etc.)");if(t.size>10485760)throw new Error("La imagen no debe superar los 10MB");console.log(`CambiarPerfil: Llamando a safeProfileSync para ${t.name}...`);const e=await y(t);if(!e||!e.success)throw new Error((null==e?void 0:e.error)||"Error desconocido al sincronizar la imagen.");console.log("CambiarPerfil: safeProfileSync exitoso. Nueva URL:",e.imageUrl),p("Imagen de perfil actualizada correctamente."),i(null),URL.revokeObjectURL(r)}catch(n){console.error("Error en handleFileChange:",n),c(n.message||"Ocurri√≥ un error inesperado al procesar la imagen."),i(null),URL.revokeObjectURL(r)}finally{s(!1)}},className:"hidden",disabled:v||!(null==g?void 0:g.id)||a})]})]})}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-blue-100",children:"Nombre"}),r.jsx("div",{className:"mt-1",children:r.jsx("input",{type:"text",name:"name",id:"name",value:e,onChange:e=>t(e.target.value),className:"block w-full rounded-md border-white/30 bg-white/5 py-2 px-3 text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"Tu nombre"})})]}),r.jsxs("div",{className:"flex space-x-4",children:[o?r.jsxs("button",{type:"button",disabled:!0,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-500 cursor-wait",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Subiendo Imagen..."]}):r.jsx("button",{type:"submit",disabled:a||v||!e||e===f,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:a||v?r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Guardar Nombre"}),r.jsx("button",{type:"button",onClick:()=>h("/"),className:"w-full flex justify-center py-2 px-4 border border-white/30 rounded-md shadow-sm text-sm font-medium text-white bg-transparent hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancelar"})]})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx("a",{href:"/test-imagen",className:"text-xs text-blue-300 hover:text-blue-100 transition",children:"¬øProblemas con la imagen? Usar herramienta de diagn√≥stico"})})]})})}const rE=()=>{const[e,t]=n.useState(null),[o,i]=n.useState(""),[a,s]=n.useState(null),[l,c]=n.useState(!1),[u,p]=n.useState(""),[f,m]=n.useState(""),{isAuthenticated:h}=W(),g=d();n.useEffect((()=>{const e=window.location.hostname,t=e.startsWith("subir.")||!1;console.log("Hostname:",e),console.log("¬øEs subdominio de subir?:",t),console.log("Modo de App:","production"),t||console.log("Esta p√°gina est√° dise√±ada para funcionar en subir.realestategozamadrid.com"),h||p("Debes iniciar sesi√≥n para subir im√°genes")}),[h,g]);return r.jsxs("div",{className:"container mx-auto p-6 max-w-2xl",children:[r.jsx("h1",{className:"text-3xl font-bold mb-6 text-center",children:"Subir Imagen"}),u&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:u}),f&&r.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:[f,r.jsxs("div",{className:"mt-2 text-sm",children:[r.jsx("p",{children:"La URL ha sido copiada al portapapeles"}),r.jsx("p",{className:"mt-1 font-mono bg-gray-100 p-2 rounded overflow-auto",children:f.split(": ")[1]})]})]}),r.jsxs("form",{onSubmit:async r=>{if(r.preventDefault(),h)if(e)if(o.trim())try{c(!0),p("");const r=new FormData;r.append("file",e),r.append("title",o),console.log("Subiendo imagen...");const n=await L(r);if(console.log("Resultado de la subida:",n),!n||!n.src)throw new Error("No se recibi√≥ una URL v√°lida del servidor");m(`Imagen subida correctamente: ${n.src}`),navigator.clipboard.writeText(n.src).then((()=>console.log("URL copiada al portapapeles"))).catch((e=>console.error("Error al copiar URL:",e))),t(null),i(""),s(null)}catch(n){console.error("Error al subir la imagen:",n),p(`Error al subir la imagen: ${n.message}`)}finally{c(!1)}else p("Por favor, ingresa un t√≠tulo para la imagen");else p("Por favor, selecciona una imagen para subir");else p("Debes iniciar sesi√≥n para subir im√°genes")},className:"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"title",children:"T√≠tulo de la imagen"}),r.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"title",type:"text",placeholder:"Ingresa un t√≠tulo descriptivo",value:o,onChange:e=>i(e.target.value),required:!0})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"image",children:"Selecciona una imagen"}),r.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"image",type:"file",accept:"image/*",onChange:e=>{const r=e.target.files[0];if(!r)return t(null),void s(null);if(!r.type.startsWith("image/"))return p("El archivo seleccionado no es una imagen"),t(null),void s(null);if(r.size>5242880)return p("La imagen no debe superar los 5MB"),t(null),void s(null);t(r),p("");const n=new FileReader;n.onload=()=>{s(n.result)},n.readAsDataURL(r)},required:!0}),r.jsx("p",{className:"text-gray-600 text-xs mt-1",children:"Formato: JPG, PNG, GIF - Tama√±o m√°ximo: 5MB"})]}),a&&r.jsxs("div",{className:"mb-6",children:[r.jsx("p",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Vista previa"}),r.jsx("img",{src:a,alt:"Vista previa",className:"max-w-full h-auto border rounded"})]}),r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline "+(l?"opacity-50 cursor-not-allowed":""),type:"submit",disabled:l,children:l?"Subiendo...":"Subir Imagen"})})]}),r.jsxs("div",{className:"text-center text-gray-500 text-sm",children:[r.jsx("p",{children:"Esta herramienta est√° dise√±ada para subir im√°genes al servidor."}),r.jsx("p",{children:"Las im√°genes subidas estar√°n disponibles para su uso en el sitio web."})]})]})},nE=()=>{var e,t,o,i,a,s;const{user:l}=W(),[c,u]=n.useState({}),[d,p]=n.useState({}),[f,m]=n.useState([]),[g,b]=n.useState(null),[y,v]=n.useState({}),[x,w]=n.useState(!1),[E,j]=n.useState(!1),N=l&&"admin"===l.role;n.useEffect((()=>{if(!N)return;(async()=>{try{u({userAgent:navigator.userAgent,language:navigator.language,cookiesEnabled:navigator.cookieEnabled,onlineStatus:navigator.onLine,screenWidth:window.innerWidth,screenHeight:window.innerHeight,dateTime:(new Date).toISOString(),timezoneOffset:(new Date).getTimezoneOffset(),referrer:document.referrer||"Directo",currentUrl:window.location.href});const e=_("localStorage"),t=_("sessionStorage");p({localStorage:{size:e.totalSize,itemCount:e.itemCount,keys:Object.keys(localStorage)},sessionStorage:{size:t.totalSize,itemCount:t.itemCount,keys:Object.keys(sessionStorage)}});const r=JSON.parse(localStorage.getItem("errorHistory")||"[]");m(r);const n=localStorage.getItem("lastRenderCycle");n&&b(JSON.parse(n)),S(),j(!0)}catch(e){console.error("Error al cargar informaci√≥n de diagn√≥stico:",e),ie.error("Error al cargar informaci√≥n de diagn√≥stico")}})()}),[N]);const S=async()=>{const e=[{name:"Backend API",url:("https:"===window.location.protocol?"https":"http")+"://nextjs-gozamadrid-qrfk.onrender.com"},{name:"Google (Internet)",url:"https://www.google.com"}],t={};for(const n of e)try{const e=Date.now(),r=(await fetch(n.url,{method:"HEAD",mode:"no-cors",cache:"no-store"}),Date.now());t[n.name]={status:"ok",latency:r-e,timestamp:(new Date).toISOString()}}catch(r){t[n.name]={status:"error",error:r.message,timestamp:(new Date).toISOString()}}v(t)},_=e=>{try{const t="localStorage"===e?localStorage:sessionStorage;let r=0;const n=Object.keys(t);return n.forEach((e=>{const n=t.getItem(e);r+=e.length+(n?n.length:0)})),{totalSize:k(r),itemCount:n.length}}catch(t){return console.error(`Error al calcular uso de ${e}:`,t),{totalSize:"Error",itemCount:0}}},k=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]};return N?r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("h1",{className:"text-3xl font-bold mb-8 text-indigo-700",children:"Panel de Diagn√≥stico"}),r.jsxs("div",{className:"mb-8 flex flex-wrap gap-4",children:[r.jsx("button",{onClick:S,className:"bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition",children:"Comprobar red"}),r.jsx("button",{onClick:()=>{try{localStorage.removeItem("errorHistory"),localStorage.removeItem("errorsHistory"),localStorage.removeItem("lastRenderCycle"),m([]),b(null),ie.success("Datos de diagn√≥stico borrados correctamente")}catch(e){console.error("Error al limpiar datos de diagn√≥stico:",e),ie.error("Error al limpiar datos de diagn√≥stico")}},className:"bg-amber-500 text-white py-2 px-4 rounded hover:bg-amber-600 transition",children:"Limpiar datos de diagn√≥stico"}),r.jsx("button",{onClick:()=>w(!0),className:"bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 transition",children:"Limpiar almacenamiento"}),r.jsx("button",{onClick:()=>{try{const e={systemInfo:c,storageInfo:d,errorHistory:f,renderCycleHistory:g,networkStatus:y,exportDate:(new Date).toISOString()},t=JSON.stringify(e,null,2),r="data:application/json;charset=utf-8,"+encodeURIComponent(t),n=`diagnostico-gozamadrid-${(new Date).toISOString().split("T")[0]}.json`,o=document.createElement("a");o.setAttribute("href",r),o.setAttribute("download",n),o.click(),ie.success("Datos de diagn√≥stico exportados correctamente")}catch(e){console.error("Error al exportar datos:",e),ie.error("Error al exportar datos de diagn√≥stico")}},className:"bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 transition",children:"Exportar diagn√≥stico"})]}),E?r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4 text-indigo-600",children:"Estado de la Red"}),0===Object.keys(y).length?r.jsx("p",{className:"text-gray-500",children:"No hay informaci√≥n de red disponible"}):r.jsx("ul",{className:"space-y-4",children:Object.entries(y).map((([e,t])=>r.jsxs("li",{className:"border-b pb-2",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs("span",{className:"font-medium",children:[e,": "]}),r.jsx("span",{className:"ok"===t.status?"text-green-600":"text-red-600",children:"ok"===t.status?"Conectado":"Error"})]}),"ok"===t.status&&r.jsxs("span",{className:"text-sm text-gray-500",children:[t.latency,"ms"]})]}),"ok"!==t.status&&r.jsx("p",{className:"text-sm text-red-500 mt-1",children:t.error})]},e)))})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4 text-indigo-600",children:"Informaci√≥n del Sistema"}),r.jsxs("ul",{className:"space-y-2",children:[r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Navegador:"})," ",c.userAgent]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Resoluci√≥n:"})," ",c.screenWidth,"x",c.screenHeight]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Idioma:"})," ",c.language]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Online:"})," ",c.onlineStatus?"S√≠":"No"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Referencia:"})," ",c.referrer]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Fecha/hora:"})," ",new Date(c.dateTime).toLocaleString()]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4 text-indigo-600",children:"Almacenamiento"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium mb-2",children:"LocalStorage"}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Tama√±o total:"})," ",null==(e=d.localStorage)?void 0:e.size]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Elementos:"})," ",null==(t=d.localStorage)?void 0:t.itemCount]}),(null==(o=d.localStorage)?void 0:o.keys.length)>0&&r.jsx("div",{className:"mt-2",children:r.jsxs("details",{children:[r.jsxs("summary",{className:"cursor-pointer text-indigo-600 hover:text-indigo-800",children:["Ver claves (",d.localStorage.keys.length,")"]}),r.jsx("ul",{className:"mt-2 pl-4 text-sm max-h-40 overflow-y-auto",children:d.localStorage.keys.map((e=>r.jsx("li",{className:"truncate",children:e},e)))})]})})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium mb-2",children:"SessionStorage"}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Tama√±o total:"})," ",null==(i=d.sessionStorage)?void 0:i.size]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Elementos:"})," ",null==(a=d.sessionStorage)?void 0:a.itemCount]}),(null==(s=d.sessionStorage)?void 0:s.keys.length)>0&&r.jsx("div",{className:"mt-2",children:r.jsxs("details",{children:[r.jsxs("summary",{className:"cursor-pointer text-indigo-600 hover:text-indigo-800",children:["Ver claves (",d.sessionStorage.keys.length,")"]}),r.jsx("ul",{className:"mt-2 pl-4 text-sm max-h-40 overflow-y-auto",children:d.sessionStorage.keys.map((e=>r.jsx("li",{className:"truncate",children:e},e)))})]})})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4 text-indigo-600",children:"Historial de Errores"}),0===f.length?r.jsx("p",{className:"text-gray-500",children:"No hay errores registrados"}):r.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto",children:f.map(((e,t)=>r.jsxs("div",{className:"border-l-4 border-red-500 pl-3 py-2 bg-red-50 rounded",children:[r.jsx("p",{className:"font-medium text-red-700",children:e.message||"Error desconocido"}),r.jsx("p",{className:"text-xs text-gray-500",children:new Date(e.date).toLocaleString()}),r.jsxs("details",{children:[r.jsx("summary",{className:"cursor-pointer text-red-600 hover:text-red-800 text-sm mt-1",children:"Ver stack trace"}),r.jsx("pre",{className:"mt-2 text-xs bg-gray-100 p-2 rounded overflow-x-auto whitespace-pre-wrap",children:e.stack||"No disponible"})]})]},t)))})]}),g&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 md:col-span-2",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4 text-indigo-600",children:"√öltimo Ciclo de Renderizado Detectado"}),r.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-3 rounded",children:[r.jsxs("p",{className:"font-medium text-yellow-700",children:[g.count," renderizados en ",g.timeWindow,"ms"]}),r.jsxs("p",{className:"text-sm text-gray-700 mt-1",children:["Detectado el ",new Date(g.timestamp).toLocaleString(),"en la URL: ",g.url]})]})]})]}):r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}),x&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md mx-4",children:[r.jsx("h3",{className:"text-xl font-bold text-red-600 mb-4",children:"Confirmar limpieza"}),r.jsx("p",{className:"text-gray-700 mb-6",children:"Esta acci√≥n eliminar√° todos los datos almacenados en localStorage y sessionStorage. La aplicaci√≥n se reiniciar√° y tendr√°s que iniciar sesi√≥n nuevamente. ¬øEst√°s seguro de continuar?"}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 border border-gray-300 rounded text-gray-700 hover:bg-gray-100",children:"Cancelar"}),r.jsx("button",{onClick:()=>{try{const e=localStorage.getItem("email");localStorage.clear(),sessionStorage.clear(),e&&localStorage.setItem("email",e),p({localStorage:{size:k(0),itemCount:0,keys:[]},sessionStorage:{size:k(0),itemCount:0,keys:[]}}),m([]),b(null),ie.success("Almacenamiento limpiado correctamente"),w(!1)}catch(e){console.error("Error al limpiar almacenamiento:",e),ie.error("Error al limpiar almacenamiento")}},className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"S√≠, limpiar todo"})]})]})})]}):r.jsx(h,{to:"/"})},oE=()=>r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-900 via-blue-700 to-amber-500 py-6 px-4 sm:py-12",children:r.jsx("div",{className:"w-full max-w-xs sm:max-w-md space-y-6 sm:space-y-8 backdrop-blur-lg bg-white/10 p-6 sm:p-8 rounded-xl shadow-2xl border border-white/20 text-center",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl sm:text-6xl font-extrabold text-white mb-4 sm:mb-6",children:"404"}),r.jsx("h2",{className:"text-xl sm:text-3xl font-bold text-white mb-3 sm:mb-4",children:"P√°gina no encontrada"}),r.jsx("p",{className:"text-base sm:text-xl text-blue-100 mb-6 sm:mb-8",children:"Lo sentimos, la p√°gina que buscas no existe o ha sido movida."}),r.jsxs("div",{className:"relative py-3 sm:py-4",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-white/20"})}),r.jsx("div",{className:"relative flex justify-center",children:r.jsx("span",{className:"bg-blue-800 bg-opacity-50 px-3 sm:px-4 text-xs sm:text-sm text-blue-200 rounded-full",children:"¬øAhora qu√©?"})})]}),r.jsxs("div",{className:"flex flex-col space-y-3 sm:space-y-4 mt-6 sm:mt-8",children:[r.jsx(p,{to:"/",className:"px-4 sm:px-6 py-2 sm:py-3 bg-amber-500 text-white text-sm sm:text-base font-medium rounded-full hover:bg-amber-600 transition shadow-lg",children:"Volver a la p√°gina principal"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[r.jsx(p,{to:"/ver-blogs",className:"px-4 sm:px-6 py-2 sm:py-3 bg-white/20 text-white text-sm sm:text-base font-medium rounded-full hover:bg-white/30 transition",children:"Ver blogs"}),r.jsx(p,{to:"/propiedades",className:"px-4 sm:px-6 py-2 sm:py-3 bg-white/20 text-white text-sm sm:text-base font-medium rounded-full hover:bg-white/30 transition",children:"Explorar propiedades"})]})]})]})})});function iE(){const[e,t]=n.useState(null),[o,i]=n.useState(""),[a,s]=n.useState(null),[l,c]=n.useState(!1),[u,d]=n.useState(null),p=n.useRef(null);return r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md max-w-xl mx-auto mt-10",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4 text-blue-800",children:"Diagn√≥stico de Subida de Im√°genes"}),r.jsx("div",{className:"mb-6 p-4 bg-blue-50 rounded-md",children:r.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"Esta herramienta te ayuda a diagnosticar problemas con la subida de im√°genes de perfil."})}),r.jsxs("div",{className:"space-y-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 mb-2",children:"Seleccionar imagen:"}),r.jsx("input",{type:"file",ref:p,onChange:e=>{e.target.files&&e.target.files[0]&&t(e.target.files[0])},accept:"image/*",className:"block w-full text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),e&&r.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Archivo seleccionado: ",e.name," (",Math.round(e.size/1024)," KB)"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 mb-2",children:"Nombre (opcional):"}),r.jsx("input",{type:"text",value:o,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ingresa tu nombre"})]})]}),r.jsxs("div",{className:"flex space-x-2 mb-6",children:[r.jsx("button",{onClick:async()=>{if(e){c(!0),s(null);try{const t=await(async(e,t="")=>{console.log("üß™ Iniciando prueba de subida de imagen");try{const o=localStorage.getItem("token");if(!o)return{success:!1,stage:"pre-request",error:"No hay token de autenticaci√≥n disponible"};const i=new FormData;if(!e)return{success:!1,stage:"pre-request",error:"No se proporcion√≥ ning√∫n archivo de imagen"};console.log(`Subiendo archivo: ${e.name}, tipo: ${e.type}, tama√±o: ${Math.round(e.size/1024)}KB`),i.append("profilePic",e),t&&i.append("name",t);const a="https:"===window.location.protocol,s=(a?"https":"http")+"://nextjs-gozamadrid-qrfk.onrender.com"+"/user/update-profile";console.log(`Enviando solicitud a: ${s}`),console.log("Protocolo: "+(a?"HTTPS":"HTTP")),console.log("Contenido del FormData:");for(let e of i.entries())console.log(`- ${e[0]}: ${e[1]instanceof File?`Archivo: ${e[1].name} (${e[1].type}, ${Math.round(e[1].size/1024)}KB)`:e[1]}`);console.log("Enviando solicitud al servidor...");const l=Date.now(),c=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${o}`},body:i}),u=Date.now();console.log(`Solicitud completada en ${u-l}ms`),console.log(`Respuesta del servidor: Status ${c.status} ${c.statusText}`),console.log("Headers recibidos:"),c.headers.forEach(((e,t)=>{console.log(`- ${t}: ${e}`)}));let d=null,p=null;try{c.clone(),d=await c.json(),console.log("Datos JSON recibidos:",d)}catch(r){console.warn("No se pudo parsear la respuesta como JSON:",r);try{p=await c.text(),console.log("Datos de texto recibidos:",p)}catch(n){console.error("No se pudo leer la respuesta como texto:",n)}}return{success:c.ok,status:c.status,statusText:c.statusText,duration:u-l,jsonData:d,textData:p,headers:Object.fromEntries([...c.headers.entries()])}}catch(o){return console.error("‚ùå Error durante la prueba de subida:",o),{success:!1,stage:"request",error:o.message||"Error desconocido durante la solicitud"}}})(e,o||void 0);s(t)}catch(t){s({success:!1,error:t.message||"Error desconocido durante la prueba"})}finally{c(!1)}}else alert("Por favor selecciona un archivo de imagen primero")},disabled:l||!e,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:l?"Probando...":"Probar Subida"}),r.jsx("button",{onClick:()=>{const e=(()=>{try{const e=localStorage.getItem("profilePic"),t=localStorage.getItem("profilePic_backup"),r=localStorage.getItem("profilePic_temp");return{localStorage:{profilePic:e?`${e.substring(0,30)}... (${Math.round(e.length/1024)}KB)`:"No disponible",profilePic_backup:t?`${t.substring(0,30)}... (${Math.round(t.length/1024)}KB)`:"No disponible",profilePic_temp:r?`${r.substring(0,30)}... (${Math.round(r.length/1024)}KB)`:"No disponible"},imagesMatch:e===t,timestamp:(new Date).toISOString()}}catch(e){return console.error("Error al verificar estado de imagen:",e),{error:e.message}}})();d(e)},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",children:"Verificar Estado"}),r.jsx("button",{onClick:()=>{const e=localStorage.getItem("profilePic");if(!e)return void alert("No hay imagen en localStorage para sincronizar");const t=(e=>{if(!e)return console.error("No se proporcion√≥ imagen para sincronizar"),!1;try{return localStorage.setItem("profilePic",e),localStorage.setItem("profilePic_backup",e),localStorage.setItem("profilePic_lastUpdate",Date.now().toString()),window.dispatchEvent(new CustomEvent("profileImageUpdated",{detail:{profileImage:e,timestamp:Date.now()}})),console.log("Evento de sincronizaci√≥n de imagen emitido manualmente"),!0}catch(t){return console.error("Error al forzar sincronizaci√≥n:",t),!1}})(e);d(t?{forcedSync:!0,timestamp:(new Date).toISOString()}:{forcedSync:!1,error:"Error al sincronizar imagen",timestamp:(new Date).toISOString()})},className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500",children:"Forzar Sincronizaci√≥n"})]}),a&&r.jsxs("div",{className:"p-4 rounded-md mb-6 "+(a.success?"bg-green-50":"bg-red-50"),children:[r.jsxs("h3",{className:"font-bold mb-2 "+(a.success?"text-green-800":"text-red-800"),children:["Resultado: ",a.success?"√âxito":"Error"]}),a.status&&r.jsxs("p",{className:"mb-2",children:[r.jsx("span",{className:"font-semibold",children:"Estado:"})," ",a.status," ",a.statusText]}),a.duration&&r.jsxs("p",{className:"mb-2",children:[r.jsx("span",{className:"font-semibold",children:"Duraci√≥n:"})," ",a.duration,"ms"]}),a.error&&r.jsxs("p",{className:"text-red-600 mb-2",children:[r.jsx("span",{className:"font-semibold",children:"Error:"})," ",a.error]}),a.jsonData&&r.jsxs("div",{className:"mb-2",children:[r.jsx("p",{className:"font-semibold mb-1",children:"Datos JSON:"}),r.jsx("pre",{className:"bg-gray-100 p-2 rounded text-xs overflow-x-auto",children:JSON.stringify(a.jsonData,null,2)})]}),a.textData&&r.jsxs("div",{className:"mb-2",children:[r.jsx("p",{className:"font-semibold mb-1",children:"Datos de texto:"}),r.jsx("pre",{className:"bg-gray-100 p-2 rounded text-xs overflow-x-auto",children:a.textData.length>500?`${a.textData.substring(0,500)}... (truncado)`:a.textData})]})]}),u&&r.jsxs("div",{className:"p-4 rounded-md bg-blue-50",children:[r.jsx("h3",{className:"font-bold mb-2 text-blue-800",children:"Estado de Imagen de Perfil"}),void 0!==u.forcedSync&&r.jsxs("p",{className:"mb-2",children:[r.jsx("span",{className:"font-semibold",children:"Sincronizaci√≥n forzada:"}),u.forcedSync?" ‚úÖ Exitosa":` ‚ùå Fallida - ${u.error||"Error desconocido"}`]}),u.localStorage&&r.jsxs("div",{className:"mb-2",children:[r.jsx("p",{className:"font-semibold mb-1",children:"Estado en localStorage:"}),r.jsx("pre",{className:"bg-gray-100 p-2 rounded text-xs overflow-x-auto",children:JSON.stringify(u.localStorage,null,2)})]}),void 0!==u.imagesMatch&&r.jsxs("p",{className:"mb-2",children:[r.jsx("span",{className:"font-semibold",children:"¬øCoinciden las im√°genes?"}),u.imagesMatch?" ‚úÖ S√≠":" ‚ùå No"]}),u.timestamp&&r.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Verificado: ",new Date(u.timestamp).toLocaleString()]})]})]})}function aE(){return r.jsxs(r.Fragment,{children:[r.jsx(Ln,{}),r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-center mb-8 text-blue-900",children:"Diagn√≥stico de Im√°genes de Perfil"}),r.jsx(iE,{}),r.jsxs("div",{className:"mt-10 bg-yellow-50 p-4 rounded-lg border border-yellow-200 max-w-xl mx-auto",children:[r.jsx("h2",{className:"text-lg font-bold text-yellow-800 mb-2",children:"Notas de uso:"}),r.jsxs("ul",{className:"list-disc pl-5 text-yellow-700 space-y-1",children:[r.jsx("li",{children:"Esta herramienta es solo para fines de diagn√≥stico"}),r.jsx("li",{children:"Utiliza im√°genes peque√±as para realizar pruebas m√°s r√°pidas"}),r.jsx("li",{children:"Revisa la consola del navegador para informaci√≥n detallada"}),r.jsx("li",{children:'La funci√≥n "Verificar Estado" muestra el estado actual de la imagen en localStorage'}),r.jsx("li",{children:'La funci√≥n "Forzar Sincronizaci√≥n" intenta sincronizar manualmente la imagen guardada'})]})]})]})]})}let sE=0,lE=Date.now(),cE=!1;function uE(){const e=Date.now();if(e-lE<3e3){if(sE++,sE>10&&!cE){cE=!0,console.error(`üîÑ Detectado posible ciclo de renderizado: ${sE} renderizados en ${e-lE}ms`);try{const t={count:sE,timeWindow:e-lE,timestamp:(new Date).toISOString(),url:window.location.href};localStorage.setItem("lastRenderCycle",JSON.stringify(t))}catch(ot){console.error("No se pudo guardar informaci√≥n del ciclo:",ot)}return!0}}else sE=1,lE=e;return!1}function dE({children:e}){const[t,o]=n.useState(!1);return n.useEffect((()=>{uE()&&o(!0);try{const e=localStorage.getItem("lastRenderCycle");if(e){const t=JSON.parse(e);Date.now()-new Date(t.timestamp).getTime()<6e4?(console.warn("‚ö†Ô∏è Ciclo de renderizado reciente detectado, mostrando pantalla de emergencia"),o(!0)):localStorage.removeItem("lastRenderCycle")}}catch(ot){console.error("Error al verificar ciclos previos:",ot)}}),[]),t?r.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gray-50",children:r.jsxs("div",{className:"w-full max-w-md p-6 bg-white rounded-lg shadow-lg",children:[r.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Modo de emergencia activado"}),r.jsx("p",{className:"text-gray-700 mb-4",children:"Hemos detectado un problema con la aplicaci√≥n. Para proteger tu experiencia, hemos activado el modo de emergencia."}),r.jsx("div",{className:"bg-gray-100 p-3 rounded-md mb-4",children:r.jsx("p",{className:"text-sm text-gray-700",children:"Se detect√≥ un ciclo de renderizado que podr√≠a causar problemas de rendimiento o bloqueos."})}),r.jsxs("div",{className:"flex flex-col space-y-2",children:[r.jsx("button",{onClick:()=>{localStorage.removeItem("lastRenderCycle"),localStorage.clear(),sessionStorage.clear(),window.location.href="/login"},className:"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition",children:"Reiniciar completamente"}),r.jsx("button",{onClick:()=>{o(!1),localStorage.removeItem("lastRenderCycle"),sE=0,lE=Date.now(),cE=!1},className:"w-full bg-gray-200 text-gray-800 py-2 px-4 rounded hover:bg-gray-300 transition",children:"Intentar continuar de todas formas"})]})]})}):e}function pE({error:e,resetError:t}){const[o,i]=n.useState(5),[a,s]=n.useState(!1);n.useEffect((()=>{if(o<=0)return void t();const e=setTimeout((()=>{i(o-1)}),1e3);return()=>clearTimeout(e)}),[o,t]),n.useEffect((()=>{try{const t={message:e.message,stack:e.stack,date:(new Date).toISOString(),url:window.location.href},r=JSON.parse(localStorage.getItem("errorHistory")||"[]");r.unshift(t),r.length>5&&r.pop(),localStorage.setItem("errorHistory",JSON.stringify(r)),console.log("Error guardado en localStorage para diagn√≥stico")}catch(ot){console.error("No se pudo guardar el error:",ot)}}),[e]);return r.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gray-50",children:r.jsxs("div",{className:"w-full max-w-md p-6 bg-white rounded-lg shadow-lg",children:[r.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"¬°Algo sali√≥ mal!"}),r.jsx("p",{className:"text-gray-700 mb-4",children:"Lo sentimos, ha ocurrido un error inesperado. Estamos intentando recuperar tu sesi√≥n."}),r.jsxs("div",{className:"bg-gray-100 p-3 rounded-md mb-4",children:[r.jsx("p",{className:"text-sm text-gray-700 font-mono",children:e.message||"Error desconocido"}),a&&e.stack&&r.jsx("div",{className:"mt-2 pt-2 border-t border-gray-300",children:r.jsx("p",{className:"text-xs text-gray-600 font-mono whitespace-pre-wrap overflow-auto max-h-32",children:e.stack.split("\n").slice(0,3).join("\n")})}),r.jsx("button",{onClick:()=>s(!a),className:"text-xs text-blue-600 hover:text-blue-800 mt-1",children:a?"Ocultar detalles":"Mostrar detalles t√©cnicos"})]}),r.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Continuando autom√°ticamente en ",o," segundos..."]}),r.jsxs("div",{className:"flex flex-col space-y-2",children:[r.jsx("button",{onClick:t,className:"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition",children:"Continuar ahora"}),r.jsx("button",{onClick:()=>{try{const e=localStorage.getItem("email"),t=localStorage.getItem("errorHistory");localStorage.clear(),sessionStorage.clear(),e&&localStorage.setItem("email",e),t&&localStorage.setItem("errorHistory",t),window.location.href="/login"}catch(ot){console.error("Error al redirigir:",ot),window.location.reload()}},className:"w-full bg-gray-200 text-gray-800 py-2 px-4 rounded hover:bg-gray-300 transition",children:"Limpiar datos y redirigir a login"}),r.jsx("button",{onClick:()=>{window.location.reload()},className:"w-full bg-gray-100 text-gray-600 py-2 px-4 rounded hover:bg-gray-200 transition",children:"Recargar p√°gina"})]})]})})}setInterval((()=>{sE=0,lE=Date.now(),cE=!1}),3e3);class fE extends o.Component{constructor(e){super(e),t(this,"resetError",(()=>{this.setState({hasError:!1,error:null})})),this.state={hasError:!1,error:null,lastErrorTime:0,errorCount:0}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Error capturado por ErrorBoundary:",e,t);const r=Date.now(),n=r-this.state.lastErrorTime;if(this.setState((e=>({lastErrorTime:r,errorCount:e.errorCount+1}))),n<1e3&&this.state.errorCount>3){console.warn("‚ö†Ô∏è Posible bucle de errores detectado. Intentando recuperaci√≥n profunda...");try{localStorage.removeItem("token"),localStorage.removeItem("tempToken"),localStorage.removeItem("profilePic"),localStorage.removeItem("lastRenderCycle"),localStorage.removeItem("user"),localStorage.setItem("errorRecoveryAttempt",JSON.stringify({timestamp:(new Date).toISOString(),errorCount:this.state.errorCount,errorMessage:e.message})),console.log("üßπ Datos potencialmente problem√°ticos eliminados")}catch(o){console.error("Error durante la limpieza de emergencia:",o)}}try{const r={message:e.message,stack:e.stack,componentStack:t.componentStack,timestamp:(new Date).toISOString(),url:window.location.href,userAgent:navigator.userAgent},n=JSON.parse(localStorage.getItem("errorsHistory")||"[]");n.unshift(r),n.length>5&&(n.length=5),localStorage.setItem("errorsHistory",JSON.stringify(n)),console.log("Error registrado en localStorage para diagn√≥stico")}catch(ot){console.error("No se pudo registrar el error:",ot)}}render(){return this.state.hasError?this.state.errorCount>5&&Date.now()-this.state.lastErrorTime<5e3?r.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-100 p-4",children:r.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-md w-full",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4 text-red-600",children:"Error persistente detectado"}),r.jsx("p",{className:"mb-4 text-gray-700",children:"Estamos experimentando problemas t√©cnicos. Por favor, intenta una de estas opciones:"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("a",{href:"/login",className:"block w-full py-2 px-4 bg-blue-600 text-white text-center rounded hover:bg-blue-700",children:"Ir a inicio de sesi√≥n"}),r.jsx("button",{onClick:()=>{localStorage.clear(),sessionStorage.clear(),window.location.reload()},className:"block w-full py-2 px-4 bg-red-600 text-white text-center rounded hover:bg-red-700",children:"Reinicio de emergencia"})]})]})}):r.jsx(pE,{error:this.state.error,resetError:this.resetError}):this.props.children}}function mE({children:e}){const{user:t}=W();return t&&"admin"===t.role?e:r.jsx(h,{to:"/"})}function hE(){const{user:e,isAuthenticated:t,loading:o}=W(),[i,a]=n.useState(!1),s=n.useRef(0),[l,c]=n.useState(null);if(n.useEffect((()=>{if(s.current+=1,s.current>10){console.warn(`‚ö†Ô∏è Posible ciclo de renderizado en HomeRoute: ${s.current} renderizados`);try{localStorage.setItem("homeRouteCycleDetected",JSON.stringify({timestamp:(new Date).toISOString(),renderCount:s.current}))}catch(ot){console.error("Error al registrar ciclo:",ot)}l||(console.log("üõë Rompiendo ciclo de renderizado forzando mostrar SignIn"),a(!0),c("SignIn"))}return()=>{}})),n.useEffect((()=>{try{const e="https:"===window.location.protocol,t=`${e?"https":"http"}://${"nextjs-gozamadrid-qrfk.onrender.com"}`;console.log(`üåê App usando API en: ${t}`),localStorage.setItem("definitive_api_url",t),localStorage.removeItem("protocolMismatch");const r=()=>{console.error("‚ö†Ô∏è Se ha detectado un bucle de login, forzando reinicio de la aplicaci√≥n"),c("SignIn"),a(!0);try{const e=localStorage.getItem("profilePic"),t=localStorage.getItem("profilePic_local"),r=localStorage.getItem("profilePic_base64");localStorage.clear(),e&&localStorage.setItem("profilePic",e),t&&localStorage.setItem("profilePic_local",t),r&&localStorage.setItem("profilePic_base64",r),localStorage.setItem("appRestarted","true")}catch(ot){console.error("Error al limpiar localStorage:",ot)}};return window.addEventListener("loginLoopDetected",r),()=>{window.removeEventListener("loginLoopDetected",r)}}catch(e){console.error("Error al verificar protocolos:",e)}}),[]),i||"SignIn"===l)return console.log("üö® Mostrando SignIn debido a error o ciclo detectado"),r.jsx(Bu,{});if(o)return r.jsx("div",{className:"min-h-screen flex justify-center items-center bg-gradient-to-tr from-blue-900 to-black/60",children:r.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-white"})});return"true"===localStorage.getItem("redirectLoop")?(console.log("üõë Bucle de redirecci√≥n detectado, mostrando Principal sin verificar autenticaci√≥n"),localStorage.removeItem("redirectLoop"),r.jsx(Cu,{})):(console.log("üß≠ Decidiendo ruta:",{autenticado:t,usuario:!!e}),t&&e?(console.log("‚úÖ Usuario autenticado, mostrando Principal"),r.jsx(Cu,{})):(console.log("üîí Usuario no autenticado, mostrando SignIn"),r.jsx(Bu,{})))}function gE({children:e}){const{isAuthenticated:t,loading:n}=W();if(n)return r.jsx("div",{className:"min-h-screen flex justify-center items-center bg-gray-100",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-blue-500"})});if(!t){try{const e=localStorage.getItem("authRedirects")||"0",t=parseInt(e,10)+1;if(localStorage.setItem("authRedirects",t.toString()),t>3)return console.warn(`‚ö†Ô∏è Demasiados redireccionamientos (${t}), mostrando p√°gina de login directamente`),localStorage.setItem("redirectLoop","true"),localStorage.removeItem("authRedirects"),r.jsx(Bu,{});setTimeout((()=>{localStorage.removeItem("authRedirects")}),5e3)}catch(ot){console.error("Error al manejar redireccionamiento:",ot)}return r.jsx(h,{to:"/login"})}return localStorage.removeItem("authRedirects"),e}function bE(){uE();const[e,t]=n.useState({loadStartTime:Date.now(),appLoaded:!1,renderCount:0,lastRenderTime:null,errors:[]}),[o,i]=n.useState(!1);n.useEffect((()=>{t((e=>({...e,appLoaded:!0,lastRenderTime:Date.now(),renderCount:e.renderCount+1})));const r=setInterval((()=>{const t=Date.now(),n=e.lastRenderTime;n&&t-n>2e4&&e.errors.length>0&&(console.error("‚ö†Ô∏è Aplicaci√≥n posiblemente congelada - Activando recuperaci√≥n"),i(!0),clearInterval(r))}),5e3),n=r=>{console.error("Capturado error globalThis:",r),t((e=>({...e,errors:[...e.errors,{message:r.message||"Error desconocido",time:Date.now()}]}))),e.errors.length>=5&&i(!0)},o=e=>{var t,r,n;console.log("üîê Evento de cierre de sesi√≥n detectado en App:",(null==(t=e.detail)?void 0:t.reason)||"desconocido"),"token_expired"===(null==(r=e.detail)?void 0:r.reason)?(toast.error("Tu sesi√≥n ha expirado. Por favor, inicia sesi√≥n nuevamente."),"/login"!==window.location.pathname&&(window.location.href="/login")):"token_invalid"===(null==(n=e.detail)?void 0:n.reason)&&(toast.error("Tu sesi√≥n no es v√°lida. Por favor, inicia sesi√≥n nuevamente."),"/login"!==window.location.pathname&&(window.location.href="/login"))},a=()=>{console.log("üîê Evento de inicio de sesi√≥n detectado en App"),"/login"===window.location.pathname&&(console.log("Redirigiendo a p√°gina principal despu√©s de inicio de sesi√≥n"),window.location.href="/")};let s=0;const l=()=>{if(s++,s>3){console.warn("‚ö†Ô∏è M√∫ltiples errores de autenticaci√≥n detectados, limpiando estado");try{const e=localStorage.getItem("profilePic"),t=localStorage.getItem("profilePic_local");localStorage.clear(),e&&localStorage.setItem("profilePic",e),t&&localStorage.setItem("profilePic_local",t),window.location.href="/login"}catch(ot){console.error("Error al limpiar estado tras errores de autenticaci√≥n:",ot)}}},c=setInterval((()=>{s=0}),12e4);return window.addEventListener("error",n),window.addEventListener("unhandledrejection",n),window.addEventListener("userLoggedOut",o),window.addEventListener("userLoggedIn",a),window.addEventListener("authError",l),()=>{clearInterval(r),clearInterval(c),window.removeEventListener("error",n),window.removeEventListener("unhandledrejection",n),window.removeEventListener("userLoggedOut",o),window.removeEventListener("userLoggedIn",a),window.removeEventListener("authError",l)}}),[e.errors.length]);const a=n.useCallback((()=>{localStorage.clear(),window.location.href="/"}),[]),s=()=>r.jsx("div",{className:"fixed inset-0 bg-red-800 bg-opacity-50 backdrop-blur-md flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full",children:[r.jsx("div",{className:"flex items-center justify-center mb-4",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsx("h2",{className:"text-xl font-bold text-red-700 text-center mb-4",children:"¬°Oops! Algo sali√≥ mal"}),r.jsx("p",{className:"text-gray-700 mb-4",children:"La aplicaci√≥n est√° experimentando problemas. Por favor, elija una opci√≥n:"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("button",{onClick:()=>window.location.reload(),className:"w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none",children:"Recargar la p√°gina"}),r.jsx("button",{onClick:a,className:"w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none",children:"Reiniciar aplicaci√≥n (borra datos locales)"}),r.jsx("button",{onClick:()=>i(!1),className:"w-full py-2 px-4 border border-gray-300 rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none",children:"Continuar de todos modos"})]})]})});return r.jsx(fE,{children:r.jsx(dE,{children:r.jsx(G,{children:r.jsxs("div",{className:"min-h-screen bg-gray-100",children:[r.jsx(fe,{position:"top-right",richColors:!0}),r.jsxs(g,{children:[r.jsx(Rn,{}),r.jsx(Ln,{}),r.jsxs(b,{children:[r.jsx(y,{path:"/",element:r.jsx(Mn,{children:r.jsx(hE,{})})}),r.jsx(y,{path:"/login",element:r.jsx(Mn,{children:r.jsx(Bu,{})})}),r.jsx(y,{path:"/crear-blog",element:r.jsx(gE,{children:r.jsx(Mn,{children:r.jsx(Fh,{})})})}),r.jsx(y,{path:"/ver-blogs",element:r.jsx(Mn,{children:r.jsx(Hh,{})})}),r.jsx(y,{path:"/blog/:id",element:r.jsx(Mn,{children:r.jsx(zh,{})})}),r.jsx(y,{path:"/cambiar-perfil",element:r.jsx(gE,{children:r.jsx(Mn,{children:r.jsx(tE,{})})})}),r.jsx(y,{path:"/propiedades",element:r.jsx(Mn,{children:r.jsx($h,{})})}),r.jsx(y,{path:"/add-property",element:r.jsx(gE,{children:r.jsx(Mn,{children:r.jsx(Qw,{})})})}),r.jsx(y,{path:"/property/:id",element:r.jsx(Mn,{children:r.jsx(eE,{})})}),r.jsx(y,{path:"/subir",element:r.jsx(gE,{children:r.jsx(Mn,{children:r.jsx(rE,{})})})}),r.jsx(y,{path:"/diagnostico",element:r.jsx(mE,{children:r.jsx(Mn,{children:r.jsx(nE,{})})})}),r.jsx(y,{path:"/test-imagen",element:r.jsx(gE,{children:r.jsx(Mn,{children:r.jsx(aE,{})})})}),r.jsx(y,{path:"/not-found",element:r.jsx(oE,{})}),r.jsx(y,{path:"*",element:r.jsx(h,{to:"/not-found",replace:!0})})]}),o&&r.jsx(s,{})]})]})})})})}export{bE as default};
